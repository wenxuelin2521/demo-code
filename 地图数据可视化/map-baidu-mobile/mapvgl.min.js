function _loadWasmModule(C,fa,U){for(var Q=fa.length,rb=new Uint8Array(3*Q/4-("="==fa[Q-2]?2:"="==fa[Q-1]?1:0)),Lb=new Uint8Array(130),Ja=0;64>Ja;Ja++)Lb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Ja)]=Ja;for(var ia=Ja=0;Ja<Q;Ja+=4){var jd=Lb[fa.charCodeAt(Ja+1)],ea=Lb[fa.charCodeAt(Ja+2)];rb[ia++]=Lb[fa.charCodeAt(Ja)]<<2|jd>>4;rb[ia++]=(jd&15)<<4|ea>>2;rb[ia++]=(ea&3)<<6|Lb[fa.charCodeAt(Ja+3)]&63}return U&&!C?WebAssembly.instantiate(rb,U):U||C?(C=new WebAssembly.Module(rb),
U?new WebAssembly.Instance(C,U):C):WebAssembly.compile(rb)}
(function(C,fa){"object"===typeof exports&&"undefined"!==typeof module?fa(exports):"function"===typeof define&&define.amd?define(["exports"],fa):(C=C||self,fa(C.mapvgl={}))})(this,function(C){function fa(e){this.options=e||{};this.paneName=this.options.paneName||"labelPane";this.zIndex=this.options.zIndex||1;this._map=e.map;this._lastDrawTime=null;this.show()}function U(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function Q(e,c){return c={exports:{}},
e(c,c.exports),c.exports}function rb(e,c){return function(a){return c(e(a))}}function Lb(e){var c=function(a){if(void 0===a||null===a)return a;1<arguments.length&&(a=Array.prototype.slice.call(arguments));return e(a)};"conversion"in e&&(c.conversion=e.conversion);return c}function Ja(e){var c=function(a){if(void 0===a||null===a)return a;1<arguments.length&&(a=Array.prototype.slice.call(arguments));var b=e(a);if("object"===("undefined"===typeof b?"undefined":Na(b)))for(var d=b.length,c=0;c<d;c++)b[c]=
Math.round(b[c]);return b};"conversion"in e&&(c.conversion=e.conversion);return c}function ia(e,c){if(!(this instanceof ia))return new ia(e,c);c&&c in Cf&&(c=null);if(c&&!(c in Ka))throw Error("Unknown model: "+c);if("undefined"===typeof e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof ia)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"===typeof e){c=uc.get(e);if(null===c)throw Error("Unable to parse color from string: "+e);this.model=c.model;
var a=Ka[this.model].channels;this.color=c.value.slice(0,a);this.valpha="number"===typeof c.value[a]?c.value[a]:1}else if(e.length)this.model=c||"rgb",a=Ka[this.model].channels,c=de.call(e,0,a),this.color=ee(c,a),this.valpha="number"===typeof e[a]?e[a]:1;else if("number"===typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;c=pa(e);"alpha"in e&&(c.splice(c.indexOf("alpha"),1),this.valpha="number"===typeof e.alpha?e.alpha:0);c=c.sort().join("");
if(!(c in fe))throw Error("Unable to parse color from object: "+vc(e));this.model=fe[c];a=Ka[this.model].labels;var b=[];for(c=0;c<a.length;c++)b.push(e[a[c]]);this.color=ee(b)}if(kd[this.model])for(a=Ka[this.model].channels,c=0;c<a;c++)(e=kd[this.model][c])&&(this.color[c]=e(this.color[c]));this.valpha=Math.max(0,Math.min(1,this.valpha));Df&&Df(this)}function jd(e){return function(c){return Number(c.toFixed(e))}}function ea(e,c,a){e=Array.isArray(e)?e:[e];e.forEach(function(b){(kd[b]||(kd[b]=[]))[c]=
a});e=e[0];return function(b){if(arguments.length){a&&(b=a(b));var d=this[e]();d.color[c]=b;return d}d=this[e]().color[c];a&&(d=a(d));return d}}function qa(e){return function(c){return Math.max(0,Math.min(e,c))}}function ee(e,c){for(var a=0;a<c;a++)"number"!==typeof e[a]&&(e[a]=0);return e}function wa(e){return e*Math.PI/180}function ge(e){return e/Math.PI*180}function gb(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function he(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ie(e,
c){return 1E-8>Math.abs(e-c)}function Ca(){}function je(e,c){for(var a in c)e[a]=c[a]}function La(e,c){this.lng=e;this.lat=c}function Ef(e,c){this.x=e;this.y=c}function ke(e,c){var a=document.createElement("canvas");e&&(a.width=e);c&&(a.height=c);return a}function za(e){e=e||{};this.gradient=e.gradient||{"0.25":"rgba(0, 0, 255, 1)","0.55":"rgba(0, 255, 0, 1)","0.85":"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"};this.maxSize=void 0===e.maxSize?35:e.maxSize;this.minSize=e.minSize||0;this.max=e.max||
100;this.min=e.min||0;this.initPalette()}function hb(e){this.options=e||{};this._initialize()}function le(e,c,a,b,d){var f=1-e,g=1-e;return f*f*f*c+3*g*g*e*a+3*(1-e)*e*e*b+e*e*e*d}function sb(e){this.WORLD_SIZE_MC_HALF=2.0037726372307256E7;this.WORLD_SIZE_MC=2*this.WORLD_SIZE_MC_HALF;this.options=e||{};this._initialize()}function Ff(e,c){return e&&c?Math.round(Math.sqrt(Math.pow(e.lng-c.lng,2)+Math.pow(e.lat-c.lat,2))):0}function ld(e){e=e.split("|");e[0]=e[0].split(",");return{lng:parseFloat(e[0][0]),
lat:parseFloat(e[0][1])}}function ac(e){for(var c=e.length;0<=--c;)e[c]=0}function me(e,c,a,b,d){this.static_tree=e;this.extra_bits=c;this.extra_base=a;this.elems=b;this.max_length=d;this.has_stree=e&&e.length}function ne(e,c){this.dyn_tree=e;this.max_code=0;this.stat_desc=c}function Ya(e,c,a,b,d){this.good_length=e;this.max_lazy=c;this.nice_length=a;this.max_chain=b;this.func=d}function Bi(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=
0;this.gzhead=null;this.gzindex=0;this.method=md;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new Uint16Array(1146);
this.dyn_dtree=new Uint16Array(122);this.bl_tree=new Uint16Array(78);tb(this.dyn_ltree);tb(this.dyn_dtree);tb(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new Uint16Array(16);this.heap=new Uint16Array(573);tb(this.heap);this.heap_max=this.heap_len=0;this.depth=new Uint16Array(573);tb(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function wc(e){e=this.options=nd.assign({level:Ci,
method:Di,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ei},e||{});e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&16>e.windowBits&&(e.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Gf;this.strm.avail_out=0;var c=xc.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(c!==od)throw Error(Mb[c]);e.header&&xc.deflateSetHeader(this.strm,e.header);if(e.dictionary){e="string"===typeof e.dictionary?yc.string2buf(e.dictionary):
"[object ArrayBuffer]"===Hf.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;c=xc.deflateSetDictionary(this.strm,e);if(c!==od)throw Error(Mb[c]);this._dict_set=!0}}function oe(e,c){c=new wc(c);c.push(e,!0);if(c.err)throw c.msg||Mb[c.err];return c.result}function Fi(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=
this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new Uint16Array(320);this.work=new Uint16Array(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function zc(e){var c=this.options=nd.assign({chunkSize:65536,windowBits:15,to:""},e||{});c.raw&&0<=c.windowBits&&16>c.windowBits&&(c.windowBits=-c.windowBits,0===c.windowBits&&(c.windowBits=-15));!(0<=c.windowBits&&16>c.windowBits)||e&&e.windowBits||
(c.windowBits+=32);15<c.windowBits&&48>c.windowBits&&0===(c.windowBits&15)&&(c.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Gf;this.strm.avail_out=0;e=ib.inflateInit2(this.strm,c.windowBits);if(e!==Ac)throw Error(Mb[e]);this.header=new Gi;ib.inflateGetHeader(this.strm,this.header);if(c.dictionary&&("string"===typeof c.dictionary?c.dictionary=yc.string2buf(c.dictionary):"[object ArrayBuffer]"===If.call(c.dictionary)&&(c.dictionary=new Uint8Array(c.dictionary)),
c.raw&&(e=ib.inflateSetDictionary(this.strm,c.dictionary),e!==Ac)))throw Error(Mb[e]);}function pe(e,c){c=new zc(c);c.push(e);if(c.err)throw c.msg||Mb[c.err];return c.result}function Jf(e){for(var c=["webgl2","experimental-webgl2","webgl","experimental-webgl"],a,b=0;b<c.length;b++)try{if(a=e.getContext(c[b],{alpha:!0,premultipliedAlpha:!1}))break}catch(d){}return a}function bc(e,c,a){a=Y({TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"REPEAT",TEXTURE_WRAP_T:"REPEAT"},a);var b=
e.createTexture();e.bindTexture(e.TEXTURE_2D,b);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,c);for(var d in a)e.texParameteri(e.TEXTURE_2D,e[d],e[a[d]]);e.bindTexture(e.TEXTURE_2D,null);return b}function Ea(e,c,a,b){if("object"===("undefined"===typeof c?"undefined":Na(c)))c=bc(e,c,b),a(c,null);else{var d=new Image;d.crossOrigin="anonymous";d.onload=function(){var c=he(d.width),g=he(d.height),h=document.createElement("canvas");h.width=c;h.height=
g;h.getContext("2d").drawImage(d,0,0,c,g);d=h;c=bc(e,d,b);a(c,d)};d.src=c}}function ub(e,c,a){a=a||2;var b=c&&c.length,d=b?c[0]*a:e.length,f=Kf(e,0,d,a,!0),g=[];if(!f||f.next===f.prev)return g;var h;if(b){var k=a;b=[];var l;var p=0;for(l=c.length;p<l;p++){var n=c[p]*k;var m=p<l-1?c[p+1]*k:e.length;n=Kf(e,n,m,k,!1);n===n.next&&(n.steiner=!0);b.push(Hi(n))}b.sort(Ii);for(p=0;p<b.length;p++){k=b[p];c=f;if(c=Ji(k,c))k=Lf(c,k),vb(c,c.next),vb(k,k.next);f=vb(f,f.next)}}if(e.length>80*a){var q=h=e[0];var r=
b=e[1];for(k=a;k<d;k+=a)p=e[k],c=e[k+1],p<q&&(q=p),c<r&&(r=c),p>h&&(h=p),c>b&&(b=c);h=Math.max(h-q,b-r);h=0!==h?1/h:0}Bc(f,g,a,q,r,h);return g}function Kf(e,c,a,b,d){if(d===0<qe(e,c,a,b))for(d=c;d<a;d+=b)var f=Mf(d,e[d],e[d+1],f);else for(d=a-b;d>=c;d-=b)f=Mf(d,e[d],e[d+1],f);f&&pd(f,f.next)&&(Cc(f),f=f.next);return f}function vb(e,c){if(!e)return e;c||(c=e);do{var a=!1;if(e.steiner||!pd(e,e.next)&&0!==ja(e.prev,e,e.next))e=e.next;else{Cc(e);e=c=e.prev;if(e===e.next)break;a=!0}}while(a||e!==c);return c}
function Bc(e,c,a,b,d,f,g){if(e){if(!g&&f){var h=e,k=h;do null===k.z&&(k.z=re(k.x,k.y,b,d,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==h);k.prevZ.nextZ=null;k.prevZ=null;h=k;var l,p,n,m,q=1;do{k=h;var r=h=null;for(p=0;k;){p++;var u=k;for(l=n=0;l<q&&(n++,u=u.nextZ,u);l++);for(m=q;0<n||0<m&&u;)0!==n&&(0===m||!u||k.z<=u.z)?(l=k,k=k.nextZ,n--):(l=u,u=u.nextZ,m--),r?r.nextZ=l:h=l,l.prevZ=r,r=l;k=u}r.nextZ=null;q*=2}while(1<p)}for(h=e;e.prev!==e.next;){k=e.prev;u=e.next;if(f)r=Ki(e,b,d,f);else a:if(r=
e,p=r.prev,n=r,q=r.next,0<=ja(p,n,q))r=!1;else{for(l=r.next.next;l!==r.prev;){if(cc(p.x,p.y,n.x,n.y,q.x,q.y,l.x,l.y)&&0<=ja(l.prev,l,l.next)){r=!1;break a}l=l.next}r=!0}if(r)c.push(k.i/a),c.push(e.i/a),c.push(u.i/a),Cc(e),h=e=u.next;else if(e=u,e===h){if(!g)Bc(vb(e),c,a,b,d,f,1);else if(1===g){e=vb(e);g=c;h=a;k=e;do u=k.prev,r=k.next.next,!pd(u,r)&&Nf(u,k,k.next,r)&&Dc(u,r)&&Dc(r,u)&&(g.push(u.i/h),g.push(k.i/h),g.push(r.i/h),Cc(k),Cc(k.next),k=e=r),k=k.next;while(k!==e);e=vb(k);Bc(e,c,a,b,d,f,2)}else if(2===
g)a:{g=e;do{for(h=g.next.next;h!==g.prev;){if(k=g.i!==h.i){k=g;u=h;if(r=k.next.i!==u.i&&k.prev.i!==u.i){b:{r=k;do{if(r.i!==k.i&&r.next.i!==k.i&&r.i!==u.i&&r.next.i!==u.i&&Nf(r,r.next,k,u)){r=!0;break b}r=r.next}while(r!==k);r=!1}r=!r}if(r){if(r=Dc(k,u)&&Dc(u,k)){r=k;p=!1;n=(k.x+u.x)/2;q=(k.y+u.y)/2;do r.y>q!==r.next.y>q&&r.next.y!==r.y&&n<(r.next.x-r.x)*(q-r.y)/(r.next.y-r.y)+r.x&&(p=!p),r=r.next;while(r!==k);r=p}r=r&&(ja(k.prev,k,u.prev)||ja(k,u.prev,u))||pd(k,u)&&0<ja(k.prev,k,k.next)&&0<ja(u.prev,
u,u.next)}k=r}if(k){e=Lf(g,h);g=vb(g,g.next);e=vb(e,e.next);Bc(g,c,a,b,d,f);Bc(e,c,a,b,d,f);break a}h=h.next}g=g.next}while(g!==e)}break}}}}function Ki(e,c,a,b){var d=e.prev,f=e.next;if(0<=ja(d,e,f))return!1;var g=d.x>e.x?d.x>f.x?d.x:f.x:e.x>f.x?e.x:f.x,h=d.y>e.y?d.y>f.y?d.y:f.y:e.y>f.y?e.y:f.y,k=re(d.x<e.x?d.x<f.x?d.x:f.x:e.x<f.x?e.x:f.x,d.y<e.y?d.y<f.y?d.y:f.y:e.y<f.y?e.y:f.y,c,a,b);c=re(g,h,c,a,b);a=e.prevZ;for(b=e.nextZ;a&&a.z>=k&&b&&b.z<=c;){if(a!==e.prev&&a!==e.next&&cc(d.x,d.y,e.x,e.y,f.x,
f.y,a.x,a.y)&&0<=ja(a.prev,a,a.next))return!1;a=a.prevZ;if(b!==e.prev&&b!==e.next&&cc(d.x,d.y,e.x,e.y,f.x,f.y,b.x,b.y)&&0<=ja(b.prev,b,b.next))return!1;b=b.nextZ}for(;a&&a.z>=k;){if(a!==e.prev&&a!==e.next&&cc(d.x,d.y,e.x,e.y,f.x,f.y,a.x,a.y)&&0<=ja(a.prev,a,a.next))return!1;a=a.prevZ}for(;b&&b.z<=c;){if(b!==e.prev&&b!==e.next&&cc(d.x,d.y,e.x,e.y,f.x,f.y,b.x,b.y)&&0<=ja(b.prev,b,b.next))return!1;b=b.nextZ}return!0}function Ii(e,c){return e.x-c.x}function Ji(e,c){var a=c,b=e.x,d=e.y,f=-Infinity;do{if(d<=
a.y&&d>=a.next.y&&a.next.y!==a.y){var g=a.x+(d-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(g<=b&&g>f){f=g;if(g===b){if(d===a.y)return a;if(d===a.next.y)return a.next}var h=a.x<a.next.x?a:a.next}}a=a.next}while(a!==c);if(!h)return null;if(b===f)return h;c=h;g=h.x;var k=h.y,l=Infinity;a=h;do{if(b>=a.x&&a.x>=g&&b!==a.x&&cc(d<k?b:f,d,g,k,d<k?f:b,d,a.x,a.y)){var p=Math.abs(d-a.y)/(b-a.x);var n;if((n=Dc(a,e))&&!(n=p<l)&&(n=p===l)&&!(n=a.x>h.x)&&(n=a.x===h.x)){n=h;var m=a;n=0>ja(n.prev,n,m.prev)&&0>ja(m.next,
n,n.next)}n&&(h=a,l=p)}a=a.next}while(a!==c);return h}function re(e,c,a,b,d){e=32767*(e-a)*d;c=32767*(c-b)*d;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(e|e<<1)&1431655765|((c|c<<1)&1431655765)<<1}function Hi(e){var c=e,a=e;do{if(c.x<a.x||c.x===a.x&&c.y<a.y)a=c;c=c.next}while(c!==e);return a}function cc(e,c,a,b,d,f,g,h){return 0<=(d-g)*(c-h)-(e-g)*(f-h)&&0<=(e-g)*(b-h)-(a-g)*(c-h)&&0<=(a-g)*(f-h)-(d-g)*(b-h)}function ja(e,
c,a){return(c.y-e.y)*(a.x-c.x)-(c.x-e.x)*(a.y-c.y)}function pd(e,c){return e.x===c.x&&e.y===c.y}function Nf(e,c,a,b){var d=qd(ja(e,c,a)),f=qd(ja(e,c,b)),g=qd(ja(a,b,e)),h=qd(ja(a,b,c));return d!==f&&g!==h||0===d&&rd(e,a,c)||0===f&&rd(e,b,c)||0===g&&rd(a,e,b)||0===h&&rd(a,c,b)?!0:!1}function rd(e,c,a){return c.x<=Math.max(e.x,a.x)&&c.x>=Math.min(e.x,a.x)&&c.y<=Math.max(e.y,a.y)&&c.y>=Math.min(e.y,a.y)}function qd(e){return 0<e?1:0>e?-1:0}function Dc(e,c){return 0>ja(e.prev,e,e.next)?0<=ja(e,c,e.next)&&
0<=ja(e,e.prev,c):0>ja(e,c,e.prev)||0>ja(e,e.next,c)}function Lf(e,c){var a=new se(e.i,e.x,e.y),b=new se(c.i,c.x,c.y),d=e.next,f=c.prev;e.next=c;c.prev=e;a.next=d;d.prev=a;b.next=a;a.prev=b;f.next=b;b.prev=f;return b}function Mf(e,c,a,b){e=new se(e,c,a);b?(e.next=b.next,e.prev=b,b.next.prev=e,b.next=e):(e.prev=e,e.next=e);return e}function Cc(e){e.next.prev=e.prev;e.prev.next=e.next;e.prevZ&&(e.prevZ.nextZ=e.nextZ);e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function se(e,c,a){this.i=e;this.x=c;this.y=a;this.nextZ=
this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function qe(e,c,a,b){for(var d=0,f=a-b;c<a;c+=b)d+=(e[f]-e[c])*(e[c+1]+e[f+1]),f=c;return d}function Of(e){try{return sd.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(a){var c=new Li;c.append(e);return sd.createObjectURL(c.getBlob(type))}}function Nb(e,c){this.shapeLayer=e;this.gl=c;this.initData()}function Pf(e,c,a,b){var d=[];b=b*Math.PI/180;d[0]=(e-a[0])*Math.cos(b)-(c-a[1])*Math.sin(b)+a[0];d[1]=(e-a[0])*Math.sin(b)+
(c-a[1])*Math.cos(b)+a[1];return d}function Qf(){te=!0;for(var e=0;64>e;++e)Za[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],Oa["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;Oa[45]=62;Oa[95]=63}function Mi(e,c,a){for(var b=[],d=c;d<a;d+=3)c=(e[d]<<16)+(e[d+1]<<8)+e[d+2],b.push(Za[c>>18&63]+Za[c>>12&63]+Za[c>>6&63]+Za[c&63]);return b.join("")}function Rf(e){te||Qf();for(var c=e.length,a=c%3,b="",d=[],f=0,g=c-a;f<g;f+=16383)d.push(Mi(e,
f,f+16383>g?g:f+16383));1===a?(e=e[c-1],b+=Za[e>>2],b+=Za[e<<4&63],b+="=="):2===a&&(e=(e[c-2]<<8)+e[c-1],b+=Za[e>>10],b+=Za[e>>4&63],b+=Za[e<<2&63],b+="=");d.push(b);return d.join("")}function td(e,c,a,b,d){var f=8*d-b-1;var g=(1<<f)-1,h=g>>1,k=-7;d=a?d-1:0;var l=a?-1:1,p=e[c+d];d+=l;a=p&(1<<-k)-1;p>>=-k;for(k+=f;0<k;a=256*a+e[c+d],d+=l,k-=8);f=a&(1<<-k)-1;a>>=-k;for(k+=b;0<k;f=256*f+e[c+d],d+=l,k-=8);if(0===a)a=1-h;else{if(a===g)return f?NaN:Infinity*(p?-1:1);f+=Math.pow(2,b);a-=h}return(p?-1:1)*
f*Math.pow(2,a-b)}function Sf(e,c,a,b,d,f){var g,h=8*f-d-1,k=(1<<h)-1,l=k>>1,p=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;f=b?0:f-1;var n=b?1:-1,m=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,b=k):(b=Math.floor(Math.log(c)/Math.LN2),1>c*(g=Math.pow(2,-b))&&(b--,g*=2),c=1<=b+l?c+p/g:c+p*Math.pow(2,1-l),2<=c*g&&(b++,g/=2),b+l>=k?(c=0,b=k):1<=b+l?(c=(c*g-1)*Math.pow(2,d),b+=l):(c=c*Math.pow(2,l-1)*Math.pow(2,d),b=0));for(;8<=d;e[a+f]=c&255,f+=n,c/=256,d-=8);b=b<<d|c;for(h+=
d;0<h;e[a+f]=b&255,f+=n,b/=256,h-=8);e[a+f-n]|=128*m}function jb(e,c){if((y.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError("Invalid typed array length");y.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(c),e.__proto__=y.prototype):(null===e&&(e=new y(c)),e.length=c);return e}function y(e,c,a){if(!(y.TYPED_ARRAY_SUPPORT||this instanceof y))return new y(e,c,a);if("number"===typeof e){if("string"===typeof c)throw Error("If encoding is specified then the first argument must be a string");return ue(this,
e)}return Tf(this,e,c,a)}function Tf(e,c,a,b){if("number"===typeof c)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&c instanceof ArrayBuffer){c.byteLength;if(0>a||c.byteLength<a)throw new RangeError("'offset' is out of bounds");if(c.byteLength<a+(b||0))throw new RangeError("'length' is out of bounds");c=void 0===a&&void 0===b?new Uint8Array(c):void 0===b?new Uint8Array(c,a):new Uint8Array(c,a,b);y.TYPED_ARRAY_SUPPORT?(e=c,e.__proto__=y.prototype):
e=ve(e,c);return e}if("string"===typeof c){b=e;e=a;if("string"!==typeof e||""===e)e="utf8";if(!y.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');a=Uf(c,e)|0;b=jb(b,a);c=b.write(c,e);c!==a&&(b=b.slice(0,c));return b}return Ni(e,c)}function Vf(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative');}function ue(e,c){Vf(c);e=jb(e,0>c?0:we(c)|0);if(!y.TYPED_ARRAY_SUPPORT)for(var a=
0;a<c;++a)e[a]=0;return e}function ve(e,c){var a=0>c.length?0:we(c.length)|0;e=jb(e,a);for(var b=0;b<a;b+=1)e[b]=c[b]&255;return e}function Ni(e,c){if($a(c)){var a=we(c.length)|0;e=jb(e,a);if(0===e.length)return e;c.copy(e,0,0,a);return e}if(c){if("undefined"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return(a="number"!==typeof c.length)||(a=c.length,a=a!==a),a?jb(e,0):ve(e,c);if("Buffer"===c.type&&Wf(c.data))return ve(e,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function we(e){if(e>=(y.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(y.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return e|0}function $a(e){return!(null==e||!e._isBuffer)}function Uf(e,c){if($a(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var a=e.length;
if(0===a)return 0;for(var b=!1;;)switch(c){case "ascii":case "latin1":case "binary":return a;case "utf8":case "utf-8":case void 0:return ud(e).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*a;case "hex":return a>>>1;case "base64":return Xf(e).length;default:if(b)return ud(e).length;c=(""+c).toLowerCase();b=!0}}function Oi(e,c,a){var b=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===a||a>this.length)a=this.length;if(0>=a)return"";a>>>=0;c>>>=0;if(a<=c)return"";
for(e||(e="utf8");;)switch(e){case "hex":e=c;c=a;a=this.length;if(!e||0>e)e=0;if(!c||0>c||c>a)c=a;b="";for(a=e;a<c;++a)e=b,b=this[a],b=16>b?"0"+b.toString(16):b.toString(16),b=e+b;return b;case "utf8":case "utf-8":return Yf(this,c,a);case "ascii":e="";for(a=Math.min(this.length,a);c<a;++c)e+=String.fromCharCode(this[c]&127);return e;case "latin1":case "binary":e="";for(a=Math.min(this.length,a);c<a;++c)e+=String.fromCharCode(this[c]);return e;case "base64":return c=0===c&&a===this.length?Rf(this):
Rf(this.slice(c,a)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,a);a="";for(e=0;e<c.length;e+=2)a+=String.fromCharCode(c[e]+256*c[e+1]);return a;default:if(b)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();b=!0}}function Ob(e,c,a){var b=e[c];e[c]=e[a];e[a]=b}function Zf(e,c,a,b,d){if(0===e.length)return-1;"string"===typeof a?(b=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648);a=+a;isNaN(a)&&(a=d?0:e.length-1);0>a&&(a=e.length+a);if(a>=
e.length){if(d)return-1;a=e.length-1}else if(0>a)if(d)a=0;else return-1;"string"===typeof c&&(c=y.from(c,b));if($a(c))return 0===c.length?-1:$f(e,c,a,b,d);if("number"===typeof c)return c&=255,y.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?d?Uint8Array.prototype.indexOf.call(e,c,a):Uint8Array.prototype.lastIndexOf.call(e,c,a):$f(e,[c],a,b,d);throw new TypeError("val must be string, number or Buffer");}function $f(e,c,a,b,d){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*
g)}var g=1,h=e.length,k=c.length;if(void 0!==b&&(b=String(b).toLowerCase(),"ucs2"===b||"ucs-2"===b||"utf16le"===b||"utf-16le"===b)){if(2>e.length||2>c.length)return-1;g=2;h/=2;k/=2;a/=2}if(d)for(b=-1;a<h;a++)if(f(e,a)===f(c,-1===b?0:a-b)){if(-1===b&&(b=a),a-b+1===k)return b*g}else-1!==b&&(a-=a-b),b=-1;else for(a+k>h&&(a=h-k);0<=a;a--){h=!0;for(b=0;b<k;b++)if(f(e,a+b)!==f(c,b)){h=!1;break}if(h)return a}return-1}function Yf(e,c,a){a=Math.min(e.length,a);for(var b=[];c<a;){var d=e[c],f=null,g=239<d?
4:223<d?3:191<d?2:1;if(c+g<=a)switch(g){case 1:128>d&&(f=d);break;case 2:var h=e[c+1];128===(h&192)&&(d=(d&31)<<6|h&63,127<d&&(f=d));break;case 3:h=e[c+1];var k=e[c+2];128===(h&192)&&128===(k&192)&&(d=(d&15)<<12|(h&63)<<6|k&63,2047<d&&(55296>d||57343<d)&&(f=d));break;case 4:h=e[c+1];k=e[c+2];var l=e[c+3];128===(h&192)&&128===(k&192)&&128===(l&192)&&(d=(d&15)<<18|(h&63)<<12|(k&63)<<6|l&63,65535<d&&1114112>d&&(f=d))}null===f?(f=65533,g=1):65535<f&&(f-=65536,b.push(f>>>10&1023|55296),f=56320|f&1023);
b.push(f);c+=g}e=b.length;if(e<=ag)b=String.fromCharCode.apply(String,b);else{a="";for(c=0;c<e;)a+=String.fromCharCode.apply(String,b.slice(c,c+=ag));b=a}return b}function sa(e,c,a){if(0!==e%1||0>e)throw new RangeError("offset is not uint");if(e+c>a)throw new RangeError("Trying to access beyond buffer length");}function Fa(e,c,a,b,d,f){if(!$a(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>d||c<f)throw new RangeError('"value" argument is out of bounds');if(a+b>e.length)throw new RangeError("Index out of range");
}function vd(e,c,a,b){0>c&&(c=65535+c+1);for(var d=0,f=Math.min(e.length-a,2);d<f;++d)e[a+d]=(c&255<<8*(b?d:1-d))>>>8*(b?d:1-d)}function wd(e,c,a,b){0>c&&(c=4294967295+c+1);for(var d=0,f=Math.min(e.length-a,4);d<f;++d)e[a+d]=c>>>8*(b?d:3-d)&255}function bg(e,c,a,b,d,f){if(a+b>e.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range");}function cg(e,c,a,b,d){d||bg(e,c,a,4,3.4028234663852886E38,-3.4028234663852886E38);Sf(e,c,a,b,23,4);return a+4}function dg(e,
c,a,b,d){d||bg(e,c,a,8,1.7976931348623157E308,-1.7976931348623157E308);Sf(e,c,a,b,52,8);return a+8}function ud(e,c){c=c||Infinity;for(var a,b=e.length,d=null,f=[],g=0;g<b;++g){a=e.charCodeAt(g);if(55295<a&&57344>a){if(!d){if(56319<a){-1<(c-=3)&&f.push(239,191,189);continue}else if(g+1===b){-1<(c-=3)&&f.push(239,191,189);continue}d=a;continue}if(56320>a){-1<(c-=3)&&f.push(239,191,189);d=a;continue}a=(d-55296<<10|a-56320)+65536}else d&&-1<(c-=3)&&f.push(239,191,189);d=null;if(128>a){if(0>--c)break;
f.push(a)}else if(2048>a){if(0>(c-=2))break;f.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(c-=3))break;f.push(a>>12|224,a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(c-=4))break;f.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error("Invalid code point");}return f}function eg(e){for(var c=[],a=0;a<e.length;++a)c.push(e.charCodeAt(a)&255);return c}function Xf(e){e=(e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(Pi,"");if(2>e.length)e="";else for(;0!==e.length%4;)e+="=";te||Qf();
var c=e.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");var a="="===e[c-2]?2:"="===e[c-1]?1:0;var b=new Qi(3*c/4-a);var d=0<a?c-4:c;var f=0;for(c=0;c<d;c+=4){var g=Oa[e.charCodeAt(c)]<<18|Oa[e.charCodeAt(c+1)]<<12|Oa[e.charCodeAt(c+2)]<<6|Oa[e.charCodeAt(c+3)];b[f++]=g>>16&255;b[f++]=g>>8&255;b[f++]=g&255}2===a?(g=Oa[e.charCodeAt(c)]<<2|Oa[e.charCodeAt(c+1)]>>4,b[f++]=g&255):1===a&&(g=Oa[e.charCodeAt(c)]<<10|Oa[e.charCodeAt(c+1)]<<4|Oa[e.charCodeAt(c+2)]>>2,b[f++]=g>>
8&255,b[f++]=g&255);return b}function Ec(e,c,a,b){for(var d=0;d<b&&!(d+a>=c.length||d>=e.length);++d)c[d+a]=e[d];return d}function fg(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Pa(e,c){var a=[];e.forEach(function(b){a.push(c?-b:b,b)});return a}function gg(e){for(var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=[],b=0;b<e-1;b++){var d=2*(b+c);a.push(d,d+1,d+2);a.push(d+2,d+1,d+3)}return a}function xd(e){return function(c,
a,b){c=a+e;a=b.length-1;return b[0<a?0>c?0:c>a?a:c:c<a?a:0<c?0:c]}}function ab(e){if(!e[0]||!e[0].length)return e;for(var c=e[0].length,a=[],b=0,d=0;d<e.length;d++)for(var f=0;f<c;f++)a[b++]=e[d][f];return a}function hg(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],c=[],a=0,b=0;b<e.length;b++){var d=e[b];if(0<b){var f=e[b-1];a+=Math.sqrt(Math.pow(d[0]-f[0],2)+Math.pow(d[1]-f[1],2))}c.push(a)}return{arr:c,total:a}}function ig(){var e=document.createElement("canvas");e.width=
e.height=32;var c=e.getContext("2d");return{canvas:e,ctx:c}}function jg(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).color,c=ig(),a=c.canvas;c=c.ctx;c.save();c.moveTo(0,0);c.lineTo(20,0);c.lineTo(32,16);c.lineTo(20,32);c.lineTo(0,32);c.lineTo(10,16);c.fillStyle=e||"#fff";c.fill();c.restore();return a}function yd(e,c){return V.set(e,-c[1],c[0])}function kg(e,c,a){V.sub(e,c,a);V.normalize(e,e);return e}function Ri(e){var c,a;this.promise=new e(function(b,d){if(void 0!==c||void 0!==
a)throw TypeError("Bad Promise constructor");c=b;a=d});this.resolve=Pb(c);this.reject=Pb(a)}function dc(e){var c=0,a=0,b=!0,d=!1,f=void 0;try{for(var g=ec(e),h;!(b=(h=g.next()).done);b=!0){var k=h.value;c+=k.w*k.h;a=Math.max(a,k.w)}}catch(u){d=!0,f=u}finally{try{!b&&g.return&&g.return()}finally{if(d)throw f;}}e.sort(function(a,b){return b.h-a.h});a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),a),h:Infinity}];d=b=0;f=!0;g=!1;h=void 0;try{for(var l=ec(e),p;!(f=(p=l.next()).done);f=!0)for(var n=
p.value,m=a.length-1;0<=m;m--){var q=a[m];if(!(n.w>q.w||n.h>q.h)){n.x=q.x;n.y=q.y;d=Math.max(d,n.y+n.h);b=Math.max(b,n.x+n.w);if(n.w===q.w&&n.h===q.h){var r=a.pop();m<a.length&&(a[m]=r)}else n.h===q.h?(q.x+=n.w,q.w-=n.w):(n.w!==q.w&&a.push({x:q.x+n.w,y:q.y,w:q.w-n.w,h:n.h}),q.y+=n.h,q.h-=n.h);break}}}catch(u){g=!0,h=u}finally{try{!f&&l.return&&l.return()}finally{if(g)throw h;}}return{w:b,h:d,fill:c/(b*d)||0}}function Si(e,c,a){a=Math.PI/180*(60*a+30);return[e.x+c*Math.cos(a),e.y+c*Math.sin(a)]}function Ti(e,
c,a){for(var b={},d=[],f=e.length,g=c/2/Math.sin(Math.PI/3),h=1.5*g,k=1,l=0;l<f;++l){var p=e[l].geometry.coordinates;a&&(p=a(p));var n=+p[0],m=+p[1];if(!isNaN(n)&&!isNaN(m)){p=Math.round(m/=h);var q=Math.round(n=n/c-(p&1)/2),r=m-p;if(1<3*Math.abs(r)){var u=n-q,v=q+(n<q?-1:1)/2,t=p+(m<p?-1:1);n-=v;m-=t;u*u+r*r>n*n+m*m&&(q=v+(p&1?1:-1)/2,p=t)}r=q+"-"+p;(u=b[r])?(u.count+=e[l].count||1,k=Math.max(k,u.count)):(b[r]={center:{x:(q+(p&1)/2)*c,y:p*h},count:e[l].count||1},d.push(b[r]))}}d.max=k;d.r=g;return d}
function Ui(e,c,a,b){switch(b){case 5122:return new Int16Array(e,c,a);case 5123:return new Uint16Array(e,c,a);case 5124:return new Int32Array(e,c,a);case 5125:return new Uint32Array(e,c,a);case 5126:return new Float32Array(e,c,a);default:return null}}function zd(e){return Ui(e.bufferView.data,e.byteOffset,e.count*xe[e.type],e.componentType)}function Vi(e){var c="",a=e.lastIndexOf("/");-1!==a&&(c=e.substring(0,a+1));return c}function Wi(e,c){var a=new XMLHttpRequest;a.overrideMimeType("application/json");
a.open("GET",e,!0);a.onreadystatechange=function(){4==a.readyState&&"200"==a.status&&c(a.responseText,this)};a.send(null)}function Xi(e,c){var a=new XMLHttpRequest;a.responseType="arraybuffer";a.open("GET",e,!0);a.onreadystatechange=function(){if(4==a.readyState&&"200"==a.status){var b=a.response;b&&c&&c(b)}};a.send(null)}function Yi(e,c,a){var b=new Image;b.crossOrigin="Anonymous";b.src=e;b.onload=function(){a(b,c)}}function Zi(e){function c(b,d){a.uniform1i(b,d.index);a.activeTexture(a.TEXTURE0+
d.index);b=B.glTF.textures[d.index];a.bindTexture(a.TEXTURE_2D,b.texture);a.bindSampler(d.index,b.sampler?b.sampler.sampler:g)}var a=e.gl,b=0,d=[];e=a.canvas;var f=function(a,b,d){this.glTFScene=a;this.glTF=b;this.id=d;this.rootTransform=H.create();this.nodeMatrix=Array(b.nodes.length);a=0;for(b=this.nodeMatrix.length;a<b;a++)this.nodeMatrix[a]=H.create()},g=a.createSampler();a.samplerParameteri(g,a.TEXTURE_MIN_FILTER,a.NEAREST_MIPMAP_LINEAR);a.samplerParameteri(g,a.TEXTURE_MAG_FILTER,a.LINEAR);a.samplerParameteri(g,
a.TEXTURE_WRAP_S,a.REPEAT);a.samplerParameteri(g,a.TEXTURE_WRAP_T,a.REPEAT);a.bindVertexArray(null);a.bindVertexArray(null);var h={HAS_SKIN:1,SKIN_VEC8:2,HAS_BASECOLORMAP:4,HAS_NORMALMAP:8,HAS_METALROUGHNESSMAP:16,HAS_OCCLUSIONMAP:32,HAS_EMISSIVEMAP:64},k={},l=function(){this.flags=0;this.programObject=null};l.prototype.hasSkin=function(){return this.flags&h.HAS_SKIN};l.prototype.hasBaseColorMap=function(){return this.flags&h.HAS_BASECOLORMAP};l.prototype.hasNormalMap=function(){return this.flags&
h.HAS_NORMALMAP};l.prototype.hasMetalRoughnessMap=function(){return this.flags&h.HAS_METALROUGHNESSMAP};l.prototype.hasOcclusionMap=function(){return this.flags&h.HAS_OCCLUSIONMAP};l.prototype.hasEmissiveMap=function(){return this.flags&h.HAS_EMISSIVEMAP};l.prototype.defineMacro=function(a){void 0!==h[a]&&(this.flags|=h[a])};l.prototype.compile=function(){var b=k[this.flags];if(b)this.programObject=b;else{var d=b="";this.flags&h.HAS_SKIN&&(b+="#define HAS_SKIN\n");this.flags&h.SKIN_VEC8&&(b+="#define SKIN_VEC8\n");
this.flags&h.HAS_BASECOLORMAP&&(d+="#define HAS_BASECOLORMAP\n");this.flags&h.HAS_NORMALMAP&&(d+="#define HAS_NORMALMAP\n");this.flags&h.HAS_METALROUGHNESSMAP&&(d+="#define HAS_METALROUGHNESSMAP\n");this.flags&h.HAS_OCCLUSIONMAP&&(d+="#define HAS_OCCLUSIONMAP\n");this.flags&h.HAS_EMISSIVEMAP&&(d+="#define HAS_EMISSIVEMAP\n");b=fc.createProgram(a,"#version 300 es\n"+b+"#define POSITION_LOCATION 0\n#define NORMAL_LOCATION 1\n#define TEXCOORD_0_LOCATION 2\n#define JOINTS_0_LOCATION 3\n#define JOINTS_1_LOCATION 5\n#define WEIGHTS_0_LOCATION 4\n#define WEIGHTS_1_LOCATION 6\n#define TANGENT_LOCATION 7\nprecision highp float;precision highp int;uniform mat4 u_MVP;uniform mat4 u_MV;uniform mat4 u_MVNormal;\n#ifdef HAS_SKIN\nuniform JointMatrix{mat4 matrix[65];}u_jointMatrix;\n#endif\nlayout(location=POSITION_LOCATION)in vec3 position;layout(location=NORMAL_LOCATION)in vec3 normal;layout(location=TEXCOORD_0_LOCATION)in vec2 uv;\n#ifdef HAS_SKIN\nlayout(location=JOINTS_0_LOCATION)in vec4 joint0;layout(location=WEIGHTS_0_LOCATION)in vec4 weight0;\n#ifdef SKIN_VEC8\nlayout(location=JOINTS_1_LOCATION)in vec4 joint1;layout(location=WEIGHTS_1_LOCATION)in vec4 weight1;\n#endif\n#endif\nout vec3 v_position;out vec3 v_normal;out vec2 v_uv;void main(){\n#ifdef HAS_SKIN\nmat4 skinMatrix=weight0.x*u_jointMatrix.matrix[int(joint0.x)]+weight0.y*u_jointMatrix.matrix[int(joint0.y)]+weight0.z*u_jointMatrix.matrix[int(joint0.z)]+weight0.w*u_jointMatrix.matrix[int(joint0.w)];\n#ifdef SKIN_VEC8\nskinMatrix+=weight1.x*u_jointMatrix.matrix[int(joint1.x)]+weight1.y*u_jointMatrix.matrix[int(joint1.y)]+weight1.z*u_jointMatrix.matrix[int(joint1.z)]+weight1.w*u_jointMatrix.matrix[int(joint1.w)];\n#endif\n#endif\nv_uv=uv;\n#ifdef HAS_SKIN\nv_normal=normalize((u_MVNormal*transpose(inverse(skinMatrix))*vec4(normal,0)).xyz);vec4 pos=u_MV*skinMatrix*vec4(position,1.0);gl_Position=u_MVP*skinMatrix*vec4(position,1.0);\n#else\nv_normal=normalize((u_MVNormal*vec4(normal,0)).xyz);vec4 pos=u_MV*vec4(position,1.0);gl_Position=u_MVP*vec4(position,1.0);\n#endif\nv_position=vec3(pos.xyz)/pos.w;}",
"#version 300 es\n"+d+"#define FRAG_COLOR_LOCATION 0\nprecision highp float;precision highp int;uniform sampler2D u_brdfLUT;uniform vec4 u_baseColorFactor;\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_baseColorTexture;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_normalTexture;uniform float u_normalTextureScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_emissiveTexture;uniform vec3 u_emissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_metallicRoughnessTexture;\n#endif\nuniform float u_metallicFactor;uniform float u_roughnessFactor;\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_occlusionTexture;uniform float u_occlusionStrength;\n#endif\nin vec3 v_position;in vec3 v_normal;in vec2 v_uv;layout(location=FRAG_COLOR_LOCATION)out vec4 frag_color;struct PBRInfo{float NdotL;float NdotV;float NdotH;float LdotH;float VdotH;float perceptualRoughness;float metalness;vec3 reflectance0;vec3 reflectance90;float alphaRoughness;vec3 diffuseColor;vec3 specularColor;};const float M_PI=3.141592653589793;const float c_MinRoughness=0.04;vec3 getNormal(){vec3 pos_dx=dFdx(v_position);vec3 pos_dy=dFdy(v_position);vec3 tex_dx=dFdx(vec3(v_uv,0.0));vec3 tex_dy=dFdy(vec3(v_uv,0.0));vec3 t=(tex_dy.t*pos_dx-tex_dx.t*pos_dy)/(tex_dx.s*tex_dy.t-tex_dy.s*tex_dx.t);vec3 ng=v_normal;t=normalize(t-ng*dot(ng,t));vec3 b=normalize(cross(ng,t));mat3 tbn=mat3(t,b,ng);\n#ifdef HAS_NORMALMAP\nvec3 n=texture(u_normalTexture,v_uv).rgb;n=normalize(tbn*((2.0*n-1.0)*vec3(u_normalTextureScale,u_normalTextureScale,1.0)));\n#else\nvec3 n=tbn[2].xyz;\n#endif\nreturn n;}vec3 getIBLContribution(PBRInfo pbrInputs,vec3 n,vec3 reflection){float mipCount=10.0;float lod=(pbrInputs.perceptualRoughness*mipCount);vec3 brdf=texture(u_brdfLUT,vec2(pbrInputs.NdotV,1.0-pbrInputs.perceptualRoughness)).rgb;vec3 diffuseLight=vec3(0.6,0.6,0.6);vec3 specularLight=vec3(0.6,0.6,0.6);vec3 diffuse=diffuseLight*pbrInputs.diffuseColor;vec3 specular=specularLight*(pbrInputs.specularColor*brdf.x+brdf.y);return diffuse+specular;}vec3 diffuse(PBRInfo pbrInputs){return pbrInputs.diffuseColor/M_PI;}vec3 specularReflection(PBRInfo pbrInputs){return pbrInputs.reflectance0+(pbrInputs.reflectance90-pbrInputs.reflectance0)*pow(clamp(1.0-pbrInputs.VdotH,0.0,1.0),5.0);}float geometricOcclusion(PBRInfo pbrInputs){float NdotL=pbrInputs.NdotL;float NdotV=pbrInputs.NdotV;float r=pbrInputs.alphaRoughness;float attenuationL=2.0*NdotL/(NdotL+sqrt(r*r+(1.0-r*r)*(NdotL*NdotL)));float attenuationV=2.0*NdotV/(NdotV+sqrt(r*r+(1.0-r*r)*(NdotV*NdotV)));return attenuationL*attenuationV;}float microfacetDistribution(PBRInfo pbrInputs){float roughnessSq=pbrInputs.alphaRoughness*pbrInputs.alphaRoughness;float f=(pbrInputs.NdotH*roughnessSq-pbrInputs.NdotH)*pbrInputs.NdotH+1.0;return roughnessSq/(M_PI*f*f);}void main(){float perceptualRoughness=u_roughnessFactor;float metallic=u_metallicFactor;\n#ifdef HAS_METALROUGHNESSMAP\nvec4 mrSample=texture(u_metallicRoughnessTexture,v_uv);perceptualRoughness=mrSample.g*perceptualRoughness;metallic=mrSample.b*metallic;\n#endif\nperceptualRoughness=clamp(perceptualRoughness,c_MinRoughness,1.0);metallic=clamp(metallic,0.0,1.0);float alphaRoughness=perceptualRoughness*perceptualRoughness;\n#ifdef HAS_BASECOLORMAP\nvec4 baseColor=texture(u_baseColorTexture,v_uv)*u_baseColorFactor;\n#else\nvec4 baseColor=u_baseColorFactor;\n#endif\nvec3 f0=vec3(0.04);vec3 diffuseColor=baseColor.rgb*(vec3(1.0)-f0);diffuseColor*=1.0-metallic;vec3 specularColor=mix(f0,baseColor.rgb,metallic);float reflectance=max(max(specularColor.r,specularColor.g),specularColor.b);float reflectance90=clamp(reflectance*25.0,0.0,1.0);vec3 specularEnvironmentR0=specularColor.rgb;vec3 specularEnvironmentR90=vec3(1.0,1.0,1.0)*reflectance90;vec3 n=getNormal();vec3 v=normalize(-v_position);vec3 l=normalize(vec3(1.0,1.0,1.0));vec3 h=normalize(l+v);vec3 reflection=-normalize(reflect(v,n));float NdotL=clamp(dot(n,l),0.001,1.0);float NdotV=abs(dot(n,v))+0.001;float NdotH=clamp(dot(n,h),0.0,1.0);float LdotH=clamp(dot(l,h),0.0,1.0);float VdotH=clamp(dot(v,h),0.0,1.0);PBRInfo pbrInputs=PBRInfo(NdotL,NdotV,NdotH,LdotH,VdotH,perceptualRoughness,metallic,specularEnvironmentR0,specularEnvironmentR90,alphaRoughness,diffuseColor,specularColor);vec3 F=specularReflection(pbrInputs);float G=geometricOcclusion(pbrInputs);float D=microfacetDistribution(pbrInputs);vec3 diffuseContrib=(1.0-F)*diffuse(pbrInputs);vec3 specContrib=max(vec3(0.0),F*G*D/(4.0*NdotL*NdotV));vec3 color=NdotL*(diffuseContrib+specContrib);color+=getIBLContribution(pbrInputs,n,reflection);\n#ifdef HAS_OCCLUSIONMAP\nfloat ao=texture(u_occlusionTexture,v_uv).r;color=mix(color,color*ao,u_occlusionStrength);\n#endif\n#ifdef HAS_EMISSIVEMAP\nvec3 emissive=texture(u_emissiveTexture,v_uv).rgb*u_emissiveFactor;color+=emissive;\n#endif\nfrag_color=vec4(color,baseColor.a);}");
this.programObject={program:b,uniformLocations:{},uniformBlockIndices:{}};this.flags&h.HAS_SKIN&&(this.programObject.uniformBlockIndices.JointMatrix=a.getUniformBlockIndex(b,"JointMatrix"));d=this.programObject.uniformLocations;d.MVP=a.getUniformLocation(b,"u_MVP");d.MVNormal=a.getUniformLocation(b,"u_MVNormal");d.MV=a.getUniformLocation(b,"u_MV");d.baseColorFactor=a.getUniformLocation(b,"u_baseColorFactor");d.metallicFactor=a.getUniformLocation(b,"u_metallicFactor");d.roughnessFactor=a.getUniformLocation(b,
"u_roughnessFactor");this.flags&h.HAS_BASECOLORMAP&&(d.baseColorTexture=a.getUniformLocation(b,"u_baseColorTexture"));this.flags&h.HAS_NORMALMAP&&(d.normalTexture=a.getUniformLocation(b,"u_normalTexture"),d.normalTextureScale=a.getUniformLocation(b,"u_normalTextureScale"));this.flags&h.HAS_METALROUGHNESSMAP&&(d.metallicRoughnessTexture=a.getUniformLocation(b,"u_metallicRoughnessTexture"));this.flags&h.HAS_OCCLUSIONMAP&&(d.occlusionTexture=a.getUniformLocation(b,"u_occlusionTexture"),d.occlusionStrength=
a.getUniformLocation(b,"u_occlusionStrength"));this.flags&h.HAS_EMISSIVEMAP&&(d.emissiveTexture=a.getUniformLocation(b,"u_emissiveTexture"),d.emissiveFactor=a.getUniformLocation(b,"u_emissiveFactor"));a.useProgram(null);k[this.flags]=this.programObject}};var p=1,n=J.create(),m=H.create();Ad.create();var q=[];a.enable(a.CULL_FACE);a.cullFace(a.BACK);a.frontFace(a.CCW);var r=!0;a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);var u=u||{},v=null;J.create();var t=H.create();H.perspective(t,.785,e.width/e.height,
.01,100);H.create();var x=H.create(),w=H.create(),D=H.create();H.create();var z,B,A=[1,1,1,1],F=u.drawPrimitive=function(b,d){if(C){w=x=C.matrix;H.invert(D,x);H.transpose(D,D);d=A;var e=b.shader,g=b.material;if(null!==g){var k=g.pbrMetallicRoughness;d=k.baseColorFactor;b.material.doubleSided===r&&((r=!b.material.doubleSided)?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE))}v!=b.shader.programObject&&(v=b.shader.programObject,a.useProgram(v.program));g&&(e.hasBaseColorMap()&&c(v.uniformLocations.baseColorTexture,
k.baseColorTexture),e.hasNormalMap()&&(c(v.uniformLocations.normalTexture,g.normalTexture),a.uniform1f(v.uniformLocations.normalTextureScale,g.normalTexture.scale)),e.hasMetalRoughnessMap()&&c(v.uniformLocations.metallicRoughnessTexture,k.metallicRoughnessTexture),a.uniform1f(v.uniformLocations.metallicFactor,k.metallicFactor),a.uniform1f(v.uniformLocations.roughnessFactor,k.roughnessFactor),e.hasOcclusionMap()&&(c(v.uniformLocations.occlusionTexture,g.occlusionTexture),a.uniform1f(v.uniformLocations.occlusionStrength,
g.occlusionTexture.strength)),e.hasEmissiveMap()&&(c(v.uniformLocations.emissiveTexture,g.emissiveTexture),a.uniform3fv(v.uniformLocations.emissiveFactor,g.emissiveFactor)));e.hasSkin()&&a.uniformBlockBinding(v.program,v.uniformBlockIndices.JointMatrix,z);a.activeTexture(a.TEXTURE0+29);a.bindTexture(a.TEXTURE_2D,null);a.uniform4fv(v.uniformLocations.baseColorFactor,d);a.uniformMatrix4fv(v.uniformLocations.MV,!1,x);a.uniformMatrix4fv(v.uniformLocations.MVP,!1,w);a.uniformMatrix4fv(v.uniformLocations.MVNormal,
!1,D);a.bindVertexArray(b.vertexArray);null!==b.indices?a.drawElements(b.mode,b.indicesLength,b.indicesComponentType,b.indicesOffset):a.drawArrays(b.mode,b.drawArraysOffset,b.drawArraysCount);a.bindVertexArray(null)}},G=H.create(),E=H.create(),gc=u.drawNode=function(b,d,c,e){d=c[d];void 0!==e?H.mul(d,e,b.matrix):H.copy(d,b.matrix);if(null!==b.skin){var g=b.skin;z=g.uniformBlockID;var k=b.skin.joints;H.invert(E,d);e=0;for(h=k.length;e<h;e++){var f=k[e];H.mul(G,c[f.nodeID],g.inverseBindMatrix[e]);H.mul(G,
E,G);g.jointMatrixUnidormBufferData.set(G,16*e)}a.bindBuffer(a.UNIFORM_BUFFER,g.jointMatrixUniformBuffer);a.bufferSubData(a.UNIFORM_BUFFER,0,g.jointMatrixUnidormBufferData,0,g.jointMatrixUnidormBufferData.length)}var h;if(null!==b.mesh)for(g=b.mesh,e=0,h=g.primitives.length;e<h;e++)F(g.primitives[e],d);null!==b.skin&&a.bindBuffer(a.UNIFORM_BUFFER,null);e=0;for(h=b.children.length;e<h;e++)gc(b.children[e],b.children[e].nodeID,c,d)},I=u.drawScene=function(a){var d=a.glTF;if(d.animations){var c=d.animations[b];
var e;var g=0;for(e=c.samplers.length;g<e;g++)c.samplers[g].getValue(y);g=0;for(e=c.channels.length;g<e;g++){var k=c.channels[g];var f=k.sampler;var h=d.nodes[k.target.nodeID];switch(k.target.path){case "rotation":xa.copy(h.rotation,f.curValue);break;case "translation":J.copy(h.translation,f.curValue);break;case "scale":J.copy(h.scale,f.curValue)}h.updateMatrixFromTRS()}}c=0;for(d=a.glTFScene.nodes.length;c<d;c++)gc(a.glTFScene.nodes[c],a.glTFScene.nodes[c].nodeID,a.nodeMatrix,a.rootTransform)},K=
performance.now(),y=0,C;return{setupScene:function(c,e){function g(b,d){if(void 0!==b){var c=b.bufferView;null===c.target?(a.bindBuffer(a.ARRAY_BUFFER,c.buffer),a.bufferData(a.ARRAY_BUFFER,c.data,a.STATIC_DRAW)):a.bindBuffer(c.target,c.buffer);b.prepareVertexAttrib(d,a);return!0}return!1}var k;if(c.animations){var h=0;for(k=c.animations.length;h<k;h++)d.add(c.animations[h].name||h)}b=0;h=c.scenes[c.defaultScene];J.fromValues(1.2*h.boundingBox.transform[0],0,0);J.create();e?e=q[e.id]=new f(h,c,e.id):
(e=new f(h,c,q.length),q.push(e));1===q.length&&(H.identity(m),p=1/Math.max(h.boundingBox.transform[0],Math.max(h.boundingBox.transform[5],h.boundingBox.transform[10])),H.getTranslation(n,h.boundingBox.transform),J.scale(n,n,-1),n[0]+=-.5*h.boundingBox.transform[0],n[1]+=-.5*h.boundingBox.transform[5],n[2]+=-.5*h.boundingBox.transform[10],p*=.5,m[0]=p,m[5]=p,m[10]=p,H.translate(m,m,n),J.set(n,0,0,-1.5),p=1);var u;h=0;for(k=c.bufferViews.length;h<k;h++){var r=c.bufferViews[h];r.createBuffer(a);r.bindData(a)}if(c.textures)for(h=
0,k=c.textures.length;h<k;h++){var v=c.textures[h];v.createTexture(a)}if(c.samplers)for(h=0,k=c.samplers.length;h<k;h++)v=c.samplers[h],v.createSampler(a);if(c.skins)for(h=0,k=c.skins.length;h<k;h++)v=c.skins[h],v.jointMatrixUniformBuffer=a.createBuffer(),a.bindBufferBase(a.UNIFORM_BUFFER,v.uniformBlockID,v.jointMatrixUniformBuffer),a.bindBuffer(a.UNIFORM_BUFFER,v.jointMatrixUniformBuffer),a.bufferData(a.UNIFORM_BUFFER,v.jointMatrixUnidormBufferData,a.DYNAMIC_DRAW),a.bufferSubData(a.UNIFORM_BUFFER,
0,v.jointMatrixUnidormBufferData),a.bindBuffer(a.UNIFORM_BUFFER,null);var t=0;for(u=c.meshes.length;t<u;t++)for(v=c.meshes[t],h=0,k=v.primitives.length;h<k;++h){var w=v.primitives[h];w.shader=new l;w.vertexArray=r=a.createVertexArray();a.bindVertexArray(r);g(w.attributes.POSITION,0);g(w.attributes.NORMAL,1);g(w.attributes.TEXCOORD_0,2);g(w.attributes.JOINTS_0,3)&&g(w.attributes.WEIGHTS_0,4)&&w.shader.defineMacro("HAS_SKIN");g(w.attributes.JOINTS_1,5)&&g(w.attributes.WEIGHTS_1,6)&&w.shader.defineMacro("SKIN_VEC8");
null!==w.indices&&(r=c.accessors[w.indices],r=r.bufferView,null===r.target?(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r.buffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,r.data,a.STATIC_DRAW)):a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r.buffer));a.bindVertexArray(null);a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);if(r=w.material)r.pbrMetallicRoughness.baseColorTexture&&w.shader.defineMacro("HAS_BASECOLORMAP"),r.pbrMetallicRoughness.metallicRoughnessTexture&&w.shader.defineMacro("HAS_METALROUGHNESSMAP"),
r.normalTexture&&w.shader.defineMacro("HAS_NORMALMAP"),r.occlusionTexture&&w.shader.defineMacro("HAS_OCCLUSIONMAP"),r.emissiveTexture&&w.shader.defineMacro("HAS_EMISSIVEMAP");w.shader.compile()}return e},render:u.render=function(a){C=a;a=(new Date).getTime();var b;var d=0;for(b=q.length;d<b;d++)B=q[d],I(q[d]);v=null;y=.001*(a-K)}}}function ma(e){this.options=e=e||{};e.colors=e.colors||["rgba(0,192,73,0.99609375)","rgba(242,48,48,0.99609375)","rgba(255,159,25,0.99609375)"];var c=e.colors;this.drawTogether=
!0;this.parseColors(c);this.tileSize=256;this.ratio=window.devicePixelRatio;this.cache={};e.getTileUrl&&(this.getTileUrl=e.getTileUrl);this._loadCount={}}function $i(e){var c=e/2,a=e+c,b=new ke(2*a,2*a),d=b.getContext("2d");d.shadowBlur=c;d.shadowColor="black";d.shadowOffsetX=d.shadowOffsetY=1E4;d.beginPath();d.arc(a-1E4,a-1E4,e,0,2*Math.PI,!0);d.closePath();d.fill();return b}var ye=window.BMapGL||window.BMap;ye&&ye.Overlay&&(fa.prototype=new ye.Overlay);fa.prototype.initialize=function(e){this._map=
e;var c=this.canvas=document.createElement("canvas"),a=this.ctx=this.canvas.getContext("2d");c.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";";this.adjustSize();this.adjustRatio(a);e.getContainer().appendChild(c);var b=this;e.addEventListener("resize",function(){b.adjustSize();b._draw()});return this.canvas};fa.prototype.adjustSize=function(){var e=this._map.getSize(),c=this.canvas;c.width=e.width;c.height=e.height;c.style.width=c.width+"px";c.style.height=c.height+"px"};fa.prototype.adjustRatio=
function(e){var c=(window.devicePixelRatio||1)/(e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),a=e.canvas.width,b=e.canvas.height;e.canvas.width=a*c;e.canvas.height=b*c;e.canvas.style.width=a+"px";e.canvas.style.height=b+"px";e.scale(c,c)};fa.prototype.draw=function(){this._draw.apply(this,arguments)};fa.prototype._draw=function(){this.dispatchEvent("draw");this.options.update&&
this.options.update.apply(this,arguments)};fa.prototype.getContainer=function(){return this.canvas};fa.prototype.show=function(){this.canvas||this._map.addOverlay(this);this.canvas.style.display="block"};fa.prototype.hide=function(){this.canvas.style.display="none"};fa.prototype.setZIndex=function(e){this.canvas.style.zIndex=e};fa.prototype.getZIndex=function(){return this.zIndex};var lg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:{},aj=Q(function(e,c){c.__esModule=!0;c.default=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}}),L=U(aj),wb=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},bj={}.hasOwnProperty,da=function(e,c){return bj.call(e,c)},cj={}.toString,Qb=function(e){return cj.call(e).slice(8,-1)},ze=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Qb(e)?e.split(""):Object(e)},bb=function(e){return ze(wb(e))},
dj=Math.ceil,ej=Math.floor,Ae=function(e){return isNaN(e=+e)?0:(0<e?ej:dj)(e)},fj=Math.min,Bd=function(e){return 0<e?fj(Ae(e),9007199254740991):0},gj=Math.max,hj=Math.min,ba=Q(function(e){e=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)}),W=Q(function(e){e=e.exports="undefined"!=typeof window&&Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Fc=Q(function(e){var c=W["__core-js_shared__"]||(W["__core-js_shared__"]=
{});(e.exports=function(a,b){return c[a]||(c[a]=void 0!==b?b:{})})("versions",[]).push({version:ba.version,mode:"pure",copyright:"\u00a9 2019 Denis Pushkarev (zloirock.ru)"})}),ij=0,jj=Math.random(),Cd=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++ij+jj).toString(36))},mg=Fc("keys"),Be=function(e){return mg[e]||(mg[e]=Cd(e))},kj=function(e){return function(c,a,b){c=bb(c);var d=Bd(c.length);b=Ae(b);b=0>b?gj(b+d,0):hj(b,d);if(e&&a!=a)for(;d>b;){if(a=c[b++],a!=a)return!0}else for(;d>b;b++)if((e||
b in c)&&c[b]===a)return e||b||0;return!e&&-1}}(!1),lj=Be("IE_PROTO"),ng=function(e,c){e=bb(e);var a=0,b=[],d;for(d in e)d!=lj&&da(e,d)&&b.push(d);for(;c.length>a;)da(e,d=c[a++])&&(~kj(b,d)||b.push(d));return b},Dd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),hc=Object.keys||function(e){return ng(e,Dd)},Pb=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},ta=function(e,c,a){Pb(e);if(void 0===c)return e;
switch(a){case 1:return function(a){return e.call(c,a)};case 2:return function(a,d){return e.call(c,a,d)};case 3:return function(a,d,f){return e.call(c,a,d,f)}}return function(){return e.apply(c,arguments)}},Aa=function(e){return"object"===typeof e?null!==e:"function"===typeof e},Da=function(e){if(!Aa(e))throw TypeError(e+" is not an object!");return e},xb=function(e){try{return!!e()}catch(c){return!0}},Qa=!xb(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),ic=W.document,
Ed=Aa(ic)&&Aa(ic.createElement),og=!Qa&&!xb(function(){return 7!=Object.defineProperty(Ed?ic.createElement("div"):{},"a",{get:function(){return 7}}).a}),Gc=function(e,c){if(!Aa(e))return e;var a,b;if(c&&"function"==typeof(a=e.toString)&&!Aa(b=a.call(e))||"function"==typeof(a=e.valueOf)&&!Aa(b=a.call(e))||!c&&"function"==typeof(a=e.toString)&&!Aa(b=a.call(e)))return b;throw TypeError("Can't convert object to primitive value");},mj=Object.defineProperty,Ma={f:Qa?Object.defineProperty:function(e,c,a){Da(e);
c=Gc(c,!0);Da(a);if(og)try{return mj(e,c,a)}catch(b){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");"value"in a&&(e[c]=a.value);return e}},yb=function(e,c){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:c}},kb=Qa?function(e,c,a){return Ma.f(e,c,yb(1,a))}:function(e,c,a){e[c]=a;return e},Ba=function(e,c,a){var b=e&Ba.F,d=e&Ba.G,f=e&Ba.S,g=e&Ba.P,h=e&Ba.B,k=e&Ba.W,l=d?ba:ba[c]||(ba[c]={}),p=l.prototype;f=d?W:f?W[c]:(W[c]||{}).prototype;var n;d&&(a=c);for(n in a)if(c=
!b&&f&&void 0!==f[n],!c||!da(l,n)){var m=c?f[n]:a[n];l[n]=d&&"function"!=typeof f[n]?a[n]:h&&c?ta(m,W):k&&f[n]==m?function(a){var b=function(b,d,c){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,d)}return new a(b,d,c)}return a.apply(this,arguments)};b.prototype=a.prototype;return b}(m):g&&"function"==typeof m?ta(Function.call,m):m;g&&((l.virtual||(l.virtual={}))[n]=m,e&Ba.R&&p&&!p[n]&&kb(p,n,m))}};Ba.F=1;Ba.G=2;Ba.S=4;Ba.P=8;Ba.B=16;
Ba.W=32;Ba.U=64;Ba.R=128;var N=Ba,Fd=function(e,c){var a=(ba.Object||{})[e]||Object[e],b={};b[e]=c(a);N(N.S+N.F*xb(function(){a(1)}),"Object",b)};Fd("keys",function(){return function(e){return hc(Object(wb(e)))}});var nj=ba.Object.keys,oj=Q(function(e){e.exports={"default":nj,__esModule:!0}}),pa=U(oj),Ce=Object.getOwnPropertySymbols,Gd={}.propertyIsEnumerable,Hd=Object.assign,pj=!Hd||xb(function(){var e={},c={},a=Symbol();e[a]=7;"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return 7!=
Hd({},e)[a]||"abcdefghijklmnopqrst"!=Object.keys(Hd({},c)).join("")})?function(e,c){for(var a=Object(wb(e)),b=arguments.length,d=1,f=Ce,g=Gd;b>d;)for(var h=ze(arguments[d++]),k=f?hc(h).concat(f(h)):hc(h),l=k.length,p=0,n;l>p;)g.call(h,n=k[p++])&&(a[n]=h[n]);return a}:Hd;N(N.S+N.F,"Object",{assign:pj});var qj=ba.Object.assign,rj=Q(function(e){e.exports={"default":qj,__esModule:!0}}),Y=U(rj),pg=Be("IE_PROTO"),sj=Object.prototype,qg=Object.getPrototypeOf||function(e){e=Object(wb(e));return da(e,pg)?
e[pg]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?sj:null};Fd("getPrototypeOf",function(){return function(e){return qg(Object(wb(e)))}});var tj=ba.Object.getPrototypeOf,Hc=Q(function(e){e.exports={"default":tj,__esModule:!0}}),P=U(Hc);N(N.S+N.F*!Qa,"Object",{defineProperty:Ma.f});var uj=ba.Object,vj=function(e,c,a){return uj.defineProperty(e,c,a)},lb=Q(function(e){e.exports={"default":vj,__esModule:!0}}),oa=U(lb),wj=Q(function(e,c){c.__esModule=
!0;var a=lb&&lb.__esModule?lb:{default:lb};c.default=function(){function b(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);(0,a.default)(b,e.key,e)}}return function(a,c,e){c&&b(a.prototype,c);e&&b(a,e);return a}}()}),M=U(wj),cb={},xj=Qa?Object.defineProperties:function(e,c){Da(e);for(var a=hc(c),b=a.length,d=0,f;b>d;)Ma.f(e,f=a[d++],c[f]);return e},rg=W.document,De=rg&&rg.documentElement,yj=Be("IE_PROTO"),Ee=function(){},Id=
function(){var e=Ed?ic.createElement("iframe"):{},c=Dd.length;e.style.display="none";De.appendChild(e);e.src="javascript:";e=e.contentWindow.document;e.open();e.write("<script>document.F=Object\x3c/script>");e.close();for(Id=e.F;c--;)delete Id.prototype[Dd[c]];return Id()},zb=Object.create||function(e,c){if(null!==e){Ee.prototype=Da(e);var a=new Ee;Ee.prototype=null;a[yj]=e}else a=Id();return void 0===c?a:xj(a,c)},ra=Q(function(e){var c=Fc("wks"),a=W.Symbol,b="function"==typeof a;(e.exports=function(d){return c[d]||
(c[d]=b&&a[d]||(b?a:Cd)("Symbol."+d))}).store=c}),zj=Ma.f,sg=ra("toStringTag"),Rb=function(e,c,a){e&&!da(e=a?e:e.prototype,sg)&&zj(e,sg,{configurable:!0,value:c})},tg={};kb(tg,ra("iterator"),function(){return this});var Aj=function(e,c,a){e.prototype=zb(tg,{next:yb(1,a)});Rb(e,c+" Iterator")},Fe=ra("iterator"),Ge=!([].keys&&"next"in[].keys()),Bj=function(){return this},He=function(e,c,a,b,d,f,g){Aj(a,c,b);b=function(b){return!Ge&&b in p?p[b]:function(){return new a(this,b)}};var h=c+" Iterator",k=
"values"==d,l=!1,p=e.prototype,n=p[Fe]||p["@@iterator"]||d&&p[d],m=n||b(d),q=d?k?b("entries"):m:void 0,r="Array"==c?p.entries||n:n,u;r&&(e=qg(r.call(new e)),e!==Object.prototype&&e.next&&Rb(e,h,!0));k&&n&&"values"!==n.name&&(l=!0,m=function(){return n.call(this)});g&&(Ge||l||!p[Fe])&&kb(p,Fe,m);cb[c]=m;cb[h]=Bj;if(d){var v={values:k?m:b("values"),keys:f?m:b("keys"),entries:q};if(g)for(u in v)u in p||kb(p,u,v[u]);else N(N.P+N.F*(Ge||l),c,v)}return v},Cj=function(e){return function(c,a){c=String(wb(c));
a=Ae(a);var b=c.length,d;if(0>a||a>=b)return e?"":void 0;var f=c.charCodeAt(a);return 55296>f||56319<f||a+1===b||56320>(d=c.charCodeAt(a+1))||57343<d?e?c.charAt(a):f:e?c.slice(a,a+2):(f-55296<<10)+(d-56320)+65536}}(!0);He(String,"String",function(e){this._t=String(e);this._i=0},function(){var e=this._t,c=this._i;if(c>=e.length)return{value:void 0,done:!0};e=Cj(e,c);this._i+=e.length;return{value:e,done:!1}});var Ab=function(e,c){return{value:c,done:!!e}};He(Array,"Array",function(e,c){this._t=bb(e);
this._i=0;this._k=c},function(){var e=this._t,c=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,Ab(1)):"keys"==c?Ab(0,a):"values"==c?Ab(0,e[a]):Ab(0,[a,e[a]])},"values");cb.Arguments=cb.Array;for(var ug=ra("toStringTag"),vg="CSSRuleList CSSStyleDeclaration CSSValueList ClientRectList DOMRectList DOMStringList DOMTokenList DataTransferItemList FileList HTMLAllCollection HTMLCollection HTMLFormElement HTMLSelectElement MediaList MimeTypeArray NamedNodeMap NodeList PaintRequestList Plugin PluginArray SVGLengthList SVGNumberList SVGPathSegList SVGPointList SVGStringList SVGTransformList SourceBufferList StyleSheetList TextTrackCueList TextTrackList TouchList".split(" "),
Ie=0;Ie<vg.length;Ie++){var Je=vg[Ie],wg=W[Je],Ke=wg&&wg.prototype;Ke&&!Ke[ug]&&kb(Ke,ug,Je);cb[Je]=cb.Array}var Jd={f:ra},Dj=Jd.f("iterator"),Ic=Q(function(e){e.exports={"default":Dj,__esModule:!0}});U(Ic);var Kd=Q(function(e){var c=Cd("meta"),a=Ma.f,b=0,d=Object.isExtensible||function(){return!0},f=!xb(function(){return d(Object.preventExtensions({}))}),g=function(d){a(d,c,{value:{i:"O"+ ++b,w:{}}})},h=e.exports={KEY:c,NEED:!1,fastKey:function(a,b){if(!Aa(a))return"symbol"==typeof a?a:("string"==
typeof a?"S":"P")+a;if(!da(a,c)){if(!d(a))return"F";if(!b)return"E";g(a)}return a[c].i},getWeak:function(a,b){if(!da(a,c)){if(!d(a))return!0;if(!b)return!1;g(a)}return a[c].w},onFreeze:function(a){f&&h.NEED&&d(a)&&!da(a,c)&&g(a);return a}}}),Ej=Ma.f,Le=function(e){var c=ba.Symbol||(ba.Symbol={});"_"==e.charAt(0)||e in c||Ej(c,e,{value:Jd.f(e)})},Me=Array.isArray||function(e){return"Array"==Qb(e)},Fj=Dd.concat("length","prototype"),xg=Object.getOwnPropertyNames||function(e){return ng(e,Fj)},yg=xg,
Gj={}.toString,zg="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ag=function(e){if(zg&&"[object Window]"==Gj.call(e))try{var c=yg(e)}catch(a){c=zg.slice()}else c=yg(bb(e));return c},Bg=Object.getOwnPropertyDescriptor,Ld={f:Qa?Bg:function(e,c){e=bb(e);c=Gc(c,!0);if(og)try{return Bg(e,c)}catch(a){}if(da(e,c))return yb(!Gd.call(e,c),e[c])}},Hj=Kd.KEY,Cg=Ld.f,Sb=Ma.f,Dg=Ag,Ga=W.Symbol,Md=W.JSON,Nd=Md&&Md.stringify,Ha=ra("_hidden"),Eg=ra("toPrimitive"),
Ij={}.propertyIsEnumerable,Jc=Fc("symbol-registry"),mb=Fc("symbols"),Kc=Fc("op-symbols"),Ta=Object.prototype,jc="function"==typeof Ga,Ne=W.QObject,Oe=!Ne||!Ne.prototype||!Ne.prototype.findChild,Pe=Qa&&xb(function(){return 7!=zb(Sb({},"a",{get:function(){return Sb(this,"a",{value:7}).a}})).a})?function(e,c,a){var b=Cg(Ta,c);b&&delete Ta[c];Sb(e,c,a);b&&e!==Ta&&Sb(Ta,c,b)}:Sb,Fg=function(e){var c=mb[e]=zb(Ga.prototype);c._k=e;return c},Qe=jc&&"symbol"==typeof Ga.iterator?function(e){return"symbol"==
typeof e}:function(e){return e instanceof Ga},Od=function(e,c,a){e===Ta&&Od(Kc,c,a);Da(e);c=Gc(c,!0);Da(a);return da(mb,c)?(a.enumerable?(da(e,Ha)&&e[Ha][c]&&(e[Ha][c]=!1),a=zb(a,{enumerable:yb(0,!1)})):(da(e,Ha)||Sb(e,Ha,yb(1,{})),e[Ha][c]=!0),Pe(e,c,a)):Sb(e,c,a)},Gg=function(e,c){Da(e);var a=c=bb(c),b=hc(a),d=Ce;if(d){d=d(a);for(var f=Gd,g=0,h;d.length>g;)f.call(a,h=d[g++])&&b.push(h)}a=0;h=b.length;for(var k;h>a;)Od(e,k=b[a++],c[k]);return e},Jj=function(e){var c=Ij.call(this,e=Gc(e,!0));return this===
Ta&&da(mb,e)&&!da(Kc,e)?!1:c||!da(this,e)||!da(mb,e)||da(this,Ha)&&this[Ha][e]?c:!0},Hg=function(e,c){e=bb(e);c=Gc(c,!0);if(e!==Ta||!da(mb,c)||da(Kc,c)){var a=Cg(e,c);!a||!da(mb,c)||da(e,Ha)&&e[Ha][c]||(a.enumerable=!0);return a}},Ig=function(e){e=Dg(bb(e));for(var c=[],a=0,b;e.length>a;)da(mb,b=e[a++])||b==Ha||b==Hj||c.push(b);return c},Jg=function(e){var c=e===Ta;e=Dg(c?Kc:bb(e));for(var a=[],b=0,d;e.length>b;)da(mb,d=e[b++])&&(c?da(Ta,d):1)&&a.push(mb[d]);return a};jc||(Ga=function(){if(this instanceof
Ga)throw TypeError("Symbol is not a constructor!");var e=Cd(0<arguments.length?arguments[0]:void 0),c=function(a){this===Ta&&c.call(Kc,a);da(this,Ha)&&da(this[Ha],e)&&(this[Ha][e]=!1);Pe(this,e,yb(1,a))};Qa&&Oe&&Pe(Ta,e,{configurable:!0,set:c});return Fg(e)},kb(Ga.prototype,"toString",function(){return this._k}),Ld.f=Hg,Ma.f=Od,xg=Ag=Ig,Gd=Jj,Ce=Jg,Jd.f=function(e){return Fg(ra(e))});N(N.G+N.W+N.F*!jc,{Symbol:Ga});for(var Kg="hasInstance isConcatSpreadable iterator match replace search species split toPrimitive toStringTag unscopables".split(" "),
Lg=0;Kg.length>Lg;)ra(Kg[Lg++]);for(var Mg=hc(ra.store),Ng=0;Mg.length>Ng;)Le(Mg[Ng++]);N(N.S+N.F*!jc,"Symbol",{"for":function(e){return da(Jc,e+="")?Jc[e]:Jc[e]=Ga(e)},keyFor:function(e){if(!Qe(e))throw TypeError(e+" is not a symbol!");for(var c in Jc)if(Jc[c]===e)return c},useSetter:function(){Oe=!0},useSimple:function(){Oe=!1}});N(N.S+N.F*!jc,"Object",{create:function(e,c){return void 0===c?zb(e):Gg(zb(e),c)},defineProperty:Od,defineProperties:Gg,getOwnPropertyDescriptor:Hg,getOwnPropertyNames:Ig,
getOwnPropertySymbols:Jg});Md&&N(N.S+N.F*(!jc||xb(function(){var e=Ga();return"[null]"!=Nd([e])||"{}"!=Nd({a:e})||"{}"!=Nd(Object(e))})),"JSON",{stringify:function(e){for(var c=[e],a=1,b;arguments.length>a;)c.push(arguments[a++]);b=a=c[1];if((Aa(a)||void 0!==e)&&!Qe(e))return Me(a)||(a=function(a,c){"function"==typeof b&&(c=b.call(this,a,c));if(!Qe(c))return c}),c[1]=a,Nd.apply(Md,c)}});Ga.prototype[Eg]||kb(Ga.prototype,Eg,Ga.prototype.valueOf);Rb(Ga,"Symbol");Rb(Math,"Math",!0);Rb(W.JSON,"JSON",
!0);Le("asyncIterator");Le("observable");var Kj=ba.Symbol,Lc=Q(function(e){e.exports={"default":Kj,__esModule:!0}}),Og=U(Lc),kc=Q(function(e,c){c.__esModule=!0;e=Ic&&Ic.__esModule?Ic:{default:Ic};var a=Lc&&Lc.__esModule?Lc:{default:Lc},b="function"===typeof a.default&&"symbol"===typeof e.default?function(a){return typeof a}:function(b){return b&&"function"===typeof a.default&&b.constructor===a.default&&b!==a.default.prototype?"symbol":typeof b};c.default="function"===typeof a.default&&"symbol"===
b(e.default)?function(a){return"undefined"===typeof a?"undefined":b(a)}:function(d){return d&&"function"===typeof a.default&&d.constructor===a.default&&d!==a.default.prototype?"symbol":"undefined"===typeof d?"undefined":b(d)}}),Na=U(kc),Lj=Q(function(e,c){c.__esModule=!0;var a=kc&&kc.__esModule?kc:{default:kc};c.default=function(b,d){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!==("undefined"===typeof d?"undefined":(0,a.default)(d))&&
"function"!==typeof d?b:d}}),R=U(Lj),Mj=Object.setPrototypeOf||("__proto__"in{}?function(e,c,a){try{a=ta(Function.call,Ld.f(Object.prototype,"__proto__").set,2),a(e,[]),c=!(e instanceof Array)}catch(b){c=!0}return function(b,d){Da(b);if(!Aa(d)&&null!==d)throw TypeError(d+": can't set as prototype!");c?b.__proto__=d:a(b,d);return b}}({},!1):void 0);N(N.S,"Object",{setPrototypeOf:Mj});var Nj=ba.Object.setPrototypeOf,Pg=Q(function(e){e.exports={"default":Nj,__esModule:!0}});U(Pg);N(N.S,"Object",{create:zb});
var Oj=ba.Object,Pj=function(e,c){return Oj.create(e,c)},Qg=Q(function(e){e.exports={"default":Pj,__esModule:!0}}),Qj=U(Qg),Rj=Q(function(e,c){function a(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var b=a(Pg),d=a(Qg),f=a(kc);c.default=function(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof c?"undefined":(0,f.default)(c)));a.prototype=(0,d.default)(c&&c.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});c&&(b.default?(0,b.default)(a,c):a.__proto__=c)}}),S=U(Rj),Sj=ra("toStringTag"),Tj="Arguments"==Qb(function(){return arguments}()),Pd=function(e){var c;if(void 0===e)var a="Undefined";else{if(null===e)var b="Null";else{a:{var d=e=Object(e);try{b=d[Sj];break a}catch(f){}b=void 0}b="string"==typeof(a=b)?a:Tj?Qb(e):"Object"==(c=Qb(e))&&"function"==typeof e.callee?"Arguments":c}a=b}return a},Uj=ra("iterator"),Vj=ba.isIterable=function(e){e=Object(e);return void 0!==e[Uj]||
"@@iterator"in e||cb.hasOwnProperty(Pd(e))},Mc=Q(function(e){e.exports={"default":Vj,__esModule:!0}});U(Mc);var Wj=ra("iterator"),Re=ba.getIteratorMethod=function(e){if(void 0!=e)return e[Wj]||e["@@iterator"]||cb[Pd(e)]},Xj=ba.getIterator=function(e){var c=Re(e);if("function"!=typeof c)throw TypeError(e+" is not iterable!");return Da(c.call(e))},Nc=Q(function(e){e.exports={"default":Xj,__esModule:!0}}),ec=U(Nc),Yj=Q(function(e,c){c.__esModule=!0;var a=Mc&&Mc.__esModule?Mc:{default:Mc},b=Nc&&Nc.__esModule?
Nc:{default:Nc};c.default=function(){return function(d,c){if(Array.isArray(d))return d;if((0,a.default)(Object(d))){var e=[],f=!0,k=!1,l=void 0;try{for(var p=(0,b.default)(d),n;!(f=(n=p.next()).done)&&(e.push(n.value),!c||e.length!==c);f=!0);}catch(m){k=!0,l=m}finally{try{if(!f&&p["return"])p["return"]()}finally{if(k)throw l;}}return e}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}()}),ka=U(Yj),Rg=function(e,c,a,b){try{return b?c(Da(a)[0],a[1]):c(a)}catch(d){throw c=
e["return"],void 0!==c&&Da(c.call(e)),d;}},Sg=ra("iterator"),Tg=Array.prototype,Se=ra("iterator"),Ug=!1;try{[7][Se]()["return"]=function(){Ug=!0}}catch(e){}var Vg=function(e,c){if(!c&&!Ug)return!1;var a=!1;try{c=[7];var b=c[Se]();b.next=function(){return{done:a=!0}};c[Se]=function(){return b};e(c)}catch(d){}return a};N(N.S+N.F*!Vg(function(e){}),"Array",{from:function(e){var c=Object(wb(e)),a="function"==typeof this?this:Array,b=arguments.length,d=1<b?arguments[1]:void 0,f=void 0!==d,g=0,h=Re(c),
k;f&&(d=ta(d,2<b?arguments[2]:void 0,2));if(void 0!=h&&(a!=Array||void 0===h||cb.Array!==h&&Tg[Sg]!==h))for(c=h.call(c),a=new a;!(k=c.next()).done;g++)b=a,h=g,k=f?Rg(c,d,[k.value,g],!0):k.value,h in b?Ma.f(b,h,yb(0,k)):b[h]=k;else for(b=Bd(c.length),a=new a(b);b>g;g++){h=a;k=g;var l=f?d(c[g],g):c[g];k in h?Ma.f(h,k,yb(0,l)):h[k]=l}a.length=g;return a}});var Zj=ba.Array.from,Oc=Q(function(e){e.exports={"default":Zj,__esModule:!0}}),Qd=U(Oc),ak=Q(function(e,c){c.__esModule=!0;var a=Oc&&Oc.__esModule?
Oc:{default:Oc};c.default=function(b){if(Array.isArray(b)){for(var d=0,c=Array(b.length);d<b.length;d++)c[d]=b[d];return c}return(0,a.default)(b)}}),Z=U(ak),bk=Kd.onFreeze;Fd("freeze",function(e){return function(c){return e&&Aa(c)?e(bk(c)):c}});var ck=ba.Object.freeze,dk=Q(function(e){e.exports={"default":ck,__esModule:!0}}),Df=U(dk),Wg=ba.JSON||(ba.JSON={stringify:JSON.stringify}),ek=function(e){return Wg.stringify.apply(Wg,arguments)},fk=Q(function(e){e.exports={"default":ek,__esModule:!0}}),vc=
U(fk),Ua={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,
144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,
216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,
170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],
slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},gk=Ld.f;Fd("getOwnPropertyDescriptor",function(){return function(e,c){return gk(bb(e),c)}});var hk=ba.Object,ik=function(e,c){return hk.getOwnPropertyDescriptor(e,
c)},Pc=Q(function(e){e.exports={"default":ik,__esModule:!0}}),na=U(Pc),Qc=Q(function(e){var c=Array.prototype.concat,a=Array.prototype.slice,b=e.exports=function(b){for(var d=[],e=0,h=b.length;e<h;e++){var k=b[e];var l=(l=k)&&"string"!==typeof l?l instanceof Array||Array.isArray(l)||0<=l.length&&(l.splice instanceof Function||na(l,l.length-1)&&"String"!==l.constructor.name):!1;l?d=c.call(d,a.call(k)):d.push(k)}return d};b.wrap=function(a){return function(){return a(b(arguments))}}}),uc=Q(function(e){function c(a,
b,d){return Math.min(Math.max(b,a),d)}function a(a){a=a.toString(16).toUpperCase();return 2>a.length?"0"+a:a}var b={},d;for(d in Ua)Ua.hasOwnProperty(d)&&(b[Ua[d]]=d);var f=e.exports={to:{},get:{}};f.get=function(a){switch(a.substring(0,3).toLowerCase()){case "hsl":a=f.get.hsl(a);var b="hsl";break;case "hwb":a=f.get.hwb(a);b="hwb";break;default:a=f.get.rgb(a),b="rgb"}return a?{model:b,value:a}:null};f.get.rgb=function(a){if(!a)return null;var b=/^#([a-f0-9]{3,4})$/i,d=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,
e=/^rgba?\(\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,g=/(\D+)/,f=[0,0,0,1],m;if(m=a.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){b=m[2];m=m[1];for(a=0;3>a;a++)d=2*a,f[a]=parseInt(m.slice(d,d+2),16);b&&(f[3]=Math.round(parseInt(b,16)/255*100)/100)}else if(m=a.match(b)){m=m[1];b=m[3];for(a=0;3>a;a++)f[a]=parseInt(m[a]+m[a],16);b&&(f[3]=Math.round(parseInt(b+b,16)/255*100)/100)}else if(m=a.match(d)){for(a=0;3>a;a++)f[a]=parseInt(m[a+1],0);m[4]&&(f[3]=
parseFloat(m[4]))}else if(m=a.match(e)){for(a=0;3>a;a++)f[a]=Math.round(2.55*parseFloat(m[a+1]));m[4]&&(f[3]=parseFloat(m[4]))}else{if(m=a.match(g)){if("transparent"===m[1])return[0,0,0,0];f=Ua[m[1]];if(!f)return null;f[3]=1;return f}return null}for(a=0;3>a;a++)f[a]=c(f[a],0,255);f[3]=c(f[3],0,1);return f};f.get.hsl=function(a){if(!a)return null;var b=a.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(b){var d=parseFloat(b[4]);
a=(parseFloat(b[1])+360)%360;var e=c(parseFloat(b[2]),0,100);b=c(parseFloat(b[3]),0,100);d=c(isNaN(d)?1:d,0,1);return[a,e,b,d]}return null};f.get.hwb=function(a){if(!a)return null;var b=a.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(b){var d=parseFloat(b[4]);a=(parseFloat(b[1])%360+360)%360;var e=c(parseFloat(b[2]),0,100);b=c(parseFloat(b[3]),0,100);d=c(isNaN(d)?1:d,0,1);return[a,e,b,d]}return null};f.to.hex=function(){var b=
Qc(arguments);return"#"+a(b[0])+a(b[1])+a(b[2])+(1>b[3]?a(Math.round(255*b[3])):"")};f.to.rgb=function(){var a=Qc(arguments);return 4>a.length||1===a[3]?"rgb("+Math.round(a[0])+", "+Math.round(a[1])+", "+Math.round(a[2])+")":"rgba("+Math.round(a[0])+", "+Math.round(a[1])+", "+Math.round(a[2])+", "+a[3]+")"};f.to.rgb.percent=function(){var a=Qc(arguments),b=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),c=Math.round(a[2]/255*100);return 4>a.length||1===a[3]?"rgb("+b+"%, "+d+"%, "+c+"%)":"rgba("+
b+"%, "+d+"%, "+c+"%, "+a[3]+")"};f.to.hsl=function(){var a=Qc(arguments);return 4>a.length||1===a[3]?"hsl("+a[0]+", "+a[1]+"%, "+a[2]+"%)":"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+a[3]+")"};f.to.hwb=function(){var a=Qc(arguments),b="";4<=a.length&&1!==a[3]&&(b=", "+a[3]);return"hwb("+a[0]+", "+a[1]+"%, "+a[2]+"%"+b+")"};f.to.keyword=function(a){return b[a.slice(0,3)]}}),Tb=Q(function(e){var c={};for(d in Ua)Ua.hasOwnProperty(d)&&(c[Ua[d]]=d);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,
labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},b;for(b in a)if(a.hasOwnProperty(b)){if(!("channels"in
a[b]))throw Error("missing channels property: "+b);if(!("labels"in a[b]))throw Error("missing channel labels property: "+b);if(a[b].labels.length!==a[b].channels)throw Error("channel and label counts mismatch: "+b);e=a[b].channels;var d=a[b].labels;delete a[b].channels;delete a[b].labels;Object.defineProperty(a[b],"channels",{value:e});Object.defineProperty(a[b],"labels",{value:d})}a.rgb.hsl=function(a){var b=a[0]/255,d=a[1]/255,c=a[2]/255;a=Math.min(b,d,c);var e=Math.max(b,d,c),f=e-a,n;e===a?n=0:
b===e?n=(d-c)/f:d===e?n=2+(c-b)/f:c===e&&(n=4+(b-d)/f);n=Math.min(60*n,360);0>n&&(n+=360);b=(a+e)/2;return[n,100*(e===a?0:.5>=b?f/(e+a):f/(2-e-a)),100*b]};a.rgb.hsv=function(a){var b,d=a[0]/255,c=a[1]/255,e=a[2]/255,f=Math.max(d,c,e);var n=f-Math.min(d,c,e);if(0===n)var m=b=0;else{b=n/f;a=(f-d)/6/n+.5;var q=(f-c)/6/n+.5;n=(f-e)/6/n+.5;d===f?m=n-q:c===f?m=1/3+a-n:e===f&&(m=2/3+q-a);0>m?m+=1:1<m&&--m}return[360*m,100*b,100*f]};a.rgb.hwb=function(b){var d=b[0],c=b[1],e=b[2];b=a.rgb.hsl(b)[0];var f=1/
255*Math.min(d,Math.min(c,e));e=1-1/255*Math.max(d,Math.max(c,e));return[b,100*f,100*e]};a.rgb.cmyk=function(a){var b=a[0]/255,d=a[1]/255;a=a[2]/255;var c=Math.min(1-b,1-d,1-a);return[100*((1-b-c)/(1-c)||0),100*((1-d-c)/(1-c)||0),100*((1-a-c)/(1-c)||0),100*c]};a.rgb.keyword=function(a){var b=c[a];if(b)return b;b=Infinity;var d;for(d in Ua)if(Ua.hasOwnProperty(d)){var e=Ua[d];e=Math.pow(a[0]-e[0],2)+Math.pow(a[1]-e[1],2)+Math.pow(a[2]-e[2],2);if(e<b){b=e;var f=d}}return f};a.keyword.rgb=function(a){return Ua[a]};
a.rgb.xyz=function(a){var b=a[0]/255,d=a[1]/255;a=a[2]/255;b=.04045<b?Math.pow((b+.055)/1.055,2.4):b/12.92;d=.04045<d?Math.pow((d+.055)/1.055,2.4):d/12.92;a=.04045<a?Math.pow((a+.055)/1.055,2.4):a/12.92;return[100*(.4124*b+.3576*d+.1805*a),100*(.2126*b+.7152*d+.0722*a),100*(.0193*b+.1192*d+.9505*a)]};a.rgb.lab=function(b){var d=a.rgb.xyz(b);b=d[0];var c=d[1];d=d[2];b/=95.047;c/=100;d/=108.883;b=.008856<b?Math.pow(b,1/3):7.787*b+16/116;c=.008856<c?Math.pow(c,1/3):7.787*c+16/116;d=.008856<d?Math.pow(d,
1/3):7.787*d+16/116;return[116*c-16,500*(b-c),200*(c-d)]};a.hsl.rgb=function(a){var b=a[0]/360,d=a[1]/100;a=a[2]/100;if(0===d){var c=255*a;return[c,c,c]}d=.5>a?a*(1+d):a+d-a*d;a=2*a-d;var e=[0,0,0];for(var f=0;3>f;f++)c=b+1/3*-(f-1),0>c&&c++,1<c&&c--,c=1>6*c?a+6*(d-a)*c:1>2*c?d:2>3*c?a+(d-a)*(2/3-c)*6:a,e[f]=255*c;return e};a.hsl.hsv=function(a){var b=a[0],d=a[1]/100;a=a[2]/100;var c=d,e=Math.max(a,.01);a*=2;d*=1>=a?a:2-a;c*=1>=e?e:2-e;return[b,100*(0===a?2*c/(e+c):2*d/(a+d)),(a+d)/2*100]};a.hsv.rgb=
function(a){var b=a[0]/60,d=a[1]/100;a=a[2]/100;var c=Math.floor(b)%6,e=b-Math.floor(b);b=255*a*(1-d);var f=255*a*(1-d*e);d=255*a*(1-d*(1-e));a*=255;switch(c){case 0:return[a,d,b];case 1:return[f,a,b];case 2:return[b,a,d];case 3:return[b,f,a];case 4:return[d,b,a];case 5:return[a,b,f]}};a.hsv.hsl=function(a){var b=a[0],d=a[1]/100;a=a[2]/100;var c=Math.max(a,.01);var e=(2-d)*c;c=d*c/(1>=e?e:2-e)||0;return[b,100*c,(2-d)*a/2*100]};a.hwb.rgb=function(a){var b=a[0]/360,d=a[1]/100;a=a[2]/100;var c=d+a;1<
c&&(d/=c,a/=c);c=Math.floor(6*b);a=1-a;b=6*b-c;0!==(c&1)&&(b=1-b);b=d+b*(a-d);switch(c){default:case 6:case 0:c=a;var e=b;break;case 1:c=b;e=a;break;case 2:c=d;e=a;d=b;break;case 3:c=d;e=b;d=a;break;case 4:c=b;e=d;d=a;break;case 5:c=a,e=d,d=b}return[255*c,255*e,255*d]};a.cmyk.rgb=function(a){var b=a[3]/100;return[255*(1-Math.min(1,a[0]/100*(1-b)+b)),255*(1-Math.min(1,a[1]/100*(1-b)+b)),255*(1-Math.min(1,a[2]/100*(1-b)+b))]};a.xyz.rgb=function(a){var b=a[0]/100,d=a[1]/100,c=a[2]/100;a=3.2406*b+-1.5372*
d+-.4986*c;var e=-.9689*b+1.8758*d+.0415*c;b=.0557*b+-.204*d+1.057*c;a=.0031308<a?1.055*Math.pow(a,1/2.4)-.055:12.92*a;e=.0031308<e?1.055*Math.pow(e,1/2.4)-.055:12.92*e;b=.0031308<b?1.055*Math.pow(b,1/2.4)-.055:12.92*b;a=Math.min(Math.max(0,a),1);e=Math.min(Math.max(0,e),1);b=Math.min(Math.max(0,b),1);return[255*a,255*e,255*b]};a.xyz.lab=function(a){var b=a[0],d=a[1];a=a[2];b/=95.047;d/=100;a/=108.883;b=.008856<b?Math.pow(b,1/3):7.787*b+16/116;d=.008856<d?Math.pow(d,1/3):7.787*d+16/116;a=.008856<
a?Math.pow(a,1/3):7.787*a+16/116;return[116*d-16,500*(b-d),200*(d-a)]};a.lab.xyz=function(a){var b=a[1],d=a[2];a=(a[0]+16)/116;b=b/500+a;d=a-d/200;var c=Math.pow(a,3),e=Math.pow(b,3),f=Math.pow(d,3);return[95.047*(.008856<e?e:(b-16/116)/7.787),100*(.008856<c?c:(a-16/116)/7.787),108.883*(.008856<f?f:(d-16/116)/7.787)]};a.lab.lch=function(a){var b=a[0],d=a[1];a=a[2];var c=360*Math.atan2(a,d)/2/Math.PI;0>c&&(c+=360);return[b,Math.sqrt(d*d+a*a),c]};a.lch.lab=function(a){var b=a[0],d=a[1];a=a[2]/360*2*
Math.PI;return[b,d*Math.cos(a),d*Math.sin(a)]};a.rgb.ansi16=function(b){var d=b[0],c=b[1],e=b[2],f=1 in arguments?arguments[1]:a.rgb.hsv(b)[2];f=Math.round(f/50);if(0===f)return 30;d=30+(Math.round(e/255)<<2|Math.round(c/255)<<1|Math.round(d/255));2===f&&(d+=60);return d};a.hsv.ansi16=function(b){return a.rgb.ansi16(a.hsv.rgb(b),b[2])};a.rgb.ansi256=function(a){var b=a[0],d=a[1];a=a[2];return b===d&&d===a?8>b?16:248<b?231:Math.round((b-8)/247*24)+232:16+36*Math.round(b/255*5)+6*Math.round(d/255*5)+
Math.round(a/255*5)};a.ansi16.rgb=function(a){var b=a%10;if(0===b||7===b)return 50<a&&(b+=3.5),b=b/10.5*255,[b,b,b];a=.5*(~~(50<a)+1);return[(b&1)*a*255,(b>>1&1)*a*255,(b>>2&1)*a*255]};a.ansi256.rgb=function(a){if(232<=a){var b=10*(a-232)+8;return[b,b,b]}a-=16;b=Math.floor(a/36)/5*255;var d=Math.floor((a%=36)/6)/5*255;return[b,d,a%6/5*255]};a.rgb.hex=function(a){a=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return"000000".substring(a.length)+
a};a.hex.rgb=function(a){a=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!a)return[0,0,0];var b=a[0];3===a[0].length&&(b=b.split("").map(function(a){return a+a}).join(""));a=parseInt(b,16);return[a>>16&255,a>>8&255,a&255]};a.rgb.hcg=function(a){var b=a[0]/255,d=a[1]/255;a=a[2]/255;var c=Math.max(Math.max(b,d),a),e=Math.min(Math.min(b,d),a),f=c-e;return[(0>=f?0:c===b?(d-a)/f%6:c===d?2+(a-b)/f:(b-d)/f+8)/6%1*360,100*f,100*(1>f?e/(1-f):0)]};a.hsl.hcg=function(a){var b=a[1]/100,d=a[2]/100,c=0;b=
.5>d?2*b*d:2*b*(1-d);1>b&&(c=(d-.5*b)/(1-b));return[a[0],100*b,100*c]};a.hsv.hcg=function(a){var b=a[2]/100,d=a[1]/100*b,c=0;1>d&&(c=(b-d)/(1-d));return[a[0],100*d,100*c]};a.hcg.rgb=function(a){var b=a[1]/100,d=a[2]/100;if(0===b)return[255*d,255*d,255*d];var c=[0,0,0];a=a[0]/360%1*6;var e=a%1,f=1-e;switch(Math.floor(a)){case 0:c[0]=1;c[1]=e;c[2]=0;break;case 1:c[0]=f;c[1]=1;c[2]=0;break;case 2:c[0]=0;c[1]=1;c[2]=e;break;case 3:c[0]=0;c[1]=f;c[2]=1;break;case 4:c[0]=e;c[1]=0;c[2]=1;break;default:c[0]=
1,c[1]=0,c[2]=f}d*=1-b;return[255*(b*c[0]+d),255*(b*c[1]+d),255*(b*c[2]+d)]};a.hcg.hsv=function(a){var b=a[1]/100,d=b+a[2]/100*(1-b),c=0;0<d&&(c=b/d);return[a[0],100*c,100*d]};a.hcg.hsl=function(a){var b=a[1]/100,d=a[2]/100*(1-b)+.5*b,c=0;0<d&&.5>d?c=b/(2*d):.5<=d&&1>d&&(c=b/(2*(1-d)));return[a[0],100*c,100*d]};a.hcg.hwb=function(a){var b=a[1]/100,d=b+a[2]/100*(1-b);return[a[0],100*(d-b),100*(1-d)]};a.hwb.hcg=function(a){var b=1-a[2]/100,d=b-a[1]/100,c=0;1>d&&(c=(b-d)/(1-d));return[a[0],100*d,100*
c]};a.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]};a.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]};a.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]};a.gray.hsl=a.gray.hsv=function(a){return[0,0,a[0]]};a.gray.hwb=function(a){return[0,100,a[0]]};a.gray.cmyk=function(a){return[0,0,0,a[0]]};a.gray.lab=function(a){return[a[0],0,0]};a.gray.hex=function(a){a=Math.round(a[0]/100*255)&255;a=((a<<16)+(a<<8)+a).toString(16).toUpperCase();
return"000000".substring(a.length)+a};a.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]}}),jk=function(e){for(var c={},a=pa(Tb),b=a.length,d=0;d<b;d++)c[a[d]]={distance:-1,parent:null};a=[e];for(c[e].distance=0;a.length;){e=a.pop();b=pa(Tb[e]);d=b.length;for(var f=0;f<d;f++){var g=b[f],h=c[g];-1===h.distance&&(h.distance=c[e].distance+1,h.parent=e,a.unshift(g))}}a={};e=pa(c);b=e.length;for(d=0;d<b;d++){var k=e[d];if(null!==c[k].parent){f=k;g=c;h=[g[k].parent,k];var l=Tb[g[k].parent][k];for(k=
g[k].parent;g[k].parent;)h.unshift(g[k].parent),l=rb(Tb[g[k].parent][k],l),k=g[k].parent;l.conversion=h;a[f]=l}}return a},lc={};pa(Tb).forEach(function(e){lc[e]={};Object.defineProperty(lc[e],"channels",{value:Tb[e].channels});Object.defineProperty(lc[e],"labels",{value:Tb[e].labels});var c=jk(e);pa(c).forEach(function(a){var b=c[a];lc[e][a]=Ja(b);lc[e][a].raw=Lb(b)})});var Ka=lc,de=[].slice,Cf=["keyword","gray","hex"],fe={};pa(Ka).forEach(function(e){fe[de.call(Ka[e].labels).sort().join("")]=e});
var kd={};ia.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var c=this.model in uc.to?this:this.rgb();c=c.round("number"===typeof e?e:1);e=1===c.valpha?c.color:c.color.concat(this.valpha);return uc.to[c.model](e)},percentString:function(e){e=this.rgb().round("number"===typeof e?e:1);e=1===e.valpha?e.color:e.color.concat(this.valpha);return uc.to.rgb.percent(e)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},
object:function(){for(var e={},c=Ka[this.model].channels,a=Ka[this.model].labels,b=0;b<c;b++)e[a[b]]=this.color[b];1!==this.valpha&&(e.alpha=this.valpha);return e},unitArray:function(){var e=this.rgb().color;e[0]/=255;e[1]/=255;e[2]/=255;1!==this.valpha&&e.push(this.valpha);return e},unitObject:function(){var e=this.rgb().object();e.r/=255;e.g/=255;e.b/=255;1!==this.valpha&&(e.alpha=this.valpha);return e},round:function(e){e=Math.max(e||0,0);return new ia(this.color.map(jd(e)).concat(this.valpha),
this.model)},alpha:function(e){return arguments.length?new ia(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:ea("rgb",0,qa(255)),green:ea("rgb",1,qa(255)),blue:ea("rgb",2,qa(255)),hue:ea(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:ea("hsl",1,qa(100)),lightness:ea("hsl",2,qa(100)),saturationv:ea("hsv",1,qa(100)),value:ea("hsv",2,qa(100)),chroma:ea("hcg",1,qa(100)),gray:ea("hcg",2,qa(100)),white:ea("hwb",1,qa(100)),wblack:ea("hwb",2,qa(100)),
cyan:ea("cmyk",0,qa(100)),magenta:ea("cmyk",1,qa(100)),yellow:ea("cmyk",2,qa(100)),black:ea("cmyk",3,qa(100)),x:ea("xyz",0,qa(100)),y:ea("xyz",1,qa(100)),z:ea("xyz",2,qa(100)),l:ea("lab",0,qa(100)),a:ea("lab",1),b:ea("lab",2),keyword:function(e){return arguments.length?new ia(e):Ka[this.model].keyword(this.color)},hex:function(e){return arguments.length?new ia(e):uc.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=
this.rgb().color,c=[],a=0;a<e.length;a++){var b=e[a]/255;c[a]=.03928>=b?b/12.92:Math.pow((b+.055)/1.055,2.4)}return.2126*c[0]+.7152*c[1]+.0722*c[2]},contrast:function(e){var c=this.luminosity();e=e.luminosity();return c>e?(c+.05)/(e+.05):(e+.05)/(c+.05)},level:function(e){e=this.contrast(e);return 7.1<=e?"AAA":4.5<=e?"AA":""},isDark:function(){var e=this.rgb().color;return 128>(299*e[0]+587*e[1]+114*e[2])/1E3},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),c=0;3>c;c++)e.color[c]=
255-e.color[c];return e},lighten:function(e){var c=this.hsl();c.color[2]+=c.color[2]*e;return c},darken:function(e){var c=this.hsl();c.color[2]-=c.color[2]*e;return c},saturate:function(e){var c=this.hsl();c.color[1]+=c.color[1]*e;return c},desaturate:function(e){var c=this.hsl();c.color[1]-=c.color[1]*e;return c},whiten:function(e){var c=this.hwb();c.color[1]+=c.color[1]*e;return c},blacken:function(e){var c=this.hwb();c.color[2]+=c.color[2]*e;return c},grayscale:function(){var e=this.rgb().color;
e=.3*e[0]+.59*e[1]+.11*e[2];return ia.rgb(e,e,e)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var c=this.hsl(),a=c.color[0];a=(a+e)%360;c.color[0]=0>a?360+a:a;return c},mix:function(e,c){if(!e||!e.rgb)throw Error('Argument to "mix" was not a Color instance, but rather an instance of '+("undefined"===typeof e?"undefined":Na(e)));e=e.rgb();var a=this.rgb();c=void 0===c?.5:c;var b=2*c-1,d=e.alpha()-
a.alpha();b=((-1===b*d?b:(b+d)/(1+b*d))+1)/2;d=1-b;return ia.rgb(b*e.red()+d*a.red(),b*e.green()+d*a.green(),b*e.blue()+d*a.blue(),e.alpha()*c+a.alpha()*(1-c))}};pa(Ka).forEach(function(e){if(-1===Cf.indexOf(e)){var c=Ka[e].channels;ia.prototype[e]=function(){if(this.model===e)return new ia(this);if(arguments.length)return new ia(arguments,e);var a="number"===typeof arguments[c]?c:this.valpha;var b=Ka[this.model][e].raw(this.color);b=Array.isArray(b)?b:[b];return new ia(b.concat(a),e)};ia[e]=function(a){"number"===
typeof a&&(a=ee(de.call(arguments),c));return new ia(a,e)}}});je(La.prototype,{equals:function(e){return this.lat===e.lat&&this.lng===e.lng},clone:function(){return new La(this.lat,this.lng)},getLngSpan:function(e){e=Math.abs(e-this.lng);180<e&&(e=360-e);return e},sub:function(e){return new La(this.lat-e.lat,this.lng-e.lng)},toString:function(){return"Point"}});je(Ca,{EARTHRADIUS:6370996.81,MCBAND:[1.289059486E7,8362377.87,5591021,3481989.83,1678043.12,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1.410526172116255E-8,
8.98305509648872E-6,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,1.73379812E7],[-7.435856389565537E-9,8.983055097726239E-6,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1.026014486E7],[-3.030883460898826E-8,8.98305509983578E-6,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,
6856817.37],[-1.981981304930552E-8,8.983055099779535E-6,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437E-9,8.983055096812155E-6,6.995724062E-5,23.10934304144901,-2.3663490511E-4,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878E-9,8.983055095805407E-6,-3.068298E-8,7.47137025468032,-3.53937994E-6,-.02145144861037,-1.234426596E-5,1.0322952773E-4,-3.23890364E-6,
826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[8.277824516172526E-4,111320.7020463578,6.477955746671607E8,-4.082003173641316E9,1.077490566351142E10,-1.517187553151559E10,1.205306533862167E10,-5.124939663577472E9,9.133119359512032E8,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-2.339375119931662E7,7.968221547186455E7,-1.159649932797253E8,9.723671115602145E7,
-4.366194633752821E7,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-3.441963504368392E-4,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-3.218135878613132E-4,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,
8.77738589078284,.37238884252424,7.45]],getDistanceByMC:function(e,c){if(!e||!c)return 0;e=this.convertMC2LL(e);if(!e)return 0;var a=this.toRadians(e.lng);e=this.toRadians(e.lat);c=this.convertMC2LL(c);if(!c)return 0;var b=this.toRadians(c.lng);c=this.toRadians(c.lat);return this.getDistance(a,b,e,c)},getDistanceByLL:function(e,c){if(!e||!c)return 0;e.lng=this.getLoop(e.lng,-180,180);e.lat=this.getRange(e.lat,-74,74);c.lng=this.getLoop(c.lng,-180,180);c.lat=this.getRange(c.lat,-74,74);var a=this.toRadians(e.lng);
var b=this.toRadians(e.lat);e=this.toRadians(c.lng);c=this.toRadians(c.lat);return this.getDistance(a,e,b,c)},convertMC2LL:function(e){if(null===e||void 0===e)return new La(0,0);if(180>e.lng&&-180<e.lng&&90>e.lat&&-90<e.lat)return e;var c=new La(Math.abs(e.lng),Math.abs(e.lat));for(var a=0;a<this.MCBAND.length;a++)if(c.lat>=this.MCBAND[a]){var b=this.MC2LL[a];break}e=this.convertor(e,b);return e=new La(e.lng.toFixed(6),e.lat.toFixed(6))},convertLL2MC:function(e){if(null===e||void 0===e)return new La(0,
0);if(180<e.lng||-180>e.lng||90<e.lat||-90>e.lat)return e;e.lng=this.getLoop(e.lng,-180,180);e.lat=this.getRange(e.lat,-74,74);var c=new La(e.lng,e.lat);for(var a=0;a<this.LLBAND.length;a++)if(c.lat>=this.LLBAND[a]){var b=this.LL2MC[a];break}if(!b)for(a=0;a<this.LLBAND.length;a++)if(c.lat<=-this.LLBAND[a]){b=this.LL2MC[a];break}e=this.convertor(e,b);return e=new La(Number(e.lng.toFixed(2)),Number(e.lat.toFixed(2)))},convertor:function(e,c){if(e&&c){var a=c[0]+c[1]*Math.abs(e.lng),b=Math.abs(e.lat)/
c[9];c=c[2]+c[3]*b+c[4]*b*b+c[5]*b*b*b+c[6]*b*b*b*b+c[7]*b*b*b*b*b+c[8]*b*b*b*b*b*b;a*=0>e.lng?-1:1;c*=0>e.lat?-1:1;return new La(a,c)}},getDistance:function(e,c,a,b){return this.EARTHRADIUS*Math.acos(Math.sin(a)*Math.sin(b)+Math.cos(a)*Math.cos(b)*Math.cos(c-e))},toRadians:function(e){return Math.PI*e/180},toDegrees:function(e){return 180*e/Math.PI},getRange:function(e,c,a){null!=c&&(e=Math.max(e,c));null!=a&&(e=Math.min(e,a));return e},getLoop:function(e,c,a){for(;e>a;)e-=a-c;for(;e<c;)e+=a-c;return e}});
je(Ca.prototype,{lngLatToMercator:function(e){return Ca.convertLL2MC(e)},lngLatToPoint:function(e){e=Ca.convertLL2MC(e);return new Ef(e.lng,e.lat)},mercatorToLngLat:function(e){return Ca.convertMC2LL(e)},pointToLngLat:function(e){e=new La(e.x,e.y);return Ca.convertMC2LL(e)},pointToPixel:function(e,c,a,b,d){if(e)return e=this.lngLatToMercator(e,d),c=this.getZoomUnits(c),new Ef(Math.round((e.lng-a.lng)/c+b.width/2),Math.round((a.lat-e.lat)/c+b.height/2))},pixelToPoint:function(e,c,a,b,d){if(e)return c=
this.getZoomUnits(c),e=new La(a.lng+c*(e.x-b.width/2),a.lat-c*(e.y-b.height/2)),this.mercatorToLngLat(e,d)},getZoomUnits:function(e){return Math.pow(2,18-e)}});za.prototype.setMax=function(e){this.max=e||100};za.prototype.setMin=function(e){this.min=e||0};za.prototype.setMaxSize=function(e){this.maxSize=e||35};za.prototype.setMinSize=function(e){this.minSize=e||0};za.prototype.initPalette=function(){var e=this.gradient,c=this.paletteCtx=(new ke(256,1)).getContext("2d"),a=c.createLinearGradient(0,
0,256,1);pa(e).forEach(function(b){a.addColorStop(parseFloat(b),e[b])});c.fillStyle=a;c.fillRect(0,0,256,1);c.imageData=c.getImageData(0,0,256,1).data};za.prototype.getColor=function(e){e=this.getImageData(e);return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]/256+")"};za.prototype.getImageData=function(e){var c=this.paletteCtx.imageData;if(void 0===e)return c;var a=this.max,b=this.min;e>a&&(e=a);e<b&&(e=b);e=4*Math.floor((e-b)/(a-b)*255);return[c[e],c[e+1],c[e+2],c[e+3]]};za.prototype.getSize=function(e){var c=
this.max,a=this.min,b=this.maxSize,d=this.minSize;e>c&&(e=c);e<a&&(e=a);return d+(e-a)/(c-a)*(b-d)};hb.prototype._initialize=function(){this.v0=this._normalizaCoord(this.options.start);this.v3=this._normalizaCoord(this.options.end);this.v1=this._getControlPoint(this.v0,this.v3,4);this.v2=this._getControlPoint(this.v3,this.v0,5);this.v0[2]||(this.v0[2]=0);this.v3[2]||(this.v3[2]=0)};hb.prototype.setOptions=function(e){this.options=e||{};this._initialize()};hb.prototype.getPoints=function(e){void 0===
e&&(e=20);for(var c=[],a=0;a<=e;a++)c.push(this._getPoint(a/e));return c};hb.prototype._normalizaCoord=function(e){if(!e)return[];e=Ca.convertLL2MC({lng:Number(e[0]),lat:Number(e[1])});return[e.lng,e.lat]};hb.prototype._getControlPoint=function(e,c){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return[].concat(Z(this._getQuarter(e,c)),[this._getDistance(e,c)/a])};hb.prototype._getQuarter=function(e,c){return[(3*e[0]+c[0])/4,(3*e[1]+c[1])/4]};hb.prototype._getDistance=function(e,c){return Math.sqrt(Math.pow(e[0]-
c[0],2)+Math.pow(e[1]-c[1],2))};hb.prototype._getPoint=function(e){var c=[],a=this.v0,b=this.v1,d=this.v2,f=this.v3;c.push(le(e,a[0],b[0],d[0],f[0]),le(e,a[1],b[1],d[1],f[1]),le(e,a[2],b[2],d[2],f[2]));return c};sb.prototype._initialize=function(){this.points=this.options.points||this.options.point||[];this.greatCirclePoints=[];for(var e=[],c=0;c<this.points.length;c++){var a=this._normalizaCoord(this.points[c]);a&&e.push(a)}this.points=e};sb.prototype.setOptions=function(e){this.options=e||{};this._initialize()};
sb.prototype.getPoints=function(){if(0===this.greatCirclePoints.length)for(var e=0;e<this.points.length-1;e++)this._calcGreatCirclePoints(this.points[e],this.points[e+1]);return this.greatCirclePoints};sb.prototype._normalizaCoord=function(e){if(!e)return null;e instanceof Array&&(e={lng:Number(e[0]),lat:Number(e[1])});var c=Ca.convertLL2MC(e);e=Ca.convertMC2LL(e);c.latLng=e;return c};sb.prototype._calcGreatCirclePoints=function(e,c){var a=e.latLng,b=c.latLng;if(!ie(a.lng,b.lng)||!ie(a.lat,b.lat)){var d=
Ca.getDistance(wa(a.lng),wa(a.lat),wa(b.lng),wa(b.lat));if(!(25E4>d)){d=Math.round(d/15E4);var f=this._calcAngularDistance(a,b);this.greatCirclePoints.push([e.lng,e.lat]);for(var g=0;g<d;g++){var h=this._calcMiddlePoint(a,b,g/d,f);h=Ca.convertLL2MC(h);var k=Ff(h,e);30037726<k&&(h.lng=h.lng<e.lng?h.lng+this.WORLD_SIZE_MC:h.lng-this.WORLD_SIZE_MC);this.greatCirclePoints.push([h.lng,h.lat]);e=h}k=Ff(c,e);30037726<k&&(c.lng=c.lng<e.lng?c.lng+this.WORLD_SIZE_MC:c.lng-this.WORLD_SIZE_MC);this.greatCirclePoints.push([c.lng,
c.lat])}}};sb.prototype._calcAngularDistance=function(e,c){var a=wa(e.lat),b=wa(c.lat);e=wa(e.lng);c=wa(c.lng);return Math.acos(Math.sin(a)*Math.sin(b)+Math.cos(a)*Math.cos(b)*Math.cos(Math.abs(c-e)))};sb.prototype._calcMiddlePoint=function(e,c,a,b){var d=c.lat,f=e.lng;c=c.lng;e=wa(e.lat);d=wa(d);f=wa(f);var g=wa(c);c=Math.sin((1-a)*b)/Math.sin(b);b=Math.sin(a*b)/Math.sin(b);a=c*Math.cos(e)*Math.cos(f)+b*Math.cos(d)*Math.cos(g);f=c*Math.cos(e)*Math.sin(f)+b*Math.cos(d)*Math.sin(g);e=Math.atan2(c*
Math.sin(e)+b*Math.sin(d),Math.sqrt(Math.pow(a,2)+Math.pow(f,2)));return new La(ge(Math.atan2(f,a)),ge(e))};var kk=function(){function e(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};L(this,e);this.options=c;this._initialize()}M(e,[{key:"_initialize",value:function(){this.points=this.options.points}},{key:"_normalizaCoord",value:function(c){if(!c)return null;c instanceof Array&&(c={lng:Number(c[0]),lat:Number(c[1])});return Ca.convertLL2MC(c)}},{key:"setOptions",value:function(){this.options=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._initialize()}},{key:"getPoints",value:function(c){for(var a=[],b=this.points,d=0;d<b.length-1;d++){var e=this.getCurveByTwoPoints(this._normalizaCoord(b[d]),this._normalizaCoord(b[d+1]),c);e&&0<e.length&&(a=a.concat(e))}return a}},{key:"getCurveByTwoPoints",value:function(c,a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:20;if(!c||!a)return null;var d=[],e=0;if(void 0===("undefined"===typeof a?"undefined":Na(a)))"undefined"===
typeof d||Na(d);else{var g=parseFloat(c.lat),h=parseFloat(a.lat),k=parseFloat(c.lng),l=parseFloat(a.lng);l>k&&180<parseFloat(l-k)&&0>k&&(k=parseFloat(360+k),l=parseFloat(360+l));var p=0;if(h===g){var n=0;var m=k-l}else l===k?(n=Math.PI/2,m=g-h):(n=Math.atan((h-g)/(l-k)),m=(h-g)/Math.sin(n));0===p&&(p=n+Math.PI/5);m/=2;n=m*Math.cos(p)+k;p=m*Math.sin(p)+g;for(m=0;m<b+1;m++){var q=k*(1-2*e+e*e)+n*(2*e-2*e*e)+l*e*e,r=a.lng;d.push([0>c.lng&&0<r?q-360:q,g*(1-2*e+e*e)+p*(2*e-2*e*e)+h*e*e]);e+=1/b}return d}}}]);
return e}(),Te=[{n:"\u5317\u4eac",g:"116.395645,39.929986|12"},{n:"\u4e0a\u6d77",g:"121.487899,31.249162|12"},{n:"\u5929\u6d25",g:"117.210813,39.14393|12"},{n:"\u91cd\u5e86",g:"106.530635,29.544606|12"}],Ub=[{n:"\u5b89\u5fbd",g:"117.216005,31.859252|8",cities:[{n:"\u5408\u80a5",g:"117.282699,31.866942|12"},{n:"\u5b89\u5e86",g:"117.058739,30.537898|13"},{n:"\u868c\u57e0",g:"117.35708,32.929499|13"},{n:"\u4eb3\u5dde",g:"115.787928,33.871211|13"},{n:"\u5de2\u6e56",g:"117.88049,31.608733|13"},{n:"\u6c60\u5dde",
g:"117.494477,30.660019|14"},{n:"\u6ec1\u5dde",g:"118.32457,32.317351|13"},{n:"\u961c\u9633",g:"115.820932,32.901211|13"},{n:"\u6dee\u5317",g:"116.791447,33.960023|13"},{n:"\u6dee\u5357",g:"117.018639,32.642812|13"},{n:"\u9ec4\u5c71",g:"118.29357,29.734435|13"},{n:"\u516d\u5b89",g:"116.505253,31.755558|13"},{n:"\u9a6c\u978d\u5c71",g:"118.515882,31.688528|13"},{n:"\u5bbf\u5dde",g:"116.988692,33.636772|13"},{n:"\u94dc\u9675",g:"117.819429,30.94093|14"},{n:"\u829c\u6e56",g:"118.384108,31.36602|12"},
{n:"\u5ba3\u57ce",g:"118.752096,30.951642|13"}]},{n:"\u798f\u5efa",g:"117.984943,26.050118|8",cities:[{n:"\u798f\u5dde",g:"119.330221,26.047125|12"},{n:"\u9f99\u5ca9",g:"117.017997,25.078685|13"},{n:"\u5357\u5e73",g:"118.181883,26.643626|13"},{n:"\u5b81\u5fb7",g:"119.542082,26.656527|14"},{n:"\u8386\u7530",g:"119.077731,25.44845|13"},{n:"\u6cc9\u5dde",g:"118.600362,24.901652|12"},{n:"\u4e09\u660e",g:"117.642194,26.270835|14"},{n:"\u53a6\u95e8",g:"118.103886,24.489231|12"},{n:"\u6f33\u5dde",g:"117.676205,24.517065|12"}]},
{n:"\u7518\u8083",g:"102.457625,38.103267|6",cities:[{n:"\u5170\u5dde",g:"103.823305,36.064226|12"},{n:"\u767d\u94f6",g:"104.171241,36.546682|13"},{n:"\u5b9a\u897f",g:"104.626638,35.586056|13"},{n:"\u7518\u5357\u5dde",g:"102.917442,34.992211|14"},{n:"\u5609\u5cea\u5173",g:"98.281635,39.802397|13"},{n:"\u91d1\u660c",g:"102.208126,38.516072|13"},{n:"\u9152\u6cc9",g:"98.508415,39.741474|13"},{n:"\u4e34\u590f\u5dde",g:"103.215249,35.598514|13"},{n:"\u9647\u5357",g:"104.934573,33.39448|14"},{n:"\u5e73\u51c9",
g:"106.688911,35.55011|13"},{n:"\u5e86\u9633",g:"107.644227,35.726801|13"},{n:"\u5929\u6c34",g:"105.736932,34.584319|13"},{n:"\u6b66\u5a01",g:"102.640147,37.933172|13"},{n:"\u5f20\u6396",g:"100.459892,38.93932|13"}]},{n:"\u5e7f\u4e1c",g:"113.394818,23.408004|8",cities:[{n:"\u5e7f\u5dde",g:"113.30765,23.120049|12"},{n:"\u6f6e\u5dde",g:"116.630076,23.661812|13"},{n:"\u4e1c\u839e",g:"113.763434,23.043024|12"},{n:"\u4f5b\u5c71",g:"113.134026,23.035095|13"},{n:"\u6cb3\u6e90",g:"114.713721,23.757251|12"},
{n:"\u60e0\u5dde",g:"114.410658,23.11354|12"},{n:"\u6c5f\u95e8",g:"113.078125,22.575117|13"},{n:"\u63ed\u9633",g:"116.379501,23.547999|13"},{n:"\u8302\u540d",g:"110.931245,21.668226|13"},{n:"\u6885\u5dde",g:"116.126403,24.304571|13"},{n:"\u6e05\u8fdc",g:"113.040773,23.698469|13"},{n:"\u6c55\u5934",g:"116.72865,23.383908|13"},{n:"\u6c55\u5c3e",g:"115.372924,22.778731|14"},{n:"\u97f6\u5173",g:"113.594461,24.80296|13"},{n:"\u6df1\u5733",g:"114.025974,22.546054|12"},{n:"\u9633\u6c5f",g:"111.97701,21.871517|14"},
{n:"\u4e91\u6d6e",g:"112.050946,22.937976|13"},{n:"\u6e5b\u6c5f",g:"110.365067,21.257463|13"},{n:"\u8087\u5e86",g:"112.479653,23.078663|13"},{n:"\u4e2d\u5c71",g:"113.42206,22.545178|12"},{n:"\u73e0\u6d77",g:"113.562447,22.256915|13"}]},{n:"\u5e7f\u897f",g:"108.924274,23.552255|7",cities:[{n:"\u5357\u5b81",g:"108.297234,22.806493|12"},{n:"\u767e\u8272",g:"106.631821,23.901512|13"},{n:"\u5317\u6d77",g:"109.122628,21.472718|13"},{n:"\u5d07\u5de6",g:"107.357322,22.415455|14"},{n:"\u9632\u57ce\u6e2f",
g:"108.351791,21.617398|15"},{n:"\u6842\u6797",g:"110.26092,25.262901|12"},{n:"\u8d35\u6e2f",g:"109.613708,23.103373|13"},{n:"\u6cb3\u6c60",g:"108.069948,24.699521|14"},{n:"\u8d3a\u5dde",g:"111.552594,24.411054|14"},{n:"\u6765\u5bbe",g:"109.231817,23.741166|14"},{n:"\u67f3\u5dde",g:"109.422402,24.329053|12"},{n:"\u94a6\u5dde",g:"108.638798,21.97335|13"},{n:"\u68a7\u5dde",g:"111.305472,23.485395|13"},{n:"\u7389\u6797",g:"110.151676,22.643974|14"}]},{n:"\u8d35\u5dde",g:"106.734996,26.902826|8",cities:[{n:"\u8d35\u9633",
g:"106.709177,26.629907|12"},{n:"\u5b89\u987a",g:"105.92827,26.228595|13"},{n:"\u6bd5\u8282\u5730\u533a",g:"105.300492,27.302612|14"},{n:"\u516d\u76d8\u6c34",g:"104.852087,26.591866|13"},{n:"\u94dc\u4ec1\u5730\u533a",g:"109.196161,27.726271|14"},{n:"\u9075\u4e49",g:"106.93126,27.699961|13"},{n:"\u9ed4\u897f\u5357\u5dde",g:"104.900558,25.095148|11"},{n:"\u9ed4\u4e1c\u5357\u5dde",g:"107.985353,26.583992|11"},{n:"\u9ed4\u5357\u5dde",g:"107.523205,26.264536|11"}]},{n:"\u6d77\u5357",g:"109.733755,19.180501|9",
cities:[{n:"\u6d77\u53e3",g:"110.330802,20.022071|13"},{n:"\u767d\u6c99",g:"109.358586,19.216056|12"},{n:"\u4fdd\u4ead",g:"109.656113,18.597592|12"},{n:"\u660c\u6c5f",g:"109.0113,19.222483|12"},{n:"\u510b\u5dde",g:"109.413973,19.571153|13"},{n:"\u6f84\u8fc8",g:"109.996736,19.693135|13"},{n:"\u4e1c\u65b9",g:"108.85101,18.998161|13"},{n:"\u5b9a\u5b89",g:"110.32009,19.490991|13"},{n:"\u743c\u6d77",g:"110.414359,19.21483|13"},{n:"\u743c\u4e2d",g:"109.861849,19.039771|12"},{n:"\u4e50\u4e1c",g:"109.062698,18.658614|12"},
{n:"\u4e34\u9ad8",g:"109.724101,19.805922|13"},{n:"\u9675\u6c34",g:"109.948661,18.575985|12"},{n:"\u4e09\u4e9a",g:"109.522771,18.257776|12"},{n:"\u5c6f\u660c",g:"110.063364,19.347749|13"},{n:"\u4e07\u5b81",g:"110.292505,18.839886|13"},{n:"\u6587\u660c",g:"110.780909,19.750947|13"},{n:"\u4e94\u6307\u5c71",g:"109.51775,18.831306|13"}]},{n:"\u6cb3\u5317",g:"115.661434,38.61384|7",cities:[{n:"\u77f3\u5bb6\u5e84",g:"114.522082,38.048958|12"},{n:"\u4fdd\u5b9a",g:"115.49481,38.886565|13"},{n:"\u6ca7\u5dde",
g:"116.863806,38.297615|13"},{n:"\u627f\u5fb7",g:"117.933822,40.992521|14"},{n:"\u90af\u90f8",g:"114.482694,36.609308|13"},{n:"\u8861\u6c34",g:"115.686229,37.746929|13"},{n:"\u5eca\u574a",g:"116.703602,39.518611|13"},{n:"\u79e6\u7687\u5c9b",g:"119.604368,39.945462|12"},{n:"\u5510\u5c71",g:"118.183451,39.650531|13"},{n:"\u90a2\u53f0",g:"114.520487,37.069531|13"},{n:"\u5f20\u5bb6\u53e3",g:"114.893782,40.811188|13"}]},{n:"\u6cb3\u5357",g:"113.486804,34.157184|7",cities:[{n:"\u90d1\u5dde",g:"113.649644,34.75661|12"},
{n:"\u5b89\u9633",g:"114.351807,36.110267|12"},{n:"\u9e64\u58c1",g:"114.29777,35.755426|13"},{n:"\u7126\u4f5c",g:"113.211836,35.234608|13"},{n:"\u5f00\u5c01",g:"114.351642,34.801854|13"},{n:"\u6d1b\u9633",g:"112.447525,34.657368|12"},{n:"\u6f2f\u6cb3",g:"114.046061,33.576279|13"},{n:"\u5357\u9633",g:"112.542842,33.01142|13"},{n:"\u5e73\u9876\u5c71",g:"113.300849,33.745301|13"},{n:"\u6fee\u9633",g:"115.026627,35.753298|12"},{n:"\u4e09\u95e8\u5ce1",g:"111.181262,34.78332|13"},{n:"\u5546\u4e18",g:"115.641886,34.438589|13"},
{n:"\u65b0\u4e61",g:"113.91269,35.307258|13"},{n:"\u4fe1\u9633",g:"114.085491,32.128582|13"},{n:"\u8bb8\u660c",g:"113.835312,34.02674|13"},{n:"\u5468\u53e3",g:"114.654102,33.623741|13"},{n:"\u9a7b\u9a6c\u5e97",g:"114.049154,32.983158|13"}]},{n:"\u9ed1\u9f99\u6c5f",g:"128.047414,47.356592|6",cities:[{n:"\u54c8\u5c14\u6ee8",g:"126.657717,45.773225|12"},{n:"\u5927\u5e86",g:"125.02184,46.596709|12"},{n:"\u5927\u5174\u5b89\u5cad\u5730\u533a",g:"124.196104,51.991789|10"},{n:"\u9e64\u5c97",g:"130.292472,47.338666|13"},
{n:"\u9ed1\u6cb3",g:"127.50083,50.25069|14"},{n:"\u9e21\u897f",g:"130.941767,45.32154|13"},{n:"\u4f73\u6728\u65af",g:"130.284735,46.81378|12"},{n:"\u7261\u4e39\u6c5f",g:"129.608035,44.588521|13"},{n:"\u4e03\u53f0\u6cb3",g:"131.019048,45.775005|14"},{n:"\u9f50\u9f50\u54c8\u5c14",g:"123.987289,47.3477|13"},{n:"\u53cc\u9e2d\u5c71",g:"131.171402,46.655102|13"},{n:"\u7ee5\u5316",g:"126.989095,46.646064|13"},{n:"\u4f0a\u6625",g:"128.910766,47.734685|14"}]},{n:"\u6e56\u5317",g:"112.410562,31.209316|8",cities:[{n:"\u6b66\u6c49",
g:"114.3162,30.581084|12"},{n:"\u9102\u5dde",g:"114.895594,30.384439|14"},{n:"\u6069\u65bd",g:"109.517433,30.308978|14"},{n:"\u9ec4\u5188",g:"114.906618,30.446109|14"},{n:"\u9ec4\u77f3",g:"115.050683,30.216127|13"},{n:"\u8346\u95e8",g:"112.21733,31.042611|13"},{n:"\u8346\u5dde",g:"112.241866,30.332591|12"},{n:"\u6f5c\u6c5f",g:"112.768768,30.343116|13"},{n:"\u795e\u519c\u67b6\u6797\u533a",g:"110.487231,31.595768|13"},{n:"\u5341\u5830",g:"110.801229,32.636994|13"},{n:"\u968f\u5dde",g:"113.379358,31.717858|13"},
{n:"\u5929\u95e8",g:"113.12623,30.649047|13"},{n:"\u4ed9\u6843",g:"113.387448,30.293966|13"},{n:"\u54b8\u5b81",g:"114.300061,29.880657|13"},{n:"\u8944\u9633",g:"112.176326,32.094934|12"},{n:"\u5b5d\u611f",g:"113.935734,30.927955|13"},{n:"\u5b9c\u660c",g:"111.310981,30.732758|13"}]},{n:"\u6e56\u5357",g:"111.720664,27.695864|7",cities:[{n:"\u957f\u6c99",g:"112.979353,28.213478|12"},{n:"\u5e38\u5fb7",g:"111.653718,29.012149|12"},{n:"\u90f4\u5dde",g:"113.037704,25.782264|13"},{n:"\u8861\u9633",g:"112.583819,26.898164|13"},
{n:"\u6000\u5316",g:"109.986959,27.557483|13"},{n:"\u5a04\u5e95",g:"111.996396,27.741073|13"},{n:"\u90b5\u9633",g:"111.461525,27.236811|13"},{n:"\u6e58\u6f6d",g:"112.935556,27.835095|13"},{n:"\u6e58\u897f\u5dde",g:"109.745746,28.317951|14"},{n:"\u76ca\u9633",g:"112.366547,28.588088|13"},{n:"\u6c38\u5dde",g:"111.614648,26.435972|13"},{n:"\u5cb3\u9633",g:"113.146196,29.378007|13"},{n:"\u5f20\u5bb6\u754c",g:"110.48162,29.124889|13"},{n:"\u682a\u6d32",g:"113.131695,27.827433|13"}]},{n:"\u6c5f\u82cf",
g:"119.368489,33.013797|8",cities:[{n:"\u5357\u4eac",g:"118.778074,32.057236|12"},{n:"\u5e38\u5dde",g:"119.981861,31.771397|12"},{n:"\u6dee\u5b89",g:"119.030186,33.606513|12"},{n:"\u8fde\u4e91\u6e2f",g:"119.173872,34.601549|12"},{n:"\u5357\u901a",g:"120.873801,32.014665|12"},{n:"\u82cf\u5dde",g:"120.619907,31.317987|12"},{n:"\u5bbf\u8fc1",g:"118.296893,33.95205|13"},{n:"\u6cf0\u5dde",g:"119.919606,32.476053|13"},{n:"\u65e0\u9521",g:"120.305456,31.570037|12"},{n:"\u5f90\u5dde",g:"117.188107,34.271553|12"},
{n:"\u76d0\u57ce",g:"120.148872,33.379862|12"},{n:"\u626c\u5dde",g:"119.427778,32.408505|13"},{n:"\u9547\u6c5f",g:"119.455835,32.204409|13"}]},{n:"\u6c5f\u897f",g:"115.676082,27.757258|7",cities:[{n:"\u5357\u660c",g:"115.893528,28.689578|12"},{n:"\u629a\u5dde",g:"116.360919,27.954545|13"},{n:"\u8d63\u5dde",g:"114.935909,25.845296|13"},{n:"\u5409\u5b89",g:"114.992039,27.113848|13"},{n:"\u666f\u5fb7\u9547",g:"117.186523,29.303563|12"},{n:"\u4e5d\u6c5f",g:"115.999848,29.71964|13"},{n:"\u840d\u4e61",
g:"113.859917,27.639544|13"},{n:"\u4e0a\u9976",g:"117.955464,28.457623|13"},{n:"\u65b0\u4f59",g:"114.947117,27.822322|13"},{n:"\u5b9c\u6625",g:"114.400039,27.81113|13"},{n:"\u9e70\u6f6d",g:"117.03545,28.24131|13"}]},{n:"\u5409\u6797",g:"126.262876,43.678846|7",cities:[{n:"\u957f\u6625",g:"125.313642,43.898338|12"},{n:"\u767d\u57ce",g:"122.840777,45.621086|13"},{n:"\u767d\u5c71",g:"126.435798,41.945859|13"},{n:"\u5409\u6797",g:"126.564544,43.871988|12"},{n:"\u8fbd\u6e90",g:"125.133686,42.923303|13"},
{n:"\u56db\u5e73",g:"124.391382,43.175525|12"},{n:"\u677e\u539f",g:"124.832995,45.136049|13"},{n:"\u901a\u5316",g:"125.94265,41.736397|13"},{n:"\u5ef6\u8fb9",g:"129.485902,42.896414|13"}]},{n:"\u8fbd\u5b81",g:"122.753592,41.6216|8",cities:[{n:"\u6c88\u9633",g:"123.432791,41.808645|12"},{n:"\u978d\u5c71",g:"123.007763,41.118744|13"},{n:"\u672c\u6eaa",g:"123.778062,41.325838|12"},{n:"\u671d\u9633",g:"120.446163,41.571828|13"},{n:"\u5927\u8fde",g:"121.593478,38.94871|12"},{n:"\u4e39\u4e1c",g:"124.338543,40.129023|12"},
{n:"\u629a\u987a",g:"123.92982,41.877304|12"},{n:"\u961c\u65b0",g:"121.660822,42.01925|14"},{n:"\u846b\u82a6\u5c9b",g:"120.860758,40.74303|13"},{n:"\u9526\u5dde",g:"121.147749,41.130879|13"},{n:"\u8fbd\u9633",g:"123.172451,41.273339|14"},{n:"\u76d8\u9526",g:"122.073228,41.141248|13"},{n:"\u94c1\u5cad",g:"123.85485,42.299757|13"},{n:"\u8425\u53e3",g:"122.233391,40.668651|13"}]},{n:"\u5185\u8499\u53e4",g:"114.415868,43.468238|5",cities:[{n:"\u547c\u548c\u6d69\u7279",g:"111.660351,40.828319|12"},{n:"\u963f\u62c9\u5584\u76df",
g:"105.695683,38.843075|14"},{n:"\u5305\u5934",g:"109.846239,40.647119|12"},{n:"\u5df4\u5f66\u6dd6\u5c14",g:"107.423807,40.76918|12"},{n:"\u8d64\u5cf0",g:"118.930761,42.297112|12"},{n:"\u9102\u5c14\u591a\u65af",g:"109.993706,39.81649|12"},{n:"\u547c\u4f26\u8d1d\u5c14",g:"119.760822,49.201636|12"},{n:"\u901a\u8fbd",g:"122.260363,43.633756|12"},{n:"\u4e4c\u6d77",g:"106.831999,39.683177|13"},{n:"\u4e4c\u5170\u5bdf\u5e03",g:"113.112846,41.022363|12"},{n:"\u9521\u6797\u90ed\u52d2\u76df",g:"116.02734,43.939705|11"},
{n:"\u5174\u5b89\u76df",g:"122.048167,46.083757|11"}]},{n:"\u5b81\u590f",g:"106.155481,37.321323|8",cities:[{n:"\u94f6\u5ddd",g:"106.206479,38.502621|12"},{n:"\u56fa\u539f",g:"106.285268,36.021523|13"},{n:"\u77f3\u5634\u5c71",g:"106.379337,39.020223|13"},{n:"\u5434\u5fe0",g:"106.208254,37.993561|14"},{n:"\u4e2d\u536b",g:"105.196754,37.521124|14"}]},{n:"\u9752\u6d77",g:"96.202544,35.499761|7",cities:[{n:"\u897f\u5b81",g:"101.767921,36.640739|12"},{n:"\u679c\u6d1b\u5dde",g:"100.223723,34.480485|11"},
{n:"\u6d77\u4e1c\u5730\u533a",g:"102.085207,36.51761|11"},{n:"\u6d77\u5317\u5dde",g:"100.879802,36.960654|11"},{n:"\u6d77\u5357\u5dde",g:"100.624066,36.284364|11"},{n:"\u6d77\u897f\u5dde",g:"97.342625,37.373799|11"},{n:"\u9ec4\u5357\u5dde",g:"102.0076,35.522852|11"},{n:"\u7389\u6811\u5dde",g:"97.013316,33.00624|14"}]},{n:"\u5c71\u4e1c",g:"118.527663,36.09929|8",cities:[{n:"\u6d4e\u5357",g:"117.024967,36.682785|12"},{n:"\u6ee8\u5dde",g:"117.968292,37.405314|12"},{n:"\u4e1c\u8425",g:"118.583926,37.487121|12"},
{n:"\u5fb7\u5dde",g:"116.328161,37.460826|12"},{n:"\u83cf\u6cfd",g:"115.46336,35.26244|13"},{n:"\u6d4e\u5b81",g:"116.600798,35.402122|13"},{n:"\u83b1\u829c",g:"117.684667,36.233654|13"},{n:"\u804a\u57ce",g:"115.986869,36.455829|12"},{n:"\u4e34\u6c82",g:"118.340768,35.072409|12"},{n:"\u9752\u5c9b",g:"120.384428,36.105215|12"},{n:"\u65e5\u7167",g:"119.50718,35.420225|12"},{n:"\u6cf0\u5b89",g:"117.089415,36.188078|13"},{n:"\u5a01\u6d77",g:"122.093958,37.528787|13"},{n:"\u6f4d\u574a",g:"119.142634,36.716115|12"},
{n:"\u70df\u53f0",g:"121.309555,37.536562|12"},{n:"\u67a3\u5e84",g:"117.279305,34.807883|13"},{n:"\u6dc4\u535a",g:"118.059134,36.804685|12"}]},{n:"\u5c71\u897f",g:"112.515496,37.866566|7",cities:[{n:"\u592a\u539f",g:"112.550864,37.890277|12"},{n:"\u957f\u6cbb",g:"113.120292,36.201664|12"},{n:"\u5927\u540c",g:"113.290509,40.113744|12"},{n:"\u664b\u57ce",g:"112.867333,35.499834|13"},{n:"\u664b\u4e2d",g:"112.738514,37.693362|13"},{n:"\u4e34\u6c7e",g:"111.538788,36.099745|13"},{n:"\u5415\u6881",g:"111.143157,37.527316|14"},
{n:"\u6714\u5dde",g:"112.479928,39.337672|13"},{n:"\u5ffb\u5dde",g:"112.727939,38.461031|12"},{n:"\u9633\u6cc9",g:"113.569238,37.869529|13"},{n:"\u8fd0\u57ce",g:"111.006854,35.038859|13"}]},{n:"\u9655\u897f",g:"109.503789,35.860026|7",cities:[{n:"\u897f\u5b89",g:"108.953098,34.2778|12"},{n:"\u5b89\u5eb7",g:"109.038045,32.70437|13"},{n:"\u5b9d\u9e21",g:"107.170645,34.364081|12"},{n:"\u6c49\u4e2d",g:"107.045478,33.081569|13"},{n:"\u5546\u6d1b",g:"109.934208,33.873907|13"},{n:"\u94dc\u5ddd",g:"108.968067,34.908368|13"},
{n:"\u6e2d\u5357",g:"109.483933,34.502358|13"},{n:"\u54b8\u9633",g:"108.707509,34.345373|13"},{n:"\u5ef6\u5b89",g:"109.50051,36.60332|13"},{n:"\u6986\u6797",g:"109.745926,38.279439|12"}]},{n:"\u56db\u5ddd",g:"102.89916,30.367481|7",cities:[{n:"\u6210\u90fd",g:"104.067923,30.679943|12"},{n:"\u963f\u575d\u5dde",g:"102.228565,31.905763|15"},{n:"\u5df4\u4e2d",g:"106.757916,31.869189|14"},{n:"\u8fbe\u5dde",g:"107.494973,31.214199|14"},{n:"\u5fb7\u9633",g:"104.402398,31.13114|13"},{n:"\u7518\u5b5c\u5dde",
g:"101.969232,30.055144|15"},{n:"\u5e7f\u5b89",g:"106.63572,30.463984|13"},{n:"\u5e7f\u5143",g:"105.819687,32.44104|13"},{n:"\u4e50\u5c71",g:"103.760824,29.600958|13"},{n:"\u51c9\u5c71\u5dde",g:"102.259591,27.892393|14"},{n:"\u6cf8\u5dde",g:"105.44397,28.89593|14"},{n:"\u5357\u5145",g:"106.105554,30.800965|13"},{n:"\u7709\u5c71",g:"103.84143,30.061115|13"},{n:"\u7ef5\u9633",g:"104.705519,31.504701|12"},{n:"\u5185\u6c5f",g:"105.073056,29.599462|13"},{n:"\u6500\u679d\u82b1",g:"101.722423,26.587571|14"},
{n:"\u9042\u5b81",g:"105.564888,30.557491|12"},{n:"\u96c5\u5b89",g:"103.009356,29.999716|13"},{n:"\u5b9c\u5bbe",g:"104.633019,28.769675|13"},{n:"\u8d44\u9633",g:"104.63593,30.132191|13"},{n:"\u81ea\u8d21",g:"104.776071,29.359157|13"}]},{n:"\u897f\u85cf",g:"89.137982,31.367315|6",cities:[{n:"\u62c9\u8428",g:"91.111891,29.662557|13"},{n:"\u963f\u91cc\u5730\u533a",g:"81.107669,30.404557|11"},{n:"\u660c\u90fd\u5730\u533a",g:"97.185582,31.140576|15"},{n:"\u6797\u829d\u5730\u533a",g:"94.349985,29.666941|11"},
{n:"\u90a3\u66f2\u5730\u533a",g:"92.067018,31.48068|14"},{n:"\u65e5\u5580\u5219\u5730\u533a",g:"88.891486,29.269023|14"},{n:"\u5c71\u5357\u5730\u533a",g:"91.750644,29.229027|11"}]},{n:"\u65b0\u7586",g:"85.614899,42.127001|6",cities:[{n:"\u4e4c\u9c81\u6728\u9f50",g:"87.564988,43.84038|12"},{n:"\u963f\u62c9\u5c14",g:"81.291737,40.61568|13"},{n:"\u963f\u514b\u82cf\u5730\u533a",g:"80.269846,41.171731|12"},{n:"\u963f\u52d2\u6cf0\u5730\u533a",g:"88.137915,47.839744|13"},{n:"\u5df4\u97f3\u90ed\u695e",g:"86.121688,41.771362|12"},
{n:"\u535a\u5c14\u5854\u62c9\u5dde",g:"82.052436,44.913651|11"},{n:"\u660c\u5409\u5dde",g:"87.296038,44.007058|13"},{n:"\u54c8\u5bc6\u5730\u533a",g:"93.528355,42.858596|13"},{n:"\u548c\u7530\u5730\u533a",g:"79.930239,37.116774|13"},{n:"\u5580\u4ec0\u5730\u533a",g:"75.992973,39.470627|12"},{n:"\u514b\u62c9\u739b\u4f9d",g:"84.88118,45.594331|13"},{n:"\u514b\u5b5c\u52d2\u82cf\u5dde",g:"76.137564,39.750346|11"},{n:"\u77f3\u6cb3\u5b50",g:"86.041865,44.308259|13"},{n:"\u5854\u57ce\u5730\u533a",g:"82.974881,46.758684|12"},
{n:"\u56fe\u6728\u8212\u514b",g:"79.198155,39.889223|13"},{n:"\u5410\u9c81\u756a\u5730\u533a",g:"89.181595,42.96047|13"},{n:"\u4e94\u5bb6\u6e20",g:"87.565449,44.368899|13"},{n:"\u4f0a\u7281\u5dde",g:"81.297854,43.922248|11"}]},{n:"\u4e91\u5357",g:"101.592952,24.864213|7",cities:[{n:"\u6606\u660e",g:"102.714601,25.049153|12"},{n:"\u4fdd\u5c71",g:"99.177996,25.120489|13"},{n:"\u695a\u96c4\u5dde",g:"101.529382,25.066356|13"},{n:"\u5927\u7406\u5dde",g:"100.223675,25.5969|14"},{n:"\u5fb7\u5b8f\u5dde",
g:"98.589434,24.44124|14"},{n:"\u8fea\u5e86\u5dde",g:"99.713682,27.831029|14"},{n:"\u7ea2\u6cb3\u5dde",g:"103.384065,23.367718|11"},{n:"\u4e3d\u6c5f",g:"100.229628,26.875351|13"},{n:"\u4e34\u6ca7",g:"100.092613,23.887806|14"},{n:"\u6012\u6c5f\u5dde",g:"98.859932,25.860677|14"},{n:"\u666e\u6d31",g:"100.980058,22.788778|14"},{n:"\u66f2\u9756",g:"103.782539,25.520758|12"},{n:"\u662d\u901a",g:"103.725021,27.340633|13"},{n:"\u6587\u5c71",g:"104.089112,23.401781|14"},{n:"\u897f\u53cc\u7248\u7eb3",g:"100.803038,22.009433|13"},
{n:"\u7389\u6eaa",g:"102.545068,24.370447|13"}]},{n:"\u6d59\u6c5f",g:"119.957202,29.159494|8",cities:[{n:"\u676d\u5dde",g:"120.219375,30.259244|12"},{n:"\u6e56\u5dde",g:"120.137243,30.877925|12"},{n:"\u5609\u5174",g:"120.760428,30.773992|13"},{n:"\u91d1\u534e",g:"119.652576,29.102899|12"},{n:"\u4e3d\u6c34",g:"119.929576,28.4563|13"},{n:"\u5b81\u6ce2",g:"121.579006,29.885259|12"},{n:"\u8862\u5dde",g:"118.875842,28.95691|12"},{n:"\u7ecd\u5174",g:"120.592467,30.002365|13"},{n:"\u53f0\u5dde",g:"121.440613,28.668283|13"},
{n:"\u6e29\u5dde",g:"120.690635,28.002838|12"},{n:"\u821f\u5c71",g:"122.169872,30.03601|13"}]}],Ue=[{n:"\u9999\u6e2f",g:"114.186124,22.293586|11"},{n:"\u6fb3\u95e8",g:"113.557519,22.204118|13"},{n:"\u53f0\u6e7e",g:"120.961454,23.80406|8"}],Rc=void 0,Xg=function(){if(void 0!==Rc)return Rc;var e=navigator.userAgent,c="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";");Rc=!1;for(var a=0;a<c.length;a++)if(0<e.indexOf(c[a])){Rc=!0;break}return Rc}(),Ve=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,
2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Rd=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),lk=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Yg=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nb=Array(576);ac(nb);var Sc=Array(60);ac(Sc);var Vb=Array(512);ac(Vb);var Tc=Array(256);ac(Tc);var We=Array(29);ac(We);var Sd=Array(30);ac(Sd);var Zg=void 0,$g=void 0,ah=void 0,Uc=function(e,c){e.pending_buf[e.pending++]=c&255;e.pending_buf[e.pending++]=
c>>>8&255},Ia=function(e,c,a){e.bi_valid>16-a?(e.bi_buf|=c<<e.bi_valid&65535,Uc(e,e.bi_buf),e.bi_buf=c>>16-e.bi_valid,e.bi_valid+=a-16):(e.bi_buf|=c<<e.bi_valid&65535,e.bi_valid+=a)},db=function(e,c,a){Ia(e,a[2*c],a[2*c+1])},bh=function(e,c){var a=0;do a|=e&1,e>>>=1,a<<=1;while(0<--c);return a>>>1},ch=function(e,c,a){var b=Array(16),d=0,f;for(f=1;15>=f;f++)b[f]=d=d+a[f-1]<<1;for(a=0;a<=c;a++)d=e[2*a+1],0!==d&&(e[2*a]=bh(b[d]++,d))},dh=function(e){var c;for(c=0;286>c;c++)e.dyn_ltree[2*c]=0;for(c=0;30>
c;c++)e.dyn_dtree[2*c]=0;for(c=0;19>c;c++)e.bl_tree[2*c]=0;e.dyn_ltree[512]=1;e.opt_len=e.static_len=0;e.last_lit=e.matches=0},eh=function(e){8<e.bi_valid?Uc(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf);e.bi_buf=0;e.bi_valid=0},fh=function(e,c,a,b){var d=2*c,f=2*a;return e[d]<e[f]||e[d]===e[f]&&b[c]<=b[a]},Xe=function(e,c,a){for(var b=e.heap[a],d=a<<1;d<=e.heap_len;){d<e.heap_len&&fh(c,e.heap[d+1],e.heap[d],e.depth)&&d++;if(fh(c,b,e.heap[d],e.depth))break;e.heap[a]=e.heap[d];a=
d;d<<=1}e.heap[a]=b},gh=function(e,c,a){var b=0;if(0!==e.last_lit){do{var d=e.pending_buf[e.d_buf+2*b]<<8|e.pending_buf[e.d_buf+2*b+1];var f=e.pending_buf[e.l_buf+b];b++;if(0===d)db(e,f,c);else{var g=Tc[f];db(e,g+256+1,c);var h=Ve[g];0!==h&&(f-=We[g],Ia(e,f,h));d--;g=256>d?Vb[d]:Vb[256+(d>>>7)];db(e,g,a);h=Rd[g];0!==h&&(d-=Sd[g],Ia(e,d,h))}}while(b<e.last_lit)}db(e,256,c)},Ye=function(e,c){var a=c.dyn_tree,b=c.stat_desc.static_tree,d=c.stat_desc.has_stree,f=c.stat_desc.elems,g,h=-1;e.heap_len=0;e.heap_max=
573;for(g=0;g<f;g++)0!==a[2*g]?(e.heap[++e.heap_len]=h=g,e.depth[g]=0):a[2*g+1]=0;for(;2>e.heap_len;){var k=e.heap[++e.heap_len]=2>h?++h:0;a[2*k]=1;e.depth[k]=0;e.opt_len--;d&&(e.static_len-=b[2*k+1])}c.max_code=h;for(g=e.heap_len>>1;1<=g;g--)Xe(e,a,g);k=f;do g=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Xe(e,a,1),b=e.heap[1],e.heap[--e.heap_max]=g,e.heap[--e.heap_max]=b,a[2*k]=a[2*g]+a[2*b],e.depth[k]=(e.depth[g]>=e.depth[b]?e.depth[g]:e.depth[b])+1,a[2*g+1]=a[2*b+1]=k,e.heap[1]=k++,Xe(e,a,1);while(2<=
e.heap_len);e.heap[--e.heap_max]=e.heap[1];g=c.dyn_tree;k=c.max_code;b=c.stat_desc.static_tree;d=c.stat_desc.has_stree;f=c.stat_desc.extra_bits;var l=c.stat_desc.extra_base,p=c.stat_desc.max_length,n,m=0;for(n=0;15>=n;n++)e.bl_count[n]=0;g[2*e.heap[e.heap_max]+1]=0;for(c=e.heap_max+1;573>c;c++){var q=e.heap[c];n=g[2*g[2*q+1]+1]+1;n>p&&(n=p,m++);g[2*q+1]=n;if(!(q>k)){e.bl_count[n]++;var r=0;q>=l&&(r=f[q-l]);var u=g[2*q];e.opt_len+=u*(n+r);d&&(e.static_len+=u*(b[2*q+1]+r))}}if(0!==m){do{for(n=p-1;0===
e.bl_count[n];)n--;e.bl_count[n]--;e.bl_count[n+1]+=2;e.bl_count[p]--;m-=2}while(0<m);for(n=p;0!==n;n--)for(q=e.bl_count[n];0!==q;)b=e.heap[--c],b>k||(g[2*b+1]!==n&&(e.opt_len+=(n-g[2*b+1])*g[2*b],g[2*b+1]=n),q--)}ch(a,h,e.bl_count)},hh=function(e,c,a){var b,d=-1,f=c[1],g=0,h=7,k=4;0===f&&(h=138,k=3);c[2*(a+1)+1]=65535;for(b=0;b<=a;b++){var l=f;f=c[2*(b+1)+1];++g<h&&l===f||(g<k?e.bl_tree[2*l]+=g:0!==l?(l!==d&&e.bl_tree[2*l]++,e.bl_tree[32]++):10>=g?e.bl_tree[34]++:e.bl_tree[36]++,g=0,d=l,0===f?(h=
138,k=3):l===f?(h=6,k=3):(h=7,k=4))}},ih=function(e,c,a){var b,d=-1,f=c[1],g=0,h=7,k=4;0===f&&(h=138,k=3);for(b=0;b<=a;b++){var l=f;f=c[2*(b+1)+1];if(!(++g<h&&l===f)){if(g<k){do db(e,l,e.bl_tree);while(0!==--g)}else 0!==l?(l!==d&&(db(e,l,e.bl_tree),g--),db(e,16,e.bl_tree),Ia(e,g-3,2)):10>=g?(db(e,17,e.bl_tree),Ia(e,g-3,3)):(db(e,18,e.bl_tree),Ia(e,g-11,7));g=0;d=l;0===f?(h=138,k=3):l===f?(h=6,k=3):(h=7,k=4)}}},mk=function(e){var c=4093624447,a;for(a=0;31>=a;a++,c>>>=1)if(c&1&&0!==e.dyn_ltree[2*a])return 0;
if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(a=32;256>a;a++)if(0!==e.dyn_ltree[2*a])return 1;return 0},jh=!1,kh=function(e,c,a,b){Ia(e,b?1:0,3);eh(e);Uc(e,a);Uc(e,~a);e.pending_buf.set(e.window.subarray(c,c+a),e.pending);e.pending+=a},Vc=function(e,c,a,b){var d=e&65535|0;e=e>>>16&65535|0;for(var f;0!==a;){f=2E3<a?2E3:a;a-=f;do d=d+c[b++]|0,e=e+d|0;while(--f);d%=65521;e%=65521}return d|e<<16|0},nk=new Uint32Array(function(){for(var e,c=[],a=0;256>a;a++){e=a;for(var b=
0;8>b;b++)e=e&1?3988292384^e>>>1:e>>>1;c[a]=e}return c}()),ua=function(e,c,a,b){a=b+a;for(e^=-1;b<a;b++)e=e>>>8^nk[(e^c[b])&255];return e^-1},Mb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},T={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,
Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Bb=function(e,c,a){e.pending_buf[e.d_buf+2*e.last_lit]=c>>>8&255;e.pending_buf[e.d_buf+2*e.last_lit+1]=c&255;e.pending_buf[e.l_buf+e.last_lit]=a&255;e.last_lit++;0===c?e.dyn_ltree[2*a]++:(e.matches++,c--,e.dyn_ltree[2*(Tc[a]+256+1)]++,e.dyn_dtree[2*(256>c?Vb[c]:Vb[256+(c>>>7)])]++);return e.last_lit===
e.lit_bufsize-1},Wb=T.Z_NO_FLUSH,ok=T.Z_PARTIAL_FLUSH,pk=T.Z_FULL_FLUSH,Cb=T.Z_FINISH,lh=T.Z_BLOCK,eb=T.Z_OK,mh=T.Z_STREAM_END,Va=T.Z_STREAM_ERROR,qk=T.Z_DATA_ERROR,Ze=T.Z_BUF_ERROR,rk=T.Z_DEFAULT_COMPRESSION,sk=T.Z_FILTERED,Td=T.Z_HUFFMAN_ONLY,tk=T.Z_RLE,uk=T.Z_FIXED,vk=T.Z_DEFAULT_STRATEGY,wk=T.Z_UNKNOWN,md=T.Z_DEFLATED,Db=function(e,c){e.msg=Mb[c];return c},tb=function(e){for(var c=e.length;0<=--c;)e[c]=0},Eb=function(e,c,a){return(c<<e.hash_shift^a)&e.hash_mask},Fb=function(e){var c=e.state,a=
c.pending;a>e.avail_out&&(a=e.avail_out);0!==a&&(e.output.set(c.pending_buf.subarray(c.pending_out,c.pending_out+a),e.next_out),e.next_out+=a,c.pending_out+=a,e.total_out+=a,e.avail_out-=a,c.pending-=a,0===c.pending&&(c.pending_out=0))},ya=function(e,c){var a=0<=e.block_start?e.block_start:-1,b=e.strstart-e.block_start,d=0;if(0<e.level){2===e.strm.data_type&&(e.strm.data_type=mk(e));Ye(e,e.l_desc);Ye(e,e.d_desc);hh(e,e.dyn_ltree,e.l_desc.max_code);hh(e,e.dyn_dtree,e.d_desc.max_code);Ye(e,e.bl_desc);
for(d=18;3<=d&&0===e.bl_tree[2*Yg[d]+1];d--);e.opt_len+=3*(d+1)+14;var f=e.opt_len+3+7>>>3;var g=e.static_len+3+7>>>3;g<=f&&(f=g)}else f=g=b+5;if(b+4<=f&&-1!==a)kh(e,a,b,c);else if(4===e.strategy||g===f)Ia(e,2+(c?1:0),3),gh(e,nb,Sc);else{Ia(e,4+(c?1:0),3);a=e.l_desc.max_code+1;b=e.d_desc.max_code+1;d+=1;Ia(e,a-257,5);Ia(e,b-1,5);Ia(e,d-4,4);for(f=0;f<d;f++)Ia(e,e.bl_tree[2*Yg[f]+1],3);ih(e,e.dyn_ltree,a-1);ih(e,e.dyn_dtree,b-1);gh(e,e.dyn_ltree,e.dyn_dtree)}dh(e);c&&eh(e);e.block_start=e.strstart;
Fb(e.strm)},aa=function(e,c){e.pending_buf[e.pending++]=c},Wc=function(e,c){e.pending_buf[e.pending++]=c>>>8&255;e.pending_buf[e.pending++]=c&255},nh=function(e,c){var a=e.max_chain_length,b=e.strstart,d=e.prev_length,f=e.nice_match,g=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,h=e.window,k=e.w_mask,l=e.prev,p=e.strstart+258,n=h[b+d-1],m=h[b+d];e.prev_length>=e.good_match&&(a>>=2);f>e.lookahead&&(f=e.lookahead);do{var q=c;if(h[q+d]===m&&h[q+d-1]===n&&h[q]===h[b]&&h[++q]===h[b+1]){b+=2;for(q++;h[++b]===
h[++q]&&h[++b]===h[++q]&&h[++b]===h[++q]&&h[++b]===h[++q]&&h[++b]===h[++q]&&h[++b]===h[++q]&&h[++b]===h[++q]&&h[++b]===h[++q]&&b<p;);q=258-(p-b);b=p-258;if(q>d){e.match_start=c;d=q;if(q>=f)break;n=h[b+d-1];m=h[b+d]}}}while((c=l[c&k])>g&&0!==--a);return d<=e.lookahead?d:e.lookahead},Xb=function(e){var c=e.w_size,a;do{var b=e.window_size-e.lookahead-e.strstart;if(e.strstart>=c+(c-262)){e.window.set(e.window.subarray(c,c+c),0);e.match_start-=c;e.strstart-=c;e.block_start-=c;var d=a=e.hash_size;do{var f=
e.head[--d];e.head[d]=f>=c?f-c:0}while(--a);d=a=c;do f=e.prev[--d],e.prev[d]=f>=c?f-c:0;while(--a);b+=c}if(0===e.strm.avail_in)break;d=e.strm;a=e.window;f=e.strstart+e.lookahead;var g=d.avail_in;g>b&&(g=b);0===g?a=0:(d.avail_in-=g,a.set(d.input.subarray(d.next_in,d.next_in+g),f),1===d.state.wrap?d.adler=Vc(d.adler,a,g,f):2===d.state.wrap&&(d.adler=ua(d.adler,a,g,f)),d.next_in+=g,d.total_in+=g,a=g);e.lookahead+=a;if(3<=e.lookahead+e.insert)for(b=e.strstart-e.insert,e.ins_h=e.window[b],e.ins_h=Eb(e,
e.ins_h,e.window[b+1]);e.insert&&!(e.ins_h=Eb(e,e.ins_h,e.window[b+3-1]),e.prev[b&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=b,b++,e.insert--,3>e.lookahead+e.insert););}while(262>e.lookahead&&0!==e.strm.avail_in)},$e=function(e,c){for(var a;;){if(262>e.lookahead){Xb(e);if(262>e.lookahead&&c===Wb)return 1;if(0===e.lookahead)break}a=0;3<=e.lookahead&&(e.ins_h=Eb(e,e.ins_h,e.window[e.strstart+3-1]),a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);0!==a&&e.strstart-a<=e.w_size-
262&&(e.match_length=nh(e,a));if(3<=e.match_length)if(a=Bb(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){e.match_length--;do e.strstart++,e.ins_h=Eb(e,e.ins_h,e.window[e.strstart+3-1]),e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Eb(e,e.ins_h,e.window[e.strstart+1]);else a=
Bb(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(ya(e,!1),0===e.strm.avail_out))return 1}e.insert=2>e.strstart?e.strstart:2;return c===Cb?(ya(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ya(e,!1),0===e.strm.avail_out)?1:2},mc=function(e,c){for(var a,b;;){if(262>e.lookahead){Xb(e);if(262>e.lookahead&&c===Wb)return 1;if(0===e.lookahead)break}a=0;3<=e.lookahead&&(e.ins_h=Eb(e,e.ins_h,e.window[e.strstart+3-1]),a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);e.prev_length=
e.match_length;e.prev_match=e.match_start;e.match_length=2;0!==a&&e.prev_length<e.max_lazy_match&&e.strstart-a<=e.w_size-262&&(e.match_length=nh(e,a),5>=e.match_length&&(e.strategy===sk||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2));if(3<=e.prev_length&&e.match_length<=e.prev_length){b=e.strstart+e.lookahead-3;a=Bb(e,e.strstart-1-e.prev_match,e.prev_length-3);e.lookahead-=e.prev_length-1;e.prev_length-=2;do++e.strstart<=b&&(e.ins_h=Eb(e,e.ins_h,e.window[e.strstart+3-1]),
e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);e.match_available=0;e.match_length=2;e.strstart++;if(a&&(ya(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((a=Bb(e,0,e.window[e.strstart-1]))&&ya(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}e.match_available&&(Bb(e,0,e.window[e.strstart-1]),e.match_available=0);e.insert=2>e.strstart?e.strstart:2;return c===Cb?
(ya(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ya(e,!1),0===e.strm.avail_out)?1:2},xk=function(e,c){for(var a,b,d,f=e.window;;){if(258>=e.lookahead){Xb(e);if(258>=e.lookahead&&c===Wb)return 1;if(0===e.lookahead)break}e.match_length=0;if(3<=e.lookahead&&0<e.strstart&&(b=e.strstart-1,a=f[b],a===f[++b]&&a===f[++b]&&a===f[++b])){for(d=e.strstart+258;a===f[++b]&&a===f[++b]&&a===f[++b]&&a===f[++b]&&a===f[++b]&&a===f[++b]&&a===f[++b]&&a===f[++b]&&b<d;);e.match_length=258-(d-b);e.match_length>e.lookahead&&
(e.match_length=e.lookahead)}3<=e.match_length?(a=Bb(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(a=Bb(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++);if(a&&(ya(e,!1),0===e.strm.avail_out))return 1}e.insert=0;return c===Cb?(ya(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ya(e,!1),0===e.strm.avail_out)?1:2},yk=function(e,c){for(var a;;){if(0===e.lookahead&&(Xb(e),0===e.lookahead)){if(c===Wb)return 1;break}e.match_length=0;a=Bb(e,0,e.window[e.strstart]);
e.lookahead--;e.strstart++;if(a&&(ya(e,!1),0===e.strm.avail_out))return 1}e.insert=0;return c===Cb?(ya(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ya(e,!1),0===e.strm.avail_out)?1:2},Xc=[new Ya(0,0,0,0,function(e,c){var a=65535;for(a>e.pending_buf_size-5&&(a=e.pending_buf_size-5);;){if(1>=e.lookahead){Xb(e);if(0===e.lookahead&&c===Wb)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead;e.lookahead=0;var b=e.block_start+a;if(0===e.strstart||e.strstart>=b)if(e.lookahead=e.strstart-b,e.strstart=
b,ya(e,!1),0===e.strm.avail_out)return 1;if(e.strstart-e.block_start>=e.w_size-262&&(ya(e,!1),0===e.strm.avail_out))return 1}e.insert=0;if(c===Cb)return ya(e,!0),0===e.strm.avail_out?3:4;e.strstart>e.block_start&&ya(e,!1);return 1}),new Ya(4,4,8,4,$e),new Ya(4,5,16,8,$e),new Ya(4,6,32,32,$e),new Ya(4,4,16,16,mc),new Ya(8,16,32,32,mc),new Ya(8,16,128,128,mc),new Ya(8,32,128,256,mc),new Ya(32,128,258,1024,mc),new Ya(32,258,258,4096,mc)],oh=function(e){if(!e||!e.state)return Db(e,Va);e.total_in=e.total_out=
0;e.data_type=wk;var c=e.state;c.pending=0;c.pending_out=0;0>c.wrap&&(c.wrap=-c.wrap);c.status=c.wrap?42:113;e.adler=2===c.wrap?0:1;c.last_flush=Wb;if(!jh){var a,b,d;e=Array(16);for(d=b=0;28>d;d++)for(We[d]=b,a=0;a<1<<Ve[d];a++)Tc[b++]=d;Tc[b-1]=d;for(d=b=0;16>d;d++)for(Sd[d]=b,a=0;a<1<<Rd[d];a++)Vb[b++]=d;for(b>>=7;30>d;d++)for(Sd[d]=b<<7,a=0;a<1<<Rd[d]-7;a++)Vb[256+b++]=d;for(a=0;15>=a;a++)e[a]=0;for(a=0;143>=a;)nb[2*a+1]=8,a++,e[8]++;for(;255>=a;)nb[2*a+1]=9,a++,e[9]++;for(;279>=a;)nb[2*a+1]=7,
a++,e[7]++;for(;287>=a;)nb[2*a+1]=8,a++,e[8]++;ch(nb,287,e);for(a=0;30>a;a++)Sc[2*a+1]=5,Sc[2*a]=bh(a,5);Zg=new me(nb,Ve,257,286,15);$g=new me(Sc,Rd,0,30,15);ah=new me([],lk,0,19,7);jh=!0}c.l_desc=new ne(c.dyn_ltree,Zg);c.d_desc=new ne(c.dyn_dtree,$g);c.bl_desc=new ne(c.bl_tree,ah);c.bi_buf=0;c.bi_valid=0;dh(c);return eb},ph=function(e){var c=oh(e);c===eb&&(e=e.state,e.window_size=2*e.w_size,tb(e.head),e.max_lazy_match=Xc[e.level].max_lazy,e.good_match=Xc[e.level].good_length,e.nice_match=Xc[e.level].nice_length,
e.max_chain_length=Xc[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0);return c},qh=function(e,c,a,b,d,f){if(!e)return Va;var g=1;c===rk&&(c=6);0>b?(g=0,b=-b):15<b&&(g=2,b-=16);if(1>d||9<d||a!==md||8>b||15<b||0>c||9<c||0>f||f>uk)return Db(e,Va);8===b&&(b=9);var h=new Bi;e.state=h;h.strm=e;h.wrap=g;h.gzhead=null;h.w_bits=b;h.w_size=1<<h.w_bits;h.w_mask=h.w_size-1;h.hash_bits=d+7;h.hash_size=1<<h.hash_bits;h.hash_mask=
h.hash_size-1;h.hash_shift=~~((h.hash_bits+3-1)/3);h.window=new Uint8Array(2*h.w_size);h.head=new Uint16Array(h.hash_size);h.prev=new Uint16Array(h.w_size);h.lit_bufsize=1<<d+6;h.pending_buf_size=4*h.lit_bufsize;h.pending_buf=new Uint8Array(h.pending_buf_size);h.d_buf=1*h.lit_bufsize;h.l_buf=3*h.lit_bufsize;h.level=c;h.strategy=f;h.method=a;return ph(e)},xc={deflateInit:function(e,c){return qh(e,c,md,15,8,vk)},deflateInit2:qh,deflateReset:ph,deflateResetKeep:oh,deflateSetHeader:function(e,c){if(!e||
!e.state||2!==e.state.wrap)return Va;e.state.gzhead=c;return eb},deflate:function(e,c){if(!e||!e.state||c>lh||0>c)return e?Db(e,Va):Va;var a=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===a.status&&c!==Cb)return Db(e,0===e.avail_out?Ze:Va);a.strm=e;var b=a.last_flush;a.last_flush=c;if(42===a.status)if(2===a.wrap)e.adler=0,aa(a,31),aa(a,139),aa(a,8),a.gzhead?(aa(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),aa(a,a.gzhead.time&255),
aa(a,a.gzhead.time>>8&255),aa(a,a.gzhead.time>>16&255),aa(a,a.gzhead.time>>24&255),aa(a,9===a.level?2:a.strategy>=Td||2>a.level?4:0),aa(a,a.gzhead.os&255),a.gzhead.extra&&a.gzhead.extra.length&&(aa(a,a.gzhead.extra.length&255),aa(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=ua(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(aa(a,0),aa(a,0),aa(a,0),aa(a,0),aa(a,0),aa(a,9===a.level?2:a.strategy>=Td||2>a.level?4:0),aa(a,3),a.status=113);else{var d=md+(a.w_bits-8<<4)<<8;d|=(a.strategy>=
Td||2>a.level?0:6>a.level?1:6===a.level?2:3)<<6;0!==a.strstart&&(d|=32);a.status=113;Wc(a,d+(31-d%31));0!==a.strstart&&(Wc(a,e.adler>>>16),Wc(a,e.adler&65535));e.adler=1}if(69===a.status)if(a.gzhead.extra){for(d=a.pending;a.gzindex<(a.gzhead.extra.length&65535)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>d&&(e.adler=ua(e.adler,a.pending_buf,a.pending-d,d)),Fb(e),d=a.pending,a.pending!==a.pending_buf_size));)aa(a,a.gzhead.extra[a.gzindex]&255),a.gzindex++;a.gzhead.hcrc&&a.pending>d&&
(e.adler=ua(e.adler,a.pending_buf,a.pending-d,d));a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){d=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>d&&(e.adler=ua(e.adler,a.pending_buf,a.pending-d,d)),Fb(e),d=a.pending,a.pending===a.pending_buf_size)){var f=1;break}f=a.gzindex<a.gzhead.name.length?a.gzhead.name.charCodeAt(a.gzindex++)&255:0;aa(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>d&&(e.adler=ua(e.adler,
a.pending_buf,a.pending-d,d));0===f&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){d=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>d&&(e.adler=ua(e.adler,a.pending_buf,a.pending-d,d)),Fb(e),d=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.comment.length?a.gzhead.comment.charCodeAt(a.gzindex++)&255:0;aa(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>d&&(e.adler=ua(e.adler,a.pending_buf,a.pending-d,d));0===f&&(a.status=
103)}else a.status=103;103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&Fb(e),a.pending+2<=a.pending_buf_size&&(aa(a,e.adler&255),aa(a,e.adler>>8&255),e.adler=0,a.status=113)):a.status=113);if(0!==a.pending){if(Fb(e),0===e.avail_out)return a.last_flush=-1,eb}else if(0===e.avail_in&&(c<<1)-(4<c?9:0)<=(b<<1)-(4<b?9:0)&&c!==Cb)return Db(e,Ze);if(666===a.status&&0!==e.avail_in)return Db(e,Ze);if(0!==e.avail_in||0!==a.lookahead||c!==Wb&&666!==a.status){b=a.strategy===Td?yk(a,c):a.strategy===
tk?xk(a,c):Xc[a.level].func(a,c);if(3===b||4===b)a.status=666;if(1===b||3===b)return 0===e.avail_out&&(a.last_flush=-1),eb;if(2===b&&(c===ok?(Ia(a,2,3),db(a,256,nb),16===a.bi_valid?(Uc(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)):c!==lh&&(kh(a,0,0,!1),c===pk&&(tb(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),Fb(e),0===e.avail_out))return a.last_flush=-1,eb}if(c!==Cb)return eb;if(0>=a.wrap)return mh;
2===a.wrap?(aa(a,e.adler&255),aa(a,e.adler>>8&255),aa(a,e.adler>>16&255),aa(a,e.adler>>24&255),aa(a,e.total_in&255),aa(a,e.total_in>>8&255),aa(a,e.total_in>>16&255),aa(a,e.total_in>>24&255)):(Wc(a,e.adler>>>16),Wc(a,e.adler&65535));Fb(e);0<a.wrap&&(a.wrap=-a.wrap);return 0!==a.pending?eb:mh},deflateEnd:function(e){if(!e||!e.state)return Va;var c=e.state.status;if(42!==c&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c)return Db(e,Va);e.state=null;return 113===c?Db(e,qk):eb},deflateSetDictionary:function(e,
c){var a=c.length;if(!e||!e.state)return Va;var b=e.state,d=b.wrap;if(2===d||1===d&&42!==b.status||b.lookahead)return Va;1===d&&(e.adler=Vc(e.adler,c,a,0));b.wrap=0;if(a>=b.w_size){0===d&&(tb(b.head),b.strstart=0,b.block_start=0,b.insert=0);var f=new Uint8Array(b.w_size);f.set(c.subarray(a-b.w_size,a),0);c=f;a=b.w_size}f=e.avail_in;var g=e.next_in,h=e.input;e.avail_in=a;e.next_in=0;e.input=c;for(Xb(b);3<=b.lookahead;){c=b.strstart;a=b.lookahead-2;do b.ins_h=Eb(b,b.ins_h,b.window[c+3-1]),b.prev[c&
b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=c,c++;while(--a);b.strstart=c;b.lookahead=2;Xb(b)}b.strstart+=b.lookahead;b.block_start=b.strstart;b.insert=b.lookahead;b.lookahead=0;b.match_length=b.prev_length=2;b.match_available=0;e.next_in=g;e.input=h;e.avail_in=f;b.wrap=d;return eb},deflateInfo:"pako deflate (from Nodeca project)"},nd={assign:function(e){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var a=c.shift();if(a){if("object"!==("undefined"===typeof a?"undefined":Na(a)))throw new TypeError(a+
"must be non-object");for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(e[b]=a[b])}}return e},flattenChunks:function(e){for(var c=0,a=0,b=e.length;a<b;a++)c+=e[a].length;c=new Uint8Array(c);b=a=0;for(var d=e.length;a<d;a++){var f=e[a];c.set(f,b);b+=f.length}return c}},rh=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){rh=!1}for(var Yc=new Uint8Array(256),Gb=0;256>Gb;Gb++)Yc[Gb]=252<=Gb?6:248<=Gb?5:240<=Gb?4:224<=Gb?3:192<=Gb?2:1;Yc[254]=Yc[254]=1;var yc={string2buf:function(e){var c,
a,b=e.length,d=0;for(c=0;c<b;c++){var f=e.charCodeAt(c);if(55296===(f&64512)&&c+1<b){var g=e.charCodeAt(c+1);56320===(g&64512)&&(f=65536+(f-55296<<10)+(g-56320),c++)}d+=128>f?1:2048>f?2:65536>f?3:4}var h=new Uint8Array(d);for(c=a=0;a<d;c++)f=e.charCodeAt(c),55296===(f&64512)&&c+1<b&&(g=e.charCodeAt(c+1),56320===(g&64512)&&(f=65536+(f-55296<<10)+(g-56320),c++)),128>f?h[a++]=f:(2048>f?h[a++]=192|f>>>6:(65536>f?h[a++]=224|f>>>12:(h[a++]=240|f>>>18,h[a++]=128|f>>>12&63),h[a++]=128|f>>>6&63),h[a++]=128|
f&63);return h},buf2string:function(e,c){var a,b,d=c||e.length;c=Array(2*d);for(a=b=0;a<d;){var f=e[a++];if(128>f)c[b++]=f;else{var g=Yc[f];if(4<g)c[b++]=65533,a+=g-1;else{for(f&=2===g?31:3===g?15:7;1<g&&a<d;)f=f<<6|e[a++]&63,g--;1<g?c[b++]=65533:65536>f?c[b++]=f:(f-=65536,c[b++]=55296|f>>10&1023,c[b++]=56320|f&1023)}}}e=b;if(65534>e&&c.subarray&&rh)c=String.fromCharCode.apply(null,c.length===e?c:c.subarray(0,e));else{a="";for(b=0;b<e;b++)a+=String.fromCharCode(c[b]);c=a}return c},utf8border:function(e,
c){c=c||e.length;c>e.length&&(c=e.length);for(var a=c-1;0<=a&&128===(e[a]&192);)a--;return 0>a||0===a?c:a+Yc[e[a]]>c?a:c}},Gf=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0},Hf=Object.prototype.toString,zk=T.Z_NO_FLUSH,Ak=T.Z_SYNC_FLUSH,Bk=T.Z_FULL_FLUSH,Ck=T.Z_FINISH,od=T.Z_OK,Dk=T.Z_STREAM_END,Ci=T.Z_DEFAULT_COMPRESSION,Ei=T.Z_DEFAULT_STRATEGY,Di=T.Z_DEFLATED;
wc.prototype.push=function(e,c){var a=this.strm,b=this.options.chunkSize;if(this.ended)return!1;c=c===~~c?c:!0===c?Ck:zk;"string"===typeof e?a.input=yc.string2buf(e):"[object ArrayBuffer]"===Hf.call(e)?a.input=new Uint8Array(e):a.input=e;a.next_in=0;for(a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(b),a.next_out=0,a.avail_out=b),(c===Ak||c===Bk)&&6>=a.avail_out)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{e=xc.deflate(a,c);if(e===Dk){if(0<a.next_out)this.onData(a.output.subarray(0,
a.next_out));e=xc.deflateEnd(this.strm);this.onEnd(e);this.ended=!0;return e===od}if(0===a.avail_out)this.onData(a.output);else if(0<c&&0<a.next_out)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}return!0};wc.prototype.onData=function(e){this.chunks.push(e)};wc.prototype.onEnd=function(e){e===od&&(this.result=nd.flattenChunks(this.chunks));this.chunks=[];this.err=e;this.msg=this.strm.msg};var Ek=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,
43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Fk=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Gk=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Hk=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Zc=function(e,c,a,b,d,f,g,h){var k=h.bits,l,p,n,m,q,r,u=0,v=new Uint16Array(16);var t=
new Uint16Array(16);var x,w=0;for(l=0;15>=l;l++)v[l]=0;for(p=0;p<b;p++)v[c[a+p]]++;var D=k;for(n=15;1<=n&&0===v[n];n--);D>n&&(D=n);if(0===n)return d[f++]=20971520,d[f++]=20971520,h.bits=1,0;for(k=1;k<n&&0===v[k];k++);D<k&&(D=k);for(l=m=1;15>=l;l++)if(m<<=1,m-=v[l],0>m)return-1;if(0<m&&(0===e||1!==n))return-1;t[1]=0;for(l=1;15>l;l++)t[l+1]=t[l]+v[l];for(p=0;p<b;p++)0!==c[a+p]&&(g[t[c[a+p]]++]=p);if(0===e){var z=x=g;var B=19}else 1===e?(z=Ek,u-=257,x=Fk,w-=257,B=256):(z=Gk,x=Hk,B=-1);p=q=0;l=k;var A=
f;b=D;t=0;var F=-1;var G=1<<D;var E=G-1;if(1===e&&852<G||2===e&&592<G)return 1;for(;;){var gc=l-t;if(g[p]<B){var I=0;var K=g[p]}else g[p]>B?(I=x[w+g[p]],K=z[u+g[p]]):(I=96,K=0);m=1<<l-t;k=r=1<<b;do r-=m,d[A+(q>>t)+r]=gc<<24|I<<16|K|0;while(0!==r);for(m=1<<l-1;q&m;)m>>=1;0!==m?(q&=m-1,q+=m):q=0;p++;if(0===--v[l]){if(l===n)break;l=c[a+g[p]]}if(l>D&&(q&E)!==F){0===t&&(t=D);A+=k;b=l-t;for(m=1<<b;b+t<n;){m-=v[b+t];if(0>=m)break;b++;m<<=1}G+=1<<b;if(1===e&&852<G||2===e&&592<G)return 1;F=q&E;d[F]=D<<24|
b<<16|A-f|0}}0!==q&&(d[A+q]=l-t<<24|4194304);h.bits=D;return 0},sh=T.Z_FINISH,Ik=T.Z_BLOCK,Ud=T.Z_TREES,Yb=T.Z_OK,Jk=T.Z_STREAM_END,Kk=T.Z_NEED_DICT,Ra=T.Z_STREAM_ERROR,th=T.Z_DATA_ERROR,uh=T.Z_MEM_ERROR,Lk=T.Z_BUF_ERROR,vh=T.Z_DEFLATED,wh=function(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)},xh=function(e){if(!e||!e.state)return Ra;var c=e.state;e.total_in=e.total_out=c.total=0;e.msg="";c.wrap&&(e.adler=c.wrap&1);c.mode=1;c.last=0;c.havedict=0;c.dmax=32768;c.head=null;c.hold=
0;c.bits=0;c.lencode=c.lendyn=new Int32Array(852);c.distcode=c.distdyn=new Int32Array(592);c.sane=1;c.back=-1;return Yb},yh=function(e){if(!e||!e.state)return Ra;var c=e.state;c.wsize=0;c.whave=0;c.wnext=0;return xh(e)},zh=function(e,c){if(!e||!e.state)return Ra;var a=e.state;if(0>c){var b=0;c=-c}else b=(c>>4)+1,48>c&&(c&=15);if(c&&(8>c||15<c))return Ra;null!==a.window&&a.wbits!==c&&(a.window=null);a.wrap=b;a.wbits=c;return yh(e)},Ah=function(e,c){if(!e)return Ra;var a=new Fi;e.state=a;a.window=null;
c=zh(e,c);c!==Yb&&(e.state=null);return c},Bh=!0,af=void 0,bf=void 0,Ch=function(e,c,a,b){var d=e.state;null===d.window&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new Uint8Array(d.wsize));b>=d.wsize?(d.window.set(c.subarray(a-d.wsize,a),0),d.wnext=0,d.whave=d.wsize):(e=d.wsize-d.wnext,e>b&&(e=b),d.window.set(c.subarray(a-b,a-b+e),d.wnext),(b-=e)?(d.window.set(c.subarray(a-b,a),0),d.wnext=b,d.whave=d.wsize):(d.wnext+=e,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=e)));return 0},
ib={inflateReset:yh,inflateReset2:zh,inflateResetKeep:xh,inflateInit:function(e){return Ah(e,15)},inflateInit2:Ah,inflate:function(e,c){var a=new Uint8Array(4),b=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Ra;var d=e.state;12===d.mode&&(d.mode=13);var f=e.next_out;var g=e.output;var h=e.avail_out;var k=e.next_in;var l=e.input;var p=e.avail_in;var n=d.hold;var m=d.bits;var q=p;var r=h;var u=Yb;a:for(;;)switch(d.mode){case 1:if(0===
d.wrap){d.mode=13;break}for(;16>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}if(d.wrap&2&&35615===n){d.check=0;a[0]=n&255;a[1]=n>>>8&255;d.check=ua(d.check,a,2,0);m=n=0;d.mode=2;break}d.flags=0;d.head&&(d.head.done=!1);if(!(d.wrap&1)||(((n&255)<<8)+(n>>8))%31){e.msg="incorrect header check";d.mode=30;break}if((n&15)!==vh){e.msg="unknown compression method";d.mode=30;break}n>>>=4;m-=4;var v=(n&15)+8;if(0===d.wbits)d.wbits=v;else if(v>d.wbits){e.msg="invalid window size";d.mode=30;break}d.dmax=1<<d.wbits;
e.adler=d.check=1;d.mode=n&512?10:12;m=n=0;break;case 2:for(;16>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}d.flags=n;if((d.flags&255)!==vh){e.msg="unknown compression method";d.mode=30;break}if(d.flags&57344){e.msg="unknown header flags set";d.mode=30;break}d.head&&(d.head.text=n>>8&1);d.flags&512&&(a[0]=n&255,a[1]=n>>>8&255,d.check=ua(d.check,a,2,0));m=n=0;d.mode=3;case 3:for(;32>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}d.head&&(d.head.time=n);d.flags&512&&(a[0]=n&255,a[1]=n>>>8&255,a[2]=n>>>16&
255,a[3]=n>>>24&255,d.check=ua(d.check,a,4,0));m=n=0;d.mode=4;case 4:for(;16>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}d.head&&(d.head.xflags=n&255,d.head.os=n>>8);d.flags&512&&(a[0]=n&255,a[1]=n>>>8&255,d.check=ua(d.check,a,2,0));m=n=0;d.mode=5;case 5:if(d.flags&1024){for(;16>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}d.length=n;d.head&&(d.head.extra_len=n);d.flags&512&&(a[0]=n&255,a[1]=n>>>8&255,d.check=ua(d.check,a,2,0));m=n=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(d.flags&1024){var t=
d.length;t>p&&(t=p);t&&(d.head&&(v=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Uint8Array(d.head.extra_len)),d.head.extra.set(l.subarray(k,k+t),v)),d.flags&512&&(d.check=ua(d.check,l,t,k)),p-=t,k+=t,d.length-=t);if(d.length)break a}d.length=0;d.mode=7;case 7:if(d.flags&2048){if(0===p)break a;t=0;do v=l[k+t++],d.head&&v&&65536>d.length&&(d.head.name+=String.fromCharCode(v));while(v&&t<p);d.flags&512&&(d.check=ua(d.check,l,t,k));p-=t;k+=t;if(v)break a}else d.head&&(d.head.name=null);d.length=
0;d.mode=8;case 8:if(d.flags&4096){if(0===p)break a;t=0;do v=l[k+t++],d.head&&v&&65536>d.length&&(d.head.comment+=String.fromCharCode(v));while(v&&t<p);d.flags&512&&(d.check=ua(d.check,l,t,k));p-=t;k+=t;if(v)break a}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(d.flags&512){for(;16>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}if(n!==(d.check&65535)){e.msg="header crc mismatch";d.mode=30;break}m=n=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0);e.adler=d.check=0;d.mode=12;break;case 10:for(;32>
m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}e.adler=d.check=wh(n);m=n=0;d.mode=11;case 11:if(0===d.havedict)return e.next_out=f,e.avail_out=h,e.next_in=k,e.avail_in=p,d.hold=n,d.bits=m,Kk;e.adler=d.check=1;d.mode=12;case 12:if(c===Ik||c===Ud)break a;case 13:if(d.last){n>>>=m&7;m-=m&7;d.mode=27;break}for(;3>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}d.last=n&1;n>>>=1;--m;switch(n&3){case 0:d.mode=14;break;case 1:t=d;if(Bh){af=new Int32Array(512);bf=new Int32Array(32);for(v=0;144>v;)t.lens[v++]=8;for(;256>
v;)t.lens[v++]=9;for(;280>v;)t.lens[v++]=7;for(;288>v;)t.lens[v++]=8;Zc(1,t.lens,0,288,af,0,t.work,{bits:9});for(v=0;32>v;)t.lens[v++]=5;Zc(2,t.lens,0,32,bf,0,t.work,{bits:5});Bh=!1}t.lencode=af;t.lenbits=9;t.distcode=bf;t.distbits=5;d.mode=20;if(c===Ud){n>>>=2;m-=2;break a}break;case 2:d.mode=17;break;case 3:e.msg="invalid block type",d.mode=30}n>>>=2;m-=2;break;case 14:n>>>=m&7;for(m-=m&7;32>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}if((n&65535)!==(n>>>16^65535)){e.msg="invalid stored block lengths";
d.mode=30;break}d.length=n&65535;m=n=0;d.mode=15;if(c===Ud)break a;case 15:d.mode=16;case 16:if(t=d.length){t>p&&(t=p);t>h&&(t=h);if(0===t)break a;g.set(l.subarray(k,k+t),f);p-=t;k+=t;h-=t;f+=t;d.length-=t;break}d.mode=12;break;case 17:for(;14>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}d.nlen=(n&31)+257;n>>>=5;m-=5;d.ndist=(n&31)+1;n>>>=5;m-=5;d.ncode=(n&15)+4;n>>>=4;m-=4;if(286<d.nlen||30<d.ndist){e.msg="too many length or distance symbols";d.mode=30;break}d.have=0;d.mode=18;case 18:for(;d.have<
d.ncode;){for(;3>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}d.lens[b[d.have++]]=n&7;n>>>=3;m-=3}for(;19>d.have;)d.lens[b[d.have++]]=0;d.lencode=d.lendyn;d.lenbits=7;t={bits:d.lenbits};u=Zc(0,d.lens,0,19,d.lencode,0,d.work,t);d.lenbits=t.bits;if(u){e.msg="invalid code lengths set";d.mode=30;break}d.have=0;d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;;){var x=d.lencode[n&(1<<d.lenbits)-1];t=x>>>24;x&=65535;if(t<=m)break;if(0===p)break a;p--;n+=l[k++]<<m;m+=8}if(16>x)n>>>=t,m-=t,d.lens[d.have++]=
x;else{if(16===x){for(v=t+2;m<v;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}n>>>=t;m-=t;if(0===d.have){e.msg="invalid bit length repeat";d.mode=30;break}v=d.lens[d.have-1];t=3+(n&3);n>>>=2;m-=2}else if(17===x){for(v=t+3;m<v;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}n>>>=t;m-=t;v=0;t=3+(n&7);n>>>=3;m-=3}else{for(v=t+7;m<v;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}n>>>=t;m-=t;v=0;t=11+(n&127);n>>>=7;m-=7}if(d.have+t>d.nlen+d.ndist){e.msg="invalid bit length repeat";d.mode=30;break}for(;t--;)d.lens[d.have++]=
v}}if(30===d.mode)break;if(0===d.lens[256]){e.msg="invalid code -- missing end-of-block";d.mode=30;break}d.lenbits=9;t={bits:d.lenbits};u=Zc(1,d.lens,0,d.nlen,d.lencode,0,d.work,t);d.lenbits=t.bits;if(u){e.msg="invalid literal/lengths set";d.mode=30;break}d.distbits=6;d.distcode=d.distdyn;t={bits:d.distbits};u=Zc(2,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,t);d.distbits=t.bits;if(u){e.msg="invalid distances set";d.mode=30;break}d.mode=20;if(c===Ud)break a;case 20:d.mode=21;case 21:if(6<=p&&258<=h){e.next_out=
f;e.avail_out=h;e.next_in=k;e.avail_in=p;d.hold=n;d.bits=m;l=e;var w=l.state;g=l.next_in;var D=l.input;k=g+(l.avail_in-5);f=l.next_out;var z=l.output;p=f-(r-l.avail_out);h=f+(l.avail_out-257);n=w.dmax;m=w.wsize;t=w.whave;v=w.wnext;var B=w.window;var A=w.hold;var F=w.bits;x=w.lencode;var G=w.distcode;var E=(1<<w.lenbits)-1;var gc=(1<<w.distbits)-1;b:do{15>F&&(A+=D[g++]<<F,F+=8,A+=D[g++]<<F,F+=8);var I=x[A&E];c:for(;;){var K=I>>>24;A>>>=K;F-=K;K=I>>>16&255;if(0===K)z[f++]=I&65535;else if(K&16){var y=
I&65535;if(K&=15)F<K&&(A+=D[g++]<<F,F+=8),y+=A&(1<<K)-1,A>>>=K,F-=K;15>F&&(A+=D[g++]<<F,F+=8,A+=D[g++]<<F,F+=8);I=G[A&gc];d:for(;;){K=I>>>24;A>>>=K;F-=K;K=I>>>16&255;if(K&16){I&=65535;K&=15;F<K&&(A+=D[g++]<<F,F+=8,F<K&&(A+=D[g++]<<F,F+=8));I+=A&(1<<K)-1;if(I>n){l.msg="invalid distance too far back";w.mode=30;break b}A>>>=K;F-=K;K=f-p;if(I>K){K=I-K;if(K>t&&w.sane){l.msg="invalid distance too far back";w.mode=30;break b}var C=0;var H=B;if(0===v){if(C+=m-K,K<y){y-=K;do z[f++]=B[C++];while(--K);C=f-I;
H=z}}else if(v<K){if(C+=m+v-K,K-=v,K<y){y-=K;do z[f++]=B[C++];while(--K);C=0;if(v<y){K=v;y-=K;do z[f++]=B[C++];while(--K);C=f-I;H=z}}}else if(C+=v-K,K<y){y-=K;do z[f++]=B[C++];while(--K);C=f-I;H=z}for(;2<y;)z[f++]=H[C++],z[f++]=H[C++],z[f++]=H[C++],y-=3;y&&(z[f++]=H[C++],1<y&&(z[f++]=H[C++]))}else{C=f-I;do z[f++]=z[C++],z[f++]=z[C++],z[f++]=z[C++],y-=3;while(2<y);y&&(z[f++]=z[C++],1<y&&(z[f++]=z[C++]))}}else if(0===(K&64)){I=G[(I&65535)+(A&(1<<K)-1)];continue d}else{l.msg="invalid distance code";
w.mode=30;break b}break}}else if(0===(K&64)){I=x[(I&65535)+(A&(1<<K)-1)];continue c}else{K&32?w.mode=12:(l.msg="invalid literal/length code",w.mode=30);break b}break}}while(g<k&&f<h);y=F>>3;g-=y;F-=y<<3;l.next_in=g;l.next_out=f;l.avail_in=g<k?5+(k-g):5-(g-k);l.avail_out=f<h?257+(h-f):257-(f-h);w.hold=A&(1<<F)-1;w.bits=F;f=e.next_out;g=e.output;h=e.avail_out;k=e.next_in;l=e.input;p=e.avail_in;n=d.hold;m=d.bits;12===d.mode&&(d.back=-1);break}for(d.back=0;;){x=d.lencode[n&(1<<d.lenbits)-1];t=x>>>24;
v=x>>>16&255;x&=65535;if(t<=m)break;if(0===p)break a;p--;n+=l[k++]<<m;m+=8}if(v&&0===(v&240)){B=t;A=v;for(F=x;;){x=d.lencode[F+((n&(1<<B+A)-1)>>B)];t=x>>>24;v=x>>>16&255;x&=65535;if(B+t<=m)break;if(0===p)break a;p--;n+=l[k++]<<m;m+=8}n>>>=B;m-=B;d.back+=B}n>>>=t;m-=t;d.back+=t;d.length=x;if(0===v){d.mode=26;break}if(v&32){d.back=-1;d.mode=12;break}if(v&64){e.msg="invalid literal/length code";d.mode=30;break}d.extra=v&15;d.mode=22;case 22:if(d.extra){for(v=d.extra;m<v;){if(0===p)break a;p--;n+=l[k++]<<
m;m+=8}d.length+=n&(1<<d.extra)-1;n>>>=d.extra;m-=d.extra;d.back+=d.extra}d.was=d.length;d.mode=23;case 23:for(;;){x=d.distcode[n&(1<<d.distbits)-1];t=x>>>24;v=x>>>16&255;x&=65535;if(t<=m)break;if(0===p)break a;p--;n+=l[k++]<<m;m+=8}if(0===(v&240)){B=t;A=v;for(F=x;;){x=d.distcode[F+((n&(1<<B+A)-1)>>B)];t=x>>>24;v=x>>>16&255;x&=65535;if(B+t<=m)break;if(0===p)break a;p--;n+=l[k++]<<m;m+=8}n>>>=B;m-=B;d.back+=B}n>>>=t;m-=t;d.back+=t;if(v&64){e.msg="invalid distance code";d.mode=30;break}d.offset=x;d.extra=
v&15;d.mode=24;case 24:if(d.extra){for(v=d.extra;m<v;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}d.offset+=n&(1<<d.extra)-1;n>>>=d.extra;m-=d.extra;d.back+=d.extra}if(d.offset>d.dmax){e.msg="invalid distance too far back";d.mode=30;break}d.mode=25;case 25:if(0===h)break a;t=r-h;if(d.offset>t){t=d.offset-t;if(t>d.whave&&d.sane){e.msg="invalid distance too far back";d.mode=30;break}t>d.wnext?(t-=d.wnext,v=d.wsize-t):v=d.wnext-t;t>d.length&&(t=d.length);B=d.window}else B=g,v=f-d.offset,t=d.length;t>h&&
(t=h);h-=t;d.length-=t;do g[f++]=B[v++];while(--t);0===d.length&&(d.mode=21);break;case 26:if(0===h)break a;g[f++]=d.length;h--;d.mode=21;break;case 27:if(d.wrap){for(;32>m;){if(0===p)break a;p--;n|=l[k++]<<m;m+=8}r-=h;e.total_out+=r;d.total+=r;r&&(e.adler=d.check=d.flags?ua(d.check,g,r,f-r):Vc(d.check,g,r,f-r));r=h;if((d.flags?n:wh(n))!==d.check){e.msg="incorrect data check";d.mode=30;break}m=n=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;32>m;){if(0===p)break a;p--;n+=l[k++]<<m;m+=8}if(n!==(d.total&
4294967295)){e.msg="incorrect length check";d.mode=30;break}m=n=0}d.mode=29;case 29:u=Jk;break a;case 30:u=th;break a;case 31:return uh;default:return Ra}e.next_out=f;e.avail_out=h;e.next_in=k;e.avail_in=p;d.hold=n;d.bits=m;(d.wsize||r!==e.avail_out&&30>d.mode&&(27>d.mode||c!==sh))&&Ch(e,e.output,e.next_out,r-e.avail_out);q-=e.avail_in;r-=e.avail_out;e.total_in+=q;e.total_out+=r;d.total+=r;d.wrap&&r&&(e.adler=d.check=d.flags?ua(d.check,g,r,e.next_out-r):Vc(d.check,g,r,e.next_out-r));e.data_type=d.bits+
(d.last?64:0)+(12===d.mode?128:0)+(20===d.mode||15===d.mode?256:0);(0===q&&0===r||c===sh)&&u===Yb&&(u=Lk);return u},inflateEnd:function(e){if(!e||!e.state)return Ra;var c=e.state;c.window&&(c.window=null);e.state=null;return Yb},inflateGetHeader:function(e,c){if(!e||!e.state)return Ra;e=e.state;if(0===(e.wrap&2))return Ra;e.head=c;c.done=!1;return Yb},inflateSetDictionary:function(e,c){var a=c.length;if(!e||!e.state)return Ra;var b=e.state;if(0!==b.wrap&&11!==b.mode)return Ra;if(11===b.mode){var d=
Vc(1,c,a,0);if(d!==b.check)return th}if(Ch(e,c,a,a))return b.mode=31,uh;b.havedict=1;return Yb},inflateInfo:"pako inflate (from Nodeca project)"},Gi=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1},If=Object.prototype.toString,Mk=T.Z_NO_FLUSH,Nk=T.Z_FINISH,Ac=T.Z_OK,cf=T.Z_STREAM_END,df=T.Z_NEED_DICT,Ok=T.Z_STREAM_ERROR,Dh=T.Z_DATA_ERROR,Pk=T.Z_MEM_ERROR;zc.prototype.push=function(e,c){var a=this.strm,b=this.options.chunkSize,
d=this.options.dictionary;if(this.ended)return!1;var f=c===~~c?c:!0===c?Nk:Mk;"[object ArrayBuffer]"===If.call(e)?a.input=new Uint8Array(e):a.input=e;a.next_in=0;for(a.avail_in=a.input.length;;){0===a.avail_out&&(a.output=new Uint8Array(b),a.next_out=0,a.avail_out=b);c=ib.inflate(a,f);c===df&&d&&(c=ib.inflateSetDictionary(a,d),c===Ac?c=ib.inflate(a,f):c===Dh&&(c=df));for(;0<a.avail_in&&c===cf&&0<a.state.wrap&&0!==e[a.next_in];)ib.inflateReset(a),c=ib.inflate(a,f);switch(c){case Ok:case Dh:case df:case Pk:return this.onEnd(c),
this.ended=!0,!1}var g=a.avail_out;if(a.next_out&&(0===a.avail_out||c===cf))if("string"===this.options.to){var h=yc.utf8border(a.output,a.next_out),k=a.next_out-h,l=yc.buf2string(a.output,h);a.next_out=k;a.avail_out=b-k;k&&a.output.set(a.output.subarray(h,h+k),0);this.onData(l)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(c!==Ac||0!==g){if(c===cf){c=ib.inflateEnd(this.strm);this.onEnd(c);this.ended=!0;break}if(0===a.avail_in)break}}return!0};zc.prototype.onData=
function(e){this.chunks.push(e)};zc.prototype.onEnd=function(e){e===Ac&&(this.result="string"===this.options.to?this.chunks.join(""):nd.flattenChunks(this.chunks));this.chunks=[];this.err=e;this.msg=this.strm.msg};var Eh={Deflate:wc,deflate:oe,deflateRaw:function(e,c){c=c||{};c.raw=!0;return oe(e,c)},gzip:function(e,c){c=c||{};c.gzip=!0;return oe(e,c)},Inflate:zc,inflate:pe,inflateRaw:function(e,c){c=c||{};c.raw=!0;return pe(e,c)},ungzip:pe,constants:T},ef=function(){function e(c){L(this,e);this._visible=
!0;this.options=this.getCommonDefaultOptions();this.options=Y(this.options,this.getDefaultOptions());this.autoUpdate=!1;this.options=Y(this.options,c);this.options.data&&(this.data=this.options.data,delete this.options.data)}M(e,[{key:"getCommonDefaultOptions",value:function(){return{}}},{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(c){}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy()}},{key:"show",value:function(){this._visible=!0}},{key:"hide",
value:function(){this._visible=!1}},{key:"render",value:function(){}},{key:"setData",value:function(c,a){a=a||{};this.data=c;this.onDataChanged&&this.onDataChanged(this.getData());this.onChanged&&this.onChanged(this.getOptions(),this.getData(),a);!1!==a.autoRender&&this.webglLayer&&this.webglLayer.render()}},{key:"getData",value:function(){return this.data||[]}},{key:"setOptions",value:function(c){c=c||{};var a=Y({},this.getOptions());Y(this.options,c);this.onOptionsChanged&&this.onOptionsChanged(this.getOptions(),
a);this.onChanged&&this.onChanged(this.getOptions(),this.getData());c.data?(this.setData(c.data),delete c.data):this.webglLayer&&this.webglLayer.render()}},{key:"getOptions",value:function(){return this.options||{}}},{key:"onOptionsChanged",value:function(c,a){}},{key:"onDataChanged",value:function(c){}},{key:"onChanged",value:function(c,a){}},{key:"onDestroy",value:function(){}},{key:"lnglatToMercator",value:function(c,a){}},{key:"setWebglLayer",value:function(c){this.webglLayer=c}},{key:"getWebglLayer",
value:function(){return this.webglLayer}},{key:"isRequestAnimation",value:function(){return this.autoUpdate}}]);return e}(),X=function(){function e(c,a,b){L(this,e);this.options=a;this.gl=c;b&&(this.map=b.map);b=this.getVertexShader(a.vertexShader);var d=this.getFragmentShader(a.fragmentShader);a=c.createShader(c.VERTEX_SHADER);c.shaderSource(a,b);c.compileShader(a);c.getShaderParameter(a,c.COMPILE_STATUS)?(b=c.createShader(c.FRAGMENT_SHADER),c.shaderSource(b,d),c.compileShader(b),c.getShaderParameter(b,
c.COMPILE_STATUS)?(d=c.createProgram(),c.attachShader(d,a),c.attachShader(d,b),c.deleteShader(a),c.deleteShader(b),c.linkProgram(d),c.getProgramParameter(d,c.LINK_STATUS)?a=d:(a="Shader program failed to link.  The error log is:"+c.getProgramInfoLog(d),console.error(a),a=-1)):(a="Fragment shader failed to compile.  The error log is:"+c.getShaderInfoLog(b),console.error(a),a=-1)):(a="Vertex shader failed to compile.  The error log is:"+c.getShaderInfoLog(a),console.error(a),a=-1);a=this.program=a;
b={};d=c.getProgramParameter(a,c.ACTIVE_ATTRIBUTES);for(var f=0;f<d;f++){var g=c.getActiveAttrib(a,f);b[g.name]=c.getAttribLocation(a,g.name)}f={};g={};for(var h=c.getProgramParameter(a,c.ACTIVE_UNIFORMS),k=0;k<h;k++){var l=c.getActiveUniform(a,k);f[l.name]=c.getUniformLocation(a,l.name);g[l.name]=l.type}this.parameter=c={attributes:b,numAttributes:d,uniformsType:g,uniforms:f};this.attributes=c.attributes;this.uniforms=c.uniforms;this.parameter=c}M(e,[{key:"getVertexShader",value:function(c){var a=
"";this.map&&"cesium"===this.map.type&&(a="#define LOG_DEPTH\n");a+="#ifdef LOG_DEPTH\nuniform float currentFrustumX;varying float v_depthFromNearPlusOne;\n#endif\nuniform vec2 MAPV_resolution;\n#if defined(PICK)\nuniform bool uIsPickRender;attribute vec3 aPickColor;uniform vec3 uPickedColor;varying vec4 vPickColor;uniform bool uEnablePicked;bool mapvIsPicked(){return uEnablePicked&&aPickColor==uPickedColor;}\n#endif\nvoid afterMain(){\n#if defined(LOG_DEPTH)\nv_depthFromNearPlusOne=(gl_Position.w-currentFrustumX)+1.0;gl_Position.z=clamp(gl_Position.z/gl_Position.w,-1.0,1.0)*gl_Position.w;\n#endif\n#if defined(PICK)\nvPickColor=vec4(aPickColor,0.0);if(mapvIsPicked()){vPickColor.a=1.0;}\n#endif\n}";
c=this.getDefines()+a+c;c=c.replace("void main","void originMain");return c+"void main() {originMain(); afterMain();}"}},{key:"getFragmentShader",value:function(c){var a="";this.map&&"cesium"===this.map.type&&(a="#define LOG_DEPTH\n");a+="#if defined(LOG_DEPTH)\n#extension GL_EXT_frag_depth : enable\n#endif\nprecision highp float;uniform vec2 MAPV_resolution;uniform bool uIsPickRender;\n#if defined(PICK)\nvarying vec4 vPickColor;bool mapvIsPicked(){return vPickColor.a==1.0;}\n#endif\n#if defined(LOG_DEPTH)\nuniform float oneOverLog2FarDepthFromNearPlusOne;uniform float farDepthFromNearPlusOne;varying float v_depthFromNearPlusOne;void writeLogDepth(float depth){if(depth<=0.9999999||depth>farDepthFromNearPlusOne){discard;}gl_FragDepthEXT=log2(depth)*oneOverLog2FarDepthFromNearPlusOne;}\n#endif\nvoid afterMain(){\n#if defined(PICK)\nif(uIsPickRender){gl_FragColor=vec4(vPickColor.rgb,1.0);return;}\n#endif\n#if defined(LOG_DEPTH)\nwriteLogDepth(v_depthFromNearPlusOne);\n#endif\n}";
c=this.getDefines()+a+c;c=c.replace("void main","void originMain");return c+"void main() {originMain(); afterMain();}"}},{key:"getDefines",value:function(){var c="",a=this.options.defines;if(a)for(var b=0;b<a.length;b++)c+="#define "+a[b]+"\n";return c}},{key:"use",value:function(c,a){this.gl=c;c.useProgram(this.program);this.map&&"cesium"===this.map.type&&this.setUniforms({currentFrustumX:this.map.map.scene.camera.frustum.near,oneOverLog2FarDepthFromNearPlusOne:this.map.map.scene.context.uniformState.oneOverLog2FarDepthFromNearPlusOne,
farDepthFromNearPlusOne:this.map.map.scene.context.uniformState.farDepthFromNearPlusOne});this.uniforms.MAPV_resolution&&this.setUniforms({MAPV_resolution:[c.canvas.width,c.canvas.height]})}},{key:"setUniform",value:function(c,a){var b=this.gl,d=this.uniforms[c];if(d)switch(this.parameter.uniformsType[c]){case b.FLOAT:b.uniform1f(d,a);break;case b.FLOAT_VEC2:b.uniform2f(d,a[0],a[1]);break;case b.FLOAT_VEC3:b.uniform3f(d,a[0],a[1],a[2]);break;case b.FLOAT_VEC4:b.uniform4f(d,a[0],a[1],a[2],a[3]);break;
case b.SAMPLER_2D:case b.SAMPLER_CUBE:b.activeTexture(b["TEXTURE"+this.textureIndex]);b.uniform1i(d,this.textureIndex);b.bindTexture(b.TEXTURE_2D,a);this.textureIndex++;break;case b.INT:case b.BOOL:b.uniform1i(d,a);break;case b.INT_VEC2:case b.BOOL_VEC2:b.uniform2i(d,a[0],a[1]);break;case b.INT_VEC3:case b.BOOL_VEC3:b.uniform3i(d,a[0],a[1],a[2]);break;case b.INT_VEC4:case b.BOOL_VEC4:b.uniform4i(d,a[0],a[1],a[2],a[3]);break;case b.FLOAT_MAT2:b.uniformMatrix2fv(d,!1,a);break;case b.FLOAT_MAT3:b.uniformMatrix3fv(d,
!1,a);break;case b.FLOAT_MAT4:b.uniformMatrix4fv(d,!1,a);break;default:console.error("Unrecognized uniform type: "+c)}else console.warn("Unrecognized uniform type: "+c)}},{key:"setUniforms",value:function(c){this.textureIndex=0;for(var a in c)this.setUniform(a,c[a])}}]);return e}(),ob=function(e,c,a,b){var d=a?a.call(b,e,c):void 0;if(void 0!==d)return!!d;if(e===c)return!0;if("object"!==("undefined"===typeof e?"undefined":Na(e))||!e||"object"!==("undefined"===typeof c?"undefined":Na(c))||!c)return!1;
var f=pa(e),g=pa(c);if(f.length!==g.length)return!1;g=Object.prototype.hasOwnProperty.bind(c);for(var h=0;h<f.length;h++){d=f[h];if(!g(d))return!1;var k=e[d],l=c[d];d=a?a.call(b,k,l,d):void 0;if(!1===d||void 0===d&&k!==l)return!1}return!0},Fh=function(){function e(c){L(this,e);this.options=c;this.gl=c.gl;this.savedState=[];this.currentState=this.getDefaultState()}M(e,[{key:"setDefaultState",value:function(){this.setState()}},{key:"getDefaultState",value:function(){var c=this.gl;return{blend:!1,blendEquation:c.FUNC_ADD,
blendFunc:[c.ONE,c.ZERO],depthMask:!0,depthTest:!0,depthFunc:c.LEQUAL,polygonOffset:[0,0],cullFace:!1,stencilTest:!1}}},{key:"getRealState",value:function(){var c=this.gl;return{blend:c.getParameter(c.BLEND),blendEquation:c.getParameter(c.BLEND_EQUATION),depthMask:c.getParameter(c.DEPTH_WRITEMASK),depthTest:c.getParameter(c.DEPTH_TEST),depthFunc:c.getParameter(c.DEPTH_FUNC),polygonOffset:[c.getParameter(c.POLYGON_OFFSET_FACTOR),c.getParameter(c.POLYGON_OFFSET_UNITS)],cullFace:c.getParameter(c.CULL_FACE),
stencilTest:c.getParameter(c.STENCIL_TEST)}}},{key:"getCurrentState",value:function(){return this.currentState}},{key:"save",value:function(){this.savedState.push(this.getCurrentState())}},{key:"restore",value:function(){var c=this.savedState.pop();this.setState(c,{force:!0})}},{key:"setState",value:function(c){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};c=Y(this.getDefaultState(),c);this.setBlend(c,a);this.setDepth(c,a);this.setCullFace(c,a);this.setPolygonOffset(c,a);this.setStencil(c,
a);this.currentState=c}},{key:"setBlend",value:function(c,a){var b=this.gl,d=this.getCurrentState();if((a=a.force)||!ob(c.blend,d.blend))c.blend?b.enable(b.BLEND):b.disable(b.BLEND);!a&&ob(c.blendEquation,d.blendEquation)||b.blendEquation(c.blendEquation);!a&&ob(c.blendFunc,d.blendFunc)||b.blendFunc(c.blendFunc[0],c.blendFunc[1])}},{key:"setDepth",value:function(c,a){var b=this.gl,d=this.getCurrentState();if((a=a.force)||!ob(c.depthTest,d.depthTest))c.depthTest?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST);
if(a||!ob(c.depthMask,d.depthMask))c.depthMask?b.depthMask(!0):b.depthMask(!1);!a&&ob(c.depthFunc,d.depthFunc)||b.depthFunc(c.depthFunc)}},{key:"setPolygonOffset",value:function(c,a){var b=this.gl,d=this.getCurrentState();if(a.force||!ob(c.polygonOffset,d.polygonOffset))0!==c.polygonOffset[0]&&0!==c.polygonOffset[1]?b.enable(b.POLYGON_OFFSET_FILL):b.disable(b.POLYGON_OFFSET_FILL),b.polygonOffset(c.polygonOffset[0],c.polygonOffset[1])}},{key:"setCullFace",value:function(c,a){var b=this.gl,d=this.getCurrentState();
if(a.force||!ob(c.cullFace,d.cullFace))c.cullFace?(b.enable(b.CULL_FACE),b.cullFace(b.BACK)):b.disable(b.CULL_FACE)}},{key:"setStencil",value:function(c,a){var b=this.gl,d=this.getCurrentState();if(a.force||!ob(c.stencilTest,d.stencilTest))c.stencilTest?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST)}}]);return e}(),O=function(){function e(c){L(this,e);this.options=c;this.gl=c.gl;this.buffer=this.gl.createBuffer();c.data&&this.updateData(c.data)}M(e,[{key:"updateData",value:function(c){var a=this.options,
b=this.gl;this.bind();b.bufferData(b[a.target],c,b[a.usage])}},{key:"bind",value:function(c){c=c||this.gl;c.bindBuffer(c[this.options.target],this.buffer)}},{key:"unBind",value:function(c){c=c||this.gl;c.bindBuffer(c[this.options.target],null)}},{key:"destroy",value:function(){this.buffer=null}}]);return e}(),Qk={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FLOAT:4},la=function(){function e(c){L(this,e);this.options=c;this.attributes=c.attributes;this.gl=c.gl;this.program=c.program;for(c=this.stride=
0;c<this.attributes.length;c++)this.stride+=Qk[this.attributes[c].type]*this.attributes[c].size}M(e,[{key:"setVertexAttribPointers",value:function(){for(var c=this.gl,a=this.program,b=0;b<this.attributes.length;b++){var d=this.attributes[b],e=a.attributes[d.name];void 0!==e&&(d.buffer.bind(c),c.vertexAttribPointer(e,d.size,c[d.type],d.normalize||!1,void 0!==d.stride?d.stride:this.stride,d.offset),c.enableVertexAttribArray(e))}}},{key:"bind",value:function(){this.setVertexAttribPointers()}},{key:"destroy",
value:function(){}}]);return e}(),va=function d(c,a,b){L(this,d);a=a||c.canvas.width;b=b||c.canvas.height;var f=c.createFramebuffer(),g=c.createTexture();c.bindTexture(c.TEXTURE_2D,g);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,b,0,c.RGBA,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);f.texture=
g;var h=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,h);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,a,b);f.depthBuffer=h;c.bindFramebuffer(c.FRAMEBUFFER,f);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,g,0);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,h);a=c.checkFramebufferStatus(c.FRAMEBUFFER);c.FRAMEBUFFER_COMPLETE===a&&(c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindTexture(c.TEXTURE_2D,null),c.bindRenderbuffer(c.RENDERBUFFER,
null),this.framebuffer=f)},nc=function(){function c(a){L(this,c);this.options={};Y(this.options,a);this.vertex=[-1,1,0,-1,-1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0];this.sampleCoord=[0,1,0,0,1,1,1,1,0,0,1,0]}M(c,[{key:"getOptions",value:function(){return this.options}},{key:"onResize",value:function(a){}},{key:"render",value:function(a){var b=a.gl;a=a.texture;var d=this.programSample;b.useProgram(d.program);var c=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c);var g=[-1,-1,0,-1,1,0,1,1,0,1,1,0,-1,-1,0,1,-1,
0];b.bufferData(b.ARRAY_BUFFER,new Float32Array(g),b.STATIC_DRAW);b.enableVertexAttribArray(d.attributes.aPos);b.vertexAttribPointer(d.attributes.aPos,3,b.FLOAT,!1,0,0);c=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,1,1,1,0,0,1,0]),b.STATIC_DRAW);b.enableVertexAttribArray(d.attributes.aTextureCoord);b.vertexAttribPointer(d.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,a);b.uniform1i(d.uniforms.uSampler,
0);b.drawArrays(b.TRIANGLES,0,g.length/3)}}]);return c}(),Rk=function(c){function a(b){L(this,a);return R(this,(a.__proto__||P(a)).call(this,b))}S(a,c);M(a,[{key:"getProgram",value:function(a){this.programSample||(this.programSample=new X(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(void){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision highp float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;vec4 fxaa_2_0(sampler2D tex,vec2 fragCoord,vec2 resolution,vec2 v_rgbNW,vec2 v_rgbNE,vec2 v_rgbSW,vec2 v_rgbSE,vec2 v_rgbM){vec4 color;mediump vec2 inverseVP=vec2(1.0/resolution.x,1.0/resolution.y);vec3 rgbNW=texture2D(tex,v_rgbNW).xyz;vec3 rgbNE=texture2D(tex,v_rgbNE).xyz;vec3 rgbSW=texture2D(tex,v_rgbSW).xyz;vec3 rgbSE=texture2D(tex,v_rgbSE).xyz;vec4 texColor=texture2D(tex,v_rgbM);vec3 rgbM=texColor.xyz;vec3 luma=vec3(0.299,0.587,0.114);float lumaNW=dot(rgbNW,luma);float lumaNE=dot(rgbNE,luma);float lumaSW=dot(rgbSW,luma);float lumaSE=dot(rgbSE,luma);float lumaM=dot(rgbM,luma);float lumaMin=min(lumaM,min(min(lumaNW,lumaNE),min(lumaSW,lumaSE)));float lumaMax=max(lumaM,max(max(lumaNW,lumaNE),max(lumaSW,lumaSE)));mediump vec2 dir;dir.x=-((lumaNW+lumaNE)-(lumaSW+lumaSE));dir.y=((lumaNW+lumaSW)-(lumaNE+lumaSE));float dirReduce=max((lumaNW+lumaNE+lumaSW+lumaSE)*(0.25*1.0/8.0),1.0/128.0);float rcpDirMin=1.0/(min(abs(dir.x),abs(dir.y))+dirReduce);dir=min(vec2(8.0,8.0),max(vec2(-8.0,-8.0),dir*rcpDirMin))*inverseVP;vec3 rgbA=0.5*(texture2D(tex,fragCoord*inverseVP+dir*(1.0/3.0-0.5)).xyz+texture2D(tex,fragCoord*inverseVP+dir*(2.0/3.0-0.5)).xyz);vec3 rgbB=rgbA*0.5+0.25*(texture2D(tex,fragCoord*inverseVP+dir*-0.5).xyz+texture2D(tex,fragCoord*inverseVP+dir*0.5).xyz);float lumaB=dot(rgbB,luma);if((lumaB<lumaMin)||(lumaB>lumaMax)){color=vec4(rgbA,texColor.a);}else{color=vec4(rgbB,texColor.a);}return color;}void texcoords_3_1(vec2 fragCoord,vec2 resolution,out vec2 v_rgbNW,out vec2 v_rgbNE,out vec2 v_rgbSW,out vec2 v_rgbSE,out vec2 v_rgbM){vec2 inverseVP=1.0/resolution.xy;v_rgbNW=(fragCoord+vec2(-1.0,-1.0))*inverseVP;v_rgbNE=(fragCoord+vec2(1.0,-1.0))*inverseVP;v_rgbSW=(fragCoord+vec2(-1.0,1.0))*inverseVP;v_rgbSE=(fragCoord+vec2(1.0,1.0))*inverseVP;v_rgbM=vec2(fragCoord*inverseVP);}vec4 apply_1_2(sampler2D tex,vec2 fragCoord,vec2 resolution){mediump vec2 v_rgbNW;mediump vec2 v_rgbNE;mediump vec2 v_rgbSW;mediump vec2 v_rgbSE;mediump vec2 v_rgbM;texcoords_3_1(fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);return fxaa_2_0(tex,fragCoord,resolution,v_rgbNW,v_rgbNE,v_rgbSW,v_rgbSE,v_rgbM);}void main(void){vec2 fragCoord=vTextureCoord*canvasSize;gl_FragColor=apply_1_2(uSampler,fragCoord,canvasSize);}"}));
return this.programSample}},{key:"render",value:function(a){var b=a.gl;a=a.texture;this.getOptions();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);var c=this.getProgram(b);b.useProgram(c.program);var g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,g);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.vertex),b.STATIC_DRAW);b.enableVertexAttribArray(c.attributes.aPos);b.vertexAttribPointer(c.attributes.aPos,3,b.FLOAT,!1,0,0);g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,g);b.bufferData(b.ARRAY_BUFFER,
new Float32Array(this.sampleCoord),b.STATIC_DRAW);b.enableVertexAttribArray(c.attributes.aTextureCoord);b.vertexAttribPointer(c.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,a);b.uniform1i(c.uniforms.uSampler,1);b.uniform2fv(c.uniforms.canvasSize,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.bindBuffer(b.ARRAY_BUFFER,null);b.useProgram(null)}}]);return a}(nc),Sk=function(c){function a(b){L(this,a);return R(this,
(a.__proto__||P(a)).call(this,b))}S(a,c);M(a,[{key:"getProgram",value:function(a){this.program1||(this.program1=new X(a,{vertexShader:"attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];void SMAAEdgeDetectionVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);vOffset[2]=texcoord.xyxy+resolution.xyxy*vec4(-2.0,0.0,0.0,2.0);}void main(){vUv=uv;SMAAEdgeDetectionVS(vUv);gl_Position=vec4(position,1.0);}",
fragmentShader:"precision highp float;\n#define SMAA_THRESHOLD 0.1\nuniform sampler2D tDiffuse;varying vec2 vUv;varying vec4 vOffset[3];vec4 SMAAColorEdgeDetectionPS(vec2 texcoord,vec4 offset[3],sampler2D colorTex){vec2 threshold=vec2(SMAA_THRESHOLD,SMAA_THRESHOLD);vec4 delta;vec3 C=texture2D(colorTex,texcoord).rgb;vec3 Cleft=texture2D(colorTex,offset[0].xy).rgb;vec3 t=abs(C-Cleft);delta.x=max(max(t.r,t.g),t.b);vec3 Ctop=texture2D(colorTex,offset[0].zw).rgb;t=abs(C-Ctop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0,1.0))==0.0)discard;vec3 Cright=texture2D(colorTex,offset[1].xy).rgb;t=abs(C-Cright);delta.z=max(max(t.r,t.g),t.b);vec3 Cbottom=texture2D(colorTex,offset[1].zw).rgb;t=abs(C-Cbottom);delta.w=max(max(t.r,t.g),t.b);float maxDelta=max(max(max(delta.x,delta.y),delta.z),delta.w);vec3 Cleftleft=texture2D(colorTex,offset[2].xy).rgb;t=abs(C-Cleftleft);delta.z=max(max(t.r,t.g),t.b);vec3 Ctoptop=texture2D(colorTex,offset[2].zw).rgb;t=abs(C-Ctoptop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(max(maxDelta,delta.z),delta.w);edges.xy*=step(0.5*maxDelta,delta.xy);return vec4(edges,0.0,0.0);}void main(){gl_FragColor=SMAAColorEdgeDetectionPS(vUv,vOffset,tDiffuse);}"}));
this.program2||(this.program2=new X(a,{vertexShader:"precision highp float;\n#define SMAA_MAX_SEARCH_STEPS 8\n#define SMAA_AREATEX_MAX_DISTANCE 16\n#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )\n#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )\nattribute vec3 position;attribute vec2 uv;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;void SMAABlendingWeightCalculationVS(vec2 texcoord){vPixcoord=texcoord/resolution;vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-0.25,0.125,1.25,0.125);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(-0.125,0.25,-0.125,-1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*resolution.xxyy*float(SMAA_MAX_SEARCH_STEPS);}void main(){vUv=uv;SMAABlendingWeightCalculationVS(vUv);gl_Position=vec4(position,1.0);}",
fragmentShader:"precision highp float;\n#define SMAA_MAX_SEARCH_STEPS 8\n#define SMAA_AREATEX_MAX_DISTANCE 16\n#define SMAA_AREATEX_PIXEL_SIZE ( 1.0 / vec2( 160.0, 560.0 ) )\n#define SMAA_AREATEX_SUBTEX_SIZE ( 1.0 / 7.0 )\n#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )\nuniform sampler2D tDiffuse;uniform sampler2D tArea;uniform sampler2D tSearch;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixcoord;vec2 round(vec2 x){return sign(x)*floor(abs(x)+0.5);}float SMAASearchLength(sampler2D searchTex,vec2 e,float bias,float scale){e.r=bias+e.r*scale;return 255.0*texture2D(searchTex,e,0.0).r;}float SMAASearchXLeft(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){/***@PSEUDO_GATHER4*This texcoord has been offset by(-0.25,-0.125)in the vertex shader to*sample between edge,thus fetching four edges in a row.*Sampling with different offsets in each direction allows to disambiguate*which edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(2.0,0.0)*resolution;if(!(texcoord.x>end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x+=0.25*resolution.x;texcoord.x+=resolution.x;texcoord.x+=2.0*resolution.x;texcoord.x-=resolution.x*SMAASearchLength(searchTex,e,0.0,0.5);return texcoord.x;}float SMAASearchXRight(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(2.0,0.0)*resolution;if(!(texcoord.x<end&&e.g>0.8281&&e.r==0.0))break;}texcoord.x-=0.25*resolution.x;texcoord.x-=resolution.x;texcoord.x-=2.0*resolution.x;texcoord.x+=resolution.x*SMAASearchLength(searchTex,e,0.5,0.5);return texcoord.x;}float SMAASearchYUp(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord+=vec2(0.0,2.0)*resolution;if(!(texcoord.y>end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y-=0.25*resolution.y;texcoord.y-=resolution.y;texcoord.y-=2.0*resolution.y;texcoord.y+=resolution.y*SMAASearchLength(searchTex,e.gr,0.0,0.5);return texcoord.y;}float SMAASearchYDown(sampler2D edgesTex,sampler2D searchTex,vec2 texcoord,float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<SMAA_MAX_SEARCH_STEPS;i++){e=texture2D(edgesTex,texcoord,0.0).rg;texcoord-=vec2(0.0,2.0)*resolution;if(!(texcoord.y<end&&e.r>0.8281&&e.g==0.0))break;}texcoord.y+=0.25*resolution.y;texcoord.y+=resolution.y;texcoord.y+=2.0*resolution.y;texcoord.y-=resolution.y*SMAASearchLength(searchTex,e.gr,0.5,0.5);return texcoord.y;}vec2 SMAAArea(sampler2D areaTex,vec2 dist,float e1,float e2,float offset){vec2 texcoord=float(SMAA_AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texcoord=SMAA_AREATEX_PIXEL_SIZE*texcoord+(0.5*SMAA_AREATEX_PIXEL_SIZE);texcoord.y+=SMAA_AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTex,texcoord,0.0).rg;}vec4 SMAABlendingWeightCalculationPS(vec2 texcoord,vec2 pixcoord,vec4 offset[3],sampler2D edgesTex,sampler2D areaTex,sampler2D searchTex,ivec4 subsampleIndices){vec4 weights=vec4(0.0,0.0,0.0,0.0);vec2 e=texture2D(edgesTex,texcoord).rg;if(e.g>0.0){vec2 d;vec2 coords;coords.x=SMAASearchXLeft(edgesTex,searchTex,offset[0].xy,offset[2].x);coords.y=offset[1].y;d.x=coords.x;float e1=texture2D(edgesTex,coords,0.0).r;coords.x=SMAASearchXRight(edgesTex,searchTex,offset[0].zw,offset[2].y);d.y=coords.x;d=d/resolution.x-pixcoord.x;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(1,0)).r;weights.rg=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.y));}if(e.r>0.0){vec2 d;vec2 coords;coords.y=SMAASearchYUp(edgesTex,searchTex,offset[1].xy,offset[2].z);coords.x=offset[0].x;d.x=coords.y;float e1=texture2D(edgesTex,coords,0.0).g;coords.y=SMAASearchYDown(edgesTex,searchTex,offset[1].zw,offset[2].w);d.y=coords.y;d=d/resolution.y-pixcoord.y;vec2 sqrt_d=sqrt(abs(d));coords.y-=1.0*resolution.y;float e2=SMAASampleLevelZeroOffset(edgesTex,coords,ivec2(0,1)).g;weights.ba=SMAAArea(areaTex,sqrt_d,e1,e2,float(subsampleIndices.x));}return weights;}void main(){gl_FragColor=SMAABlendingWeightCalculationPS(vUv,vPixcoord,vOffset,tDiffuse,tArea,tSearch,ivec4(0.0));}"}));
this.program3||(this.program3=new X(a,{vertexShader:"precision highp float;uniform vec2 resolution;attribute vec3 position;attribute vec2 uv;varying vec2 vUv;varying vec4 vOffset[2];void SMAANeighborhoodBlendingVS(vec2 texcoord){vOffset[0]=texcoord.xyxy+resolution.xyxy*vec4(-1.0,0.0,0.0,1.0);vOffset[1]=texcoord.xyxy+resolution.xyxy*vec4(1.0,0.0,0.0,-1.0);}void main(){vUv=uv;SMAANeighborhoodBlendingVS(vUv);gl_Position=vec4(position,1.0);}",fragmentShader:"precision highp float;uniform sampler2D tDiffuse;uniform sampler2D tColor;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[2];vec4 SMAANeighborhoodBlendingPS(vec2 texcoord,vec4 offset[2],sampler2D colorTex,sampler2D blendTex){vec4 a;a.xz=texture2D(blendTex,texcoord).xz;a.y=texture2D(blendTex,offset[1].zw).g;a.w=texture2D(blendTex,offset[1].xy).a;if(dot(a,vec4(1.0,1.0,1.0,1.0))<1e-5){return texture2D(colorTex,texcoord,0.0);}else{vec2 offset;offset.x=a.a>a.b ? a.a :-a.b;offset.y=a.g>a.r ?-a.g : a.r;if(abs(offset.x)>abs(offset.y)){offset.y=0.0;}else{offset.x=0.0;}vec4 C=texture2D(colorTex,texcoord,0.0);texcoord+=sign(offset)*resolution;vec4 Cop=texture2D(colorTex,texcoord,0.0);float s=abs(offset.x)>abs(offset.y)? abs(offset.x): abs(offset.y);C.xyz=pow(C.xyz,vec3(2.2));Cop.xyz=pow(Cop.xyz,vec3(2.2));vec4 mixed=mix(C,Cop,s);mixed.xyz=pow(mixed.xyz,vec3(1.0/2.2));return mixed;}}void main(){gl_FragColor=SMAANeighborhoodBlendingPS(vUv,vOffset,tColor,tDiffuse);}"}));
if(!this.vertexBuffer||!this.sampleBuffer){this.vertexBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.sampleBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.vertexBuffer.updateData(new Float32Array(this.vertex));this.sampleBuffer.updateData(new Float32Array(this.sampleCoord));var b=[{stride:12,name:"position",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"uv",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}];this.vertexArray1=new la({gl:a,
program:this.program1,attributes:b});this.vertexArray2=new la({gl:a,program:this.program2,attributes:b});this.vertexArray3=new la({gl:a,program:this.program3,attributes:b})}return{program1:this.program1,program2:this.program2,program3:this.program3}}},{key:"onResize",value:function(a){this.collectBrightBuffer=new va(a);this.bloomBuffer=new va(a)}},{key:"getExtraFbo",value:function(a){this.collectBrightBuffer||(this.collectBrightBuffer=new va(a));this.bloomBuffer||(this.bloomBuffer=new va(a));return{collectBrightBuffer:this.collectBrightBuffer.framebuffer,
bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(a){var b=a.gl,c=a.texture;a=a.fbo;this.getOptions();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);var g=this.getProgram(b),h=g.program1,k=g.program2;g=g.program3;var l=this.getExtraFbo(b),p=l.collectBrightBuffer;l=l.bloomBuffer;var n=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,n);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.vertex),b.STATIC_DRAW);b.enableVertexAttribArray(h.attributes.position);b.vertexAttribPointer(h.attributes.position,
3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(k.attributes.position);b.vertexAttribPointer(k.attributes.position,3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(g.attributes.position);b.vertexAttribPointer(g.attributes.position,3,b.FLOAT,!1,0,0);n=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,n);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.sampleCoord),b.STATIC_DRAW);b.enableVertexAttribArray(h.attributes.uv);b.vertexAttribPointer(h.attributes.uv,2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(k.attributes.uv);
b.vertexAttribPointer(k.attributes.uv,2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(g.attributes.uv);b.vertexAttribPointer(g.attributes.uv,2,b.FLOAT,!1,0,0);b.useProgram(h.program);b.bindFramebuffer(b.FRAMEBUFFER,p);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE2);b.bindTexture(b.TEXTURE_2D,c);b.uniform1i(h.uniforms.tDiffuse,2);b.uniform2fv(h.uniforms.resolution,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(k.program);
b.bindFramebuffer(b.FRAMEBUFFER,l);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE2);b.bindTexture(b.TEXTURE_2D,p.texture);b.uniform1i(k.uniforms.uSampler,2);b.uniform2fv(k.uniforms.resolution,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(g.program);b.bindFramebuffer(b.FRAMEBUFFER,a);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE2);b.bindTexture(b.TEXTURE_2D,
c);b.uniform1i(g.uniforms.tDiffuse,2);b.activeTexture(b.TEXTURE3);b.bindTexture(b.TEXTURE_2D,l.texture);b.uniform1i(g.uniforms.tColor,3);b.uniform2fv(g.uniforms.resolution,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.bindBuffer(b.ARRAY_BUFFER,null);b.useProgram(null)}},{key:"getAreaTexture",value:function(){return"data:image/png;base64,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"}},
{key:"getSearchTexture",value:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAIAAADiVupLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrs00EKgAAIRNEZ739mTQoiwmhRi4L/FiKiu9ERISkzbXdTVV3H4WhfOG6ehl1rNR7qDSF8hwkVcJXt+3A//I0Nv0GoCBUAAAAAAMA/LAIMAB+Dcg2OE2zsAAAAAElFTkSuQmCC"}}]);return a}(nc),Tk=function(c){function a(b){L(this,a);return R(this,(a.__proto__||P(a)).call(this,b))}S(a,c);M(a,[{key:"getProgram",value:function(a){this.programSample||(this.programSample=
new X(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){float fStep=1.0/512.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;gl_FragColor=blurSample;}"}),
this.vertexBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.sampleBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord)),this.vertexArray=new la({gl:a,program:this.programSample,attributes:[{stride:12,name:"aPos",buffer:this.vertexBuffer,size:3,type:"FLOAT",offset:0},{stride:8,name:"aTextureCoord",buffer:this.sampleBuffer,size:2,type:"FLOAT",offset:0}]}));
return this.programSample}},{key:"render",value:function(a){var b=a.gl;a=a.texture;b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);var c=this.getProgram(b);c.use(b);this.vertexArray.bind();b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,a);b.uniform1i(c.uniforms.uSampler,1);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3)}}]);return a}(nc),Uk=function(c){function a(b){L(this,a);return R(this,(a.__proto__||P(a)).call(this,b))}S(a,c);M(a,[{key:"getProgram",value:function(a){this.programBright||
(this.programBright=new X(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-(1.0-threshold)/5.0));float brightness=dot(color.rgb,vec3(0.2126,0.7152,0.0722));if(brightness>threshold){color=lightColor;}else{color=vec4(0.0);}gl_FragColor=color;}"}));
this.programBloom||(this.programBloom=new X(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"}));
this.programResult||(this.programResult=new X(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord);vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"}));
return{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(a){this.collectBrightBuffer=new va(a);this.bloomBuffer=new va(a)}},{key:"getExtraFbo",value:function(a){this.collectBrightBuffer||(this.collectBrightBuffer=new va(a));this.bloomBuffer||(this.bloomBuffer=new va(a));return{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(a){var b=a.gl,
c=a.texture;a=a.fbo;var g=this.getOptions();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);var h=this.getProgram(b),k=h.programBright,l=h.programBloom;h=h.programResult;var p=this.getExtraFbo(b),n=p.collectBrightBuffer;p=p.bloomBuffer;var m=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,m);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.vertex),b.STATIC_DRAW);b.enableVertexAttribArray(k.attributes.aPos);b.vertexAttribPointer(k.attributes.aPos,3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(l.attributes.aPos);
b.vertexAttribPointer(l.attributes.aPos,3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(h.attributes.aPos);b.vertexAttribPointer(h.attributes.aPos,3,b.FLOAT,!1,0,0);m=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,m);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.sampleCoord),b.STATIC_DRAW);b.enableVertexAttribArray(k.attributes.aTextureCoord);b.vertexAttribPointer(k.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(l.attributes.aTextureCoord);b.vertexAttribPointer(l.attributes.aTextureCoord,
2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(h.attributes.aTextureCoord);b.vertexAttribPointer(h.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.useProgram(k.program);b.bindFramebuffer(b.FRAMEBUFFER,n);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,c);b.uniform1i(k.uniforms.uSampler,1);b.uniform1f(k.uniforms.threshold,g.threshold||0);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(l.program);b.bindFramebuffer(b.FRAMEBUFFER,
p);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,n.texture);b.uniform1i(l.uniforms.uSampler,1);b.uniform1i(l.uniforms.isVertical,!0);b.uniform1f(l.uniforms.blurSize,g.blurSize||2);b.uniform1f(l.uniforms.devicePixelRatio,window.devicePixelRatio);b.uniform2fv(l.uniforms.canvasSize,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(l.program);b.bindFramebuffer(b.FRAMEBUFFER,n);b.clearColor(0,
0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,p.texture);b.uniform1i(l.uniforms.uSampler,1);b.uniform1i(l.uniforms.isVertical,!1);b.uniform1f(l.uniforms.blurSize,g.blurSize||2);b.uniform1f(l.uniforms.devicePixelRatio,window.devicePixelRatio);b.uniform2fv(l.uniforms.canvasSize,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(h.program);b.bindFramebuffer(b.FRAMEBUFFER,a);b.clearColor(0,0,0,
0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,c);b.uniform1i(h.uniforms.originalTexture,1);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,n.texture);b.uniform1i(h.uniforms.bloomTexture,0);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.bindBuffer(b.ARRAY_BUFFER,null);b.useProgram(null)}}]);return a}(nc),Vk=function(c){function a(b){L(this,a);return R(this,(a.__proto__||P(a)).call(this,b))}S(a,c);M(a,[{key:"getProgram",value:function(a){this.programBright||
(this.programBright=new X(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-threshold));gl_FragColor=lightColor;}"}));this.programBloom||(this.programBloom=new X(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",
fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}"}));
this.programResult||(this.programResult=new X(a,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;uniform float toneScale;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord)*toneScale;vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}"}));
return{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:"onResize",value:function(a){this.collectBrightBuffer=new va(a);this.bloomBuffer=new va(a)}},{key:"getExtraFbo",value:function(a){this.collectBrightBuffer||(this.collectBrightBuffer=new va(a));this.bloomBuffer||(this.bloomBuffer=new va(a));return{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:"render",value:function(a){var b=a.gl,
c=a.texture;a=a.fbo;var g=this.getOptions(),h="clarity"in g?g.clarity:1;h=Math.max(0,h);h=Math.min(1,h);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);var k=this.getProgram(b),l=k.programBright,p=k.programBloom;k=k.programResult;var n=this.getExtraFbo(b),m=n.collectBrightBuffer;n=n.bloomBuffer;var q=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,q);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.vertex),b.STATIC_DRAW);b.enableVertexAttribArray(l.attributes.aPos);b.vertexAttribPointer(l.attributes.aPos,
3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(p.attributes.aPos);b.vertexAttribPointer(p.attributes.aPos,3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(k.attributes.aPos);b.vertexAttribPointer(k.attributes.aPos,3,b.FLOAT,!1,0,0);q=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,q);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.sampleCoord),b.STATIC_DRAW);b.enableVertexAttribArray(l.attributes.aTextureCoord);b.vertexAttribPointer(l.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(p.attributes.aTextureCoord);
b.vertexAttribPointer(p.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(k.attributes.aTextureCoord);b.vertexAttribPointer(k.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.useProgram(l.program);b.bindFramebuffer(b.FRAMEBUFFER,m);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,c);b.uniform1i(l.uniforms.uSampler,1);b.uniform1f(l.uniforms.threshold,g.threshold||0);b.drawArrays(b.TRIANGLES,0,this.vertex.length/
3);b.useProgram(p.program);b.bindFramebuffer(b.FRAMEBUFFER,n);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,m.texture);b.uniform1i(p.uniforms.uSampler,1);b.uniform1i(p.uniforms.isVertical,!0);b.uniform1f(p.uniforms.blurSize,g.blurSize||2);b.uniform1f(p.uniforms.devicePixelRatio,window.devicePixelRatio);b.uniform2fv(p.uniforms.canvasSize,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(p.program);
b.bindFramebuffer(b.FRAMEBUFFER,m);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,n.texture);b.uniform1i(p.uniforms.uSampler,1);b.uniform1i(p.uniforms.isVertical,!1);b.uniform1f(p.uniforms.blurSize,g.blurSize||2);b.uniform1f(p.uniforms.devicePixelRatio,window.devicePixelRatio);b.uniform2fv(p.uniforms.canvasSize,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(k.program);b.bindFramebuffer(b.FRAMEBUFFER,
a);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,c);b.uniform1i(k.uniforms.originalTexture,1);b.uniform1f(k.uniforms.toneScale,h);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,m.texture);b.uniform1i(k.uniforms.bloomTexture,0);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.bindBuffer(b.ARRAY_BUFFER,null);b.useProgram(null)}}]);return a}(nc),Wk=function(c){function a(b){L(this,a);return R(this,(a.__proto__||P(a)).call(this,
b))}S(a,c);M(a,[{key:"getProgram",value:function(b){this.programSample||(this.programSample=new X(b,{vertexShader:"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;void main(){float fStep=1.0/312.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;float desX=abs((gl_FragCoord.x-canvasSize.x/2.0)/(canvasSize.x/2.0));float desY=abs((gl_FragCoord.y-canvasSize.y/2.0)/(canvasSize.y/2.0));float factor=max(desX,desY);gl_FragColor=(sample22*(1.0-factor)+blurSample*factor);}"}));
return this.programSample}},{key:"render",value:function(b){var a=b.gl;b=b.texture;var c=this.getProgram(a);a.useProgram(c.program);var g=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,g);a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.vertex),a.STATIC_DRAW);a.enableVertexAttribArray(c.attributes.aPos);a.vertexAttribPointer(c.attributes.aPos,3,a.FLOAT,!1,0,0);g=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,g);a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.sampleCoord),a.STATIC_DRAW);a.enableVertexAttribArray(c.attributes.aTextureCoord);
a.vertexAttribPointer(c.attributes.aTextureCoord,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE1);a.bindTexture(a.TEXTURE_2D,b);a.uniform1i(c.uniforms.uSampler,1);a.uniform2fv(c.uniforms.canvasSize,[a.canvas.width,a.canvas.height]);a.drawArrays(a.TRIANGLES,0,this.vertex.length/3)}}]);return a}(nc),Gh=function(){function c(a){L(this,c);this.gl=a;this.effects=[];this.initFbo()}M(c,[{key:"addEffect",value:function(a){this.effects.push(a)}},{key:"removeEffect",value:function(a){}},{key:"setEffects",value:function(a){this.effects=
a}},{key:"onResize",value:function(){this.initFbo();var a=this.gl,b=this.effects;if(b&&1<b.length)for(var d=1;d<b.length;d++){var c=b[d];c.onResize&&c.onResize(a)}}},{key:"initFbo",value:function(){var a=this.gl;a&&(this.fbo=[new va(a),new va(a)])}},{key:"destroy",value:function(){this.effects=[];this.fbo=[];this.gl=null}},{key:"render",value:function(){var a=this.gl,b=this.effects;if(b&&0<b.length)for(var d={},c=0;c<b.length;c++){var g=this.fbo[c%2].framebuffer;c===b.length-1&&(g=null);a.bindFramebuffer(a.FRAMEBUFFER,
g);var h=[0,0,0,0];a.clearColor(h[0],h[1],h[2],h[3]);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);b[c].render({isPickRender:!1,gl:a,texture:d.texture,fbo:g});d=g}}}]);return c}(),ca=function(c){function a(b){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b));b.pickedColor=[-1,-1,-1];return b}S(a,c);M(a,[{key:"getCommonDefaultOptions",value:function(){return{zIndex:0,zoomThreshold:[0,30],repeat:!1,enablePicked:!1,autoSelect:!1,selectedIndex:-1,selectedColor:"rgba(20, 20, 200, 1.0)"}}},{key:"commonInitialize",
value:function(b){var a=this.getOptions();this.gl=b;a.enablePicked&&(this.pickBuffer=new O({gl:b,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"}))}},{key:"getCommonAttributes",value:function(){var a=[];this.getOptions().enablePicked&&a.push({name:"aPickColor",buffer:this.pickBuffer,size:3,type:"FLOAT",stride:12,offset:0});return a}},{key:"getProperty",value:function(a,d,c){if("[object Function]"===Object.prototype.toString.call(d))return d(c);d=c[a]||d;"properties"in c&&a in c.properties&&(d=c.properties[a]);
return d}},{key:"normizedColor",value:function(a){var b=a;a instanceof Array||(b=ia(a).unitArray());void 0===b[3]&&(b[3]=1);return b}},{key:"normizedPoint",value:function(a){var b=this.getPointOffset();if(!a||!a[0]||!a[1])return[b[0],b[1],0];var c=Number(a[0]),g=Number(a[1]);-180<=c&&180>=c&&-90<=g&&90>=g&&(g=this.webglLayer.map.lnglatToMercator(c,g),c=g[0],g=g[1]);var h=Number(a[2])||0;this.webglLayer&&"cesium"===this.webglLayer.options.mapType&&window.Cesium?(c=this.convertLngLat([c,g]),h=window.Cesium.Cartesian3.fromDegrees(c[0],
c[1],h),c=h.x,g=h.y,h=h.z):this.webglLayer&&"bmapgl"===this.webglLayer.options.mapType&&"B_EARTH_MAP"===this.webglLayer.map.map.mapType&&(c=this.convertLngLat([c,g]),h=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:c[0],lat:c[1]}),c=h.x,g=h.y,h=h.z);return 3<a.length?[c-b[0],g-b[1],h].concat(Z(a.slice(3))):[c-b[0],g-b[1],h]}},{key:"convertLngLat",value:function(a){return[a[0]/2.003750834E7*180,180/Math.PI*(2*Math.atan(Math.exp(a[1]/2.003750834E7*180*Math.PI/180))-Math.PI/2)]}},{key:"getPointOffset",
value:function(){var a=[0,0],c=this.getOptions();this.webglLayer&&this.webglLayer.options.pointOffset?a=this.webglLayer.options.pointOffset:c.pointOffset&&(a=c.pointOffset);return a}},{key:"indexToRgb",value:function(a){a++;var b=Math.floor(a/65536);a-=65536*b;var c=Math.floor(a/256);return[a-256*c,c,b]}},{key:"rgbToIndex",value:function(a){return a[0]+256*a[1]+65536*a[2]-1}},{key:"getCommonUniforms",value:function(a){a=a.isPickRender;var b=this.getOptions(),c={};if(b.enablePicked){var g=0<=b.selectedIndex?
b.selectedIndex:-1;g=b.autoSelect?this.pickedColor:this.indexToRgb(g);c=Y(c,{uSelectedColor:this.normizedColor(b.selectedColor),uEnablePicked:b.enablePicked,uPickedColor:g.map(function(a){return a/255}),uIsPickRender:!!a})}return c}},{key:"pick",value:function(a,c){var b=this.gl;this.webglLayer.saveFramebuffer();this.webglLayer.bindFramebuffer(this.webglLayer.pickFBO);this.webglLayer.clear();this.render({gl:b,isPickRender:!0,matrix:this.webglLayer.matrix,projectionMatrix:this.webglLayer.projectionMatrix,
viewMatrix:this.webglLayer.viewMatrix,orthoMatrix:this.webglLayer.orthoMatrix});var d=new Uint8Array(4);b.readPixels(a*window.devicePixelRatio,b.canvas.height-c*window.devicePixelRatio,1,1,b.RGBA,b.UNSIGNED_BYTE,d);a=this.rgbToIndex(d);c=this.getData();this.pickedColor=[d[0],d[1],d[2]];this.webglLayer.restoreFramebuffer();return{dataIndex:a,dataItem:c[a]}}},{key:"setGLState",value:function(a){this.webglLayer.stateManager.setState(a)}},{key:"addMultipleCoords",value:function(a,c,f){if(!this.options.repeat||
!this.webglLayer||"bmapgl"!==this.webglLayer.options.mapType||"B_EARTH_MAP"===this.webglLayer.map.map.mapType)return[a];var b=this.webglLayer.map.map;c=c||b.getZoom();var d=f?b.worldSize(c):4.007545274461451E7;c=function(a){return[[a[0]-d,a[1],a[2]||0],[a[0]+d,a[1],a[2]||0]]};if(a instanceof Array&&!(a[0]instanceof Array))return c=c(a),c=ka(c,2),[a,c[0],c[1]];if(a instanceof Array&&a[0]instanceof Array&&!(a[0][0]instanceof Array)){f=[];b=[];for(var k=0;k<a.length;k++){var l=c(a[k]);l=ka(l,2);var p=
l[1];f.push(l[0]);b.push(p)}return[a,f,b]}f=[];b=[];for(k=0;k<a.length;k++){l=[];p=[];for(var n=0;n<a[k].length;n++){var m=c(a[k][n]);m=ka(m,2);var q=m[1];l.push(m[0]);p.push(q)}f.push(l);b.push(p)}return[a,f,b]}}]);return a}(ef),Xk=function(c){function a(b){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b));b.bufferData=[];b.initializeTime=new Date;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{size:10,unit:"px",color:"blue",antialias:!0}}},{key:"initialize",value:function(a){this.gl=
a;var b=this.getOptions();this.program=new X(this.gl,{vertexShader:"attribute vec3 aPos;attribute float aSize;attribute float aIndex;attribute vec4 aColor;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;float x=aPos.x;float y=aPos.y;float z=aPos.z*uZoomUnits;vSize=aSize*uZoomUnits;if(aIndex==1.0){x+=vSize;y-=vSize;}else if(aIndex==2.0){x-=vSize;y+=vSize;}else if(aIndex==3.0){x+=vSize;y+=vSize;}else{x-=vSize;y-=vSize;}vPosition=vec4(aPos.xyz,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;\n#if defined(PICK)\nif(mapvIsPicked()){vColor=uSelectedColor;}\n#endif\n}",
fragmentShader:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float lineWidth;uniform float uAntiAliasing;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>vSize){discard;}vec4 color=vColor;if(uAntiAliasing==1.0&&d>0.9*vSize&&d<=vSize){color.a*=1.0-smoothstep(0.9*vSize,vSize,d);}gl_FragColor=color;}",defines:b.enablePicked?["PICK"]:[]},this);this.buffer=
new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});b=[{stride:36,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:36,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:12},{stride:36,name:"aIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:16},{stride:36,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:20}];b=b.concat(this.getCommonAttributes());this.vertexArray=new la({gl:a,
program:this.program,attributes:b})}},{key:"onChanged",value:function(a,c){this.gl&&c&&(this.uniforms={},this.data=c,this.processData(),a.enablePicked&&this.parsePickData(c))}},{key:"processData",value:function(){var a=this,c=[],f=[];this.data.forEach(function(b,d){var k=b.color||a.options.color,g=b.size||a.options.size;k=a.normizedColor(k);b=a.normizedPoint(b.geometry.coordinates);for(var h=0;4>h;h++)c.push(b[0],b[1],b[2]||0,g,h),c.push(k[0],k[1],k[2],k[3]);k=4*d;0<d&&f.push(k-1,k);f.push(k,k+1,
k+2,k+3)});this.bufferData=c;this.indexData=f;this.buffer.updateData(new Float32Array(c));this.indexBuffer.updateData(new Uint32Array(f))}},{key:"parsePickData",value:function(a){var b=[];if(this.getOptions().enablePicked){for(var c=0;c<a.length;c++){var g=this.indexToRgb(c);b.push(g[0]/255,g[1]/255,g[2]/255);b.push(g[0]/255,g[1]/255,g[2]/255);b.push(g[0]/255,g[1]/255,g[2]/255);b.push(g[0]/255,g[1]/255,g[2]/255)}this.pickBuffer.updateData(new Float32Array(b))}}},{key:"render",value:function(a){var b=
this.program,c=a.gl,g=a.matrix;this.setGLState({blend:!0,blendEquation:c.FUNC_ADD,blendFunc:[c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA]});b.use(c);this.vertexArray.bind();this.indexBuffer.bind();var h=this.map.getZoomUnits();Y(this.uniforms,this.getCommonUniforms(a),{uZoomUnits:"px"===this.options.unit?h:1,uMatrix:g,uAntiAliasing:this.options.antialias?1:0});b.setUniforms(this.uniforms);c.drawElements(c.TRIANGLE_STRIP,this.indexData.length,c.UNSIGNED_INT,0)}}]);return a}(ca),Hh={wave:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;varying float vWidth;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}vec4 color=vColor;float R=vRadius;float center=vSize;float time=vStartTime+uTime;float alpha=sin((R-d)/R*trail*2.0*3.14+time/duration);if(d<=center){if(uAntiAliasing==1.0&&d>0.9*center&&d<=center){if(alpha>=0.5){color.a=0.9;}else{color.a=1.0-smoothstep(0.9*center,center,d);}}}else{if(alpha>=0.5){color.a=0.9;if(uAntiAliasing==1.0){if(alpha>=0.5&&alpha<=0.6){color.a*=smoothstep(0.0,0.1,alpha-0.5);}if(d>=0.98*R&&d<=R){color.a*=1.0-smoothstep(0.98,1.0,d/R);}}}else{color.a=0.0;}}gl_FragColor=color;}",
bubble:"varying vec4 vPosition;varying float vSize;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;varying float vWidth;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}float time=vStartTime+uTime;float range=mod(time,(duration+trail));float percent=0.0;if(range<=duration){percent=range/duration;}else{percent=1.0;}float center=vSize;float R=vRadius;float r=R*percent;vec4 color=vColor;if(d<=center){if(uAntiAliasing==1.0&&d>0.9*center&&d<=center){color.a=1.0-smoothstep(0.9*center,center,d);}}else{if(d<r){color.a=smoothstep(0.1,0.9,pow(d/r,2.0)*0.9);if(uAntiAliasing==1.0&&d>=0.9*r&&d<=r){color.a*=1.0-smoothstep(0.9,1.0,d/r);}if(range>duration){color.a*=1.0-(range-duration)/trail;}}else{color.a=0.0;}}gl_FragColor=color;}",
breath:"varying vec4 vPosition;varying vec4 vFragPosition;varying vec4 vColor;varying float vStartTime;varying float vRadius;uniform float uTime;uniform float duration;uniform float trail;uniform float uAntiAliasing;void main(){float d=distance(vFragPosition.xy,vPosition.xy);if(d>=vRadius){discard;}vec4 color=vColor;if(uAntiAliasing==1.0&&d>0.9*vRadius&&d<=vRadius){color.a=1.0-smoothstep(0.9*vRadius,vRadius,d);}float time=vStartTime+uTime;float range=mod(time,(duration+trail));float percent=0.0;if(range<=duration){percent=range/duration;}else{percent=1.0;}color.a*=abs(1.0-percent*2.0)+0.2;gl_FragColor=color;}"},
Yk=function(c){function a(b){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b));b.autoUpdate=!0;b.bufferData=[];b.initializeTime=new Date;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,type:"bubble",size:10,duration:1,trail:1,unit:"px",random:!0,color:"blue",antialias:!0,radius:function(a){return 2*a}}}},{key:"initialize",value:function(a){this.gl=a;this.program=new X(this.gl,{vertexShader:"attribute vec3 aPos;attribute float aSize;attribute float aIndex;attribute vec4 aColor;attribute float aStartTime;attribute float aRadius;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vWidth;varying float vStartTime;varying float vRadius;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vStartTime=aStartTime;vSize=aSize*uZoomUnits;vRadius=aRadius*uZoomUnits;float x=aPos.x;float y=aPos.y;float z=aPos.z*uZoomUnits;float R=vRadius;if(aIndex==1.0){x+=R;y-=R;}else if(aIndex==2.0){x-=R;y+=R;}else if(aIndex==3.0){x+=R;y+=R;}else{x-=R;y-=R;}vPosition=vec4(aPos.xy,z,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;\n#if defined(PICK)\nif(mapvIsPicked()){vColor=uSelectedColor;}\n#endif\n}",
fragmentShader:Hh[this.options.type]||"bubble",defines:this.options.enablePicked?["PICK"]:[]},this);this.buffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});var b=[{stride:44,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:44,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:12},{stride:44,name:"aIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:16},{stride:44,name:"aColor",
buffer:this.buffer,size:4,type:"FLOAT",offset:20},{stride:44,name:"aRadius",buffer:this.buffer,size:1,type:"FLOAT",offset:36},{stride:44,name:"aStartTime",buffer:this.buffer,size:1,type:"FLOAT",offset:40}];b=b.concat(this.getCommonAttributes());this.vertexArray=new la({gl:a,program:this.program,attributes:b})}},{key:"onChanged",value:function(a,c){this.gl&&c&&(this.uniforms={duration:a.duration,trail:a.trail},this.data=c,this.processData(),a.enablePicked&&this.parsePickData(c))}},{key:"processData",
value:function(){var a=this,c=[],f=[];this.data.forEach(function(b,d){var k=b.size||a.options.size,g=b.radius||a.options.radius||1.618*k;"function"===typeof g&&(g=g(k));var h=b.color||a.options.color;h=a.normizedColor(h);b=a.normizedPoint(b.geometry.coordinates);for(var n=a.options.random?Math.random()*a.data.length*9999:0,m=0;4>m;m++)c.push(b[0],b[1],b[2]||0,k,m),c.push(h[0],h[1],h[2],h[3]),c.push(g),c.push(n);k=4*d;0<d&&f.push(k-1,k);f.push(k,k+1,k+2,k+3)});this.bufferData=c;this.indexData=f;this.buffer.updateData(new Float32Array(c));
this.indexBuffer.updateData(new Uint32Array(f))}},{key:"parsePickData",value:function(a){var b=[];if(this.getOptions().enablePicked){for(var c=0;c<a.length;c++){var g=this.indexToRgb(c);b.push(g[0]/255,g[1]/255,g[2]/255);b.push(g[0]/255,g[1]/255,g[2]/255);b.push(g[0]/255,g[1]/255,g[2]/255);b.push(g[0]/255,g[1]/255,g[2]/255)}this.pickBuffer.updateData(new Float32Array(b))}}},{key:"render",value:function(a){var b=this.getOptions(),c=this.program,g=a.gl,h=a.matrix;c.use(g);var k=this.map.getZoomUnits();
Y(this.uniforms,this.getCommonUniforms(a),{uTime:(new Date-this.initializeTime)/1E3,uZoomUnits:"m"===b.unit?1:k,uMatrix:h,uAntiAliasing:b.antialias?1:0});c.setUniforms(this.uniforms);this.setGLState({blend:!0,blendEquation:g.FUNC_ADD,blendFunc:[g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA],depthTest:b.depthTest,depthMask:b.depthWrite});0<this.indexData.length&&(this.vertexArray.bind(),this.indexBuffer.bind(),g.drawElements(g.TRIANGLE_STRIP,this.indexData.length,g.UNSIGNED_INT,0))}}]);return a}(ca),Zk=pa(Hh),
$k=Q(function(c,a){a.__esModule=!0;var b=Hc&&Hc.__esModule?Hc:{default:Hc},d=Pc&&Pc.__esModule?Pc:{default:Pc};a.default=function l(a,c,k){null===a&&(a=Function.prototype);var g=(0,d.default)(a,c);if(void 0===g){if(a=(0,b.default)(a),null!==a)return l(a,c,k)}else{if("value"in g)return g.value;c=g.get;return void 0===c?void 0:c.call(k)}}}),pb=U($k),Wa=Q(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.setMatrixArrayType=function(b){a.ARRAY_TYPE=d=b};a.toRadian=function(a){return a*
f};a.equals=function(a,c){return Math.abs(a-c)<=b*Math.max(1,Math.abs(a),Math.abs(c))};a.RANDOM=a.ARRAY_TYPE=a.EPSILON=void 0;var b=1E-6;a.EPSILON=b;var d="undefined"!==typeof Float32Array?Float32Array:Array;a.ARRAY_TYPE=d;a.RANDOM=Math.random;var f=Math.PI/180});U(Wa);var Ih=Q(function(c,a){function b(a,b,c){var d=b[0],k=b[1],g=b[2];b=b[3];var h=c[0],f=c[1],r=c[2];c=c[3];a[0]=d*h+g*f;a[1]=k*h+b*f;a[2]=d*r+g*c;a[3]=k*r+b*c;return a}function d(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=
b[3]-c[3];return a}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new f.ARRAY_TYPE(4);f.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0);a[0]=1;a[3]=1;return a};a.clone=function(a){var b=new f.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a};a.fromValues=function(a,b,c,d){var k=new f.ARRAY_TYPE(4);k[0]=a;k[1]=b;k[2]=c;k[3]=d;return k};
a.set=function(a,b,c,d,f){a[0]=b;a[1]=c;a[2]=d;a[3]=f;return a};a.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a};a.invert=function(a,b){var c=b[0],d=b[1],g=b[2];b=b[3];var h=c*b-g*d;if(!h)return null;h=1/h;a[0]=b*h;a[1]=-d*h;a[2]=-g*h;a[3]=c*h;return a};a.adjoint=function(a,b){var c=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=c;return a};a.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};a.multiply=b;a.rotate=function(a,b,c){var d=
b[0],k=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c+g*h;a[1]=k*c+b*h;a[2]=d*-h+g*c;a[3]=k*-h+b*c;return a};a.scale=function(a,b,c){var d=b[1],k=b[2],g=b[3],h=c[0];c=c[1];a[0]=b[0]*h;a[1]=d*h;a[2]=k*c;a[3]=g*c;return a};a.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];return a};a.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};a.LDU=function(a,b,c,d){a[2]=d[2]/d[0];c[0]=d[0];c[1]=d[1];c[3]=d[3]-a[2]*c[1];return[a,b,c]};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a};a.subtract=d;a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};a.equals=function(a,b){var c=a[0],d=a[1],g=a[2];a=a[3];var h=b[0],m=b[1],q=b[2];b=b[3];return Math.abs(c-h)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(d-
m)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(g-q)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a};a.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;return a};a.sub=a.mul=void 0;var f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,
c)){var d=oa&&na?na(a,c):{};d.get||d.set?oa(b,c,d):b[c]=a[c]}b.default=a;return b}(Wa);a.mul=b;a.sub=d});U(Ih);var Jh=Q(function(c,a){function b(a,b,c){var d=b[0],k=b[1],g=b[2],f=b[3],h=b[4];b=b[5];var r=c[0],u=c[1],v=c[2],t=c[3],x=c[4];c=c[5];a[0]=d*r+g*u;a[1]=k*r+f*u;a[2]=d*v+g*t;a[3]=k*v+f*t;a[4]=d*x+g*c+h;a[5]=k*x+f*c+b;return a}function d(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];return a}Object.defineProperty(a,"__esModule",{value:!0});
a.create=function(){var a=new f.ARRAY_TYPE(6);f.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[4]=0,a[5]=0);a[0]=1;a[3]=1;return a};a.clone=function(a){var b=new f.ARRAY_TYPE(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a};a.fromValues=function(a,b,c,d,p,n){var k=new f.ARRAY_TYPE(6);k[0]=a;k[1]=b;k[2]=c;k[3]=d;k[4]=
p;k[5]=n;return k};a.set=function(a,b,c,d,f,n,m){a[0]=b;a[1]=c;a[2]=d;a[3]=f;a[4]=n;a[5]=m;return a};a.invert=function(a,b){var c=b[0],d=b[1],g=b[2],f=b[3],h=b[4];b=b[5];var q=c*f-d*g;if(!q)return null;q=1/q;a[0]=f*q;a[1]=-d*q;a[2]=-g*q;a[3]=c*q;a[4]=(g*b-f*h)*q;a[5]=(d*h-c*b)*q;return a};a.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};a.multiply=b;a.rotate=function(a,b,c){var d=b[0],k=b[1],g=b[2],f=b[3],h=b[4];b=b[5];var r=Math.sin(c);c=Math.cos(c);a[0]=d*c+g*r;a[1]=k*c+f*r;a[2]=d*-r+g*c;a[3]=
k*-r+f*c;a[4]=h;a[5]=b;return a};a.scale=function(a,b,c){var d=b[1],k=b[2],g=b[3],f=b[4],h=b[5],r=c[0];c=c[1];a[0]=b[0]*r;a[1]=d*r;a[2]=k*c;a[3]=g*c;a[4]=f;a[5]=h;return a};a.translate=function(a,b,c){var d=b[0],k=b[1],g=b[2],f=b[3],h=b[4];b=b[5];var r=c[0];c=c[1];a[0]=d;a[1]=k;a[2]=g;a[3]=f;a[4]=d*r+g*c+h;a[5]=k*r+f*c+b;return a};a.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=
b[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];return a};a.subtract=d;a.multiplyScalar=
function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;return a};a.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;a[4]=b[4]+c[4]*d;a[5]=b[5]+c[5]*d;return a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]};a.equals=function(a,b){var c=a[0],d=a[1],g=a[2],h=a[3],m=a[4];a=a[5];var q=b[0],r=b[1],u=b[2],v=b[3],t=b[4];b=b[5];return Math.abs(c-q)<=
f.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(d-r)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(r))&&Math.abs(g-u)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(u))&&Math.abs(h-v)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(m-t)<=f.EPSILON*Math.max(1,Math.abs(m),Math.abs(t))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.sub=a.mul=void 0;var f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=
oa&&na?na(a,c):{};d.get||d.set?oa(b,c,d):b[c]=a[c]}b.default=a;return b}(Wa);a.mul=b;a.sub=d});U(Jh);var ff=Q(function(c,a){function b(a,b,c){var d=b[0],k=b[1],f=b[2],g=b[3],h=b[4],r=b[5],u=b[6],v=b[7];b=b[8];var t=c[0],x=c[1],w=c[2],D=c[3],z=c[4],B=c[5],A=c[6],F=c[7];c=c[8];a[0]=t*d+x*g+w*u;a[1]=t*k+x*h+w*v;a[2]=t*f+x*r+w*b;a[3]=D*d+z*g+B*u;a[4]=D*k+z*h+B*v;a[5]=D*f+z*r+B*b;a[6]=A*d+F*g+c*u;a[7]=A*k+F*h+c*v;a[8]=A*f+F*r+c*b;return a}function d(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];
a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];return a}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new f.ARRAY_TYPE(9);f.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);a[0]=1;a[4]=1;a[8]=1;return a};a.fromMat4=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a};a.clone=function(a){var b=new f.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=
a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};a.fromValues=function(a,b,c,d,p,n,m,q,r){var k=new f.ARRAY_TYPE(9);k[0]=a;k[1]=b;k[2]=c;k[3]=d;k[4]=p;k[5]=n;k[6]=m;k[7]=q;k[8]=r;return k};a.set=function(a,b,c,d,f,n,m,q,r,u){a[0]=b;a[1]=c;a[2]=d;a[3]=f;a[4]=n;a[5]=m;a[6]=q;a[7]=r;a[8]=u;return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=
0;a[7]=0;a[8]=1;return a};a.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],f=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=f}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a};a.invert=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],m=b[4],h=b[5],r=b[6],u=b[7];b=b[8];var v=b*m-h*u,t=-b*g+h*r,x=u*g-m*r,w=c*v+d*t+f*x;if(!w)return null;w=1/w;a[0]=v*w;a[1]=(-b*d+f*u)*w;a[2]=(h*d-f*m)*w;a[3]=t*w;a[4]=(b*c-f*r)*w;a[5]=(-h*c+f*g)*w;a[6]=x*
w;a[7]=(-u*c+d*r)*w;a[8]=(m*c-d*g)*w;return a};a.adjoint=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],m=b[4],h=b[5],r=b[6],u=b[7];b=b[8];a[0]=m*b-h*u;a[1]=f*u-d*b;a[2]=d*h-f*m;a[3]=h*r-g*b;a[4]=c*b-f*r;a[5]=f*g-c*h;a[6]=g*u-m*r;a[7]=d*r-c*u;a[8]=c*m-d*g;return a};a.determinant=function(a){var b=a[3],c=a[4],d=a[5],f=a[6],g=a[7],m=a[8];return a[0]*(m*c-d*g)+a[1]*(-m*b+d*f)+a[2]*(g*b-c*f)};a.multiply=b;a.translate=function(a,b,c){var d=b[0],k=b[1],f=b[2],m=b[3],g=b[4],h=b[5],u=b[6],v=b[7];b=b[8];var t=
c[0];c=c[1];a[0]=d;a[1]=k;a[2]=f;a[3]=m;a[4]=g;a[5]=h;a[6]=t*d+c*m+u;a[7]=t*k+c*g+v;a[8]=t*f+c*h+b;return a};a.rotate=function(a,b,c){var d=b[0],k=b[1],f=b[2],m=b[3],g=b[4],h=b[5],u=b[6],v=b[7];b=b[8];var t=Math.sin(c);c=Math.cos(c);a[0]=c*d+t*m;a[1]=c*k+t*g;a[2]=c*f+t*h;a[3]=c*m-t*d;a[4]=c*g-t*k;a[5]=c*h-t*f;a[6]=u;a[7]=v;a[8]=b;return a};a.scale=function(a,b,c){var d=c[0];c=c[1];a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};a.fromTranslation=
function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a};a.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=-c;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};a.fromQuat=function(a,b){var c=b[0],d=b[1],f=b[2];
b=b[3];var g=c+c,m=d+d,h=f+f;c*=g;var r=d*g;d*=m;var u=f*g,v=f*m;f*=h;g*=b;m*=b;b*=h;a[0]=1-d-f;a[3]=r-b;a[6]=u+m;a[1]=r+b;a[4]=1-c-f;a[7]=v-g;a[2]=u-m;a[5]=v+g;a[8]=1-c-d;return a};a.normalFromMat4=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],m=b[4],h=b[5],r=b[6],u=b[7],v=b[8],t=b[9],x=b[10],w=b[11],D=b[12],z=b[13],B=b[14];b=b[15];var A=c*h-d*m,F=c*r-f*m,G=c*u-g*m,E=d*r-f*h,y=d*u-g*h,I=f*u-g*r,K=v*z-t*D,C=v*B-x*D;v=v*b-w*D;var H=t*B-x*z;t=t*b-w*z;x=x*b-w*B;w=A*x-F*t+G*H+E*v-y*C+I*K;if(!w)return null;
w=1/w;a[0]=(h*x-r*t+u*H)*w;a[1]=(r*v-m*x-u*C)*w;a[2]=(m*t-h*v+u*K)*w;a[3]=(f*t-d*x-g*H)*w;a[4]=(c*x-f*v+g*C)*w;a[5]=(d*v-c*t-g*K)*w;a[6]=(z*I-B*y+b*E)*w;a[7]=(B*G-D*I-b*F)*w;a[8]=(D*y-z*G+b*A)*w;return a};a.projection=function(a,b,c){a[0]=2/b;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/c;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],
2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];return a};a.subtract=d;a.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;return a};a.multiplyScalarAndAdd=function(a,b,c,d){a[0]=
b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;a[4]=b[4]+c[4]*d;a[5]=b[5]+c[5]*d;a[6]=b[6]+c[6]*d;a[7]=b[7]+c[7]*d;a[8]=b[8]+c[8]*d;return a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};a.equals=function(a,b){var c=a[0],d=a[1],g=a[2],h=a[3],m=a[4],q=a[5],r=a[6],u=a[7];a=a[8];var v=b[0],t=b[1],x=b[2],w=b[3],D=b[4],z=b[5],B=b[6],A=b[7];b=b[8];return Math.abs(c-v)<=f.EPSILON*Math.max(1,
Math.abs(c),Math.abs(v))&&Math.abs(d-t)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(g-x)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(x))&&Math.abs(h-w)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(m-D)<=f.EPSILON*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(q-z)<=f.EPSILON*Math.max(1,Math.abs(q),Math.abs(z))&&Math.abs(r-B)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(B))&&Math.abs(u-A)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),
Math.abs(b))};a.sub=a.mul=void 0;var f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=oa&&na?na(a,c):{};d.get||d.set?oa(b,c,d):b[c]=a[c]}b.default=a;return b}(Wa);a.mul=b;a.sub=d});U(ff);var gf=Q(function(c,a){function b(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function d(a,b,c){var d=b[0],k=b[1],f=b[2],g=b[3],h=b[4],l=b[5],p=b[6],
x=b[7],w=b[8],D=b[9],z=b[10],B=b[11],A=b[12],F=b[13],G=b[14];b=b[15];var E=c[0],y=c[1],I=c[2],K=c[3];a[0]=E*d+y*h+I*w+K*A;a[1]=E*k+y*l+I*D+K*F;a[2]=E*f+y*p+I*z+K*G;a[3]=E*g+y*x+I*B+K*b;E=c[4];y=c[5];I=c[6];K=c[7];a[4]=E*d+y*h+I*w+K*A;a[5]=E*k+y*l+I*D+K*F;a[6]=E*f+y*p+I*z+K*G;a[7]=E*g+y*x+I*B+K*b;E=c[8];y=c[9];I=c[10];K=c[11];a[8]=E*d+y*h+I*w+K*A;a[9]=E*k+y*l+I*D+K*F;a[10]=E*f+y*p+I*z+K*G;a[11]=E*g+y*x+I*B+K*b;E=c[12];y=c[13];I=c[14];K=c[15];a[12]=E*d+y*h+I*w+K*A;a[13]=E*k+y*l+I*D+K*F;a[14]=E*f+y*
p+I*z+K*G;a[15]=E*g+y*x+I*B+K*b;return a}function f(a,b,c){var d=b[0],k=b[1],f=b[2],g=b[3],h=d+d,l=k+k,p=f+f;b=d*h;var x=d*l;d*=p;var w=k*l;k*=p;f*=p;h*=g;l*=g;g*=p;a[0]=1-(w+f);a[1]=x+g;a[2]=d-l;a[3]=0;a[4]=x-g;a[5]=1-(b+f);a[6]=k+h;a[7]=0;a[8]=d+l;a[9]=k-h;a[10]=1-(b+w);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function g(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=
b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new h.ARRAY_TYPE(16);h.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0);a[0]=1;a[5]=1;a[10]=1;a[15]=1;return a};a.clone=function(a){var b=new h.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];
b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};a.fromValues=function(a,b,c,d,f,g,r,u,v,t,x,w,D,z,B,A){var k=new h.ARRAY_TYPE(16);k[0]=a;k[1]=b;k[2]=c;k[3]=d;k[4]=f;k[5]=g;k[6]=r;k[7]=u;k[8]=v;k[9]=t;k[10]=x;k[11]=w;k[12]=D;k[13]=z;k[14]=B;k[15]=A;return k};
a.set=function(a,b,c,d,f,g,h,u,v,t,x,w,D,z,B,A,F){a[0]=b;a[1]=c;a[2]=d;a[3]=f;a[4]=g;a[5]=h;a[6]=u;a[7]=v;a[8]=t;a[9]=x;a[10]=w;a[11]=D;a[12]=z;a[13]=B;a[14]=A;a[15]=F;return a};a.identity=b;a.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],f=b[3],k=b[6],g=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=k;a[11]=b[14];a[12]=f;a[13]=g;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],
a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};a.invert=function(a,b){var c=b[0],d=b[1],f=b[2],k=b[3],g=b[4],h=b[5],l=b[6],t=b[7],x=b[8],w=b[9],D=b[10],z=b[11],B=b[12],A=b[13],F=b[14];b=b[15];var G=c*h-d*g,E=c*l-f*g,y=c*t-k*g,I=d*l-f*h,K=d*t-k*h,C=f*t-k*l,H=x*A-w*B,L=x*F-D*B,M=x*b-z*B,N=w*F-D*A,O=w*b-z*A,P=D*b-z*F,J=G*P-E*O+y*N+I*M-K*L+C*H;if(!J)return null;J=1/J;a[0]=(h*P-l*O+t*N)*J;a[1]=(f*O-d*P-k*N)*J;a[2]=(A*C-F*K+b*I)*J;a[3]=(D*K-w*C-z*I)*J;a[4]=(l*M-g*P-t*L)*J;a[5]=(c*P-
f*M+k*L)*J;a[6]=(F*y-B*C-b*E)*J;a[7]=(x*C-D*y+z*E)*J;a[8]=(g*O-h*M+t*H)*J;a[9]=(d*M-c*O-k*H)*J;a[10]=(B*K-A*y+b*G)*J;a[11]=(w*y-x*K-z*G)*J;a[12]=(h*L-g*N-l*H)*J;a[13]=(c*N-d*L+f*H)*J;a[14]=(A*E-B*I-F*G)*J;a[15]=(x*I-w*E+D*G)*J;return a};a.adjoint=function(a,b){var c=b[0],d=b[1],f=b[2],k=b[3],g=b[4],h=b[5],l=b[6],t=b[7],x=b[8],w=b[9],D=b[10],z=b[11],B=b[12],A=b[13],F=b[14];b=b[15];a[0]=h*(D*b-z*F)-w*(l*b-t*F)+A*(l*z-t*D);a[1]=-(d*(D*b-z*F)-w*(f*b-k*F)+A*(f*z-k*D));a[2]=d*(l*b-t*F)-h*(f*b-k*F)+A*(f*
t-k*l);a[3]=-(d*(l*z-t*D)-h*(f*z-k*D)+w*(f*t-k*l));a[4]=-(g*(D*b-z*F)-x*(l*b-t*F)+B*(l*z-t*D));a[5]=c*(D*b-z*F)-x*(f*b-k*F)+B*(f*z-k*D);a[6]=-(c*(l*b-t*F)-g*(f*b-k*F)+B*(f*t-k*l));a[7]=c*(l*z-t*D)-g*(f*z-k*D)+x*(f*t-k*l);a[8]=g*(w*b-z*A)-x*(h*b-t*A)+B*(h*z-t*w);a[9]=-(c*(w*b-z*A)-x*(d*b-k*A)+B*(d*z-k*w));a[10]=c*(h*b-t*A)-g*(d*b-k*A)+B*(d*t-k*h);a[11]=-(c*(h*z-t*w)-g*(d*z-k*w)+x*(d*t-k*h));a[12]=-(g*(w*F-D*A)-x*(h*F-l*A)+B*(h*D-l*w));a[13]=c*(w*F-D*A)-x*(d*F-f*A)+B*(d*D-f*w);a[14]=-(c*(h*F-l*A)-g*
(d*F-f*A)+B*(d*l-f*h));a[15]=c*(h*D-l*w)-g*(d*D-f*w)+x*(d*l-f*h);return a};a.determinant=function(a){var b=a[0],c=a[1],d=a[2],f=a[3],k=a[4],g=a[5],h=a[6],v=a[7],t=a[8],x=a[9],w=a[10],D=a[11],z=a[12],B=a[13],A=a[14];a=a[15];return(b*g-c*k)*(w*a-D*A)-(b*h-d*k)*(x*a-D*B)+(b*v-f*k)*(x*A-w*B)+(c*h-d*g)*(t*a-D*z)-(c*v-f*g)*(t*A-w*z)+(d*v-f*h)*(t*B-x*z)};a.multiply=d;a.translate=function(a,b,c){var d=c[0],f=c[1];c=c[2];if(b===a)a[12]=b[0]*d+b[4]*f+b[8]*c+b[12],a[13]=b[1]*d+b[5]*f+b[9]*c+b[13],a[14]=b[2]*
d+b[6]*f+b[10]*c+b[14],a[15]=b[3]*d+b[7]*f+b[11]*c+b[15];else{var k=b[0];var g=b[1];var h=b[2];var l=b[3];var p=b[4];var x=b[5];var w=b[6];var D=b[7];var z=b[8];var B=b[9];var A=b[10];var F=b[11];a[0]=k;a[1]=g;a[2]=h;a[3]=l;a[4]=p;a[5]=x;a[6]=w;a[7]=D;a[8]=z;a[9]=B;a[10]=A;a[11]=F;a[12]=k*d+p*f+z*c+b[12];a[13]=g*d+x*f+B*c+b[13];a[14]=h*d+w*f+A*c+b[14];a[15]=l*d+D*f+F*c+b[15]}return a};a.scale=function(a,b,c){var d=c[0],f=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*f;a[5]=
b[5]*f;a[6]=b[6]*f;a[7]=b[7]*f;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};a.rotate=function(a,b,c,d){var f=d[0],k=d[1];d=d[2];var g=Math.sqrt(f*f+k*k+d*d);if(g<h.EPSILON)return null;g=1/g;f*=g;k*=g;d*=g;var l=Math.sin(c);var v=Math.cos(c);var n=1-v;c=b[0];g=b[1];var p=b[2];var w=b[3];var D=b[4];var z=b[5];var B=b[6];var A=b[7];var F=b[8];var G=b[9];var E=b[10];var y=b[11];var I=f*f*n+v;var C=k*f*n+d*l;var H=d*f*n-k*l;var J=f*k*n-d*
l;var L=k*k*n+v;var M=d*k*n+f*l;var N=f*d*n+k*l;f=k*d*n-f*l;k=d*d*n+v;a[0]=c*I+D*C+F*H;a[1]=g*I+z*C+G*H;a[2]=p*I+B*C+E*H;a[3]=w*I+A*C+y*H;a[4]=c*J+D*L+F*M;a[5]=g*J+z*L+G*M;a[6]=p*J+B*L+E*M;a[7]=w*J+A*L+y*M;a[8]=c*N+D*f+F*k;a[9]=g*N+z*f+G*k;a[10]=p*N+B*f+E*k;a[11]=w*N+A*f+y*k;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};a.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var f=b[4],k=b[5],g=b[6],h=b[7],l=b[8],p=b[9],x=b[10],w=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],
a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=f*c+l*d;a[5]=k*c+p*d;a[6]=g*c+x*d;a[7]=h*c+w*d;a[8]=l*c-f*d;a[9]=p*c-k*d;a[10]=x*c-g*d;a[11]=w*c-h*d;return a};a.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var f=b[0],k=b[1],g=b[2],h=b[3],l=b[8],p=b[9],x=b[10],w=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*c-l*d;a[1]=k*c-p*d;a[2]=g*c-x*d;a[3]=h*c-w*d;a[8]=f*d+l*c;a[9]=k*d+p*c;a[10]=g*d+x*c;a[11]=h*d+w*c;return a};
a.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var f=b[0],k=b[1],g=b[2],h=b[3],l=b[4],p=b[5],x=b[6],w=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*c+l*d;a[1]=k*c+p*d;a[2]=g*c+x*d;a[3]=h*c+w*d;a[4]=l*c-f*d;a[5]=p*c-k*d;a[6]=x*c-g*d;a[7]=w*c-h*d;return a};a.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};
a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromRotation=function(a,b,c){var d=c[0],f=c[1];c=c[2];var k=Math.sqrt(d*d+f*f+c*c);if(k<h.EPSILON)return null;k=1/k;d*=k;f*=k;c*=k;k=Math.sin(b);b=Math.cos(b);var g=1-b;a[0]=d*d*g+b;a[1]=f*d*g+c*k;a[2]=c*d*g-f*k;a[3]=0;a[4]=d*f*g-c*k;a[5]=f*f*g+b;a[6]=c*f*g+d*k;a[7]=0;a[8]=d*c*g+f*k;a[9]=f*c*g-d*k;a[10]=c*c*g+b;a[11]=0;a[12]=0;a[13]=
0;a[14]=0;a[15]=1;return a};a.fromXRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=
-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromRotationTranslation=f;a.fromQuat2=function(a,b){var c=new h.ARRAY_TYPE(3),d=-b[0],k=-b[1],g=-b[2],l=b[3],u=b[4],v=b[5],t=b[6],x=b[7],w=d*d+k*k+g*g+l*l;0<w?(c[0]=2*(u*l+x*d+v*g-t*k)/w,c[1]=2*(v*l+x*k+t*d-u*g)/w,c[2]=2*(t*l+x*g+u*k-v*d)/w):(c[0]=2*(u*l+x*d+v*g-t*k),c[1]=2*(v*l+x*k+t*d-u*g),c[2]=2*(t*l+x*g+u*k-v*d));f(a,b,c);return a};a.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};
a.getScaling=function(a,b){var c=b[0],d=b[1],f=b[2],k=b[4],g=b[5],h=b[6],l=b[8],t=b[9];b=b[10];a[0]=Math.sqrt(c*c+d*d+f*f);a[1]=Math.sqrt(k*k+g*g+h*h);a[2]=Math.sqrt(l*l+t*t+b*b);return a};a.getRotation=function(a,b){var c=b[0]+b[5]+b[10];0<c?(c=2*Math.sqrt(c+1),a[3]=.25*c,a[0]=(b[6]-b[9])/c,a[1]=(b[8]-b[2])/c,a[2]=(b[1]-b[4])/c):b[0]>b[5]&&b[0]>b[10]?(c=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/c,a[0]=.25*c,a[1]=(b[1]+b[4])/c,a[2]=(b[8]+b[2])/c):b[5]>b[10]?(c=2*Math.sqrt(1+b[5]-b[0]-b[10]),
a[3]=(b[8]-b[2])/c,a[0]=(b[1]+b[4])/c,a[1]=.25*c,a[2]=(b[6]+b[9])/c):(c=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/c,a[0]=(b[8]+b[2])/c,a[1]=(b[6]+b[9])/c,a[2]=.25*c);return a};a.fromRotationTranslationScale=function(a,b,c,d){var f=b[0],g=b[1],k=b[2],h=b[3],l=f+f,n=g+g,p=k+k;b=f*l;var w=f*n;f*=p;var D=g*n;g*=p;k*=p;l*=h;n*=h;h*=p;p=d[0];var z=d[1];d=d[2];a[0]=(1-(D+k))*p;a[1]=(w+h)*p;a[2]=(f-n)*p;a[3]=0;a[4]=(w-h)*z;a[5]=(1-(b+k))*z;a[6]=(g+l)*z;a[7]=0;a[8]=(f+n)*d;a[9]=(g-l)*d;a[10]=(1-(b+D))*
d;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};a.fromRotationTranslationScaleOrigin=function(a,b,c,d,f){var g=b[0],m=b[1],k=b[2],h=b[3],l=g+g,n=m+m,w=k+k;b=g*l;var p=g*n,z=g*w;g=m*n;m*=w;var B=k*w;k=h*l;n*=h;var A=h*w,F=d[0],G=d[1];w=d[2];d=f[0];h=f[1];f=f[2];l=(1-(g+B))*F;var E=(p+A)*F;F*=z-n;p=(p-A)*G;B=(1-(b+B))*G;G*=m+k;z=(z+n)*w;m=(m-k)*w;b=(1-(b+g))*w;a[0]=l;a[1]=E;a[2]=F;a[3]=0;a[4]=p;a[5]=B;a[6]=G;a[7]=0;a[8]=z;a[9]=m;a[10]=b;a[11]=0;a[12]=c[0]+d-(l*d+p*h+z*f);a[13]=c[1]+h-(E*
d+B*h+m*f);a[14]=c[2]+f-(F*d+G*h+b*f);a[15]=1;return a};a.fromQuat=function(a,b){var c=b[0],d=b[1],f=b[2];b=b[3];var g=c+c,k=d+d,h=f+f;c*=g;var l=d*g;d*=k;var t=f*g,x=f*k;f*=h;g*=b;k*=b;b*=h;a[0]=1-d-f;a[1]=l+b;a[2]=t-k;a[3]=0;a[4]=l-b;a[5]=1-c-f;a[6]=x+g;a[7]=0;a[8]=t+k;a[9]=x-g;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.frustum=function(a,b,c,d,f,g,h){var m=1/(c-b),k=1/(f-d),q=1/(g-h);a[0]=2*g*m;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*k;a[6]=0;a[7]=0;a[8]=(c+b)*m;a[9]=(f+d)*k;
a[10]=(h+g)*q;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*g*2*q;a[15]=0;return a};a.perspective=function(a,b,c,d,f){b=1/Math.tan(b/2);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=f&&Infinity!==f?(c=1/(d-f),a[10]=(f+d)*c,a[14]=2*f*d*c):(a[10]=-1,a[14]=-2*d);return a};a.perspectiveFromFieldOfView=function(a,b,c,d){var f=Math.tan(b.upDegrees*Math.PI/180),g=Math.tan(b.downDegrees*Math.PI/180),h=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*
Math.PI/180);var k=2/(h+b),l=2/(f+g);a[0]=k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=l;a[6]=0;a[7]=0;a[8]=-((h-b)*k*.5);a[9]=(f-g)*l*.5;a[10]=d/(c-d);a[11]=-1;a[12]=0;a[13]=0;a[14]=d*c/(c-d);a[15]=0;return a};a.ortho=function(a,b,c,d,f,g,h){var m=1/(b-c),k=1/(d-f),q=1/(g-h);a[0]=-2*m;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*q;a[11]=0;a[12]=(b+c)*m;a[13]=(f+d)*k;a[14]=(h+g)*q;a[15]=1;return a};a.lookAt=function(a,c,d,f){var g=c[0],k=c[1];c=c[2];var r=f[0];var u=f[1];var l=
f[2];var n=d[0];f=d[1];var p=d[2];if(Math.abs(g-n)<h.EPSILON&&Math.abs(k-f)<h.EPSILON&&Math.abs(c-p)<h.EPSILON)return b(a);d=g-n;f=k-f;n=c-p;var w=1/Math.sqrt(d*d+f*f+n*n);d*=w;f*=w;n*=w;p=u*n-l*f;l=l*d-r*n;r=r*f-u*d;(w=Math.sqrt(p*p+l*l+r*r))?(w=1/w,p*=w,l*=w,r*=w):r=l=p=0;u=f*r-n*l;var D=n*p-d*r;var z=d*l-f*p;(w=Math.sqrt(u*u+D*D+z*z))?(w=1/w,u*=w,D*=w,z*=w):z=D=u=0;a[0]=p;a[1]=u;a[2]=d;a[3]=0;a[4]=l;a[5]=D;a[6]=f;a[7]=0;a[8]=r;a[9]=z;a[10]=n;a[11]=0;a[12]=-(p*g+l*k+r*c);a[13]=-(u*g+D*k+z*c);a[14]=
-(d*g+f*k+n*c);a[15]=1;return a};a.targetTo=function(a,b,c,d){var f=b[0],g=b[1];b=b[2];var h=d[0],k=d[1],l=d[2];d=f-c[0];var n=g-c[1];c=b-c[2];var p=d*d+n*n+c*c;0<p&&(p=1/Math.sqrt(p),d*=p,n*=p,c*=p);var w=k*c-l*n;l=l*d-h*c;h=h*n-k*d;p=w*w+l*l+h*h;0<p&&(p=1/Math.sqrt(p),w*=p,l*=p,h*=p);a[0]=w;a[1]=l;a[2]=h;a[3]=0;a[4]=n*h-c*l;a[5]=c*w-d*h;a[6]=d*l-n*w;a[7]=0;a[8]=d;a[9]=n;a[10]=c;a[11]=0;a[12]=f;a[13]=g;a[14]=b;a[15]=1;return a};a.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+
a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+
c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};a.subtract=g;a.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a};a.multiplyScalarAndAdd=
function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;a[4]=b[4]+c[4]*d;a[5]=b[5]+c[5]*d;a[6]=b[6]+c[6]*d;a[7]=b[7]+c[7]*d;a[8]=b[8]+c[8]*d;a[9]=b[9]+c[9]*d;a[10]=b[10]+c[10]*d;a[11]=b[11]+c[11]*d;a[12]=b[12]+c[12]*d;a[13]=b[13]+c[13]*d;a[14]=b[14]+c[14]*d;a[15]=b[15]+c[15]*d;return a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===
b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};a.equals=function(a,b){var c=a[0],d=a[1],f=a[2],g=a[3],k=a[4],u=a[5],l=a[6],t=a[7],x=a[8],w=a[9],D=a[10],z=a[11],B=a[12],A=a[13],F=a[14];a=a[15];var G=b[0],E=b[1],y=b[2],I=b[3],C=b[4],H=b[5],J=b[6],L=b[7],M=b[8],N=b[9],O=b[10],P=b[11],Q=b[12],R=b[13],S=b[14];b=b[15];return Math.abs(c-G)<=h.EPSILON*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(d-E)<=h.EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(f-y)<=h.EPSILON*Math.max(1,
Math.abs(f),Math.abs(y))&&Math.abs(g-I)<=h.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(k-C)<=h.EPSILON*Math.max(1,Math.abs(k),Math.abs(C))&&Math.abs(u-H)<=h.EPSILON*Math.max(1,Math.abs(u),Math.abs(H))&&Math.abs(l-J)<=h.EPSILON*Math.max(1,Math.abs(l),Math.abs(J))&&Math.abs(t-L)<=h.EPSILON*Math.max(1,Math.abs(t),Math.abs(L))&&Math.abs(x-M)<=h.EPSILON*Math.max(1,Math.abs(x),Math.abs(M))&&Math.abs(w-N)<=h.EPSILON*Math.max(1,Math.abs(w),Math.abs(N))&&Math.abs(D-O)<=h.EPSILON*Math.max(1,Math.abs(D),
Math.abs(O))&&Math.abs(z-P)<=h.EPSILON*Math.max(1,Math.abs(z),Math.abs(P))&&Math.abs(B-Q)<=h.EPSILON*Math.max(1,Math.abs(B),Math.abs(Q))&&Math.abs(A-R)<=h.EPSILON*Math.max(1,Math.abs(A),Math.abs(R))&&Math.abs(F-S)<=h.EPSILON*Math.max(1,Math.abs(F),Math.abs(S))&&Math.abs(a-b)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.sub=a.mul=void 0;var h=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=oa&&na?na(a,c):{};d.get||
d.set?oa(b,c,d):b[c]=a[c]}b.default=a;return b}(Wa);a.mul=d;a.sub=g});U(gf);var hf=Q(function(c,a){function b(){var a=new r.ARRAY_TYPE(3);r.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0);return a}function d(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function f(a,b,c){var d=new r.ARRAY_TYPE(3);d[0]=a;d[1]=b;d[2]=c;return d}function g(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}function h(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a}function k(a,b,c){a[0]=
b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a}function l(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+d*d+a*a)}function p(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}function n(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a}function m(a,b){var c=b[0],d=b[1],f=b[2];c=c*c+d*d+f*f;0<c&&(c=1/Math.sqrt(c));a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a}function q(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}Object.defineProperty(a,"__esModule",{value:!0});a.create=
b;a.clone=function(a){var b=new r.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.length=d;a.fromValues=f;a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a};a.set=function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a};a.subtract=g;a.multiply=h;a.divide=k;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);
a[2]=Math.floor(b[2]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};a.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;return a};
a.distance=l;a.squaredDistance=p;a.squaredLength=n;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};a.normalize=m;a.dot=q;a.cross=function(a,b,c){var d=b[0],f=b[1];b=b[2];var g=c[0],m=c[1];c=c[2];a[0]=f*c-b*m;a[1]=b*g-d*c;a[2]=d*m-f*g;return a};a.lerp=function(a,b,c,d){var f=b[0],g=b[1];b=b[2];a[0]=f+d*(c[0]-f);a[1]=g+d*(c[1]-g);a[2]=b+d*(c[2]-b);return a};a.hermite=function(a,b,c,d,f,g){var m=g*g,h=m*(2*g-3)+1,
k=m*(g-2)+g,q=m*(g-1);g=m*(3-2*g);a[0]=b[0]*h+c[0]*k+d[0]*q+f[0]*g;a[1]=b[1]*h+c[1]*k+d[1]*q+f[1]*g;a[2]=b[2]*h+c[2]*k+d[2]*q+f[2]*g;return a};a.bezier=function(a,b,c,d,f,g){var m=1-g,h=m*m,k=g*g,q=h*m;h*=3*g;m*=3*k;g*=k;a[0]=b[0]*q+c[0]*h+d[0]*m+f[0]*g;a[1]=b[1]*q+c[1]*h+d[1]*m+f[1]*g;a[2]=b[2]*q+c[2]*h+d[2]*m+f[2]*g;return a};a.random=function(a,b){b=b||1;var c=2*r.RANDOM()*Math.PI,d=2*r.RANDOM()-1,f=Math.sqrt(1-d*d)*b;a[0]=Math.cos(c)*f;a[1]=Math.sin(c)*f;a[2]=d*b;return a};a.transformMat4=function(a,
b,c){var d=b[0],f=b[1];b=b[2];var g=c[3]*d+c[7]*f+c[11]*b+c[15];g=g||1;a[0]=(c[0]*d+c[4]*f+c[8]*b+c[12])/g;a[1]=(c[1]*d+c[5]*f+c[9]*b+c[13])/g;a[2]=(c[2]*d+c[6]*f+c[10]*b+c[14])/g;return a};a.transformMat3=function(a,b,c){var d=b[0],f=b[1];b=b[2];a[0]=d*c[0]+f*c[3]+b*c[6];a[1]=d*c[1]+f*c[4]+b*c[7];a[2]=d*c[2]+f*c[5]+b*c[8];return a};a.transformQuat=function(a,b,c){var d=c[0],f=c[1],g=c[2],m=b[0],h=b[1];b=b[2];var k=f*b-g*h,q=g*m-d*b,r=d*h-f*m;c=2*c[3];a[0]=m+k*c+2*(f*r-g*q);a[1]=h+q*c+2*(g*k-d*r);
a[2]=b+r*c+2*(d*q-f*k);return a};a.rotateX=function(a,b,c,d){var f=[],g=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];g[0]=f[0];g[1]=f[1]*Math.cos(d)-f[2]*Math.sin(d);g[2]=f[1]*Math.sin(d)+f[2]*Math.cos(d);a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};a.rotateY=function(a,b,c,d){var f=[],g=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];g[0]=f[2]*Math.sin(d)+f[0]*Math.cos(d);g[1]=f[1];g[2]=f[2]*Math.cos(d)-f[0]*Math.sin(d);a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};a.rotateZ=
function(a,b,c,d){var f=[],g=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];g[0]=f[0]*Math.cos(d)-f[1]*Math.sin(d);g[1]=f[0]*Math.sin(d)+f[1]*Math.cos(d);g[2]=f[2];a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};a.angle=function(a,b){a=f(a[0],a[1],a[2]);b=f(b[0],b[1],b[2]);m(a,a);m(b,b);b=q(a,b);return 1<b?0:-1>b?Math.PI:Math.acos(b)};a.zero=function(a){a[0]=0;a[1]=0;a[2]=0;return a};a.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&
a[1]===b[1]&&a[2]===b[2]};a.equals=function(a,b){var c=a[0],d=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];return Math.abs(c-f)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(d-g)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(a-b)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.forEach=a.sqrLen=a.len=a.sqrDist=a.dist=a.div=a.mul=a.sub=void 0;var r=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=oa&&na?na(a,
c):{};d.get||d.set?oa(b,c,d):b[c]=a[c]}b.default=a;return b}(Wa);a.sub=g;a.mul=h;a.div=k;a.dist=l;a.sqrDist=p;a.len=d;a.sqrLen=n;c=function(){var a=b();return function(b,c,d,f,g,m){c||(c=3);d||(d=0);for(f=f?Math.min(f*c+d,b.length):b.length;d<f;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],g(a,a,m),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2];return b}}();a.forEach=c});U(hf);var jf=Q(function(c,a){function b(){var a=new n.ARRAY_TYPE(4);n.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0);return a}function d(a,
b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}function f(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];a[3]=b[3]*c[3];return a}function g(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];a[3]=b[3]/c[3];return a}function h(a,b){var c=b[0]-a[0],d=b[1]-a[1],f=b[2]-a[2];a=b[3]-a[3];return Math.sqrt(c*c+d*d+f*f+a*a)}function k(a,b){var c=b[0]-a[0],d=b[1]-a[1],f=b[2]-a[2];a=b[3]-a[3];return c*c+d*d+f*f+a*a}function l(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*
b+c*c+d*d+a*a)}function p(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a}Object.defineProperty(a,"__esModule",{value:!0});a.create=b;a.clone=function(a){var b=new n.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.fromValues=function(a,b,c,d){var f=new n.ARRAY_TYPE(4);f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};a.set=function(a,b,c,d,f){a[0]=b;a[1]=c;a[2]=d;a[3]=f;return a};a.add=function(a,b,c){a[0]=b[0]+
c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a};a.subtract=d;a.multiply=f;a.divide=g;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);a[3]=Math.min(b[3],c[3]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],
c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);a[3]=Math.max(b[3],c[3]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a};a.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;return a};a.distance=h;a.squaredDistance=k;a.length=l;a.squaredLength=p;a.negate=function(a,b){a[0]=-b[0];a[1]=
-b[1];a[2]=-b[2];a[3]=-b[3];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};a.normalize=function(a,b){var c=b[0],d=b[1],f=b[2];b=b[3];var g=c*c+d*d+f*f+b*b;0<g&&(g=1/Math.sqrt(g));a[0]=c*g;a[1]=d*g;a[2]=f*g;a[3]=b*g;return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};a.cross=function(a,b,c,d){var f=c[0]*d[1]-c[1]*d[0],g=c[0]*d[2]-c[2]*d[0],h=c[0]*d[3]-c[3]*d[0],m=c[1]*d[2]-c[2]*d[1],k=c[1]*d[3]-c[3]*d[1];c=c[2]*d[3]-c[3]*d[2];d=
b[0];var q=b[1],l=b[2];b=b[3];a[0]=q*c-l*k+b*m;a[1]=-(d*c)+l*h-b*g;a[2]=d*k-q*h+b*f;a[3]=-(d*m)+q*g-l*f;return a};a.lerp=function(a,b,c,d){var f=b[0],g=b[1],h=b[2];b=b[3];a[0]=f+d*(c[0]-f);a[1]=g+d*(c[1]-g);a[2]=h+d*(c[2]-h);a[3]=b+d*(c[3]-b);return a};a.random=function(a,b){b=b||1;do{var c=2*n.RANDOM()-1;var d=2*n.RANDOM()-1;var f=c*c+d*d}while(1<=f);do{var g=2*n.RANDOM()-1;var h=2*n.RANDOM()-1;var m=g*g+h*h}while(1<=m);f=Math.sqrt((1-f)/m);a[0]=b*c;a[1]=b*d;a[2]=b*g*f;a[3]=b*h*f;return a};a.transformMat4=
function(a,b,c){var d=b[0],f=b[1],g=b[2];b=b[3];a[0]=c[0]*d+c[4]*f+c[8]*g+c[12]*b;a[1]=c[1]*d+c[5]*f+c[9]*g+c[13]*b;a[2]=c[2]*d+c[6]*f+c[10]*g+c[14]*b;a[3]=c[3]*d+c[7]*f+c[11]*g+c[15]*b;return a};a.transformQuat=function(a,b,c){var d=b[0],f=b[1],g=b[2],h=c[0],m=c[1],k=c[2];c=c[3];var q=c*d+m*g-k*f,l=c*f+k*d-h*g,r=c*g+h*f-m*d;d=-h*d-m*f-k*g;a[0]=q*c+d*-h+l*-k-r*-m;a[1]=l*c+d*-m+r*-h-q*-k;a[2]=r*c+d*-k+q*-m-l*-h;a[3]=b[3];return a};a.zero=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a};a.str=function(a){return"vec4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};a.equals=function(a,b){var c=a[0],d=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],m=b[2];b=b[3];return Math.abs(c-g)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(d-h)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(h))&&Math.abs(f-m)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(a-b)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.forEach=a.sqrLen=a.len=a.sqrDist=
a.dist=a.div=a.mul=a.sub=void 0;var n=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=oa&&na?na(a,c):{};d.get||d.set?oa(b,c,d):b[c]=a[c]}b.default=a;return b}(Wa);a.sub=d;a.mul=f;a.div=g;a.dist=h;a.sqrDist=k;a.len=l;a.sqrLen=p;c=function(){var a=b();return function(b,c,d,f,g,h){c||(c=4);d||(d=0);for(f=f?Math.min(f*c+d,b.length):b.length;d<f;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],a[3]=b[d+3],g(a,a,h),b[d]=a[0],b[d+1]=a[1],
b[d+2]=a[2],b[d+3]=a[3];return b}}();a.forEach=c});U(jf);var kf=Q(function(c,a){function b(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=oa&&na?na(a,c):{};d.get||d.set?oa(b,c,d):b[c]=a[c]}b.default=a;return b}function d(){var a=new l.ARRAY_TYPE(4);l.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0);a[3]=1;return a}function f(a,b,c){c*=.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a}function g(a,
b,c){var d=b[0],f=b[1],g=b[2];b=b[3];var h=c[0],m=c[1],k=c[2];c=c[3];a[0]=d*c+b*h+f*k-g*m;a[1]=f*c+b*m+g*h-d*k;a[2]=g*c+b*k+d*m-f*h;a[3]=b*c-d*h-f*m-g*k;return a}function h(a,b,c,d){var f=b[0],g=b[1],h=b[2];b=b[3];var m=c[0],k=c[1],q=c[2];c=c[3];var r=f*m+g*k+h*q+b*c;0>r&&(r=-r,m=-m,k=-k,q=-q,c=-c);if(1-r>l.EPSILON){var n=Math.acos(r);var p=Math.sin(n);r=Math.sin((1-d)*n)/p;d=Math.sin(d*n)/p}else r=1-d;a[0]=r*f+d*m;a[1]=r*g+d*k;a[2]=r*h+d*q;a[3]=r*b+d*c;return a}function k(a,b){var c=b[0]+b[4]+b[8];
if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var f=(d+1)%3,g=(d+2)%3;c=Math.sqrt(b[3*d+d]-b[3*f+f]-b[3*g+g]+1);a[d]=.5*c;c=.5/c;a[3]=(b[3*f+g]-b[3*g+f])*c;a[f]=(b[3*f+d]+b[3*d+f])*c;a[g]=(b[3*g+d]+b[3*d+g])*c}return a}Object.defineProperty(a,"__esModule",{value:!0});a.create=d;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.setAxisAngle=f;a.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),
d=Math.sin(c/2);d>l.EPSILON?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0);return c};a.multiply=g;a.rotateX=function(a,b,c){c*=.5;var d=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*h;a[1]=f*c+g*h;a[2]=g*c-f*h;a[3]=b*c-d*h;return a};a.rotateY=function(a,b,c){c*=.5;var d=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c-g*h;a[1]=f*c+b*h;a[2]=g*c+d*h;a[3]=b*c-f*h;return a};a.rotateZ=function(a,b,c){c*=.5;var d=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);
c=Math.cos(c);a[0]=d*c+f*h;a[1]=f*c-d*h;a[2]=g*c+b*h;a[3]=b*c-g*h;return a};a.calculateW=function(a,b){var c=b[0],d=b[1];b=b[2];a[0]=c;a[1]=d;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-b*b));return a};a.slerp=h;a.random=function(a){var b=l.RANDOM(),c=l.RANDOM(),d=l.RANDOM(),f=Math.sqrt(1-b);b=Math.sqrt(b);a[0]=f*Math.sin(2*Math.PI*c);a[1]=f*Math.cos(2*Math.PI*c);a[2]=b*Math.sin(2*Math.PI*d);a[3]=b*Math.cos(2*Math.PI*d);return a};a.invert=function(a,b){var c=b[0],d=b[1],f=b[2];b=b[3];var g=c*c+d*d+f*
f+b*b;g=g?1/g:0;a[0]=-c*g;a[1]=-d*g;a[2]=-f*g;a[3]=b*g;return a};a.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};a.fromMat3=k;a.fromEuler=function(a,b,c,d){var f=.5*Math.PI/180;b*=f;c*=f;d*=f;f=Math.sin(b);b=Math.cos(b);var g=Math.sin(c);c=Math.cos(c);var h=Math.sin(d);d=Math.cos(d);a[0]=f*c*d-b*g*h;a[1]=b*g*d+f*c*h;a[2]=b*c*h-f*g*d;a[3]=b*c*d+f*g*h;return a};a.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};a.setAxes=a.sqlerp=a.rotationTo=a.equals=
a.exactEquals=a.normalize=a.sqrLen=a.squaredLength=a.len=a.length=a.lerp=a.dot=a.scale=a.mul=a.add=a.set=a.copy=a.fromValues=a.clone=void 0;var l=b(Wa),p=b(ff),n=b(hf);c=b(jf);a.clone=c.clone;a.fromValues=c.fromValues;a.copy=c.copy;a.set=c.set;a.add=c.add;a.mul=g;a.scale=c.scale;a.dot=c.dot;a.lerp=c.lerp;var m=c.length;a.length=m;a.len=m;m=c.squaredLength;a.squaredLength=m;a.sqrLen=m;var q=c.normalize;a.normalize=q;a.exactEquals=c.exactEquals;a.equals=c.equals;c=function(){var a=n.create(),b=n.fromValues(1,
0,0),c=n.fromValues(0,1,0);return function(d,g,h){var m=n.dot(g,h);if(-.999999>m)return n.cross(a,b,g),1E-6>n.len(a)&&n.cross(a,c,g),n.normalize(a,a),f(d,a,Math.PI),d;if(.999999<m)return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d;n.cross(a,g,h);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=1+m;return q(d,d)}}();a.rotationTo=c;c=function(){var a=d(),b=d();return function(c,d,f,g,m,k){h(a,d,m,k);h(b,f,g,k);h(c,a,b,2*k*(1-k));return c}}();a.sqlerp=c;c=function(){var a=p.create();return function(b,c,d,f){a[0]=d[0];a[3]=d[1];
a[6]=d[2];a[1]=f[0];a[4]=f[1];a[7]=f[2];a[2]=-c[0];a[5]=-c[1];a[8]=-c[2];return q(b,k(b,a))}}();a.setAxes=c});U(kf);var Kh=Q(function(c,a){function b(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=oa&&na?na(a,c):{};d.get||d.set?oa(b,c,d):b[c]=a[c]}b.default=a;return b}function d(a,b,c){var d=.5*c[0],f=.5*c[1];c=.5*c[2];var g=b[0],h=b[1],m=b[2];b=b[3];a[0]=g;a[1]=h;a[2]=m;a[3]=b;a[4]=d*b+f*m-c*h;a[5]=f*b+c*g-d*m;a[6]=c*b+d*h-f*
g;a[7]=-d*g-f*h-c*m;return a}function f(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];return a}function g(a,b,c){var d=b[0],f=b[1],g=b[2],h=b[3],k=c[4],m=c[5],l=c[6],q=c[7],n=b[4],p=b[5],r=b[6];b=b[7];var E=c[0],y=c[1],I=c[2];c=c[3];a[0]=d*c+h*E+f*I-g*y;a[1]=f*c+h*y+g*E-d*I;a[2]=g*c+h*I+d*y-f*E;a[3]=h*c-d*E-f*y-g*I;a[4]=d*q+h*k+f*l-g*m+n*c+b*E+p*I-r*y;a[5]=f*q+h*m+g*k-d*l+p*c+b*y+r*E-n*I;a[6]=g*q+h*l+d*m-f*k+r*c+b*I+n*y-p*E;a[7]=h*q-d*k-f*m-g*l+b*c-n*E-p*y-r*
I;return a}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){var a=new h.ARRAY_TYPE(8);h.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0);a[3]=1;return a};a.clone=function(a){var b=new h.ARRAY_TYPE(8);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];return b};a.fromValues=function(a,b,c,d,f,g,k,l){var m=new h.ARRAY_TYPE(8);m[0]=a;m[1]=b;m[2]=c;m[3]=d;m[4]=f;m[5]=g;m[6]=k;m[7]=l;return m};a.fromRotationTranslationValues=
function(a,b,c,d,f,g,k){var m=new h.ARRAY_TYPE(8);m[0]=a;m[1]=b;m[2]=c;m[3]=d;f*=.5;g*=.5;k*=.5;m[4]=f*d+g*c-k*b;m[5]=g*d+k*a-f*c;m[6]=k*d+f*b-g*a;m[7]=-f*a-g*b-k*c;return m};a.fromRotationTranslation=d;a.fromTranslation=function(a,b){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=.5*b[0];a[5]=.5*b[1];a[6]=.5*b[2];a[7]=0;return a};a.fromRotation=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=0;a[5]=0;a[6]=0;a[7]=0;return a};a.fromMat4=function(a,b){var c=k.create();l.getRotation(c,b);var f=new h.ARRAY_TYPE(3);
l.getTranslation(f,b);d(a,c,f);return a};a.copy=f;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;a[6]=0;a[7]=0;return a};a.set=function(a,b,c,d,f,g,h,k,l){a[0]=b;a[1]=c;a[2]=d;a[3]=f;a[4]=g;a[5]=h;a[6]=k;a[7]=l;return a};a.getDual=function(a,b){a[0]=b[4];a[1]=b[5];a[2]=b[6];a[3]=b[7];return a};a.setDual=function(a,b){a[4]=b[0];a[5]=b[1];a[6]=b[2];a[7]=b[3];return a};a.getTranslation=function(a,b){var c=b[4],d=b[5],f=b[6],g=b[7],h=-b[0],k=-b[1],m=-b[2];b=b[3];a[0]=2*(c*b+g*h+d*m-
f*k);a[1]=2*(d*b+g*k+f*h-c*m);a[2]=2*(f*b+g*m+c*k-d*h);return a};a.translate=function(a,b,c){var d=b[0],f=b[1],g=b[2],h=b[3],k=.5*c[0],m=.5*c[1];c=.5*c[2];var l=b[4],n=b[5],q=b[6];b=b[7];a[0]=d;a[1]=f;a[2]=g;a[3]=h;a[4]=h*k+f*c-g*m+l;a[5]=h*m+g*k-d*c+n;a[6]=h*c+d*m-f*k+q;a[7]=-d*k-f*m-g*c+b;return a};a.rotateX=function(a,b,c){var d=-b[0],f=-b[1],g=-b[2],h=b[3],m=b[4],l=b[5],n=b[6],q=b[7],p=m*h+q*d+l*g-n*f,r=l*h+q*f+n*d-m*g,G=n*h+q*g+m*f-l*d;m=q*h-m*d-l*f-n*g;k.rotateX(a,b,c);d=a[0];f=a[1];g=a[2];
h=a[3];a[4]=p*h+m*d+r*g-G*f;a[5]=r*h+m*f+G*d-p*g;a[6]=G*h+m*g+p*f-r*d;a[7]=m*h-p*d-r*f-G*g;return a};a.rotateY=function(a,b,c){var d=-b[0],f=-b[1],g=-b[2],h=b[3],m=b[4],l=b[5],n=b[6],q=b[7],p=m*h+q*d+l*g-n*f,r=l*h+q*f+n*d-m*g,G=n*h+q*g+m*f-l*d;m=q*h-m*d-l*f-n*g;k.rotateY(a,b,c);d=a[0];f=a[1];g=a[2];h=a[3];a[4]=p*h+m*d+r*g-G*f;a[5]=r*h+m*f+G*d-p*g;a[6]=G*h+m*g+p*f-r*d;a[7]=m*h-p*d-r*f-G*g;return a};a.rotateZ=function(a,b,c){var d=-b[0],f=-b[1],g=-b[2],h=b[3],m=b[4],l=b[5],n=b[6],q=b[7],p=m*h+q*d+l*
g-n*f,r=l*h+q*f+n*d-m*g,G=n*h+q*g+m*f-l*d;m=q*h-m*d-l*f-n*g;k.rotateZ(a,b,c);d=a[0];f=a[1];g=a[2];h=a[3];a[4]=p*h+m*d+r*g-G*f;a[5]=r*h+m*f+G*d-p*g;a[6]=G*h+m*g+p*f-r*d;a[7]=m*h-p*d-r*f-G*g;return a};a.rotateByQuatAppend=function(a,b,c){var d=c[0],f=c[1],g=c[2];c=c[3];var h=b[0],k=b[1],m=b[2],l=b[3];a[0]=h*c+l*d+k*g-m*f;a[1]=k*c+l*f+m*d-h*g;a[2]=m*c+l*g+h*f-k*d;a[3]=l*c-h*d-k*f-m*g;h=b[4];k=b[5];m=b[6];l=b[7];a[4]=h*c+l*d+k*g-m*f;a[5]=k*c+l*f+m*d-h*g;a[6]=m*c+l*g+h*f-k*d;a[7]=l*c-h*d-k*f-m*g;return a};
a.rotateByQuatPrepend=function(a,b,c){var d=b[0],f=b[1],g=b[2];b=b[3];var h=c[0],k=c[1],m=c[2],l=c[3];a[0]=d*l+b*h+f*m-g*k;a[1]=f*l+b*k+g*h-d*m;a[2]=g*l+b*m+d*k-f*h;a[3]=b*l-d*h-f*k-g*m;h=c[4];k=c[5];m=c[6];l=c[7];a[4]=d*l+b*h+f*m-g*k;a[5]=f*l+b*k+g*h-d*m;a[6]=g*l+b*m+d*k-f*h;a[7]=b*l-d*h-f*k-g*m;return a};a.rotateAroundAxis=function(a,b,c,d){if(Math.abs(d)<h.EPSILON)return f(a,b);var g=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);d*=.5;var k=Math.sin(d),m=k*c[0]/g,l=k*c[1]/g;c=k*c[2]/g;d=Math.cos(d);
g=b[0];k=b[1];var n=b[2],q=b[3];a[0]=g*d+q*m+k*c-n*l;a[1]=k*d+q*l+n*m-g*c;a[2]=n*d+q*c+g*l-k*m;a[3]=q*d-g*m-k*l-n*c;g=b[4];k=b[5];n=b[6];b=b[7];a[4]=g*d+b*m+k*c-n*l;a[5]=k*d+b*l+n*m-g*c;a[6]=n*d+b*c+g*l-k*m;a[7]=b*d-g*m-k*l-n*c;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];return a};a.multiply=g;a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=
b[6]*c;a[7]=b[7]*c;return a};a.lerp=function(a,b,c,d){var f=1-d;0>p(b,c)&&(d=-d);a[0]=b[0]*f+c[0]*d;a[1]=b[1]*f+c[1]*d;a[2]=b[2]*f+c[2]*d;a[3]=b[3]*f+c[3]*d;a[4]=b[4]*f+c[4]*d;a[5]=b[5]*f+c[5]*d;a[6]=b[6]*f+c[6]*d;a[7]=b[7]*f+c[7]*d;return a};a.invert=function(a,b){var c=n(b);a[0]=-b[0]/c;a[1]=-b[1]/c;a[2]=-b[2]/c;a[3]=b[3]/c;a[4]=-b[4]/c;a[5]=-b[5]/c;a[6]=-b[6]/c;a[7]=b[7]/c;return a};a.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];a[4]=-b[4];a[5]=-b[5];a[6]=-b[6];a[7]=b[7];
return a};a.normalize=function(a,b){var c=n(b);if(0<c){c=Math.sqrt(c);var d=b[0]/c,f=b[1]/c,g=b[2]/c,h=b[3]/c,k=b[4],m=b[5],l=b[6];b=b[7];var p=d*k+f*m+g*l+h*b;a[0]=d;a[1]=f;a[2]=g;a[3]=h;a[4]=(k-d*p)/c;a[5]=(m-f*p)/c;a[6]=(l-g*p)/c;a[7]=(b-h*p)/c}return a};a.str=function(a){return"quat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===
b[7]};a.equals=function(a,b){var c=a[0],d=a[1],f=a[2],g=a[3],k=a[4],m=a[5],l=a[6];a=a[7];var n=b[0],p=b[1],q=b[2],F=b[3],G=b[4],E=b[5],y=b[6];b=b[7];return Math.abs(c-n)<=h.EPSILON*Math.max(1,Math.abs(c),Math.abs(n))&&Math.abs(d-p)<=h.EPSILON*Math.max(1,Math.abs(d),Math.abs(p))&&Math.abs(f-q)<=h.EPSILON*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(g-F)<=h.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(k-G)<=h.EPSILON*Math.max(1,Math.abs(k),Math.abs(G))&&Math.abs(m-E)<=h.EPSILON*Math.max(1,
Math.abs(m),Math.abs(E))&&Math.abs(l-y)<=h.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(a-b)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.sqrLen=a.squaredLength=a.len=a.length=a.dot=a.mul=a.setReal=a.getReal=void 0;var h=b(Wa),k=b(kf),l=b(gf);a.getReal=k.copy;a.setReal=k.copy;a.mul=g;var p=k.dot;a.dot=p;c=k.length;a.length=c;a.len=c;var n=k.squaredLength;a.squaredLength=n;a.sqrLen=n});U(Kh);var Lh=Q(function(c,a){function b(){var a=new n.ARRAY_TYPE(2);n.ARRAY_TYPE!=Float32Array&&(a[0]=
0,a[1]=0);return a}function d(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function f(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function g(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a}function h(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)}function k(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a}function l(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function p(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(a,"__esModule",{value:!0});a.create=b;a.clone=function(a){var b=
new n.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b};a.fromValues=function(a,b){var c=new n.ARRAY_TYPE(2);c[0]=a;c[1]=b;return c};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};a.set=function(a,b,c){a[0]=b;a[1]=c;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a};a.subtract=d;a.multiply=f;a.divide=g;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],
c[0]);a[1]=Math.min(b[1],c[1]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};a.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;return a};a.distance=h;a.squaredDistance=k;a.length=l;a.squaredLength=p;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};
a.normalize=function(a,b){var c=b[0],d=b[1];c=c*c+d*d;0<c&&(c=1/Math.sqrt(c));a[0]=b[0]*c;a[1]=b[1]*c;return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};a.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};a.lerp=function(a,b,c,d){var f=b[0];b=b[1];a[0]=f+d*(c[0]-f);a[1]=b+d*(c[1]-b);return a};a.random=function(a,b){b=b||1;var c=2*n.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};a.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=
c[1]*d+c[3]*b;return a};a.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a};a.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};a.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};a.rotate=function(a,b,c,d){var f=b[0]-c[0];b=b[1]-c[1];var g=Math.sin(d);d=Math.cos(d);a[0]=f*d-b*g+c[0];a[1]=f*g+b*d+c[1];return a};a.angle=function(a,
b){var c=a[0];a=a[1];var d=b[0];b=b[1];var f=c*c+a*a;0<f&&(f=1/Math.sqrt(f));var g=d*d+b*b;0<g&&(g=1/Math.sqrt(g));c=(c*d+a*b)*f*g;return 1<c?0:-1>c?Math.PI:Math.acos(c)};a.zero=function(a){a[0]=0;a[1]=0;return a};a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};a.equals=function(a,b){var c=a[0];a=a[1];var d=b[0];b=b[1];return Math.abs(c-d)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(a-b)<=n.EPSILON*Math.max(1,Math.abs(a),
Math.abs(b))};a.forEach=a.sqrLen=a.sqrDist=a.dist=a.div=a.mul=a.sub=a.len=void 0;var n=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=oa&&na?na(a,c):{};d.get||d.set?oa(b,c,d):b[c]=a[c]}b.default=a;return b}(Wa);a.len=l;a.sub=d;a.mul=f;a.div=g;a.dist=h;a.sqrDist=k;a.sqrLen=p;c=function(){var a=b();return function(b,c,d,f,g,h){c||(c=2);d||(d=0);for(f=f?Math.min(f*c+d,b.length):b.length;d<f;d+=c)a[0]=b[d],a[1]=b[d+1],g(a,
a,h),b[d]=a[0],b[d+1]=a[1];return b}}();a.forEach=c});U(Lh);var Sa=Q(function(c,a){function b(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=oa&&na?na(a,c):{};d.get||d.set?oa(b,c,d):b[c]=a[c]}b.default=a;return b}Object.defineProperty(a,"__esModule",{value:!0});a.vec4=a.vec3=a.vec2=a.quat2=a.quat=a.mat4=a.mat3=a.mat2d=a.mat2=a.glMatrix=void 0;c=b(Wa);a.glMatrix=c;c=b(Ih);a.mat2=c;c=b(Jh);a.mat2d=c;c=b(ff);a.mat3=c;c=b(gf);a.mat4=
c;c=b(kf);a.quat=c;c=b(Kh);a.quat2=c;c=b(Lh);a.vec2=c;c=b(hf);a.vec3=c;c=b(jf);a.vec4=c});U(Sa);var xa=Sa.vec4,J=Sa.vec3,V=Sa.vec2,al=Sa.quat2,Ad=Sa.quat,H=Sa.mat4,bl=Sa.mat3,cl=Sa.mat2d,dl=Sa.mat2,el=Sa.glMatrix;ub.deviation=function(c,a,b,d){var f=a&&a.length,g=Math.abs(qe(c,0,f?a[0]*b:c.length,b));if(f){f=0;for(var h=a.length;f<h;f++)g-=Math.abs(qe(c,a[f]*b,f<h-1?a[f+1]*b:c.length,b))}for(f=a=0;f<d.length;f+=3){h=d[f]*b;var k=d[f+1]*b,l=d[f+2]*b;a+=Math.abs((c[h]-c[l])*(c[k+1]-c[h+1])-(c[h]-c[k])*
(c[l+1]-c[h+1]))}return 0===g&&0===a?0:Math.abs((a-g)/g)};ub.flatten=function(c){for(var a=c[0][0].length,b={vertices:[],holes:[],dimensions:a},d=0,f=0;f<c.length;f++){for(var g=0;g<c[f].length;g++)for(var h=0;h<a;h++)b.vertices.push(c[f][g][h]);0<f&&(d+=c[f-1].length,b.holes.push(d))}return b};ub.default=ub;var Mh="undefined"===typeof Og?"__target":Og(),Li=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,sd=window.URL||window.webkitURL,oc=window.Worker;if(oc){var Nh=
Of("self.onmessage = function () {}"),Oh=new Uint8Array(1);try{if(/(?:Trident|Edge)\/(?:[567]|12)/i.test(navigator.userAgent))throw Error("Not available");var lf=new oc(Nh);lf.postMessage(Oh,[Oh.buffer])}catch(c){oc=null}finally{sd.revokeObjectURL(Nh),lf&&lf.terminate()}}var fl=new function(c,a){return function(b){var d=this;if(a){if(oc&&!b)return b=(""+a).replace(/^function.+?{/,"").slice(0,-1),b=Of(b),this[Mh]=new oc(b),sd.revokeObjectURL(b),this[Mh];var f={postMessage:function(a){d.onmessage&&
setTimeout(function(){return d.onmessage({data:a,target:f})})}};a.call(f);this.postMessage=function(a){setTimeout(function(){return f.onmessage({data:a,target:d})})};this.isThisThread=!0}else return new oc(c)}}("./worker.js",function(c,a){}),Ph={window:1,windowAnimation:2,gradual:3,ripple:4,water:6},Vd=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b._isShow=!0;c=b.getOptions();if("windowAnimation"===c.style||"ripple"===c.style||0<c.riseTime)b.autoUpdate=!0;b.selectedColor=
[-1,-1,-1];b.textureCache={};return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:"rgba(50, 50, 230, 1.0)",opacity:.8,height:0,isTextureFull:!1,topColor:"rgba(76, 76, 76, 0.8)",textureRotate:0,textureScale:1,useLight:!0,riseTime:0,polygonOffset:[0,0],depthTest:!0}}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions();this.dataMgr=new Nb(this,this.gl);this.texture=null;this.isUseTexture=!1;var c=[];b.enablePicked&&c.push("PICK");b.texture&&c.push("USE_TEXTURE");
this.program=new X(this.gl,{vertexShader:"precision highp float;uniform vec4 uSelectedColor;attribute vec4 a_pos;attribute vec3 a_normal;attribute vec4 a_color;attribute vec4 a_pre_color;attribute float a_height;attribute float a_pre_height;\n#if defined(USE_TEXTURE)\nattribute vec2 a_texture_coord;\n#endif\nuniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_use_lighting;uniform bool u_use_texture;uniform vec3 u_ripple_center;uniform float u_radius;uniform float style;uniform float alpha;uniform float time;uniform float dataTime;uniform float riseTime;uniform vec2 uMapCenter;uniform float uMapZoom;varying float v_height;varying vec4 v_color;varying vec3 v_position;varying vec2 v_texture_coord;const vec3 point_color=vec3(0.06,0.06,0.06);const vec3 light_color=vec3(0.53,0.53,0.53);const vec3 light_color_2=vec3(0.4,0.4,0.4);const vec3 uAmbientColor=vec3(0.8,0.8,0.8);const vec3 uLightingDirection=vec3(0.0,1.0,1.0);const vec3 uDirectionalColor=vec3(1.0,1.0,1.0);float getTransitionValue(float pre_value,float to_value,float dataTime,float riseTime){float result=0.0;if(pre_value==to_value){result=to_value;}else{if(riseTime>0.0&&dataTime<riseTime){result=(pre_value+(to_value-pre_value)*(dataTime/riseTime));}else{result=to_value;}}return result;}void main(){vec4 pos=a_pos;pos.z=pos.z+pos.w*getTransitionValue(a_pre_height,a_height,dataTime,riseTime);v_position=pos.xyz;v_height=a_height;\n#if defined(USE_TEXTURE)\nif(u_use_texture){v_texture_coord=a_texture_coord;}\n#endif\nvec4 position=u_proj_matrix*u_mv_matrix*vec4(pos.xyz,1.0);gl_Position=position;vec4 icolor=a_color;\n#if defined(PICK)\nif(mapvIsPicked()){icolor=uSelectedColor;}\n#endif\nif(u_use_lighting){vec3 N=normalize(vec3(u_normal_matrix*vec4(a_normal,1.0)));vec4 point_dir=u_mv_matrix*vec4(0,1,0,0);vec3 L_point=normalize(point_dir.xyz);float lambert_point=max(0.0,dot(N,-L_point));vec4 light_dir=u_mv_matrix*vec4(u_side_light_dir,0);vec3 L=normalize(light_dir.xyz);float lambert=max(0.0,dot(N,-L));if(pos.z<5.0){float deepGradientColor=(5.0-pos.z)/8.0;lambert=lambert-deepGradientColor;}vec4 light_dir_2=u_mv_matrix*vec4(0,0,-1,0);vec3 L2=normalize(light_dir_2.xyz);float lambert_2=max(0.0,dot(N,-L2));if(a_pre_color.r==a_color.r&&a_pre_color.g==a_color.g&&a_pre_color.b==a_color.b){}else{if(riseTime>0.0&&dataTime<riseTime){icolor.r=a_pre_color.r+(a_color.r-a_pre_color.r)*(dataTime/riseTime);icolor.g=a_pre_color.g+(a_color.g-a_pre_color.g)*(dataTime/riseTime);icolor.b=a_pre_color.b+(a_color.b-a_pre_color.b)*(dataTime/riseTime);}}v_color.rgb=icolor.rgb+icolor.rgb*light_color*lambert+icolor.rgb*light_color_2*lambert_2+icolor.rgb*point_color*lambert_point;v_color.a=icolor.a;if(u_use_texture){mat3 normalMatrix=mat3(u_normal_matrix);vec3 transformedNormal=normalMatrix*a_normal;vec3 dir=uLightingDirection;dir=vec3(normalMatrix*vec3(0.0,-1.0,2.0));float directionalLightWeighting=max(dot(normalize(transformedNormal),normalize(dir)),0.0);vec4 vLightWeighting;vLightWeighting=vec4(uAmbientColor+uDirectionalColor*directionalLightWeighting,1.0);v_color=vLightWeighting;}}else{v_color=icolor;}}",
fragmentShader:"precision highp float;varying vec4 v_color;varying vec3 v_position;varying float v_height;varying vec2 v_texture_coord;uniform vec3 u_ripple_center;uniform vec4 top_color;uniform float u_radius;uniform float style;uniform float alpha;uniform float time;uniform sampler2D u_sampler;uniform bool u_use_lighting;uniform bool u_use_texture;void main(){vec4 color=vec4(v_color);vec4 textureColor=vec4(1.0,1.0,1.0,1.0);if(u_use_texture){if(style==6.0){float x=v_texture_coord.s;float y=v_texture_coord.t;vec2 cPos=-1.0+2.0*gl_FragCoord.xy/MAPV_resolution;float cLength=length(cPos);vec2 uv=gl_FragCoord.xy/MAPV_resolution+(cPos/cLength)*cos(cLength*12.0-time/1000.0*4.0)*0.03;textureColor=texture2D(u_sampler,uv/2.0+vec2(x,y));}else{textureColor=texture2D(u_sampler,vec2(v_texture_coord.s,v_texture_coord.t));}if(u_use_lighting){color=vec4(textureColor*v_color*1.1);}else{color=textureColor;}}if(style==1.0||style==2.0){float t=time/1000.0;float diffDistance=5.0;float modX=mod(v_position.x,diffDistance*2.0);float modZ=mod(v_position.z,diffDistance*2.0);if(modX<diffDistance&&modZ<diffDistance&&v_position.z<v_height){color*=1.05;if(time>0.0&&style==2.0){float iX=ceil(v_position.x/diffDistance);float iZ=ceil(v_position.z/diffDistance);float timeDistance=8.0;t+=tan(sin(iZ));color*=(1.0+mod(t,timeDistance)/timeDistance);}}color.a=alpha;}else if(style==5.0){float t=time/1000.0;float diffDistance=10.0;float modZ=mod(v_position.z-t*40.0,diffDistance*2.0);color.a=1.0-pow(v_position.z/v_height,0.5);if(v_position.z/v_height<0.3){color.r+=0.2;color.g+=0.2;color.b+=0.2;}if(modZ<diffDistance*2.0-4.0){discard;}}else if(style==3.0){float diffDistance=10.0;float modX=mod(v_position.x,diffDistance*2.0);color.a=1.0-pow(v_position.z/v_height,0.3);}else if(style==4.0){float dis=distance(u_ripple_center,v_position);float rSize=400.0;if(v_position.z>=v_height){color=top_color;}if(dis>u_radius-rSize&&dis<u_radius+rSize){color*=(1.0-abs(dis-u_radius)/rSize)*2.0+1.0;}}else if(style==6.0){}gl_FragColor=color;}",
defines:c},this);this.vertexBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.colorBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.heightBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.textureBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});c=[{name:"a_pos",buffer:this.vertexBuffer,stride:28,size:4,type:"FLOAT",offset:0},{name:"a_normal",buffer:this.vertexBuffer,
size:3,stride:28,type:"FLOAT",offset:16},{name:"a_color",buffer:this.colorBuffer,size:4,stride:32,type:"FLOAT",offset:0},{name:"a_pre_color",buffer:this.colorBuffer,size:4,stride:32,type:"FLOAT",offset:16},{name:"a_height",buffer:this.heightBuffer,size:1,stride:8,type:"FLOAT",offset:0},{name:"a_pre_height",buffer:this.heightBuffer,size:1,stride:8,type:"FLOAT",offset:4}];b.texture&&c.push({name:"a_texture_coord",buffer:this.textureBuffer,size:2,stride:8,type:"FLOAT",offset:0});c=c.concat(this.getCommonAttributes());
this.vertexArray=new la({gl:a,program:this.program,attributes:c});this.initializeTime=new Date;this.normalMatrix=H.create()}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null);this.dataMgr=this.options=this.data=this.indexBuffer=this.textureBuffer=this.heightBuffer=this.colorBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(a,c){var b=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=
setTimeout(function(){b.loadTexture(function(){b.dataMgr.parseData(c);b.dataTime=new Date;b.webglLayer.render()})},0))}},{key:"render",value:function(a){var b=a.gl,c=a.projectionMatrix,g=a.viewMatrix;if(this._isShow){var h=this.getData();if(h&&!(0>=h.length)){h=this.getOptions();var k=this.program;k.use(b);if(!h.texture||this.texture){var l=0;h.style&&Ph[h.style]&&(l=Ph[h.style]);var p=[b.ONE,b.ZERO];h.blend&&(p=[b.ONE,b.ONE]);if(0===h.height||"gradual"===h.style)p=[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA];
this.setGLState({cullFace:!1,blend:!0,blendEquation:b.FUNC_ADD,blendFunc:p,polygonOffset:h.polygonOffset,depthTest:h.depthTest,depthMask:"gradual"===h.style?!1:!0});p=this.normizedColor(h.topColor);if("ripple"===h.style&&h.rippleLayer&&h.rippleLayer.data&&h.rippleLayer.data[0]){var n=this.normizedPoint(h.rippleLayer.data[0].geometry.coordinates);k.setUniforms({u_ripple_center:[n[0],n[1],0],u_radius:h.rippleLayer.options.size*h.rippleLayer.currentScale})}n=J.fromValues(0,-1,2);h.lightDir&&(n=J.fromValues(h.lightDir[0],
h.lightDir[1],h.lightDir[2]));var m=this.normalMatrix;H.invert(m,g);H.transpose(m,m);k.setUniforms(Y(this.getCommonUniforms(a),{u_normal_matrix:m,u_sampler:this.texture,u_proj_matrix:c,u_mv_matrix:g,style:l,top_color:p,u_use_lighting:h.useLight,u_use_texture:this.isUseTexture,alpha:void 0===h.opacity?.8:parseFloat(h.opacity),time:new Date-this.initializeTime,dataTime:new Date-this.dataTime,riseTime:h.riseTime,u_side_light_dir:n}));a=this.dataMgr.getData();0<a.vertex.length&&(this.vertexArray.bind(),
this.indexBuffer.bind(),b.drawElements(b.TRIANGLES,a.index.length,b.UNSIGNED_INT,0))}}}else this.webglLayer.clear()}},{key:"loadTexture",value:function(a){var b=this,c=this.getOptions();c.texture?(this.isUseTexture=!0,Ea(this.gl,c.texture,function(c,d){b.image=d;b.texture=c;a&&a();b.webglLayer.render()})):(this.isUseTexture=!1,this.image=this.texture=null,a&&a())}}]);return a}(ca);Nb.prototype.initData=function(){this.outBuilding3d={pickColorVertex:[],vertex:[],texture:[],color:[],height:[],index:[]}};
Nb.prototype.getData=function(){return this.outBuilding3d};Nb.prototype.initWorker=function(){this.worker=new fl;this.worker.onmessage=function(c){}};Nb.prototype.parseData=function(c){var a=this;this.initData();for(var b=this.shapeLayer.getOptions(),d=0;d<c.length;d++){var f=c[d],g=f.height||b.height;"properties"in f&&"height"in f.properties&&(g=f.properties.height);g*=1;var h=f.color||b.color;"properties"in f&&"color"in f.properties&&(h=f.properties.color);"properties"in f&&"fillColor"in f.properties&&
(h=f.properties.fillColor);"[object Function]"===Object.prototype.toString.call(h)&&(h=h(f));h=this.shapeLayer.normizedColor(h);var k=this.shapeLayer.getProperty("angle",b.textureRotate,f),l=void 0;b.enablePicked&&(l=this.shapeLayer.indexToRgb(d));var p=void 0,n=void 0;b.riseTime&&(n=f.preColor,"properties"in f&&"preColor"in f.properties&&(n=f.properties.preColor),p=f.preHeight,"properties"in f&&"preHeight"in f.properties&&(p=f.properties.preHeight),void 0===p&&(p=0));if(f.geometry.coordinates)if("MultiPolygon"===
f.geometry.type){var m=f.geometry.coordinates;f=[];for(var q=0;q<m.length;q++)f.push(m[q].map(function(b){return b.map(function(b){return a.shapeLayer.normizedPoint(b)})}));for(m=0;m<f.length;m++){q=[];var r=[],u=ub.flatten(f[m]),v=u.vertices;u=u.holes;for(var t=0;t<v.length;t+=3)q.push(v[t+0],v[t+1]),r.push(v[t+2]);this.parseBuilding3d(this.outBuilding3d,q,r,p,g,n,h,l,k,u)}}else{m=[];for(q=0;q<f.geometry.coordinates.length;q++)m.push(f.geometry.coordinates[q].map(function(b){return a.shapeLayer.normizedPoint(b)}));
m=ub.flatten(m);f=m.vertices;m=m.holes;q=[];r=[];for(v=0;v<f.length;v+=3)q.push(f[v+0],f[v+1]),r.push(f[v+2]);this.parseBuilding3d(this.outBuilding3d,q,r,p,g,n,h,l,k,m)}}this.shapeLayer.vertexBuffer.updateData(new Float32Array(this.outBuilding3d.vertex));this.shapeLayer.colorBuffer.updateData(new Float32Array(this.outBuilding3d.color));this.shapeLayer.heightBuffer.updateData(new Float32Array(this.outBuilding3d.height));this.shapeLayer.textureBuffer.updateData(new Float32Array(this.outBuilding3d.texture));
this.shapeLayer.indexBuffer.updateData(new Uint32Array(this.outBuilding3d.index));b.enablePicked&&this.shapeLayer.pickBuffer.updateData(new Float32Array(this.outBuilding3d.pickColorVertex))};Nb.prototype.getBounds=function(c,a){for(var b=c[0],d=c[1],f=c[0],g=c[1],h=0;h<c.length;h+=2)b=Math.min(c[h],b),d=Math.min(c[h+1],d),f=Math.max(c[h],f),g=Math.max(c[h+1],g);h=[(f-b)/2+b,(g-d)/2+d];if(0===a||!a)return{minX:b,minY:d,maxX:f,maxY:g,width:f-b,height:g-d,center:h};b=c.slice(0);for(d=0;d<b.length;d+=
2)f=Pf(c[d],c[d+1],h,a),b[d]=f[0],b[d+1]=f[1];return this.getBounds(b,0)};Nb.prototype.parseBuilding3d=function(c,a,b,d,f,g,h,k,l,p){void 0===d&&(d=f);var n=this.shapeLayer.options,m=c.vertex,q=c.texture,r=c.color,u=c.height,v=c.pickColorVertex;c=c.index;void 0===g&&(g=h);var t=0,x=0;this.shapeLayer.image&&(t=this.shapeLayer.image.width*n.textureScale,x=this.shapeLayer.image.height*n.textureScale);if("gradual"!==n.style){p=p&&p.length?ub(a,p,2):ub(a);var w=p[0],D=p[1],z=p[2];w=[a[2*w],a[2*w+1],1];
D=[a[2*D],a[2*D+1],1];var B=[a[2*z],a[2*z+1],1];z=[];J.cross(z,[B[0]-D[0],B[1]-D[1],B[2]-D[2]],[w[0]-D[0],w[1]-D[1],w[2]-D[2]]);D=m.length/7;var A;n.texture&&(A=this.getBounds(a,l));w=n.isTextureFull;B=0;for(var F=a.length;B<F;B+=2){m.push(a[B],a[B+1],b[B/2],1,z[0],z[1],z[2]);r.push(h[0],h[1],h[2],h[3],g[0],g[1],g[2],g[3]);u.push(f,d);if(n.texture){var G=Pf(a[B],a[B+1],A.center,l),E=ka(G,2);G=E[0];E=E[1];w?(G=(G-A.minX)/A.width,E=(E-A.minY)/A.height):(G=(G-A.minX)/t,E=(E-A.minY)/x);q.push(G,E)}k&&
v.push(k[0]/255,k[1]/255,k[2]/255)}l=0;for(A=p.length;l<A;l++)c.push(p[l]+D)}if(!(f===d&&0>=f))for(l=0,p=a.length;l<p;l+=2)A=m.length/7,F=a[l],G=a[l+1],z=[F,G,b[l/2],0],D=[F,G,b[l/2],1],B=l+2,E=l+3,l===p-2&&(B=0,E=1),B=a[B],E=a[E],F=Math.sqrt(Math.pow(B-F,2),Math.pow(E-G,2)),G=[B,E,b[l/2],0],B=[B,E,b[l/2],1],E=[],J.cross(E,[G[0]-z[0],G[1]-z[1],G[2]-z[2]],[D[0]-z[0],D[1]-z[1],D[2]-z[2]]),m.push(z[0],z[1],z[2],z[3]),m.push(E[0],E[1],E[2]),m.push(D[0],D[1],D[2],D[3]),m.push(E[0],E[1],E[2]),m.push(G[0],
G[1],G[2],G[3]),m.push(E[0],E[1],E[2]),m.push(B[0],B[1],B[2],B[3]),m.push(E[0],E[1],E[2]),r.push(h[0],h[1],h[2],h[3]),r.push(g[0],g[1],g[2],g[3]),r.push(h[0],h[1],h[2],h[3]),r.push(g[0],g[1],g[2],g[3]),r.push(h[0],h[1],h[2],h[3]),r.push(g[0],g[1],g[2],g[3]),r.push(h[0],h[1],h[2],h[3]),r.push(g[0],g[1],g[2],g[3]),u.push(f),u.push(d),u.push(f),u.push(d),u.push(f),u.push(d),u.push(f),u.push(d),n.texture&&(w?(q.push(0,0),q.push(0,1),q.push(1,0),q.push(1,1)):(q.push(0,0),q.push(0,f/x),q.push(F/t,0),q.push(F/
t,f/x))),k&&(v.push(k[0]/255,k[1]/255,k[2]/255),v.push(k[0]/255,k[1]/255,k[2]/255),v.push(k[0]/255,k[1]/255,k[2]/255),v.push(k[0]/255,k[1]/255,k[2]/255)),c.push(A,A+2,A+3,A,A+3,A+1)};var Qh=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.preHeightMapper={};b.preColorMapper={};return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return Y(pb(a.prototype.__proto__||P(a.prototype),"getDefaultOptions",this).call(this),{style:"grid",gridSize:500,height:function(){return 1E3},
color:function(){return"rgb(200, 200, 20)"}})}},{key:"generateGrid",value:function(a,c){var b=c.gridSize,d=[],h={};c=a.length;for(var k=this.getPointOffset(),l=0;l<c;l++){var p=this.normizedPoint(a[l].geometry.coordinates);p=~~((p[0]+k[0])/b)+"_"+~~((p[1]+k[1])/b);void 0===h[p]&&(h[p]=0);var n=~~a[l].count||1;"properties"in a[l]&&"count"in a[l].properties&&(n=~~a[l].properties.count);h[p]+=n}pa(h).forEach(function(a){var c=a.split("_");d.push([c[0]*b+b/2,c[1]*b+b/2,h[a]])});return d}},{key:"onChanged",
value:function(b,c){c=this.processData(c);pb(a.prototype.__proto__||P(a.prototype),"onChanged",this).call(this,b,c)}},{key:"getGridDataRange",value:function(){var a=this.gridData,c=void 0,f=void 0;a[0]&&(c=a[0][2],f=a[0][2]);for(var g=a.length,h=0;h<g;h++){var k=a[h];c=Math.max(k[2],c);f=Math.min(k[2],f)}return{max:c/2,min:f}}},{key:"processData",value:function(a){var b=this.getOptions(),c=b.style,g=b.gridSize,h=[];this.gridData=h;if("normal"===c){c=this.getPointOffset();for(var k=0;k<a.length;k++){var l=
this.normizedPoint(a[k].geometry.coordinates),p=l[0]+c[0];l=l[1]+c[1];var n=~~a[k].count||1;"properties"in a[k]&&"count"in a[k].properties&&(n=~~a[k].properties.count);var m=a[k].color;"properties"in a[k]&&"color"in a[k].properties&&(m=~~a[k].properties.color);h.push([p,l,n,m])}}else h=this.generateGrid(a,b);a=[];this._preHeightMapper={};this._preColorMapper={};for(c=0;c<h.length;c++)k=h[c],k[0]=k[0],k[1]=k[1],p=k[2],b.height&&(p="function"===typeof b.height?b.height({count:k[2]}):b.height),l=g/2-
5,n=k[3],b.color&&(n="function"===typeof b.color?b.color({count:k[2],color:k[3]}):ia(n).unitArray()),m="p"+k[0]+k[1],a.push({geometry:{type:"Polygon",coordinates:[[[k[0]-l,k[1]-l],[k[0]-l,k[1]+l],[k[0]+l,k[1]+l],[k[0]+l,k[1]-l]]]},color:n,preHeight:this.preHeightMapper[m],preColor:this.preColorMapper[m],height:p}),this._preHeightMapper[m]=p,this._preColorMapper[m]=n;this.preHeightMapper=this._preHeightMapper;this.preColorMapper=this._preColorMapper;return a}}]);return a}(Vd),Hb=function(c){function a(b){L(this,
a);return R(this,(a.__proto__||P(a)).call(this,b))}S(a,c);M(a,[{key:"initialize",value:function(a){var b=this;this.children&&this.children.forEach(function(c){c.map=b.map;c.setWebglLayer(b.getWebglLayer());c.commonInitialize&&c.commonInitialize(a);c.initialize&&c.initialize(a);c.onOptionsChanged(c.getOptions());c.onDataChanged(c.getData());c.onChanged(c.getOptions(),c.getData())})}},{key:"isRequestAnimation",value:function(){if(void 0!==this.autoUpdate)return pb(a.prototype.__proto__||P(a.prototype),
"isRequestAnimation",this).call(this);for(var b=!1,c=0;c<this.children.length;c++)if(this.children[c].isRequestAnimation()){b=!0;break}return b}},{key:"render",value:function(a){this.children&&this.children.forEach(function(b){b.render(a)})}}]);return a}(ef),gl=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.gridLayer=new Qh(b.getGridOptions());b.children=[b.gridLayer];b.options.riseTime&&(b.autoUpdate=!0);return b}S(a,c);M(a,[{key:"onDataChanged",value:function(a){this.gridLayer.setData(a)}},
{key:"getGridOptions",value:function(){var a=this.getOptions(),c=a.max,f=a.min;void 0===c&&(f=this.gridLayer.getGridDataRange(),c=f.max,f=f.min);var g=new za({max:c,min:f,gradient:a.gradient,maxSize:a.maxHeight,minSize:a.minHeight});a.height=function(a){var b=g.getSize(a.count);"properties"in a&&"count"in a.properties&&(b=g.getSize(a.properties.count));return b};a.color=function(a){var b=g.getImageData(a.count);"properties"in a&&"count"in a.properties&&(b=g.getImageData(a.properties.count));return[b[0]/
255,b[1]/255,b[2]/255]};return a}},{key:"onOptionsChanged",value:function(a){this.gridLayer.setOptions(this.getGridOptions())}},{key:"getDefaultOptions",value:function(){return{style:"grid",gridSize:500,maxHeight:8E3,minHeight:200,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}}}}]);return a}(Hb),Rh=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.bufferData=[];return b}S(a,c);M(a,[{key:"initialize",value:function(a){this.gl=
a;var b=this.getOptions();this.program=new X(this.gl,{vertexShader:"uniform mat4 u_matrix;attribute vec3 aPos;attribute vec4 aColor;varying vec4 vColor;\n#if defined(DASH)\nvarying vec3 vPos;\n#endif\nvoid main(){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=u_matrix*vec4(aPos,1.0);\n#if defined(DASH)\nvPos=aPos;\n#endif\n}",fragmentShader:"precision highp float;varying vec4 vColor;varying vec3 vPos;void main(){\n#if defined(DASH)\nif(mod(vPos.x,3.0)<1.5){discard;}\n#endif\ngl_FragColor=vColor;}",
defines:b.useDash?["DASH"]:""},this);this.buffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.vertexArray=new la({gl:a,program:this.program,attributes:[{stride:28,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:28,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12}]})}},{key:"destroy",value:function(){this.data=this.vertexArray=this.program=this.buffer=this.bufferData=null}},{key:"onChanged",value:function(a,c){var b=this;if(this.gl){var d=[],h=function(a,
c){if(a)for(var f=0;f<a.length-1;f++){var g=b.normizedPoint(a[f]);d.push(g[0]);d.push(g[1]);d.push(g[2]);d.push(c[0],c[1],c[2],c[3]);g=b.normizedPoint(a[f+1]);d.push(g[0]);d.push(g[1]);d.push(g[2]);d.push(c[0],c[1],c[2],c[3])}};a=a.color;for(var k=0;k<c.length;k++){var l=this.getProperty("color",a,c[k]);l=this.normizedColor(l);var p=c[k].geometry,n=p.coordinates;if("MultiPolygon"===p.type){if(n)for(p=0;p<n.length;p++)h(n[p][0],l)}else if("Polygon"===p.type)n&&h(n[0],l);else if("MultiLineString"===
p.type){if(n)for(p=0;p<n.length;p++)h(n[p],l)}else h(n,l)}this.bufferData=d;this.buffer.updateData(new Float32Array(d))}}},{key:"render",value:function(a){var b=a.gl;a=a.matrix;if(this.bufferData&&!(0>=this.bufferData.length)){var c=this.program;c.use(b);this.vertexArray.bind();c.setUniforms({u_matrix:a});a=this.getOptions();this.setGLState({blend:!0,blendFunc:"lighter"===a.blend?[b.SRC_ALPHA,b.ONE]:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA],blendEquation:b.FUNC_ADD});b.drawArrays(b.LINES,0,this.bufferData.length/
7)}}}]);return a}(ca),hl=Jd.f("species"),il=Q(function(c){c.exports={"default":hl,__esModule:!0}});U(il);var Sh="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},Za=[],Oa=[],Qi="undefined"!==typeof Uint8Array?Uint8Array:Array,te=!1,jl={}.toString,Wf=Array.isArray||function(c){return"[object Array]"==jl.call(c)};y.TYPED_ARRAY_SUPPORT=void 0!==Sh.TYPED_ARRAY_SUPPORT?Sh.TYPED_ARRAY_SUPPORT:!0;y.poolSize=8192;y._augment=function(c){c.__proto__=y.prototype;
return c};y.from=function(c,a,b){return Tf(null,c,a,b)};y.TYPED_ARRAY_SUPPORT&&(y.prototype.__proto__=Uint8Array.prototype,y.__proto__=Uint8Array);y.alloc=function(c,a,b){Vf(c);c=0>=c?jb(null,c):void 0!==a?"string"===typeof b?jb(null,c).fill(a,b):jb(null,c).fill(a):jb(null,c);return c};y.allocUnsafe=function(c){return ue(null,c)};y.allocUnsafeSlow=function(c){return ue(null,c)};y.isBuffer=function(c){return null!=c&&(!!c._isBuffer||fg(c)||"function"===typeof c.readFloatLE&&"function"===typeof c.slice&&
fg(c.slice(0,0)))};y.compare=function(c,a){if(!$a(c)||!$a(a))throw new TypeError("Arguments must be Buffers");if(c===a)return 0;for(var b=c.length,d=a.length,f=0,g=Math.min(b,d);f<g;++f)if(c[f]!==a[f]){b=c[f];d=a[f];break}return b<d?-1:d<b?1:0};y.isEncoding=function(c){switch(String(c).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};y.concat=function(c,a){if(!Wf(c))throw new TypeError('"list" argument must be an Array of Buffers');
if(0===c.length)return y.alloc(0);var b;if(void 0===a)for(b=a=0;b<c.length;++b)a+=c[b].length;a=y.allocUnsafe(a);var d=0;for(b=0;b<c.length;++b){var f=c[b];if(!$a(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(a,d);d+=f.length}return a};y.byteLength=Uf;y.prototype._isBuffer=!0;y.prototype.swap16=function(){var c=this.length;if(0!==c%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<c;a+=2)Ob(this,a,a+1);return this};y.prototype.swap32=
function(){var c=this.length;if(0!==c%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<c;a+=4)Ob(this,a,a+3),Ob(this,a+1,a+2);return this};y.prototype.swap64=function(){var c=this.length;if(0!==c%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<c;a+=8)Ob(this,a,a+7),Ob(this,a+1,a+6),Ob(this,a+2,a+5),Ob(this,a+3,a+4);return this};y.prototype.toString=function(){var c=this.length|0;return 0===c?"":0===arguments.length?Yf(this,0,c):Oi.apply(this,
arguments)};y.prototype.equals=function(c){if(!$a(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:0===y.compare(this,c)};y.prototype.inspect=function(){var c="";0<this.length&&(c=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(c+=" ... "));return"<Buffer "+c+">"};y.prototype.compare=function(c,a,b,d,f){if(!$a(c))throw new TypeError("Argument must be a Buffer");void 0===a&&(a=0);void 0===b&&(b=c?c.length:0);void 0===d&&(d=0);void 0===f&&(f=this.length);if(0>
a||b>c.length||0>d||f>this.length)throw new RangeError("out of range index");if(d>=f&&a>=b)return 0;if(d>=f)return-1;if(a>=b)return 1;a>>>=0;b>>>=0;d>>>=0;f>>>=0;if(this===c)return 0;var g=f-d,h=b-a,k=Math.min(g,h);d=this.slice(d,f);c=c.slice(a,b);for(a=0;a<k;++a)if(d[a]!==c[a]){g=d[a];h=c[a];break}return g<h?-1:h<g?1:0};y.prototype.includes=function(c,a,b){return-1!==this.indexOf(c,a,b)};y.prototype.indexOf=function(c,a,b){return Zf(this,c,a,b,!0)};y.prototype.lastIndexOf=function(c,a,b){return Zf(this,
c,a,b,!1)};y.prototype.write=function(c,a,b,d){if(void 0===a)d="utf8",b=this.length,a=0;else if(void 0===b&&"string"===typeof a)d=a,b=this.length,a=0;else if(isFinite(a))a|=0,isFinite(b)?(b|=0,void 0===d&&(d="utf8")):(d=b,b=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var f=this.length-a;if(void 0===b||b>f)b=f;if(0<c.length&&(0>b||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(f=!1;;)switch(d){case "hex":a:{a=
Number(a)||0;d=this.length-a;b?(b=Number(b),b>d&&(b=d)):b=d;d=c.length;if(0!==d%2)throw new TypeError("Invalid hex string");b>d/2&&(b=d/2);for(d=0;d<b;++d){f=parseInt(c.substr(2*d,2),16);if(isNaN(f)){c=d;break a}this[a+d]=f}c=d}return c;case "utf8":case "utf-8":return Ec(ud(c,this.length-a),this,a,b);case "ascii":return Ec(eg(c),this,a,b);case "latin1":case "binary":return Ec(eg(c),this,a,b);case "base64":return Ec(Xf(c),this,a,b);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=c;f=this.length-
a;for(var g=[],h=0;h<d.length&&!(0>(f-=2));++h){var k=d.charCodeAt(h);c=k>>8;k%=256;g.push(k);g.push(c)}return Ec(g,this,a,b);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();f=!0}};y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ag=4096;y.prototype.slice=function(c,a){var b=this.length;c=~~c;a=void 0===a?b:~~a;0>c?(c+=b,0>c&&(c=0)):c>b&&(c=b);0>a?(a+=b,0>a&&(a=0)):a>b&&(a=b);a<c&&(a=c);if(y.TYPED_ARRAY_SUPPORT)a=
this.subarray(c,a),a.__proto__=y.prototype;else{b=a-c;a=new y(b,void 0);for(var d=0;d<b;++d)a[d]=this[d+c]}return a};y.prototype.readUIntLE=function(c,a,b){c|=0;a|=0;b||sa(c,a,this.length);b=this[c];for(var d=1,f=0;++f<a&&(d*=256);)b+=this[c+f]*d;return b};y.prototype.readUIntBE=function(c,a,b){c|=0;a|=0;b||sa(c,a,this.length);b=this[c+--a];for(var d=1;0<a&&(d*=256);)b+=this[c+--a]*d;return b};y.prototype.readUInt8=function(c,a){a||sa(c,1,this.length);return this[c]};y.prototype.readUInt16LE=function(c,
a){a||sa(c,2,this.length);return this[c]|this[c+1]<<8};y.prototype.readUInt16BE=function(c,a){a||sa(c,2,this.length);return this[c]<<8|this[c+1]};y.prototype.readUInt32LE=function(c,a){a||sa(c,4,this.length);return(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]};y.prototype.readUInt32BE=function(c,a){a||sa(c,4,this.length);return 16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])};y.prototype.readIntLE=function(c,a,b){c|=0;a|=0;b||sa(c,a,this.length);b=this[c];for(var d=1,f=0;++f<a&&
(d*=256);)b+=this[c+f]*d;b>=128*d&&(b-=Math.pow(2,8*a));return b};y.prototype.readIntBE=function(c,a,b){c|=0;a|=0;b||sa(c,a,this.length);b=a;for(var d=1,f=this[c+--b];0<b&&(d*=256);)f+=this[c+--b]*d;f>=128*d&&(f-=Math.pow(2,8*a));return f};y.prototype.readInt8=function(c,a){a||sa(c,1,this.length);return this[c]&128?-1*(255-this[c]+1):this[c]};y.prototype.readInt16LE=function(c,a){a||sa(c,2,this.length);c=this[c]|this[c+1]<<8;return c&32768?c|4294901760:c};y.prototype.readInt16BE=function(c,a){a||
sa(c,2,this.length);c=this[c+1]|this[c]<<8;return c&32768?c|4294901760:c};y.prototype.readInt32LE=function(c,a){a||sa(c,4,this.length);return this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};y.prototype.readInt32BE=function(c,a){a||sa(c,4,this.length);return this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};y.prototype.readFloatLE=function(c,a){a||sa(c,4,this.length);return td(this,c,!0,23,4)};y.prototype.readFloatBE=function(c,a){a||sa(c,4,this.length);return td(this,c,!1,23,4)};y.prototype.readDoubleLE=
function(c,a){a||sa(c,8,this.length);return td(this,c,!0,52,8)};y.prototype.readDoubleBE=function(c,a){a||sa(c,8,this.length);return td(this,c,!1,52,8)};y.prototype.writeUIntLE=function(c,a,b,d){c=+c;a|=0;b|=0;d||Fa(this,c,a,b,Math.pow(2,8*b)-1,0);d=1;var f=0;for(this[a]=c&255;++f<b&&(d*=256);)this[a+f]=c/d&255;return a+b};y.prototype.writeUIntBE=function(c,a,b,d){c=+c;a|=0;b|=0;d||Fa(this,c,a,b,Math.pow(2,8*b)-1,0);d=b-1;var f=1;for(this[a+d]=c&255;0<=--d&&(f*=256);)this[a+d]=c/f&255;return a+b};
y.prototype.writeUInt8=function(c,a,b){c=+c;a|=0;b||Fa(this,c,a,1,255,0);y.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));this[a]=c&255;return a+1};y.prototype.writeUInt16LE=function(c,a,b){c=+c;a|=0;b||Fa(this,c,a,2,65535,0);y.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8):vd(this,c,a,!0);return a+2};y.prototype.writeUInt16BE=function(c,a,b){c=+c;a|=0;b||Fa(this,c,a,2,65535,0);y.TYPED_ARRAY_SUPPORT?(this[a]=c>>>8,this[a+1]=c&255):vd(this,c,a,!1);return a+2};y.prototype.writeUInt32LE=function(c,a,b){c=
+c;a|=0;b||Fa(this,c,a,4,4294967295,0);y.TYPED_ARRAY_SUPPORT?(this[a+3]=c>>>24,this[a+2]=c>>>16,this[a+1]=c>>>8,this[a]=c&255):wd(this,c,a,!0);return a+4};y.prototype.writeUInt32BE=function(c,a,b){c=+c;a|=0;b||Fa(this,c,a,4,4294967295,0);y.TYPED_ARRAY_SUPPORT?(this[a]=c>>>24,this[a+1]=c>>>16,this[a+2]=c>>>8,this[a+3]=c&255):wd(this,c,a,!1);return a+4};y.prototype.writeIntLE=function(c,a,b,d){c=+c;a|=0;d||(d=Math.pow(2,8*b-1),Fa(this,c,a,b,d-1,-d));d=0;var f=1,g=0;for(this[a]=c&255;++d<b&&(f*=256);)0>
c&&0===g&&0!==this[a+d-1]&&(g=1),this[a+d]=(c/f>>0)-g&255;return a+b};y.prototype.writeIntBE=function(c,a,b,d){c=+c;a|=0;d||(d=Math.pow(2,8*b-1),Fa(this,c,a,b,d-1,-d));d=b-1;var f=1,g=0;for(this[a+d]=c&255;0<=--d&&(f*=256);)0>c&&0===g&&0!==this[a+d+1]&&(g=1),this[a+d]=(c/f>>0)-g&255;return a+b};y.prototype.writeInt8=function(c,a,b){c=+c;a|=0;b||Fa(this,c,a,1,127,-128);y.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));0>c&&(c=255+c+1);this[a]=c&255;return a+1};y.prototype.writeInt16LE=function(c,a,b){c=+c;
a|=0;b||Fa(this,c,a,2,32767,-32768);y.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8):vd(this,c,a,!0);return a+2};y.prototype.writeInt16BE=function(c,a,b){c=+c;a|=0;b||Fa(this,c,a,2,32767,-32768);y.TYPED_ARRAY_SUPPORT?(this[a]=c>>>8,this[a+1]=c&255):vd(this,c,a,!1);return a+2};y.prototype.writeInt32LE=function(c,a,b){c=+c;a|=0;b||Fa(this,c,a,4,2147483647,-2147483648);y.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8,this[a+2]=c>>>16,this[a+3]=c>>>24):wd(this,c,a,!0);return a+4};y.prototype.writeInt32BE=
function(c,a,b){c=+c;a|=0;b||Fa(this,c,a,4,2147483647,-2147483648);0>c&&(c=4294967295+c+1);y.TYPED_ARRAY_SUPPORT?(this[a]=c>>>24,this[a+1]=c>>>16,this[a+2]=c>>>8,this[a+3]=c&255):wd(this,c,a,!1);return a+4};y.prototype.writeFloatLE=function(c,a,b){return cg(this,c,a,!0,b)};y.prototype.writeFloatBE=function(c,a,b){return cg(this,c,a,!1,b)};y.prototype.writeDoubleLE=function(c,a,b){return dg(this,c,a,!0,b)};y.prototype.writeDoubleBE=function(c,a,b){return dg(this,c,a,!1,b)};y.prototype.copy=function(c,
a,b,d){b||(b=0);d||0===d||(d=this.length);a>=c.length&&(a=c.length);a||(a=0);0<d&&d<b&&(d=b);if(d===b||0===c.length||0===this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>b||b>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);c.length-a<d-b&&(d=c.length-a+b);var f=d-b;if(this===c&&b<a&&a<d)for(d=f-1;0<=d;--d)c[d+a]=this[d+b];else if(1E3>f||!y.TYPED_ARRAY_SUPPORT)for(d=
0;d<f;++d)c[d+a]=this[d+b];else Uint8Array.prototype.set.call(c,this.subarray(b,b+f),a);return f};y.prototype.fill=function(c,a,b,d){if("string"===typeof c){"string"===typeof a?(d=a,a=0,b=this.length):"string"===typeof b&&(d=b,b=this.length);if(1===c.length){var f=c.charCodeAt(0);256>f&&(c=f)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!y.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof c&&(c&=255);if(0>
a||this.length<a||this.length<b)throw new RangeError("Out of range index");if(b<=a)return this;a>>>=0;b=void 0===b?this.length:b>>>0;c||(c=0);if("number"===typeof c)for(d=a;d<b;++d)this[d]=c;else for(c=$a(c)?c:ud((new y(c,d)).toString()),f=c.length,d=0;d<b-a;++d)this[d+a]=c[d%f];return this};var Pi=/[^+\/0-9A-Za-z-_]/g,mf={normal:null,road:jg()},kl=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.initData();return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:"rgba(25, 25, 250, 1)",
offset:0,blend:"normal",width:4,unit:"px",flat:!1,antialias:!1,style:"normal",dashArray:[0,0],dashOffset:0,polygonOffset:[0,0]}}},{key:"initData",value:function(){this.dataMgr={position:[],prev:[],next:[],direction:[],color:[],index:[],counter:[],uv:[]}}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions(),c=[];b.enablePicked&&c.push("PICK");mf[b.style]&&(this.isUseTexture=!0,c.push("USE_TEXTURE"));this.program=new X(this.gl,{vertexShader:"precision highp float;uniform vec4 uSelectedColor;uniform mat4 uMatrix;uniform bool uFlat;uniform bool uUnitPx;uniform vec2 uDashArray;uniform float thickness;uniform float zoomUnits;uniform float devicePixelRatio;uniform float uOffset;attribute vec3 position;attribute vec3 next;attribute vec3 previous;attribute float direction;attribute vec4 aColor;attribute float aDistance;attribute float aTotalDistance;\n#if defined(USE_TEXTURE)\nattribute vec2 uv;\n#endif\nvarying vec4 vColor;varying vec2 vNormal;varying vec2 vUV;varying vec2 vDashArray;varying float vTotalDistance;varying float vCounter;vec2 project(vec4 coord){vec3 screen=coord.xyz/coord.w;vec2 clip=(screen.xy+1.0)/2.0;return clip*MAPV_resolution;}vec4 unproject(vec2 projected,float z,float w){vec2 clip=projected/MAPV_resolution;vec2 screen=clip*2.0-1.0;return vec4(screen*w,z,w);}vec3 getNormalAndWidth(vec2 currentScreen,vec2 previousScreen,vec2 nextScreen,float thickness){vec2 dir=vec2(0.0);if(currentScreen==previousScreen){dir=normalize(nextScreen-currentScreen);}else if(currentScreen==nextScreen){dir=normalize(currentScreen-previousScreen);}else{vec2 dirA=normalize((currentScreen-previousScreen));vec2 dirB=normalize((nextScreen-currentScreen));vec2 tangent=normalize(dirA+dirB);vec2 perp=vec2(-dirA.y,dirA.x);vec2 miter=vec2(-tangent.y,tangent.x);dir=tangent;float angle=40.0;if(dot(dirA,dirB)>cos(radians(angle))){thickness=thickness/dot(miter,perp);}}vec2 normal=vec2(-dir.y,dir.x);return vec3(normal,thickness);}void main(){vColor=aColor;vCounter=aDistance/aTotalDistance;vDashArray=uDashArray/aTotalDistance;if(uUnitPx){vDashArray*=zoomUnits;}vTotalDistance=aTotalDistance;\n#if defined(USE_TEXTURE)\nvUV=uv;\n#endif\n#if defined(PICK)\nif(mapvIsPicked()){vColor=uSelectedColor;}\n#endif\nif(uFlat){float width=thickness;if(uUnitPx){width*=zoomUnits;}vec3 nw=getNormalAndWidth(position.xy,previous.xy,next.xy,width);width=nw.z;vec2 normal=nw.xy;vNormal=normal*direction;normal*=width/2.0;float offsetXy=uOffset;float offsetHeight=uOffset/100.0;if(uUnitPx){offsetXy/=zoomUnits;offsetHeight*=zoomUnits;}gl_Position=uMatrix*vec4(position.xy+normal*(direction+offsetXy),position.z+offsetHeight,1.0);}else{vec4 previousProjected=uMatrix*vec4(previous,1.0);vec4 currentProjected=uMatrix*vec4(position,1.0);vec4 nextProjected=uMatrix*vec4(next,1.0);vec2 currentScreen=project(currentProjected);vec2 previousScreen=project(previousProjected);vec2 nextScreen=project(nextProjected);float width=thickness*devicePixelRatio;if(!uUnitPx){width/=zoomUnits;}vec3 nw=getNormalAndWidth(currentScreen,previousScreen,nextScreen,width);width=nw.z;vec2 normal=nw.xy;vNormal=normal*direction;normal*=width/2.0;vec2 pos=currentScreen+normal*direction;vec4 finalPos=unproject(pos,currentProjected.z,currentProjected.w);gl_Position=finalPos;}}",
fragmentShader:"precision highp float;varying vec4 vColor;varying vec2 vNormal;varying vec2 vUV;varying vec2 vDashArray;varying float vCounter;varying float vTotalDistance;uniform bool uAntialias;uniform float uDashOffset;uniform float zoomUnits;uniform float thickness;\n#if defined(USE_TEXTURE)\nuniform float uTextureMargin;uniform sampler2D textureImage;\n#endif\nvoid main(){vec4 color=vColor;if(uAntialias){float blur=1.0;blur=1.0-smoothstep(0.8,1.0,length(vNormal));color.a*=blur;}\n#if defined(USE_TEXTURE)\nfloat segLen=uTextureMargin*zoomUnits;float textureLen=thickness*zoomUnits;float deltaX=mod(vUV.x,segLen);float middle=segLen/2.0;if(deltaX>=middle&&deltaX<=middle+textureLen){float uvx=(deltaX-middle)/textureLen;vec4 texture=texture2D(textureImage,vec2(uvx,vUV.y));color=texture.a>=0.5 ? texture : color;}\n#endif\nif(vDashArray.y>0.0){float offset=uDashOffset*zoomUnits/vTotalDistance;color.a*=(1.0-step(vDashArray.x,mod(vCounter+offset,vDashArray.x+vDashArray.y)));}gl_FragColor=color;}",
defines:c},this);this.prevBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.currentBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.nextBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.directionBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.colorBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.counterBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.uvBuffer=new O({gl:a,target:"ARRAY_BUFFER",
usage:"STATIC_DRAW"});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});c=[{stride:12,name:"previous",buffer:this.prevBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"position",buffer:this.currentBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"next",buffer:this.nextBuffer,size:3,type:"FLOAT",offset:0},{stride:4,name:"direction",buffer:this.directionBuffer,size:1,type:"FLOAT",offset:0},{stride:16,name:"aColor",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0},
{stride:8,name:"aDistance",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:0},{stride:8,name:"aTotalDistance",buffer:this.counterBuffer,size:1,type:"FLOAT",offset:4}];c=c.concat(this.getCommonAttributes());mf[b.style]&&(c.push({stride:8,name:"uv",buffer:this.uvBuffer,size:2,type:"FLOAT",offset:0}),this.setOptions({texture:mf[b.style]}),this.loadTexture());this.vertexArray=new la({gl:a,program:this.program,attributes:c})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&
(this.pickBuffer=null);this.options=this.data=this.dataMgr=this.indexBuffer=this.uvBuffer=this.counterBuffer=this.directionBuffer=this.colorBuffer=this.nextBuffer=this.currentBuffer=this.prevBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(a,c){var b=this;if(this.gl){this.initData();for(var d=a.color,h=[],k=0;k<c.length;k++){var l=[],p=c[k].geometry.coordinates;p&&0<p.length&&(l="MultiPolygon"===c[k].geometry.type?p.reduce(function(a,b){return a.concat(b)})[0].map(function(a){return b.normizedPoint(a)}):
"Polygon"===c[k].geometry.type||"MultiLineString"===c[k].geometry.type?p[0].map(function(a){return b.normizedPoint(a)}):p.map(function(a){return b.normizedPoint(a)}));p=this.getProperty("color",d,c[k]);p=this.getProperty("lineColor",d,c[k]);p=this.normizedColor(p);for(var n=this.addMultipleCoords(l),m=0;m<n.length;m++)this.processData(this.dataMgr,n[m],p);if(a.enablePicked)for(p=this.indexToRgb(k),n=0;n<l.length;n++)h.push(p[0]/255,p[1]/255,p[2]/255),h.push(p[0]/255,p[1]/255,p[2]/255),a.repeat&&(h.push(p[0]/
255,p[1]/255,p[2]/255),h.push(p[0]/255,p[1]/255,p[2]/255),h.push(p[0]/255,p[1]/255,p[2]/255),h.push(p[0]/255,p[1]/255,p[2]/255))}this.counterBuffer.updateData(new Float32Array(this.dataMgr.counter));this.currentBuffer.updateData(new Float32Array(this.dataMgr.position));this.prevBuffer.updateData(new Float32Array(this.dataMgr.prev));this.nextBuffer.updateData(new Float32Array(this.dataMgr.next));this.directionBuffer.updateData(new Float32Array(this.dataMgr.direction));this.colorBuffer.updateData(new Float32Array(this.dataMgr.color));
this.indexBuffer.updateData(new Uint32Array(this.dataMgr.index));this.isUseTexture&&this.uvBuffer.updateData(new Float32Array(this.dataMgr.uv));a.enablePicked&&this.pickBuffer.updateData(new Float32Array(h))}}},{key:"processData",value:function(a,c,f){var b,d,k,l,p,n,m,q,r=c.length,u=a.position.length/6,v=hg(c),t=v.arr,x=v.total;v=Pa(t.map(function(a){return[a,x]}));t=t.map(function(a){return[a,0,a,1]});var w=Pa(c.map(function(a){return-1}),!0),D=Pa(c),z=Pa(c.map(xd(-1))),B=Pa(c.map(xd(1)));c=Pa(c.map(function(a){return f}));
r=gg(r,u);(b=a.uv).push.apply(b,Z(ab(t)));(d=a.counter).push.apply(d,Z(ab(v)));(k=a.position).push.apply(k,Z(ab(D)));(l=a.prev).push.apply(l,Z(ab(z)));(p=a.next).push.apply(p,Z(ab(B)));(n=a.direction).push.apply(n,Z(w));(m=a.color).push.apply(m,Z(ab(c)));(q=a.index).push.apply(q,Z(r))}},{key:"render",value:function(a){var b=a.gl,c=a.matrix,g=this.dataMgr;if(g&&!(0>=g.index.length)&&this.map){var h=this.getOptions(),k=this.program;k.use(b);a=Y(this.getCommonUniforms(a),{uMatrix:c,uFlat:h.flat,uUnitPx:"px"===
h.unit,zoomUnits:this.map.getZoomUnits(),devicePixelRatio:window.devicePixelRatio,thickness:h.width,uDashArray:h.dashArray,uDashOffset:h.dashOffset,uAntialias:h.antialias,uOffset:h.offset});this.isUseTexture&&(a=Y(a,{uTextureMargin:140,textureImage:this.texture}));k.setUniforms(a);this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:"lighter"===h.blend?[b.SRC_ALPHA,b.ONE]:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA],polygonOffset:h.polygonOffset});this.indexBuffer.bind();this.vertexArray.bind();b.drawElements(b.TRIANGLES,
g.index.length,b.UNSIGNED_INT,0)}}},{key:"loadTexture",value:function(a){var b=this,c=this.getOptions();c.texture?Ea(this.gl,c.texture,function(c,d){b.image=d;b.texture=c;a&&a();b.webglLayer.render()}):(this.image=this.texture=null,a&&a())}}]);return a}(ca),ll=function(){function c(a){L(this,c);this.join=a.join||"miter";this.cap=a.cap||"butt";this.thickness=a.thickness||4;this.miterLimit=a.miterLimit||2*this.thickness;this.dash=a.dash||!1;this.complex={positions:[],indices:[],normals:[],colors:[],
uvs:[],startIndex:0,maxDistance:0};this._lastFlip=-1;this._started=!1;this._normal=null;this._totalDistance=0}M(c,[{key:"extrude",value:function(a,b,c,f){var d=this.complex;if(1>=a.length)return d;this._lastFlip=-1;this._started=!1;this._normal=null;this._totalDistance=0;for(var h=a.length,k=d.startIndex,l=null,p=1;p<h;p++){var n=l||a[p-1],m=a[p],q=p<h-1?a[p+1]:null;q&&m[0]===q[0]&&m[1]===q[1]&&m[2]===q[2]?l=n:(n=this._segment(d,k,n,m,q,b,c,f),-1!==n&&(k+=n,l=null))}this.dash&&(d.maxDistance=Math.max(this._totalDistance,
d.maxDistance));d.startIndex=d.positions.length/7;return d}},{key:"_segment",value:function(a,b,c,f,g,h,k,l){var d=0,n=V.create(),m=V.create(),q=V.create(),r=V.create(),u=a.indices,v=a.positions,t=a.normals,x=a.colors;a=a.uvs;var w="square"===this.cap,D="round"===this.cap,z="bevel"===this.join,B="round"===this.join,A=[f[0],f[1]],F=[c[0],c[1]];kg(m,A,F);var G=0;this.dash&&(G=this._calcDistance(A,F),this._totalDistance+=G);this._normal||(this._normal=V.create(),yd(this._normal,m));if(!this._started)if(this._started=
!0,w){F=V.create();var E=V.create();V.add(F,this._normal,m);V.sub(E,this._normal,m);t.push(E[0],E[1],0);t.push(F[0],F[1],0);v.push(c[0],c[1],c[2],this._totalDistance-G,h,k,0);v.push(c[0],c[1],c[2],this._totalDistance-G,-h,k,0);a.push(this._totalDistance-G,0,this._totalDistance-G,1);x.push(l[0],l[1],l[2],l[3]);x.push(l[0],l[1],l[2],l[3])}else if(D){F=V.fromValues(-m[0],-m[1]);E=V.create();V.sub(E,this._normal,m);V.normalize(E,E);var y=V.create();V.add(y,this._normal,m);V.normalize(y,y);var I=V.fromValues(this._normal[0],
this._normal[1]),C=V.fromValues(-this._normal[0],-this._normal[1]);t.push(F[0],F[1],0);t.push(E[0],E[1],0);t.push(-y[0],-y[1],0);t.push(I[0],I[1],0);t.push(C[0],C[1],0);for(F=0;5>F;F++)v.push(c[0],c[1],c[2],this._totalDistance-G,h,k,0),a.push(this._totalDistance-G,0),x.push(l[0],l[1],l[2],l[3]);u.push(b+0,b+2,b+1,b+1,b+2,b+3,b+3,b+2,b+4);d+=3;b+=3}else this._extrusions(v,t,a,x,c,this._normal,h,this._totalDistance-G,k,l);u.push.apply(u,Z(-1===this._lastFlip?[b+0,b+1,b+2]:[b+1,b+0,b+2]));if(g)kg(q,
[g[0],g[1]],A),V.create(),V.add(r,m,q),V.normalize(r,r),G=V.fromValues(-r[1],r[0]),m=V.fromValues(-m[1],m[0]),m=[h/V.dot(G,m),G],m=ka(m,2),G=m[0],m=m[1],r=0<V.dot(r,this._normal)?-1:1,z||"miter"!==this.join||Math.abs(G)>this.miterLimit&&(z=!0),z?(B=Math.min(2*h,Math.abs(G)),t.push(this._normal[0],this._normal[1],0),t.push(m[0],m[1],0),v.push(f[0],f[1],f[2],this._totalDistance,h*r,k,0),v.push(f[0],f[1],f[2],this._totalDistance,-B*r,k,0),u.push.apply(u,Z(this._lastFlip===-r?[b+2,b+1,b+3]:[b+0,b+2,b+
3])),yd(n,q),V.copy(this._normal,n),t.push(this._normal[0],this._normal[1],0),v.push(f[0],f[1],f[2],this._totalDistance,h*r,k,0),u.push.apply(u,Z(1===r?[b+2,b+3,b+4]:[b+3,b+2,b+4])),this._flipedUV(a,this._totalDistance,r,!0),x.push(l[0],l[1],l[2],l[3]),x.push(l[0],l[1],l[2],l[3]),x.push(l[0],l[1],l[2],l[3]),d+=3):B?(B=Math.min(2*h,Math.abs(G)),t.push(this._normal[0],this._normal[1],0),t.push(m[0],m[1],0),t.push(m[0],m[1],0),v.push(f[0],f[1],f[2],this._totalDistance,h*r,k,0),v.push(f[0],f[1],f[2],
this._totalDistance,h*r,k,0),v.push(f[0],f[1],f[2],this._totalDistance,-B*r,k,0),u.push.apply(u,Z(this._lastFlip===-r?[b+2,b+1,b+4,b+2,b+4,b+3]:[b+0,b+2,b+4,b+2,b+3,b+4])),yd(n,q),V.copy(this._normal,n),t.push(this._normal[0],this._normal[1],0),v.push(f[0],f[1],f[2],this._totalDistance,h*r,k,0),u.push.apply(u,Z(1===r?[b+4,b+3,b+5]:[b+3,b+4,b+5])),this._flipedUV(a,this._totalDistance,r,!1),x.push(l[0],l[1],l[2],l[3]),x.push(l[0],l[1],l[2],l[3]),x.push(l[0],l[1],l[2],l[3]),x.push(l[0],l[1],l[2],l[3]),
d+=4):(this._extrusions(v,t,a,x,f,m,G,this._totalDistance,k,l),u.push.apply(u,Z(-1===this._lastFlip?[b+2,b+1,b+3]:[b+2,b+0,b+3])),r=-1,V.copy(this._normal,m),d+=2),this._lastFlip=r;else if(yd(this._normal,m),w?(n=V.create(),q=V.create(),V.add(n,m,this._normal),V.sub(q,m,this._normal),t.push(n[0],n[1],0),t.push(q[0],q[1],0),v.push(f[0],f[1],f[2],this._totalDistance,h,k,0),v.push(f[0],f[1],f[2],this._totalDistance,h,k,0),a.push(this._totalDistance,0,this._totalDistance,1),x.push(l[0],l[1],l[2],l[3]),
x.push(l[0],l[1],l[2],l[3])):this._extrusions(v,t,a,x,f,this._normal,h,this._totalDistance,k,l),u.push.apply(u,Z(-1===this._lastFlip?[b+2,b+1,b+3]:[b+2,b+0,b+3])),d+=2,D){n=V.create();V.add(n,m,this._normal);V.normalize(n,n);q=V.create();V.sub(q,m,this._normal);V.normalize(q,q);B=V.fromValues(m[0],m[1]);t.push(n[0],n[1],0);t.push(q[0],q[1],0);t.push(B[0],B[1],0);for(t=0;3>t;t++)v.push(f[0],f[1],f[2],this._totalDistance-G,h,k,0),a.push(this._totalDistance-G,0),x.push(l[0],l[1],l[2],l[3]);u.push(b+
2,b+3,b+4,b+4,b+3,b+5,b+4,b+5,b+6);d+=3}return d}},{key:"_extrusions",value:function(a,b,c,f,g,h,k,l,p,n){b.push(h[0],h[1],0);b.push(h[0],h[1],0);a.push(g[0],g[1],g[2],l,k,p,0);a.push(g[0],g[1],g[2],l,-k,p,0);c.push(l,0,l,1);f.push(n[0],n[1],n[2],n[3]);f.push(n[0],n[1],n[2],n[3])}},{key:"_calcDistance",value:function(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}},{key:"_flipedUV",value:function(a,b,c,f){f?-1===c?a.push(b,0,b,1,b,0):a.push(b,1,b,0,b,1):-1===c?a.push(b,0,b,0,b,
1,b,0):a.push(b,1,b,1,b,0,b,1)}}]);return c}(),nf={normal:null,road:jg,arrow:function(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=c.width;c=c.color;var b=ig(),d=b.canvas;b=b.ctx;b.save();b.moveTo(5,0);b.lineTo(32,16);b.lineTo(5,32);b.strokeStyle=c||"#fff";b.lineWidth=a||8;b.stroke();b.restore();return d}},Th=function(c){function a(b,c){L(this,a);return R(this,(a.__proto__||P(a)).call(this,b,c))}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{style:"normal",styleOptions:{},
color:"rgba(25, 25, 250, 1)",blend:"normal",lineJoin:"miter",lineCap:"butt",unit:"px",width:4,offset:0,antialias:!1,dashArray:[0,0],dashOffset:0,animation:!1,interval:.1,duration:2,trailLength:.5,minZoom:2,maxZoom:25,polygonOffset:[0,0]}}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions(),c=[];b.enablePicked&&c.push("PICK");nf[b.style]&&(this.isUseTexture=!0,this.prevStyle=b.style,this.prevStyleOptions=b.styleOptions,c.push("USE_TEXTURE"));!0===b.animation&&(this.isAnimateLine=
!0,this.date=new Date,this.autoUpdate=!0,c.push("USE_LINE_ANIMATION"));!0===b.useDash&&c.push("USE_SIMPLE_DASH");this.program=new X(this.gl,{vertexShader:"precision highp float;uniform vec4 uSelectedColor;uniform mat4 u_matrix;uniform vec2 u_dash_array;uniform float u_zoom_units;uniform bool u_unit_px;attribute vec4 a_color;attribute vec3 a_position;attribute vec3 a_normal;attribute float a_distance;attribute float a_total_distance;attribute float a_width;attribute float a_offset;\n#if defined(USE_TEXTURE)\nattribute vec2 uv;\n#endif\nvarying vec4 v_color;varying vec2 v_normal;varying vec2 v_uv;varying vec2 v_dash_array;varying float v_total_distance;varying float v_counter;varying float v_width;\n#if defined(USE_SIMPLE_DASH)\nvarying vec3 v_position;\n#endif\nvoid main(){v_width=a_width;v_color=a_color;v_counter=a_distance/a_total_distance;v_dash_array=u_dash_array/a_total_distance;if(u_unit_px){v_dash_array*=u_zoom_units;}v_total_distance=a_total_distance;v_normal=vec2(normalize(a_normal.xy)*sign(a_width));\n#if defined(USE_TEXTURE)\nv_uv=uv;\n#endif\n#if defined(PICK)\nif(mapvIsPicked()){v_color=uSelectedColor;}\n#endif\nvec2 extrude=a_normal.xy*a_width/2.0;if(u_unit_px){extrude*=u_zoom_units;}vec2 offsetXY=a_normal.xy*-a_offset;float offsetZ=a_offset/100.0;if(u_unit_px){offsetXY*=u_zoom_units;offsetZ*=u_zoom_units;}\n#if defined(USE_SIMPLE_DASH)\nv_position=a_position;\n#endif\ngl_Position=u_matrix*vec4(a_position.xy+extrude+offsetXY,a_position.z+offsetZ,1.0);}",
fragmentShader:"precision highp float;varying vec4 v_color;varying vec2 v_normal;varying vec2 v_uv;varying vec2 v_dash_array;varying float v_counter;varying float v_total_distance;varying float v_width;\n#if defined(USE_SIMPLE_DASH)\nvarying vec3 v_position;\n#endif\nuniform bool u_antialias;uniform float u_dash_offset;uniform float u_zoom_units;\n#if defined(USE_LINE_ANIMATION)\nuniform bool u_animate;uniform float u_time;uniform float u_duration;uniform float u_interval;uniform float u_trail_length;\n#endif\n#if defined(USE_TEXTURE)\nuniform float u_texture_width;uniform float u_texture_margin;uniform sampler2D u_sampler;\n#endif\nvoid main(){vec4 color=v_color;\n#if defined(USE_SIMPLE_DASH)\nif(mod(v_position.x,5.0)<3.0){discard;}\n#endif\nif(u_antialias){float blur=1.0;blur=1.0-smoothstep(0.9,1.0,length(v_normal));color.a*=blur;}\n#if defined(USE_LINE_ANIMATION)\nif(u_animate){float alpha=1.0-fract(mod(1.0-v_counter,u_interval)*(1.0/u_interval)+u_time/u_duration);alpha=(alpha+u_trail_length-1.0)/u_trail_length;color.a*=alpha;gl_FragColor=color;return;}\n#endif\n#if defined(USE_TEXTURE)\nfloat margin_width=u_texture_margin*u_zoom_units;float margin_width_half=margin_width/2.0;float texture_width=u_texture_width*u_zoom_units;float delta=mod(v_uv.x,texture_width+margin_width);if(delta>=margin_width_half&&delta<=margin_width_half+texture_width){float uvx=(delta-margin_width_half)/texture_width;vec4 texture=texture2D(u_sampler,vec2(uvx,v_uv.y));color=texture.a>=0.5 ? texture : color;}\n#endif\nif(v_dash_array.y>0.0){float offset=u_dash_offset*u_zoom_units/v_total_distance;color.a*=(1.0-step(v_dash_array.x,mod(v_counter+offset,v_dash_array.x+v_dash_array.y)));}gl_FragColor=color;}",
defines:c},this);this.positionBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.colorBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.normalBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});c=[{stride:28,name:"a_position",buffer:this.positionBuffer,size:3,type:"FLOAT",offset:0},{stride:28,name:"a_distance",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:12},{stride:28,
name:"a_width",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:16},{stride:28,name:"a_offset",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:20},{stride:28,name:"a_total_distance",buffer:this.positionBuffer,size:1,type:"FLOAT",offset:24},{stride:12,name:"a_normal",buffer:this.normalBuffer,size:3,type:"FLOAT",offset:0},{stride:16,name:"a_color",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0}];c=c.concat(this.getCommonAttributes());this.isUseTexture&&(this.uvBuffer=new O({gl:a,target:"ARRAY_BUFFER",
usage:"STATIC_DRAW"}),c.push({stride:8,name:"uv",buffer:this.uvBuffer,size:2,type:"FLOAT",offset:0}),b=(0,nf[b.style])(b.styleOptions),this.setOptions({texture:b}),this.loadTexture());this.vertexArray=new la({gl:a,program:this.program,attributes:c})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null);this.isUseTexture&&(this.uvBuffer=null);this.options=this.data=this.indexBuffer=this.normalBuffer=this.colorBuffer=this.positionBuffer=this.program=this.vertexArray=
null}},{key:"onChanged",value:function(a,c){var b=this,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(this.gl)if(!this.isUseTexture||this.prevStyle===a.style&&vc(this.prevStyleOptions)===vc(a.styleOptions))this.parseData(a,c,d);else{this.prevStyle=a.style;this.prevStyleOptions=a.styleOptions;var h=(0,nf[a.style])(a.styleOptions);this.setOptions({texture:h});this.loadTextureTime&&clearTimeout(this.loadTextureTime);this.loadTextureTime=setTimeout(function(){b.loadTexture(function(){b.parseData(a,
c,d)})},0)}}},{key:"parseData",value:function(a,c,f){var b=this,d=a.dashArray,k=a.width,l=a.color,p=a.offset;d=!!this.isUseTexture||!!d[1]||!!this.isAnimateLine;for(var n=new ll({dash:d,cap:a.lineCap,join:a.lineJoin,miterLimit:a.miterLimit,thickness:k}),m=[],q=function(d){var g=c[d].geometry.coordinates;g&&0<g.length&&("MultiPolygon"===c[d].geometry.type?g=g.reduce(function(a,b){return a.concat(b)}):"LineString"===c[d].geometry.type&&(g=[g]),g=g.map(function(a){a=a.map(function(a){return b.normizedPoint(a)});
!0===f.closePath&&a[0].toString()!==a[a.length-1].toString()&&a.push(a[0]);return a}));var h=b.getProperty("color",l,c[d]);h=b.normizedColor(h);var q=b.getProperty("width",k,c[d]);q=Number(q);var w=b.getProperty("offset",p,c[d]);w=Number(w);var r=n.complex.startIndex;g=b.addMultipleCoords(g);for(var u=0;u<g.length;u++)g[u].forEach(function(a){n.extrude(a,q,w,h)});if(a.enablePicked)for(d=b.indexToRgb(d),g=n.complex.startIndex;r<g;r++)m.push(d[0]/255,d[1]/255,d[2]/255),a.repeat&&(m.push(d[0]/255,d[1]/
255,d[2]/255),m.push(d[0]/255,d[1]/255,d[2]/255))},r=0;r<c.length;r++)q(r);q=n.complex;if(d)for(r=0;r<q.positions.length/7;r++)q.positions[7*r+6]=q.maxDistance;this.lineData=q;this.positionBuffer.updateData(new Float32Array(q.positions));this.normalBuffer.updateData(new Float32Array(q.normals));this.colorBuffer.updateData(new Float32Array(q.colors));this.indexBuffer.updateData(new Uint32Array(q.indices));this.isUseTexture&&this.uvBuffer.updateData(new Float32Array(q.uvs));a.enablePicked&&this.pickBuffer.updateData(new Float32Array(m))}},
{key:"render",value:function(a){var b=a.gl,c=a.matrix,g=this.lineData;if(g&&!(0>=g.indices.length)&&this.map){var h=this.getOptions(),k=this.program;k.use(b);a=Y(this.getCommonUniforms(a),{u_matrix:c,u_zoom_units:this.map.getZoomUnits(),u_dash_array:h.dashArray,u_dash_offset:h.dashOffset,u_antialias:h.antialias,u_unit_px:"px"===h.unit});this.isUseTexture&&(a=Y(a,{u_texture_width:h.width,u_texture_margin:140,u_sampler:this.texture}));this.isAnimateLine&&(c=this.map.getZoom(),a=Y(a,{u_time:(new Date-
this.date)/1E3,u_animate:c>=h.minZoom&&c<=h.maxZoom&&this.autoUpdate?!0:!1,u_duration:h.duration,u_interval:h.interval,u_trail_length:h.trailLength}));k.setUniforms(a);this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:"lighter"===h.blend?[b.SRC_ALPHA,b.ONE]:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA],polygonOffset:h.polygonOffset});this.indexBuffer.bind();this.vertexArray.bind();b.drawElements(b.TRIANGLES,g.indices.length,b.UNSIGNED_INT,0)}}},{key:"loadTexture",value:function(a){var b=this,c=this.getOptions();
c.texture?Ea(this.gl,c.texture,function(c,d){b.image=d;b.texture=c;a&&a();b.webglLayer.render()}):(this.image=this.texture=null,a&&a())}}]);return a}(ca),ml=function(){function c(a,b){L(this,c);this.layer=a;this.gl=b;this.initData()}M(c,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]};this.maxLength=0}},{key:"getData",value:function(){return this.outWall3d}},{key:"getMaxDataLength",value:function(){return this.maxLength}},{key:"onLayerChange",value:function(a,
b){this.initData();var c=a.color,f=a.height,g=a.gradient;a=this.gl;for(var h=0;h<b.length;h++){var k=b[h].geometry.coordinates,l=k.length;this.maxLength=l>this.maxLength?l:this.maxLength;for(var p=[],n=0;n<l;n++){var m=this.layer.normizedPoint(k[n]);p.push(m)}l=b[h].color||c;"properties"in b[h]&&"color"in b[h].properties&&(l=b[h].properties.color);g||"[object Function]"!==Object.prototype.toString.call(l)||(l=l(b[h]));k=this.layer.normizedColor(g?g[0]:l);l=this.layer.normizedColor(g?g[1]:l);n=b[h].height||
f;"properties"in b[h]&&"height"in b[h].properties&&(n=b[h].properties.height);"[object Function]"===Object.prototype.toString.call(n)&&(n=n(b[h]));this.processData(this.outWall3d,p,k,l,n)}for(b=0;b<this.outWall3d.vertex.length;b++){c=[];f=this.outWall3d.vertex[b].length;for(g=0;g<f;g++)c.push.apply(c,Z(this.outWall3d.vertex[b][g]));f=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,f);a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW);this.outWall3d.vertexBuffer[b]=f;a.bindBuffer(a.ARRAY_BUFFER,
null);f=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[b]),a.STATIC_DRAW);this.outWall3d.indexBuffer[b]=f;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(a,b,c,f,g){var d=a.vertex[a.vertex.length-1],k=a.index[a.index.length-1],l=b.length;if(!k||65536<=k.length+2*l+2)d=[],k=[],a.vertex.push(d),a.index.push(k);(a=d.length)&&k.push(a-1,a);for(var p=a=0;p<l;p++){var n=[],m=[],q=b[p];n.push(q[0],
q[1]);n.push(q[2]?Number(q[2])+g:g);n.push(q[3]?Number(q[3]):p);n.push(a);n.push(c[0],c[1],c[2],c[3]);m.push(q[0],q[1]);m.push(q[2]?Number(q[2]):0);m.push(q[3]?Number(q[3]):p);m.push(a);m.push(f[0],f[1],f[2],f[3]);q=d.length;d.push(n,m);k.push(q,q+1);p<l-1&&(a+=this.getDistance(b[p],b[p+1]))}}},{key:"getDistance",value:function(a,b){return Math.sqrt(Math.pow(Math.abs(a[0]-b[0]),2)+Math.pow(Math.abs(a[1]-b[1]),2))}}]);return c}(),nl=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,
b,c));b.startTime=b.options.startTime||0;b.endTime=b.options.endTime;b.time=b.startTime;b.autoUpdate=!0;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{height:100,color:[1,1,1,1],trailLength:3,step:.1}}},{key:"initialize",value:function(a){this.gl=a;this.dataMgr=new ml(this,this.gl);this.program=new X(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;attribute vec4 aPos;attribute float aDistance;attribute vec4 aColor;varying vec4 vColor;varying float vHeight;varying float vTime;varying float vDistance;void main(){vTime=1.0-((currentTime-aPos.w)/trailLength);vHeight=aPos.z;vColor=aColor;vDistance=aDistance;gl_Position=u_matrix*vec4(aPos.xyz,1.0);}",
fragmentShader:"precision highp float;varying vec4 vColor;varying float vTime;varying float vDistance;varying float vHeight;uniform float currentTime;void main(){if(vTime>1.0||vTime<0.0){}float radius=2.5;float distance=vDistance+currentTime*20.0;float modDistance=mod(distance,9.0);float alpha=1.0;if(modDistance>radius*2.0){discard;}else{float x=abs(modDistance-radius);float y=abs(vHeight-radius);float dis=sqrt(pow(x,2.0)+pow(y,2.0));if(dis>radius){discard;}alpha=dis/radius;}gl_FragColor=vec4(vColor.rgb,1.0-alpha);}"})}},
{key:"onChanged",value:function(a,c){this.gl&&(this.dataMgr.onLayerChange(a,c),void 0===a.endTime&&(this.endTime=this.dataMgr.getMaxDataLength()))}},{key:"render",value:function(a){var b=a.gl,c=a.matrix;if((a=this.dataMgr.getData())&&!(0>=a.vertex.length)){var g=this.getOptions(),h=this.program;b.useProgram(h.program);this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA]});b.enableVertexAttribArray(h.attributes.aPos);b.enableVertexAttribArray(h.attributes.aDistance);
b.enableVertexAttribArray(h.attributes.aColor);b.uniformMatrix4fv(h.uniforms.u_matrix,!1,c);b.uniform1f(h.uniforms.currentTime,this.time);b.uniform1f(h.uniforms.trailLength,g.trailLength);for(c=0;c<a.vertex.length;c++)if(!(0>=a.vertex[c].length)){var k=a.vertex[c],l=(new Float32Array(k[0])).BYTES_PER_ELEMENT;k=l*k[0].length;b.bindBuffer(b.ARRAY_BUFFER,a.vertexBuffer[c]);b.vertexAttribPointer(h.attributes.aPos,4,b.FLOAT,!1,k,0);b.vertexAttribPointer(h.attributes.aDistance,1,b.FLOAT,!1,k,4*l);b.vertexAttribPointer(h.attributes.aColor,
4,b.FLOAT,!1,k,5*l);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.indexBuffer[c]);b.drawElements(b.TRIANGLE_STRIP,a.index[c].length,b.UNSIGNED_SHORT,0);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null)}this.time+=g.step;this.time>this.endTime&&(this.time=this.startTime)}}}]);return a}(ca),Wd=function(c,a,b,d){if(!(c instanceof a)||void 0!==d&&d in c)throw TypeError(b+": incorrect invocation!");return c},Zb=Q(function(c){var a={},b={};c=c.exports=function(c,f,g,h,k){k=k?function(){return c}:
Re(c);g=ta(g,h,f?2:1);h=0;var d,p;if("function"!=typeof k)throw TypeError(c+" is not iterable!");if(void 0===k||cb.Array!==k&&Tg[Sg]!==k)for(h=k.call(c);!(p=h.next()).done;){if(k=Rg(h,g,p.value,f),k===a||k===b)return k}else for(d=Bd(c.length);d>h;h++)if(k=f?g(Da(p=c[h])[0],p[1]):g(c[h]),k===a||k===b)return k};c.BREAK=a;c.RETURN=b}),ol=ra("species"),Uh=function(c,a){c=Da(c).constructor;var b;return void 0===c||void 0==(b=Da(c)[ol])?a:Pb(b)},pl=function(c,a,b){var d=void 0===b;switch(a.length){case 0:return d?
c():c.call(b);case 1:return d?c(a[0]):c.call(b,a[0]);case 2:return d?c(a[0],a[1]):c.call(b,a[0],a[1]);case 3:return d?c(a[0],a[1],a[2]):c.call(b,a[0],a[1],a[2]);case 4:return d?c(a[0],a[1],a[2],a[3]):c.call(b,a[0],a[1],a[2],a[3])}return c.apply(b,a)},Vh=W.process,of=W.setImmediate,Wh=W.clearImmediate,Xh=W.MessageChannel,pf=W.Dispatch,qf=0,$c={},ad=function(){var c=+this;if($c.hasOwnProperty(c)){var a=$c[c];delete $c[c];a()}},Yh=function(c){ad.call(c.data)};if(!of||!Wh)if(of=function(c){for(var a=
[],b=1;arguments.length>b;)a.push(arguments[b++]);$c[++qf]=function(){pl("function"==typeof c?c:Function(c),a)};bd(qf);return qf},Wh=function(c){delete $c[c]},"process"==Qb(Vh))var bd=function(c){Vh.nextTick(ta(ad,c,1))};else if(pf&&pf.now)bd=function(c){pf.now(ta(ad,c,1))};else if(Xh){var Zh=new Xh;var $h=Zh.port2;Zh.port1.onmessage=Yh;bd=ta($h.postMessage,$h,1)}else W.addEventListener&&"function"==typeof postMessage&&!W.importScripts?(bd=function(c){W.postMessage(c+"","*")},W.addEventListener("message",
Yh,!1)):bd="onreadystatechange"in(Ed?ic.createElement("script"):{})?function(c){De.appendChild(Ed?ic.createElement("script"):{}).onreadystatechange=function(){De.removeChild(this);ad.call(c)}}:function(c){setTimeout(ta(ad,c,1),0)};var rf=of,ai=W.MutationObserver||W.WebKitMutationObserver,sf=W.process,tf=W.Promise,bi="process"==Qb(sf),Xd={f:function(c){return new Ri(c)}},Yd=function(c){try{return{e:!1,v:c()}}catch(a){return{e:!0,v:a}}},ci=W.navigator,ql=ci&&ci.userAgent||"",uf=function(c,a){Da(c);
if(Aa(a)&&a.constructor===c)return a;c=Xd.f(c);var b=c.resolve;b(a);return c.promise},vf=function(c,a,b){for(var d in a)b&&c[d]?c[d]=a[d]:kb(c,d,a[d]);return c},di=ra("species"),ei=function(c){c="function"==typeof ba[c]?ba[c]:W[c];Qa&&c&&!c[di]&&Ma.f(c,di,{configurable:!0,get:function(){return this}})},fi=function(){var c,a,b=function(){var b;for(bi&&(b=sf.domain)&&b.exit();c;){var f=c.fn;c=c.next;try{f()}catch(p){throw c?d():a=void 0,p;}}a=void 0;b&&b.enter()};if(bi)var d=function(){sf.nextTick(b)};
else if(!ai||W.navigator&&W.navigator.standalone)if(tf&&tf.resolve){var f=tf.resolve(void 0);d=function(){f.then(b)}}else d=function(){rf.call(W,b)};else{var g=!0,h=document.createTextNode("");(new ai(b)).observe(h,{characterData:!0});d=function(){h.data=g=!g}}return function(b){b={fn:b,next:void 0};a&&(a.next=b);c||(c=b,d());a=b}}(),gi=W.TypeError,pc=W.process,hi=pc&&pc.versions,rl=hi&&hi.v8||"",fb=W.Promise,cd="process"==Pd(pc),Zd=function(){},ii,dd=ii=Xd.f,$d=!!function(){try{var c=fb.resolve(1),
a=(c.constructor={})[ra("species")]=function(a){a(Zd,Zd)};return(cd||"function"==typeof PromiseRejectionEvent)&&c.then(Zd)instanceof a&&0!==rl.indexOf("6.6")&&-1===ql.indexOf("Chrome/66")}catch(b){}}(),ji=function(c){var a;return Aa(c)&&"function"==typeof(a=c.then)?a:!1},wf=function(c,a){if(!c._n){c._n=!0;var b=c._c;fi(function(){for(var d=c._v,f=1==c._s,g=0;b.length>g;){var h=void 0,k=void 0,l=void 0,p=b[g++],n=f?p.ok:p.fail,m=p.resolve,q=p.reject,r=p.domain;try{n?(f||(2==c._h&&sl(c),c._h=1),!0===
n?l=d:(r&&r.enter(),l=n(d),r&&(r.exit(),h=!0)),l===p.promise?q(gi("Promise-chain cycle")):(k=ji(l))?k.call(l,m,q):m(l)):q(d)}catch(u){r&&!h&&r.exit(),q(u)}}c._c=[];c._n=!1;a&&!c._h&&tl(c)})}},tl=function(c){rf.call(W,function(){var a=c._v,b=1!==c._h&&0===(c._a||c._c).length,d,f;if(b){var g=Yd(function(){cd?pc.emit("unhandledRejection",a,c):(d=W.onunhandledrejection)?d({promise:c,reason:a}):(f=W.console)&&f.error&&f.error("Unhandled promise rejection",a)});c._h=cd||1!==c._h&&0===(c._a||c._c).length?
2:1}c._a=void 0;if(b&&g.e)throw g.v;})},sl=function(c){rf.call(W,function(){var a;cd?pc.emit("rejectionHandled",c):(a=W.onrejectionhandled)&&a({promise:c,reason:c._v})})},qc=function(c){var a=this;a._d||(a._d=!0,a=a._w||a,a._v=c,a._s=2,a._a||(a._a=a._c.slice()),wf(a,!0))},xf=function(c){var a=this,b;if(!a._d){a._d=!0;a=a._w||a;try{if(a===c)throw gi("Promise can't be resolved itself");(b=ji(c))?fi(function(){var d={_w:a,_d:!1};try{b.call(c,ta(xf,d,1),ta(qc,d,1))}catch(f){qc.call(d,f)}}):(a._v=c,a._s=
1,wf(a,!1))}catch(d){qc.call({_w:a,_d:!1},d)}}};if(!$d){fb=function(c){Wd(this,fb,"Promise","_h");Pb(c);yf.call(this);try{c(ta(xf,this,1),ta(qc,this,1))}catch(a){qc.call(this,a)}};var yf=function(c){this._c=[];this._a=void 0;this._s=0;this._d=!1;this._v=void 0;this._h=0;this._n=!1};yf.prototype=vf(fb.prototype,{then:function(c,a){var b=dd(Uh(this,fb));b.ok="function"==typeof c?c:!0;b.fail="function"==typeof a&&a;b.domain=cd?pc.domain:void 0;this._c.push(b);this._a&&this._a.push(b);this._s&&wf(this,
!1);return b.promise},"catch":function(c){return this.then(void 0,c)}});var ul=function(){var c=new yf;this.promise=c;this.resolve=ta(xf,c,1);this.reject=ta(qc,c,1)};Xd.f=dd=function(c){return c===fb||c===ki?new ul(c):ii(c)}}N(N.G+N.W+N.F*!$d,{Promise:fb});Rb(fb,"Promise");ei("Promise");var ki=ba.Promise;N(N.S+N.F*!$d,"Promise",{reject:function(c){var a=dd(this),b=a.reject;b(c);return a.promise}});N(N.S+1*N.F,"Promise",{resolve:function(c){return uf(this===ki?fb:this,c)}});N(N.S+N.F*!($d&&Vg(function(c){fb.all(c)["catch"](Zd)})),
"Promise",{all:function(c){var a=this,b=dd(a),d=b.resolve,f=b.reject,g=Yd(function(){var b=[],g=0,l=1;Zb(c,!1,function(c){var h=g++,k=!1;b.push(void 0);l++;a.resolve(c).then(function(a){k||(k=!0,b[h]=a,--l||d(b))},f)});--l||d(b)});g.e&&f(g.v);return b.promise},race:function(c){var a=this,b=dd(a),d=b.reject,f=Yd(function(){Zb(c,!1,function(c){a.resolve(c).then(b.resolve,d)})});f.e&&d(f.v);return b.promise}});N(N.P+N.R,"Promise",{"finally":function(c){var a=Uh(this,ba.Promise||W.Promise),b="function"==
typeof c;return this.then(b?function(b){return uf(a,c()).then(function(){return b})}:c,b?function(b){return uf(a,c()).then(function(){throw b;})}:c)}});N(N.S,"Promise",{"try":function(c){var a=Xd.f(this);c=Yd(c);(c.e?a.reject:a.resolve)(c.v);return a.promise}});var vl=ba.Promise,wl=Q(function(c){c.exports={"default":vl,__esModule:!0}}),Ib=U(wl),Jb=function(c,a){if(!Aa(c)||c._t!==a)throw TypeError("Incompatible receiver, "+a+" required!");return c},xl=Ma.f,li=Kd.fastKey,ed=Qa?"_s":"size",ae=function(c,
a){var b=li(a);if("F"!==b)return c._i[b];for(c=c._f;c;c=c.n)if(c.k==a)return c},zf={getConstructor:function(c,a,b,d){var f=c(function(c,h){Wd(c,f,a,"_i");c._t=a;c._i=zb(null);c._f=void 0;c._l=void 0;c[ed]=0;void 0!=h&&Zb(h,b,c[d],c)});vf(f.prototype,{clear:function(){for(var b=Jb(this,a),c=b._i,d=b._f;d;d=d.n)d.r=!0,d.p&&(d.p=d.p.n=void 0),delete c[d.i];b._f=b._l=void 0;b[ed]=0},"delete":function(b){var c=Jb(this,a);if(b=ae(c,b)){var d=b.n,f=b.p;delete c._i[b.i];b.r=!0;f&&(f.n=d);d&&(d.p=f);c._f==
b&&(c._f=d);c._l==b&&(c._l=f);c[ed]--}return!!b},forEach:function(b){Jb(this,a);for(var c=ta(b,1<arguments.length?arguments[1]:void 0,3),d;d=d?d.n:this._f;)for(c(d.v,d.k,this);d&&d.r;)d=d.p},has:function(b){return!!ae(Jb(this,a),b)}});Qa&&xl(f.prototype,"size",{get:function(){return Jb(this,a)[ed]}});return f},def:function(c,a,b){var d=ae(c,a),f;d?d.v=b:(c._l=d={i:f=li(a,!0),k:a,v:b,p:a=c._l,n:void 0,r:!1},c._f||(c._f=d),a&&(a.n=d),c[ed]++,"F"!==f&&(c._i[f]=d));return c},getEntry:ae,setStrong:function(c,
a,b){He(c,a,function(b,c){this._t=Jb(b,a);this._k=c;this._l=void 0},function(){for(var a=this._k,b=this._l;b&&b.r;)b=b.p;return this._t&&(this._l=b=b?b.n:this._t._f)?"keys"==a?Ab(0,b.k):"values"==a?Ab(0,b.v):Ab(0,[b.k,b.v]):(this._t=void 0,Ab(1))},b?"entries":"values",!b,!0);ei(a)}},yl=ra("species"),zl=function(c,a){if(Me(c)){var b=c.constructor;"function"!=typeof b||b!==Array&&!Me(b.prototype)||(b=void 0);Aa(b)&&(b=b[yl],null===b&&(b=void 0))}return new (void 0===b?Array:b)(a)},Al=Ma.f,Bl=function(c,
a){var b=1==c,d=2==c,f=3==c,g=4==c,h=6==c,k=5==c||h,l=a||zl;return function(a,n,m){var p=Object(wb(a)),r=ze(p);n=ta(n,m,3);m=Bd(r.length);var u=0;a=b?l(a,m):d?l(a,0):void 0;for(var v,t;m>u;u++)if(k||u in r)if(v=r[u],t=n(v,u,p),c)if(b)a[u]=t;else if(t)switch(c){case 3:return!0;case 5:return v;case 6:return u;case 2:a.push(v)}else if(g)return!1;return h?-1:f||g?g:a}}(0);(function(c,a,b,d,f,g){var h=W[c],k=h,l=f?"set":"add",p=k&&k.prototype,n={};Qa&&"function"==typeof k&&(g||p.forEach&&!xb(function(){(new k).entries().next()}))?
(k=a(function(a,b){Wd(a,k,c,"_c");a._c=new h;void 0!=b&&Zb(b,f,a[l],a)}),Bl("add clear delete forEach get has set keys values entries toJSON".split(" "),function(a){var b="add"==a||"set"==a;a in p&&(!g||"clear"!=a)&&kb(k.prototype,a,function(c,d){Wd(this,k,a);if(!b&&g&&!Aa(c))return"get"==a?void 0:!1;c=this._c[a](0===c?0:c,d);return b?this:c})}),g||Al(k.prototype,"size",{get:function(){return this._c.size}})):(k=d.getConstructor(a,c,f,l),vf(k.prototype,b),Kd.NEED=!0);Rb(k,c);n[c]=k;N(N.G+N.W+N.F,
n);g||d.setStrong(k,c,f);return k})("Map",function(c){return function(){return c(this,0<arguments.length?arguments[0]:void 0)}},{get:function(c){return(c=zf.getEntry(Jb(this,"Map"),c))&&c.v},set:function(c,a){return zf.def(Jb(this,"Map"),0===c?0:c,a)}},zf,!0);N(N.P+N.R,"Map",{toJSON:function(c){return function(){if(Pd(this)!=c)throw TypeError(c+"#toJSON isn't generic");var a=[];Zb(this,!1,a.push,a,void 0);return a}}("Map")});(function(c){N(N.S,c,{of:function(){for(var a=arguments.length,b=Array(a);a--;)b[a]=
arguments[a];return new this(b)}})})("Map");(function(c){N(N.S,c,{from:function(a,b,c){var d;Pb(this);(d=void 0!==b)&&Pb(b);if(void 0==a)return new this;var g=[];if(d){var h=0;var k=ta(b,c,2);Zb(a,!1,function(a){g.push(k(a,h++))})}else Zb(a,!1,g.push,g);return new this(g)}})})("Map");var Cl=ba.Map,Dl=Q(function(c){c.exports={"default":Cl,__esModule:!0}}),Kb=U(Dl),El=Q(function(c,a){a.__esModule=!0;var b=lb&&lb.__esModule?lb:{default:lb};a.default=function(a,c,g){c in a?(0,b.default)(a,c,{value:g,
enumerable:!0,configurable:!0,writable:!0}):a[c]=g;return a}}),rc=U(El),fd,gd,Fl=(fd={},rc(fd,1,1),rc(fd,2,1),rc(fd,3,1),fd),Gl=(gd={},rc(gd,1,1),rc(gd,2,1),rc(gd,3,1),gd),$b=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.vertCount=0;b.bufferMap={};b.bufferData=[];b.autoUpdate=!0;c=b.canvas=document.createElement("canvas");b.ctx=c.getContext("2d");b.iconHash=new Kb;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:[1,1,1,.8],speed:1,
size:5,pointFade:!0,pointFadeBuffer:1,minLineLength:2,animationType:2,shapeType:2,depthTest:!1,delay:0,unit:"px",padding:0}}},{key:"initialize",value:function(a){this.gl=a;this.texture=null;this.isUseTexture=!1;var b=this.getOptions();this.updateUniformsFromOptions(b);this.program=new X(this.gl,{vertexShader:"precision highp float;attribute vec3 aPos;attribute vec3 aNextPos;attribute float aIndex;attribute float aNextIndex;attribute float aLength;attribute float aSpeed;attribute float aDelay;attribute vec3 aUV;uniform float uSize;uniform mat4 u_matrix;uniform float uOriginSpeed;uniform float uElapsedSteps;uniform int uAnimationType;uniform int uPointFade;uniform float uPointFadeBuffer;uniform float uZoomUnits;varying float vAddOpacity;varying vec3 vUV;void main(){if(uAnimationType==1){if(abs(aIndex-mod(uElapsedSteps,aLength))>.1){gl_Position=vec4(-2.,-2.,0,1.0);return;}gl_Position=u_matrix*vec4(aPos.xyz,1.0);vAddOpacity=1.;}else if(uAnimationType==2){float lineLength=aLength-1.;float cIndex=mod(uElapsedSteps,lineLength);float rest=cIndex-aIndex;if(rest<1.&&rest>=0.){if(uPointFade==1){if(cIndex<uPointFadeBuffer){vAddOpacity=cIndex/uPointFadeBuffer;}else if(cIndex>lineLength-uPointFadeBuffer){vAddOpacity=(lineLength-cIndex)/uPointFadeBuffer;}else{vAddOpacity=1.;}}else{vAddOpacity=1.;}gl_Position=u_matrix*vec4(aPos.x+(aNextPos.x-aPos.x)*rest,aPos.y+(aNextPos.y-aPos.y)*rest,aPos.z+(aNextPos.z-aPos.z)*rest,1.0);}else{gl_Position=vec4(-2.,-2.,0,1.0);return;}}else if(uAnimationType==3){float speedRatio=aSpeed/uOriginSpeed;float percent=mod(mod(uElapsedSteps*aSpeed,aLength)/aLength-aDelay,1.0);if(percent<=aNextIndex&&percent>=aIndex){if(uPointFade==1){float fadePercent=uPointFadeBuffer*1000./aLength;if(percent<fadePercent){vAddOpacity=percent/fadePercent;}else if(percent>1.-fadePercent){vAddOpacity=(1.-percent)/fadePercent;}else{vAddOpacity=1.;}}else{vAddOpacity=1.;}float rest=(percent-aIndex)/(aNextIndex-aIndex);gl_Position=u_matrix*vec4(aPos.x+(aNextPos.x-aPos.x)*rest,aPos.y+(aNextPos.y-aPos.y)*rest,aPos.z+(aNextPos.z-aPos.z)*rest,1.0);}else{gl_Position=vec4(-2.,-2.,0,1.0);return;}}vUV=aUV;gl_PointSize=uSize/uZoomUnits;}",
fragmentShader:"precision highp float;uniform vec4 uColor;uniform int ushapeType;uniform bool uUseTexture;uniform sampler2D uSampler;varying float vAddOpacity;varying vec3 vUV;void main(){if(ushapeType==2){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}gl_FragColor=vec4(uColor.rgb,uColor.a*vAddOpacity);}else if(ushapeType==3){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}gl_FragColor=vec4(uColor.rgb,uColor.a*smoothstep(1.0,0.0,d*2.)*vAddOpacity);}else{gl_FragColor=vec4(uColor.rgb,uColor.a*vAddOpacity);}if(uUseTexture){float ratio=vUV.z;vec2 uv=vUV.xy;gl_FragColor=texture2D(uSampler,vec2(gl_PointCoord.x*ratio+uv.x,1.0-(uv.y+gl_PointCoord.y*ratio)));}}"});
this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer)}},{key:"bindAttributeBufferData",value:function(a,c,f,g){var b=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b);f=new Float32Array(f);a.bufferData(a.ARRAY_BUFFER,f,a.STATIC_DRAW);this.bufferMap[c]={buffer:b,data:f,elementSize:g}}},{key:"onChanged",value:function(a,c){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.gl&&(Array.isArray(c)||(c=[]),this.processCache(a,c,b))}},{key:"processCache",value:function(a,
c,f){var b=this;this.cachedData=[];for(var d=a.icon,k=a.speed,l=0;l<c.length;l++){var p=c[l].geometry.coordinates,n=this.getProperty("icon",d,c[l]),m=this.getProperty("speed",k,c[l]),q=this.getProperty("delay",0,c[l]);p&&(this.cachedData.push({coordinates:p,icon:n,speed:m,delay:q}),this.iconHash.get(n)||this.iconHash.set(n,n))}c=Qd(this.iconHash.entries()).filter(function(a){return"string"===typeof a[1]}).map(function(a){var c=ka(a,2)[0];return new Ib(function(a,d){b.url2canvas(c,function(d){b.iconHash.set(c,
d);a()})})});Ib.all(c).then(function(c){b.buildSprite(a);!1!==f.autoRender&&b.webglLayer&&b.webglLayer.render()})}},{key:"buildSprite",value:function(a){var b=a.padding,c=this.canvas,g=this.ctx,h=0,k=[],l=new Kb;if(a.icon){h=!0;var p=!1,n=void 0;try{for(var m=ec(this.iconHash),q;!(h=(q=m.next()).done);h=!0){var r=ka(q.value,2),u=r[1];if("string"!==typeof u){var v=u.width,t=v+b;k.push({w:t,h:t,width:v,key:r[0],icon:u})}}}catch(x){p=!0,n=x}finally{try{!h&&m.return&&m.return()}finally{if(p)throw n;}}m=
dc(k);for(q=0;q<k.length;q++)r=k[q],l.get(r.key)||l.set(r.key,r);h=Math.max(gb(m.w),gb(m.h));c.width=h||1;c.height=h||1;g.save();for(c=0;c<k.length;c++)m=k[c],g.drawImage(m.icon,m.x+b,m.y+b,m.width,m.width);g.restore()}this.loadTexture();this.buildVertex(a,l,h)}},{key:"buildVertex",value:function(a,c,f){var b=this.gl;this.updateUniformsFromOptions(a);for(var d=[],k=[],l=[],p=[],n=[],m=[],q=[],r=[],u=a.minLineLength,v=0;v<this.cachedData.length;v++){var t=this.cachedData[v],x=t.coordinates,w=t.icon,
D=t.speed;t=t.delay;var z=x.length,B=[];if(!(z<u)){a.icon&&(B=(B=c.get(w))?[B.x/f,B.y/f,B.w/f]:[0,0,0]);for(w=0;w<z;++w){var A=this.normizedPoint(x[w]);d.push(A[0]);d.push(A[1]);d.push(A[2]||0);r.push.apply(r,Z(B));3!==this.animationType&&(k.push(w),p.push(z))}if(1!==this.animationType){w=d.length-3*z+3;B=d.length;for(x=w;x<B;++x)n.push(d[x]);d.splice(B-3,3);r.splice(B-3,3);if(2===this.animationType)k.pop(),p.pop();else if(3===this.animationType){w-=3;B=d.length-3;x=0;z=[];for(A=w;A<=B;A+=3)w=Math.sqrt(Math.pow(n[A]-
d[A],2)+Math.pow(n[A+1]-d[A+1],2)+Math.pow(n[A+2]-d[A+2],2)),x+=w,z.push(w);k.push(0);m.push(D);t/=x/D;q.push(t);A=B=0;for(var F=z.length-1;A<F;++A)B+=z[A],w=B/x,k.push(w),l.push(w),p.push(x),m.push(D),q.push(t);l.push(1);p.push(x)}}}}this.bindAttributeBufferData(b,"aPos",d,3);this.bindAttributeBufferData(b,"aIndex",k,1);this.bindAttributeBufferData(b,"aLength",p,1);1!==this.animationType&&(this.bindAttributeBufferData(b,"aNextPos",n,3),3===this.animationType&&(this.bindAttributeBufferData(b,"aNextIndex",
l,1),this.bindAttributeBufferData(b,"aSpeed",m,1),this.bindAttributeBufferData(b,"aDelay",q,1)));a.icon&&this.bindAttributeBufferData(b,"aUV",r,3);this.vertCount=d.length/3}},{key:"updateUniformsFromOptions",value:function(a){this.color=this.normizedColor(a.color);this.startTime=(new Date).getTime();Fl[a.animationType]||(a.animationType=2);Gl[a.shapeType]||(a.shapeType=2);if(isNaN(a.minLineLength)||2>a.minLineLength)a.minLineLength=2;this.animationType=a.animationType}},{key:"renderAttributeArr",
value:function(a,c,f){if(void 0!==c.attributes[f]){var b=this.bufferMap[f];b&&(a.bindBuffer(a.ARRAY_BUFFER,b.buffer),a.enableVertexAttribArray(c.attributes[f]),a.vertexAttribPointer(c.attributes[f],b.elementSize,a.FLOAT,!1,b.data.BYTES_PER_ELEMENT*b.elementSize,0))}}},{key:"render",value:function(a){var b=a.gl;a=a.matrix;if(!(0>=this.vertCount)){var c=this.getOptions(),g=this.program;b.useProgram(g.program);this.renderAttributeArr(b,g,"aPos");this.renderAttributeArr(b,g,"aIndex");this.renderAttributeArr(b,
g,"aLength");1!==this.animationType&&(this.renderAttributeArr(b,g,"aNextPos"),3===this.animationType&&(this.renderAttributeArr(b,g,"aNextIndex"),this.renderAttributeArr(b,g,"aSpeed"),this.renderAttributeArr(b,g,"aDelay")));c.icon&&this.texture&&(this.renderAttributeArr(b,g,"aUV"),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.texture),b.uniform1i(g.uniforms.uSampler,0));b.uniform1i(g.uniforms.uUseTexture,this.isUseTexture);var h=(new Date).getTime()-this.startTime;h<this.options.delay?
h=0:(h-=this.options.delay,h=1===this.animationType?Math.round(h/1E3*this.options.speed*20):3===this.animationType?h/1E3*this.options.speed*1E3:h/1E3*this.options.speed);var k=this.options.size;if(Array.isArray(k)){var l=this.map.map.getMaxZoom(),p=this.map.map.getMinZoom();k=k[0]+(this.map.getZoom()-p)/(l-p)*(k[1]-k[0])}b.uniformMatrix4fv(g.uniforms.u_matrix,!1,a);b.uniform4f(g.uniforms.uColor,this.color[0],this.color[1],this.color[2],this.color[3]);b.uniform1f(g.uniforms.uSize,k);b.uniform1f(g.uniforms.uElapsedSteps,
h);b.uniform1f(g.uniforms.uOriginSpeed,this.options.speed);b.uniform1i(g.uniforms.uAnimationType,this.animationType);b.uniform1i(g.uniforms.ushapeType,this.options.shapeType);b.uniform1i(g.uniforms.uPointFade,this.options.pointFade?1:0);b.uniform1f(g.uniforms.uPointFadeBuffer,this.options.pointFadeBuffer);b.uniform1f(g.uniforms.uZoomUnits,"m"===this.options.unit?this.map.getZoomUnits():1);this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:"lighter"===c.blend?[b.SRC_ALPHA,b.ONE]:[b.SRC_ALPHA,
b.ONE_MINUS_SRC_ALPHA],depthTest:!!c.depthTest});b.drawArrays(b.POINTS,0,this.vertCount)}}},{key:"url2canvas",value:function(a,c){if("object"===("undefined"===typeof a?"undefined":Na(a)))c(a);else{var b=new Image;b.crossOrigin="anonymous";b.onload=function(){var a=document.createElement("canvas");a.width=128;a.height=128;a.getContext("2d").drawImage(b,0,0,128,128);c(a)};b.src=a}}},{key:"loadTexture",value:function(){var a=this;this.canvas&&this.getOptions().icon?Ea(this.gl,this.canvas,function(b){a.isUseTexture=
!0;a.texture=b}):(this.isUseTexture=!1,this.texture=null)}}]);return a}(ca);$b.ANIMATION_TYPE_LEAP=1;$b.ANIMATION_TYPE_SMOOTH=2;$b.ANIMATION_TYPE_UNIFORM_SPEED=3;$b.SHAPE_TYPE_SQUARE=1;$b.SHAPE_TYPE_CIRCLE=2;$b.SHAPE_TYPE_CIRCLE_GRADIENT=3;var Hl=function(){function c(a,b){L(this,c);this.layer=a;this.gl=b;this.initData()}M(c,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]}}},{key:"getData",value:function(){return this.outWall3d}},{key:"onLayerChange",
value:function(a,b){this.initData();for(var c=a.color,f=a.height,g=a.gradient,h=a.enablePreciseMap,k=a.repeatMap,l=this.gl,p=0;p<b.length;p++){var n=b[p],m=n.color||c;"properties"in n&&"color"in n.properties&&(m=n.properties.color);g||"[object Function]"!==Object.prototype.toString.call(m)||(m=m(n));var q=this.layer.normizedColor(g?g[0]:m);m=this.layer.normizedColor(g?g[1]:m);var r=n.height||f;"properties"in n&&"height"in n.properties&&(r=n.properties.height);"[object Function]"===Object.prototype.toString.call(r)&&
(r=r(n));if("MultiLineString"===n.geometry.type||"Polygon"===n.geometry.type)for(var u=0;u<n.geometry.coordinates.length;u++){for(var v=n.geometry.coordinates[u],t=v.length,x=[],w=[],D=0,z=0;z<t;z++){var B=this.layer.normizedPoint(v[z]);if(0<z&&(h||k)){var A=this.layer.normizedPoint(v[z-1]);D+=Math.sqrt(Math.pow(B[0]-A[0],2)+Math.pow(B[1]-A[1],2))}x.push(B);w.push(D)}this.processData(this.outWall3d,a,x,w,q,m,r)}else{n=n.geometry.coordinates;u=n.length;v=[];t=[];for(w=x=0;w<u;w++)D=this.layer.normizedPoint(n[w]),
0<w&&(h||k)&&(z=this.layer.normizedPoint(n[w-1]),x+=Math.sqrt(Math.pow(D[0]-z[0],2)+Math.pow(D[1]-z[1],2))),v.push(D),t.push(x);this.processData(this.outWall3d,a,v,t,q,m,r)}}for(a=0;a<this.outWall3d.vertex.length;a++){b=[];c=this.outWall3d.vertex[a].length;for(f=0;f<c;f++)b.push.apply(b,Z(this.outWall3d.vertex[a][f]));c=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,c);l.bufferData(l.ARRAY_BUFFER,new Float32Array(b),l.STATIC_DRAW);this.outWall3d.vertexBuffer[a]=c;l.bindBuffer(l.ARRAY_BUFFER,null);c=
l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,c);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[a]),l.STATIC_DRAW);this.outWall3d.indexBuffer[a]=c;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null)}}},{key:"processData",value:function(a,b,c,f,g,h,k){var d=f[f.length-1],p=a.vertex[a.vertex.length-1],n=a.index[a.index.length-1],m=c.length;if(!n||65536<=n.length+2*m+2)p=[],n=[],a.vertex.push(p),a.index.push(n);(a=p.length)&&n.push(a-1,a);for(a=0;a<m;a++){var q=[],r=[],u=c[a];
q.push(u[0],u[1],u[2]+k);q.push(g[0],g[1],g[2],g[3]);r.push(u[0],u[1],u[2]);r.push(h[0],h[1],h[2],h[3]);b.texture&&(u=f[a],b.enablePreciseMap||b.repeatMap?(q.push(u,1,d),r.push(u,0,d)):(q.push(a,1,m-1),r.push(a,0,m-1)));u=p.length;p.push(q,r);n.push(u,u+1)}}}]);return c}(),Il=function(c){function a(b,c){L(this,a);return R(this,(a.__proto__||P(a)).call(this,b,c))}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{texture:null,enablePreciseMap:!1,repeatMap:0,height:100,color:[1,1,1,1]}}},
{key:"initialize",value:function(a){this.gl=a;this.dataMgr=new Hl(this,this.gl);this.texture=null;this.isUseTexture=!1;this.vertexLength=10;this.program=new X(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform bool uUseTexture;attribute vec3 aPos;attribute vec4 aColor;attribute vec2 aTextureCoords;attribute float aTotalDistance;varying vec2 vTextureCoords;varying float vTotalDistance;varying vec4 vColor;void main(){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}if(uUseTexture){vTextureCoords=aTextureCoords;vTotalDistance=aTotalDistance;}gl_Position=u_matrix*vec4(aPos,1.0);}",
fragmentShader:"precision highp float;uniform bool uUseTexture;uniform float uDistance;uniform sampler2D uSampler;varying vec2 vTextureCoords;varying float vTotalDistance;varying vec4 vColor;void main(){if(uUseTexture){float uvx=vTextureCoords.x/vTotalDistance;if(uDistance>0.0){uvx=mod(vTextureCoords.x,uDistance)/uDistance;}gl_FragColor=vec4(1.0,1.0,1.0,1.0)*texture2D(uSampler,vec2(uvx,vTextureCoords.y));}else{gl_FragColor=vColor;}}"});this.loadTexture()}},{key:"onChanged",value:function(a,c){var b=
this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){b.loadTexture(function(){b.dataMgr.onLayerChange(a,c);b.webglLayer.render()})},0))}},{key:"render",value:function(a){var b=a.gl,c=a.matrix;if((a=this.dataMgr.getData())&&!(0>=a.vertex.length)){var g=this.getOptions(),h=this.program;b.useProgram(h.program);if(g.texture){if(!this.texture)return;b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,this.texture);b.uniform1i(h.uniforms.uSampler,
0)}this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA],depthMask:g.texture?!0:!1,depthFunc:g.texture?b.LESS:b.LEQUAL});g.texture?b.enableVertexAttribArray(h.attributes.aTextureCoords):b.disableVertexAttribArray(h.attributes.aTextureCoords);b.enableVertexAttribArray(h.attributes.aPos);b.enableVertexAttribArray(h.attributes.aColor);b.uniformMatrix4fv(h.uniforms.u_matrix,!1,c);b.uniform1i(h.uniforms.uUseTexture,this.isUseTexture);b.uniform1f(h.uniforms.uDistance,
g.repeatMap);for(c=0;c<a.vertex.length;c++)if(!(0>=a.vertex[c].length)){var k=a.vertex[c],l=(new Float32Array(k[0])).BYTES_PER_ELEMENT;k=l*k[0].length;b.bindBuffer(b.ARRAY_BUFFER,a.vertexBuffer[c]);b.vertexAttribPointer(h.attributes.aPos,3,b.FLOAT,!1,k,0);b.vertexAttribPointer(h.attributes.aColor,4,b.FLOAT,!1,k,3*l);g.texture&&(b.vertexAttribPointer(h.attributes.aTextureCoords,2,b.FLOAT,!1,k,7*l),b.vertexAttribPointer(h.attributes.aTotalDistance,1,b.FLOAT,!1,k,9*l));b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
a.indexBuffer[c]);b.drawElements(b.TRIANGLE_STRIP,a.index[c].length,b.UNSIGNED_SHORT,0);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null)}}}},{key:"loadTexture",value:function(a){var b=this,c=this.getOptions();c.texture?(this.isUseTexture=!0,Ea(this.gl,c.texture,function(c,d){b.image=d;b.texture=c;a&&a();b.webglLayer.render()})):(this.isUseTexture=!1,this.image=this.texture=null,a&&a())}}]);return a}(ca),Jl=function(){function c(a,b){L(this,c);this.layer=a;this.gl=b;this.initData()}
M(c,[{key:"initData",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]};this.maxLength=0}},{key:"getData",value:function(){return this.outWall3d}},{key:"getMaxDataLength",value:function(){return this.maxLength}},{key:"onLayerChange",value:function(a,b){this.initData();var c=a.color,f=a.height,g=a.gradient;a=this.gl;for(var h=0;h<b.length;h++){var k=b[h].geometry.coordinates,l=k.length;this.maxLength=l>this.maxLength?l:this.maxLength;for(var p=[],n=0;n<l;n++){var m=
this.layer.normizedPoint(k[n]);p.push(m)}l=b[h].color||c;"properties"in b[h]&&"color"in b[h].properties&&(l=b[h].properties.color);g||"[object Function]"!==Object.prototype.toString.call(l)||(l=l(b[h]));k=this.layer.normizedColor(g?g[0]:l);l=this.layer.normizedColor(g?g[1]:l);n=b[h].height||f;"properties"in b[h]&&"height"in b[h].properties&&(n=b[h].properties.height);"[object Function]"===Object.prototype.toString.call(n)&&(n=n(b[h]));this.processData(this.outWall3d,p,k,l,n)}for(b=0;b<this.outWall3d.vertex.length;b++){c=
[];f=this.outWall3d.vertex[b].length;for(g=0;g<f;g++)c.push.apply(c,Z(this.outWall3d.vertex[b][g]));f=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,f);a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW);this.outWall3d.vertexBuffer[b]=f;a.bindBuffer(a.ARRAY_BUFFER,null);f=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[b]),a.STATIC_DRAW);this.outWall3d.indexBuffer[b]=f;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)}}},
{key:"processData",value:function(a,b,c,f,g){var d=a.vertex[a.vertex.length-1],k=a.index[a.index.length-1],l=b.length;if(!k||65536<=k.length+2*l+2)d=[],k=[],a.vertex.push(d),a.index.push(k);(a=d.length)&&k.push(a-1,a);for(a=0;a<l;a++){var p=[],n=[],m=b[a];p.push(m[0],m[1]);p.push(m[2]?Number(m[2])+g:g);p.push(m[3]?Number(m[3]):a);p.push(c[0],c[1],c[2],c[3]);n.push(m[0],m[1]);n.push(m[2]?Number(m[2]):0);n.push(m[3]?Number(m[3]):a);n.push(f[0],f[1],f[2],f[3]);m=d.length;d.push(p,n);k.push(m,m+1)}}}]);
return c}(),Kl=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.startTime=b.options.startTime||0;b.endTime=b.options.endTime;b.time=b.startTime;b.autoUpdate=!0;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{height:100,color:[1,1,1,1],trailLength:3,step:.1}}},{key:"initialize",value:function(a){this.gl=a;this.dataMgr=new Jl(this,this.gl);this.program=new X(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;attribute vec4 aPos;attribute vec4 aColor;varying vec4 vColor;varying float vTime;void main(){vTime=1.0-((currentTime-aPos.w)/trailLength);vColor=aColor;gl_Position=u_matrix*vec4(aPos.xyz,1.0);}",
fragmentShader:"precision highp float;varying vec4 vColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(vColor.rgb,1.0*vTime);}"})}},{key:"onChanged",value:function(a,c){this.gl&&(this.dataMgr.onLayerChange(a,c),void 0===a.endTime&&(this.endTime=this.dataMgr.getMaxDataLength()))}},{key:"render",value:function(a){var b=a.gl,c=a.matrix;if((a=this.dataMgr.getData())&&!(0>=a.vertex.length)){var g=this.getOptions(),h=this.program;b.useProgram(h.program);this.setGLState({blend:!0,
blendEquation:b.FUNC_ADD,blendFunc:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA]});b.enableVertexAttribArray(h.attributes.aPos);b.enableVertexAttribArray(h.attributes.aColor);b.uniformMatrix4fv(h.uniforms.u_matrix,!1,c);b.uniform1f(h.uniforms.currentTime,this.time);b.uniform1f(h.uniforms.trailLength,g.trailLength);for(c=0;c<a.vertex.length;c++)if(!(0>=a.vertex[c].length)){var k=a.vertex[c],l=(new Float32Array(k[0])).BYTES_PER_ELEMENT;k=l*k[0].length;b.bindBuffer(b.ARRAY_BUFFER,a.vertexBuffer[c]);b.vertexAttribPointer(h.attributes.aPos,
4,b.FLOAT,!1,k,0);b.vertexAttribPointer(h.attributes.aColor,4,b.FLOAT,!1,k,4*l);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.indexBuffer[c]);b.drawElements(b.TRIANGLE_STRIP,a.index[c].length,b.UNSIGNED_SHORT,0);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null)}this.time+=g.step;this.time>this.endTime&&(this.time=this.startTime)}}}]);return a}(ca),Ll=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.simpleLineLayer=new Rh(b.getHeatOptions());b.children=
[b.simpleLineLayer];return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{blend:"normal",gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}}}},{key:"onDataChanged",value:function(a){this.simpleLineLayer.setData(a)}},{key:"onOptionsChanged",value:function(a){this.simpleLineLayer.setOptions(this.getHeatOptions())}},{key:"getHeatOptions",value:function(){var a=this.getOptions(),c=a.max,f=a.min;void 0===c&&(f=this.getDataRange(),c=f.max,
f=f.min);var g=new za({max:c,min:f,gradient:a.gradient});a.color=function(a){var b=~~a.count||1;"properties"in a&&"count"in a.properties&&(b=~~a.properties.count);a=g.getImageData(b);return[a[0]/255,a[1]/255,a[2]/255,a[3]/255]};return a}},{key:"getDataRange",value:function(){var a=this.getData(),c=0,f=0;a[0]&&(c=~~a[0].count||1,f=~~a[0].count||1);"properties"in a[0]&&"count"in a[0].properties&&(c=~~a[0].properties.count,f=~~a[0].properties.count);for(var g=a.length,h=0;h<g;h++){var k=~~a[h].count||
1;"properties"in a[h]&&"count"in a[h].properties&&(k=~~a[h].properties.count);c=Math.max(k,c);f=Math.min(k,f)}return{max:c/2,min:f}}}]);return a}(Hb),be=Q(function(c,a){(function(a,d){c.exports=d()})(lg,function(){function a(b,d,f,g,h){for(;g>f;){if(600<g-f){var k=g-f+1,l=d-f+1,m=Math.log(k),n=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*n*(k-n)/k)*(0>l-k/2?-1:1);a(b,d,Math.max(f,Math.floor(d-l*n/k+m)),Math.min(g,Math.floor(d+(k-l)*n/k+m)),h)}k=b[d];l=f;n=g;c(b,f,d);for(0<h(b[g],k)&&c(b,f,g);l<n;){c(b,l,n);
l++;for(n--;0>h(b[l],k);)l++;for(;0<h(b[n],k);)n--}0===h(b[f],k)?c(b,f,n):(n++,c(b,n,g));n<=d&&(f=n+1);d<=n&&(g=n-1)}}function c(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function f(a,b){return a<b?-1:a>b?1:0}function g(a,b){h(a,0,a.children.length,b,a)}function h(a,b,c,d,f){f||(f=u(null));f.minX=Infinity;f.minY=Infinity;f.maxX=-Infinity;for(f.maxY=-Infinity;b<c;b++){var g=a.children[b];k(f,a.leaf?d(g):g)}return f}function k(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,
b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function l(a,b){return a.minX-b.minX}function p(a,b){return a.minY-b.minY}function n(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function m(a){return a.maxX-a.minX+(a.maxY-a.minY)}function q(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function r(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function u(a){return{children:a,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}
function v(b,c,d,g,h){for(var k=[c,d];k.length;)if(d=k.pop(),c=k.pop(),!(d-c<=g)){var l=c+Math.ceil((d-c)/g/2)*g;a(b,l,c||0,d||b.length-1,h||f);k.push(c,l,l,d)}}var t=function(a){void 0===a&&(a=9);this._maxEntries=Math.max(4,a);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};t.prototype.all=function(){return this._all(this.data,[])};t.prototype.search=function(a){var b=this.data,c=[];if(!r(a,b))return c;for(var d=this.toBBox,f=[];b;){for(var g=0;g<b.children.length;g++){var h=
b.children[g],k=b.leaf?d(h):h;r(a,k)&&(b.leaf?c.push(h):q(a,k)?this._all(h,c):f.push(h))}b=f.pop()}return c};t.prototype.collides=function(a){var b=this.data;if(!r(a,b))return!1;for(var c=[];b;){for(var d=0;d<b.children.length;d++){var f=b.children[d],g=b.leaf?this.toBBox(f):f;if(r(a,g)){if(b.leaf||q(a,g))return!0;c.push(f)}}b=c.pop()}return!1};t.prototype.load=function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var b=0;b<a.length;b++)this.insert(a[b]);return this}a=this._build(a.slice(),
0,a.length-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this._insert(a,this.data.height-a.height-1,!0)):this.data=a;return this};t.prototype.insert=function(a){a&&this._insert(a,this.data.height-1);return this};t.prototype.clear=function(){this.data=u([]);return this};t.prototype.remove=function(a,b){if(!a)return this;for(var c=this.data,d=this.toBBox(a),f=[],g=[],h,k,l;c||f.length;){c||(c=f.pop(),
k=f[f.length-1],h=g.pop(),l=!0);if(c.leaf){a:{var m=a;var n=c.children,p=b;if(p){for(var w=0;w<n.length;w++)if(p(m,n[w])){m=w;break a}m=-1}else m=n.indexOf(m)}if(-1!==m){c.children.splice(m,1);f.push(c);this._condense(f);break}}l||c.leaf||!q(c,d)?k?(h++,c=k.children[h],l=!1):c=null:(f.push(c),g.push(h),h=0,k=c,c=c.children[0])}return this};t.prototype.toBBox=function(a){return a};t.prototype.compareMinX=function(a,b){return a.minX-b.minX};t.prototype.compareMinY=function(a,b){return a.minY-b.minY};
t.prototype.toJSON=function(){return this.data};t.prototype.fromJSON=function(a){this.data=a;return this};t.prototype._all=function(a,b){for(var c=[];a;)a.leaf?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b};t.prototype._build=function(a,b,c,d){var f=c-b+1,h=this._maxEntries;if(f<=h){var k=u(a.slice(b,c+1));g(k,this.toBBox);return k}d||(d=Math.ceil(Math.log(f)/Math.log(h)),h=Math.ceil(f/Math.pow(h,d-1)));k=u([]);k.leaf=!1;k.height=d;f=Math.ceil(f/h);h=f*Math.ceil(Math.sqrt(h));
for(v(a,b,c,h,this.compareMinX);b<=c;b+=h){var l=Math.min(b+h-1,c);v(a,b,l,f,this.compareMinY);for(var m=b;m<=l;m+=f)k.children.push(this._build(a,m,Math.min(m+f-1,l),d-1))}g(k,this.toBBox);return k};t.prototype._chooseSubtree=function(a,b,c,d){for(;;){d.push(b);if(b.leaf||d.length-1===c)break;for(var f=Infinity,g=Infinity,h=void 0,k=0;k<b.children.length;k++){var l=b.children[k],m=n(l),p=(Math.max(l.maxX,a.maxX)-Math.min(l.minX,a.minX))*(Math.max(l.maxY,a.maxY)-Math.min(l.minY,a.minY))-m;p<g?(g=
p,f=m<f?m:f,h=l):p===g&&m<f&&(f=m,h=l)}b=h||b.children[0]}return b};t.prototype._insert=function(a,b,c){c=c?a:this.toBBox(a);var d=[],f=this._chooseSubtree(c,this.data,b,d);f.children.push(a);for(k(f,c);0<=b;)if(d[b].children.length>this._maxEntries)this._split(d,b),b--;else break;this._adjustParentBBoxes(c,d,b)};t.prototype._split=function(a,b){var c=a[b],d=c.children.length,f=this._minEntries;this._chooseSplitAxis(c,f,d);d=this._chooseSplitIndex(c,f,d);d=u(c.children.splice(d,c.children.length-
d));d.height=c.height;d.leaf=c.leaf;g(c,this.toBBox);g(d,this.toBBox);b?a[b-1].children.push(d):this._splitRoot(c,d)};t.prototype._splitRoot=function(a,b){this.data=u([a,b]);this.data.height=a.height+1;this.data.leaf=!1;g(this.data,this.toBBox)};t.prototype._chooseSplitIndex=function(a,b,c){for(var d,f=Infinity,g=Infinity,k=b;k<=c-b;k++){var l=h(a,0,k,this.toBBox),m=h(a,k,c,this.toBBox);var p=Math.max(0,Math.min(l.maxX,m.maxX)-Math.max(l.minX,m.minX))*Math.max(0,Math.min(l.maxY,m.maxY)-Math.max(l.minY,
m.minY));l=n(l)+n(m);p<f?(f=p,d=k,g=l<g?l:g):p===f&&l<g&&(g=l,d=k)}return d||c-b};t.prototype._chooseSplitAxis=function(a,b,c){var d=a.leaf?this.compareMinX:l,f=a.leaf?this.compareMinY:p,g=this._allDistMargin(a,b,c,d);b=this._allDistMargin(a,b,c,f);g<b&&a.children.sort(d)};t.prototype._allDistMargin=function(a,b,c,d){a.children.sort(d);d=this.toBBox;for(var f=h(a,0,b,d),g=h(a,c-b,c,d),l=m(f)+m(g),n=b;n<c-b;n++){var p=a.children[n];k(f,a.leaf?d(p):p);l+=m(f)}for(c=c-b-1;c>=b;c--)f=a.children[c],k(g,
a.leaf?d(f):f),l+=m(g);return l};t.prototype._adjustParentBBoxes=function(a,b,c){for(;0<=c;c--)k(b[c],a)};t.prototype._condense=function(a){for(var b=a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():g(a[b],this.toBBox)};return t})}),ce=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));c=b.canvas=document.createElement("canvas");c=b.ctx=c.getContext("2d");c.textAlign="start";c.textBaseline="top";return b}
S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,flat:!1,collides:!0,unit:"px",angle:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],shadow:{}}}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions();this.texture=null;this.lastUpdateTime=0;this.program=new X(this.gl,{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uFlat;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***\u70b9A(x,y)\uff0c\u7ed5\u539f\u70b9\u987a\u65f6\u9488\u65cb\u8f6c\u89d2\u5ea6a\u65b0\u5750\u6807\u7684\u8ba1\u7b97\u516c\u5f0f*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)+size.x*sin(rotation);}else if(corner==2.0){x+=size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)-size.x*sin(rotation);}else if(corner==3.0){x+=size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)-size.x*sin(rotation);}else{x+=-size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)+size.x*sin(rotation);}return vec3(x,y,coord.z);}void main(){vTextCoord=aTextCoord;if(uFlat){vec2 pixelOffset=offset;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;pixelOffset*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);current.z+=zIndex;gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y-pixelOffset[1],current.z,1.0);}else{vec2 pixelOffset=offset*zoomUnits;vec4 projection=matrix*vec4(position.x+pixelOffset[0],position.y-pixelOffset[1],position.z,1.0);vec3 screen=projection.xyz/projection.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio*scale;vec3 current=transformCoord(screen,halfSize,corner);current.z+=zIndex;gl_Position=vec4(current,1.0);}}",
fragmentShader:"precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));\n#if defined(PICK)\nif(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}\n#endif\n}",defines:b.enablePicked?["PICK"]:[]},this);this.vertexBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.uvBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=
new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});b=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,
size:2,stride:8,type:"FLOAT",offset:0}];b=b.concat(this.getCommonAttributes());this.vertexArray=new la({gl:a,program:this.program,attributes:b})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null);this.canvas=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(a,c){this.gl&&this.processCache(a,c)}},{key:"processCache",value:function(a,c){this.cachedData=
[];for(var b=0;b<c.length;b++){var d=this.normizedPoint(c[b].geometry.coordinates),h=c[b].text;"properties"in c[b]&&"text"in c[b].properties&&(h=c[b].properties.text);var k=this.getProperty("angle",a.angle,c[b]);d&&void 0!==h&&this.cachedData.push({point:d,text:h,angle:k,index:b})}}},{key:"render",value:function(a){if(this.cachedData&&this.cachedData.length&&this.map){var b=a.gl,c=a.matrix,g=this.getOptions(),h=this.program;h.use(b);this.throttleUpdate(a);this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,
blendFunc:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA],polygonOffset:g.polygonOffset,depthTest:g.depthTest,depthMask:g.depthWrite});var k=this.map.getZoomUnits();h.setUniforms(Y(this.getCommonUniforms(a),{matrix:c,devicePixelRatio:window.devicePixelRatio,textureImage:this.texture,uFlat:g.flat,offset:g.offset,zoomUnits:k,zIndex:g.zIndex,uUnitPx:"px"===g.unit}));0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),b.drawElements(b.TRIANGLES,this.index.length,b.UNSIGNED_INT,0))}}},{key:"throttleUpdate",
value:function(a){this.updateText(a)}},{key:"updateText",value:function(a){var b=a.gl,c=a.matrix,g=this.getOptions(),h=g.color;a=g.fontSize;var k=g.fontFamily,l=g.padding,p=g.margin,n=g.collides,m=g.enablePicked,q=g.shadow,r=b.canvas.width/window.devicePixelRatio,u=b.canvas.height/window.devicePixelRatio,v=this.canvas;b=this.ctx;b.save();b.scale(window.devicePixelRatio,window.devicePixelRatio);b.textBaseline="top";b.font="20px "+k;var t=new be;g=[];for(var x=0;x<this.cachedData.length;x++){var w=
this.cachedData[x],D=w.point,z=w.text,B=w.angle;w=w.index;var A=ka(D,3);A=xa.clone([A[0],A[1],A[2],1]);xa.transformMat4(A,A,c);xa.scale(A,A,1/A[3]);var F=(A[0]+1)/2*r,G=(-A[1]+1)/2*u,E=b.measureText(z);A=E.width+2*l[0];var y=20;E.actualBoundingBoxAscent&&E.actualBoundingBoxDescent&&(y=E.actualBoundingBoxDescent-E.actualBoundingBoxAscent);y+=2*l[1];var I=A+p[0];E=y+p[1];F-=I/2;G-=E/2;I=F+I;E=G+E;if(!(0>I||0>E||F>r||G>u)){if(n){E={minX:F,maxX:I,minY:G,maxY:E};if(t.collides(E))continue;t.insert(E)}g.push({w:A,
h:y,point:D,text:z,angle:B,dataIndex:w})}}b.restore();p=dc(g);c=p.w;p=p.h;0>=c&&(c=1);0>=p&&(p=1);v.width=c*window.devicePixelRatio;v.height=p*window.devicePixelRatio;b.save();b.scale(window.devicePixelRatio,window.devicePixelRatio);b.textBaseline="top";b.font="20px "+k;b.fillStyle=h;b.shadowColor=q&&q.color;b.shadowOffsetX=q&&q.offsetX;b.shadowOffsetY=q&&q.offsetY;b.shadowBlur=q&&q.blur;h=[];k=[];q=[];v=[];n=0;for(r=g.length;n<r;++n){u=g[n];b.fillText(u.text,u.x+l[0],u.y+l[1]);D=ka(u.point,3);t=
D[0];x=D[1];D=D[2];for(z=0;4>z;z++)h.push(t,x,D),h.push(z),h.push(u.w,u.h),h.push(a/20,u.angle*Math.PI/180);t=u.x/c;x=(u.x+u.w)/c;D=(u.y+u.h)/p;z=u.y/p;k.push(t,D,t,z,x,z,x,D);t=4*n;q.push(t,t+2,t+1,t,t+3,t+2);m&&(u=this.indexToRgb(u.dataIndex),v.push(u[0]/255,u[1]/255,u[2]/255),v.push(u[0]/255,u[1]/255,u[2]/255),v.push(u[0]/255,u[1]/255,u[2]/255),v.push(u[0]/255,u[1]/255,u[2]/255))}b.restore();this.loadTexture();this.index=q;this.vertexBuffer.updateData(new Float32Array(h));this.uvBuffer.updateData(new Float32Array(k));
this.indexBuffer.updateData(new Uint32Array(q));m&&this.pickBuffer.updateData(new Float32Array(v))}},{key:"loadTexture",value:function(){var a=this;this.canvas?Ea(this.gl,this.canvas,function(b){a.texture=b},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]);return a}(ca),mi=Q(function(c,a){(function(a,d){c.exports=d()})(lg,function(){function a(b,d,f,g,h,k){if(!(h-g<=f)){var l=g+h>>1;c(b,d,l,g,h,k%2);a(b,d,f,g,l-1,k+1);a(b,d,f,l+1,h,k+1)}}function c(a,b,d,g,h,
k){for(;h>g;){if(600<h-g){var l=h-g+1,m=d-g+1,n=Math.log(l),p=.5*Math.exp(2*n/3);n=.5*Math.sqrt(n*p*(l-p)/l)*(0>m-l/2?-1:1);c(a,b,d,Math.max(g,Math.floor(d-m*p/l+n)),Math.min(h,Math.floor(d+(l-m)*p/l+n)),k)}l=b[2*d+k];m=g;p=h;f(a,b,g,d);for(b[2*h+k]>l&&f(a,b,g,h);m<p;){f(a,b,m,p);m++;for(p--;b[2*m+k]<l;)m++;for(;b[2*p+k]>l;)p--}b[2*g+k]===l?f(a,b,g,p):(p++,f(a,b,p,h));p<=d&&(g=p+1);d<=p&&(h=p-1)}}function f(a,b,c,d){g(a,c,d);g(b,2*c,2*d);g(b,2*c+1,2*d+1)}function g(a,b,c){var d=a[b];a[b]=a[c];a[c]=
d}function h(a,b){a=a.geometry.coordinates;return{x:a[0]/360+.5,y:p(a[1]),zoom:Infinity,index:b,parentId:-1}}function k(a){var b=a.id,c=l(a);return{type:"Feature",id:b,properties:c,geometry:{type:"Point",coordinates:[360*(a.x-.5),360*Math.atan(Math.exp((180-360*a.y)*Math.PI/180))/Math.PI-90]}}}function l(a){var b=a.numPoints,c=1E4<=b?Math.round(b/1E3)+"k":1E3<=b?Math.round(b/100)/10+"k":b;return n(n({},a.properties),{cluster:!0,cluster_id:a.id,point_count:b,point_count_abbreviated:c})}function p(a){a=
Math.sin(a*Math.PI/180);a=.5-.25*Math.log((1+a)/(1-a))/Math.PI;return 0>a?0:1<a?1:a}function n(a,b){for(var c in b)a[c]=b[c];return a}function m(a){return a.x}function q(a){return a.y}var r=function(a){return a[0]},u=function(a){return a[1]},v=function(b,c,d,f,g){void 0===c&&(c=r);void 0===d&&(d=u);void 0===f&&(f=64);void 0===g&&(g=Float64Array);this.nodeSize=f;this.points=b;var h=this.ids=new (65536>b.length?Uint16Array:Uint32Array)(b.length);g=this.coords=new g(2*b.length);for(var k=0;k<b.length;k++)h[k]=
k,g[2*k]=c(b[k]),g[2*k+1]=d(b[k]);a(h,g,f,0,h.length-1,0)};v.prototype.range=function(a,b,c,d){for(var f=this.ids,g=this.coords,h=this.nodeSize,k=[0,f.length-1,0],l=[],m,n;k.length;){var p=k.pop(),q=k.pop(),r=k.pop();if(q-r<=h)for(p=r;p<=q;p++)m=g[2*p],n=g[2*p+1],m>=a&&m<=c&&n>=b&&n<=d&&l.push(f[p]);else{var t=Math.floor((r+q)/2);m=g[2*t];n=g[2*t+1];m>=a&&m<=c&&n>=b&&n<=d&&l.push(f[t]);var w=(p+1)%2;if(0===p?a<=m:b<=n)k.push(r),k.push(t-1),k.push(w);if(0===p?c>=m:d>=n)k.push(t+1),k.push(q),k.push(w)}}return l};
v.prototype.within=function(a,b,c){for(var d=this.ids,f=this.coords,g=this.nodeSize,h=[0,d.length-1,0],k=[],l=c*c;h.length;){var m=h.pop(),n=h.pop(),p=h.pop();if(n-p<=g)for(m=p;m<=n;m++){p=f[2*m]-a;var q=f[2*m+1]-b;p*p+q*q<=l&&k.push(d[m])}else{q=Math.floor((p+n)/2);var r=f[2*q],t=f[2*q+1],w=r-a,u=t-b;w*w+u*u<=l&&k.push(d[q]);w=(m+1)%2;if(0===m?a-c<=r:b-c<=t)h.push(p),h.push(q-1),h.push(w);if(0===m?a+c>=r:b+c>=t)h.push(q+1),h.push(n),h.push(w)}}return k};var t={minZoom:0,maxZoom:16,minPoints:2,radius:40,
extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(a){return a}},x=function(a){this.options=n(Qj(t),a);this.trees=Array(this.options.maxZoom+1)};x.prototype.load=function(a){var b=this.options,c=b.minZoom,d=b.maxZoom;b=b.nodeSize;this.points=a;for(var f=[],g=0;g<a.length;g++)a[g].geometry&&f.push(h(a[g],g));this.trees[d+1]=new v(f,m,q,b,Float32Array);for(a=d;a>=c;a--)f=this._cluster(f,a),this.trees[a]=new v(f,m,q,b,Float32Array);return this};x.prototype.getClusters=function(a,b){var c=
((a[0]+180)%360+360)%360-180,d=Math.max(-90,Math.min(90,a[1])),f=180===a[2]?180:((a[2]+180)%360+360)%360-180,g=Math.max(-90,Math.min(90,a[3]));if(360<=a[2]-a[0])c=-180,f=180;else if(c>f)return c=this.getClusters([c,d,180,g],b),d=this.getClusters([-180,d,f,g],b),c.concat(d);b=this.trees[this._limitZoom(b)];a=[];var h=0;for(d=b.range(c/360+.5,p(g),f/360+.5,p(d));h<d.length;h+=1)f=b.points[d[h]],a.push(f.numPoints?k(f):this.points[f.index]);return a};x.prototype.getChildren=function(a){var b=this._getOriginId(a),
c=this._getOriginZoom(a),d=this.trees[c];if(!d)throw Error("No cluster with the specified id.");var f=d.points[b];if(!f)throw Error("No cluster with the specified id.");b=[];var g=0;for(c=d.within(f.x,f.y,this.options.radius/(this.options.extent*Math.pow(2,c-1)));g<c.length;g+=1)f=d.points[c[g]],f.parentId===a&&b.push(f.numPoints?k(f):this.points[f.index]);if(0===b.length)throw Error("No cluster with the specified id.");return b};x.prototype.getLeaves=function(a,b,c){var d=[];this._appendLeaves(d,
a,b||10,c||0,0);return d};x.prototype.getTile=function(a,b,c){var d=this.trees[this._limitZoom(a)];a=Math.pow(2,a);var f=this.options;f=f.radius/f.extent;var g=(c-f)/a,h=(c+1+f)/a,k={features:[]};this._addTileFeatures(d.range((b-f)/a,g,(b+1+f)/a,h),d.points,b,c,a,k);0===b&&this._addTileFeatures(d.range(1-f/a,g,1,h),d.points,a,c,a,k);b===a-1&&this._addTileFeatures(d.range(0,g,f/a,h),d.points,-1,c,a,k);return k.features.length?k:null};x.prototype.getClusterExpansionZoom=function(a){for(var b=this._getOriginZoom(a)-
1;b<=this.options.maxZoom;){a=this.getChildren(a);b++;if(1!==a.length)break;a=a[0].properties.cluster_id}return b};x.prototype._appendLeaves=function(a,b,c,d,f){var g=0;for(b=this.getChildren(b);g<b.length;g+=1){var h=b[g],k=h.properties;k&&k.cluster?f=f+k.point_count<=d?f+k.point_count:this._appendLeaves(a,k.cluster_id,c,d,f):f<d?f++:a.push(h);if(a.length===c)break}return f};x.prototype._addTileFeatures=function(a,b,c,d,f,g){for(var h=0;h<a.length;h+=1){var k=b[a[h]],m=k.numPoints,n={type:1,geometry:[[Math.round(this.options.extent*
(k.x*f-c)),Math.round(this.options.extent*(k.y*f-d))]],tags:m?l(k):this.points[k.index].properties},p=void 0;m?p=k.id:this.options.generateId?p=k.index:this.points[k.index].id&&(p=this.points[k.index].id);void 0!==p&&(n.id=p);g.features.push(n)}};x.prototype._limitZoom=function(a){return Math.max(this.options.minZoom,Math.min(+a,this.options.maxZoom+1))};x.prototype._cluster=function(a,b){var c=[],d=this.options,f=d.reduce,g=d.minPoints;d=d.radius/(d.extent*Math.pow(2,b));for(var h=0;h<a.length;h++){var k=
a[h];if(!(k.zoom<=b)){k.zoom=b;for(var l=this.trees[b+1],m=l.within(k.x,k.y,d),n=k.numPoints||1,p=n,q=0,r=m;q<r.length;q+=1){var t=l.points[r[q]];t.zoom>b&&(p+=t.numPoints||1)}if(p>=g){q=k.x*n;r=k.y*n;n=f&&1<n?this._map(k,!0):null;t=(h<<5)+(b+1)+this.points.length;for(var u=0;u<m.length;u+=1){var v=l.points[m[u]];if(!(v.zoom<=b)){v.zoom=b;var w=v.numPoints||1;q+=v.x*w;r+=v.y*w;v.parentId=t;f&&(n||(n=this._map(k,!0)),f(n,this._map(v)))}}k.parentId=t;c.push({x:q/p,y:r/p,zoom:Infinity,id:t,parentId:-1,
numPoints:p,properties:n})}else if(c.push(k),1<p)for(k=0,p=m;k<p.length;k+=1)m=l.points[p[k]],m.zoom<=b||(m.zoom=b,c.push(m))}}return c};x.prototype._getOriginId=function(a){return a-this.points.length>>5};x.prototype._getOriginZoom=function(a){return(a-this.points.length)%32};x.prototype._map=function(a,b){if(a.numPoints)return b?n({},a.properties):a.properties;a=this.points[a.index].properties;var c=this.options.map(a);return b&&c===a?n({},c):c};return x})}),Ml=function(c){function a(b){L(this,
a);b=R(this,(a.__proto__||P(a)).call(this,b));b.shapeLayer=new Vd(b.options);b.textLayer=new ce(b.options.textOptions);b.children=[b.shapeLayer,b.textLayer];b.max=[];return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{size:50,height:0,maxZoom:19,minZoom:5,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"},enableCluster:!1,showText:!0,textOptions:{fontSize:13,color:"white"}}}},{key:"onOptionsChanged",value:function(a){this.textLayer.setOptions(a.textOptions)}},
{key:"setOptions",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=this.options.textOptions;a.textOptions&&Y(c,a.textOptions);var f=a.minZoom,g=a.maxZoom,h=a.size;f=g&&g!==this.options.maxZoom||f&&f!==this.options.minZoom||h&&h!==this.options.size;Y(this.options,a,{textOptions:c});if(f)this.onChanged(this.options,this.data);else this.refreshLayer();this.onOptionsChanged(this.getOptions())}},{key:"onChanged",value:function(a,c){if(c&&c.length){this.zoom=Math.floor(this.map.getZoom());
var b=a.maxZoom,d=a.minZoom,h=a.enableCluster;a=a.size;this.zoom>b?this.zoom=b:this.zoom<d&&(this.zoom=d);h&&(this.supercluster=new mi({maxZoom:b,minZoom:d,radius:a/2}),this.supercluster.load(c));this.refreshLayer()}}},{key:"refreshLayer",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.data,f=this.map,g=this.zoom;a.enableCluster&&this.supercluster&&(c=this.getClusterData(a));if(c&&c.length){var h=
a.gradient,k=a.showText,l=a.textOptions,p=a.height,n=a.size;n*=Math.pow(2,18-g);c=Ti(c,n,function(a){var b=ka(a,2),c=b[0];b=b[1];-180<=c&&180>=c&&-90<=b&&90>=b&&(b=f.lnglatToMercator(c,b),c=b[0],b=b[1]);a[0]=c;a[1]=b;return a});this.max[g]=Math.max(this.max[g]||0,c.max);var m=new za({max:this.max[g],min:0,maxSize:p*Math.pow(2,18-g),minSize:0,gradient:h});h=[];if(k){var q=l&&l.format;q="function"===typeof q?q:null;h=c.map(function(a){return{geometry:{coordinates:[a.center.x,a.center.y,m.getSize(a.count)+
l.fontSize/2*Math.pow(2,18-g)]},text:q?q(a.count):a.count}})}this.textLayer.setData(h);k=c.map(function(a){for(var b=a.center,d=c.r,f=[],g=0;6>g;g++)f.push(Si({x:b.x,y:b.y},d,g));return{geometry:{type:"Polygon",coordinates:[f]},properties:{height:m.getSize(a.count),color:m.getColor(a.count)}}});this.shapeLayer.setData(k);a.enablePicked&&a.autoSelect&&this.pick(-1,-1)}}},{key:"getClusterData",value:function(){var a=this.map,c=a.getBounds(),f=c.ne;c=c.sw;this.ne=f;this.sw=c;var g=f,h=g.lng;g=g.lat;
var k=[];-180<=h&&180>=h&&-90<=g&&90>=g?k=[c.lng,c.lat,f.lng,f.lat]:(f=a.mercatorToLnglat(this.ne.lng,this.ne.lat),c=a.mercatorToLnglat(this.sw.lng,this.sw.lat),k=c.concat(f));return this.supercluster.getClusters(k,this.zoom).map(function(a){var b=0;a.properties&&a.properties.point_count&&(b=a.properties.point_count);return{geometry:a.geometry,count:b}})}},{key:"pick",value:function(a,c){return this.shapeLayer.pick(a,c)}},{key:"shouldUpdate",value:function(){if(!this.data)return!1;var a=this.map,
c=Math.floor(a.getZoom()),f=this.options,g=f.maxZoom;f=f.minZoom;c>g?c=g:c<f&&(c=f);if(this.zoom!==c)return this.zoom=c,!0;if(!this.options.enableCluster)return!1;c=a.getBounds();a=c.ne;c=c.sw;if(!(a&&c&&this.ne&&this.sw))return!1;if(this.ne.lng!==a.lng||this.ne.lat!==a.lat||this.sw.lng!==c.lng||this.sw.lat!==c.lat)return!0}},{key:"render",value:function(b){this.shouldUpdate()?this.refreshLayer():pb(a.prototype.__proto__||P(a.prototype),"render",this).call(this,b)}}]);return a}(Hb),hd=function(){function c(a,
b){L(this,c);this.map=a;this.options=b||{};this.eventMap={}}M(c,[{key:"onResize",value:function(a){}},{key:"onUpdate",value:function(a){throw"\u672a\u5b9e\u73b0onUpdate\u65b9\u6cd5";}},{key:"getContainer",value:function(){throw"\u672a\u5b9e\u73b0getContainer\u65b9\u6cd5";}},{key:"getSize",value:function(){throw"\u672a\u5b9e\u73b0getSize\u65b9\u6cd5";}},{key:"getTilt",value:function(){throw"\u672a\u5b9e\u73b0getTilt\u65b9\u6cd5";}},{key:"getHeading",value:function(){throw"\u672a\u5b9e\u73b0getHeading\u65b9\u6cd5";
}},{key:"getZoomUnits",value:function(){throw"\u672a\u5b9e\u73b0getZoomUnits\u65b9\u6cd5";}},{key:"getCenter",value:function(){throw"\u672a\u5b9e\u73b0getCenter\u65b9\u6cd5";}},{key:"getMapType",value:function(){throw"\u672a\u5b9e\u73b0getMapType\u65b9\u6cd5";}},{key:"lnglatToMercator",value:function(a,b){if("gcj02"===this.options.coordinateSystem)return b=b*Math.PI/180,b=3189068.5*Math.log((1+Math.sin(b))/(1-Math.sin(b))),[parseFloat((a*Math.PI/180*6378137).toFixed(2)),parseFloat(b.toFixed(2))];
a=Ca.convertLL2MC({lng:a,lat:b});return[a.lng,a.lat]}}]);return c}(),Nl=function(c){function a(b){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b));b.eventMap={};return b}S(a,c);M(a,[{key:"onResize",value:function(a){this.map.addEventListener("resize",a);this.eventMap.resize=a}},{key:"onMousemove",value:function(a){a=this.extendCallback(a);this.map.addEventListener("mousemove",a);this.eventMap.mousemove=a}},{key:"onClick",value:function(a){a=this.extendCallback(a);this.map.addEventListener("click",
a);this.eventMap.click=a}},{key:"onDblClick",value:function(a){a=this.extendCallback(a);this.map.addEventListener("dblclick",a);this.eventMap.dblclick=a}},{key:"onRightClick",value:function(a){a=this.extendCallback(a);this.map.addEventListener("rightclick",a);this.eventMap.rightclick=a}},{key:"onUpdate",value:function(a){this.map.addEventListener("update",a);this.map.addEventListener("onearthstatuschange",a);this.eventMap.update=a;this.eventMap.onearthstatuschange=a}},{key:"extendCallback",value:function(a){return function(b){a(Y(b,
{x:b.x,y:b.y}))}}},{key:"unbind",value:function(a){var b=this;this.eventMap[a]?(this.map.removeEventListener(a,this.eventMap[a]),delete this.eventMap[a]):(pa(this.eventMap).forEach(function(a){b.map.removeEventListener(a,b.eventMap[a])}),this.eventMap={})}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return this.map.getTilt()}},
{key:"getHeading",value:function(){return this.map.getHeading()}},{key:"getZoomUnits",value:function(){return this.map.getZoomUnits()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"getCenter",value:function(){var a=this.map.getCenter();-180<=a.lng&&180>=a.lng&&(a=this.map.lnglatToMercator(a.lng,a.lat),a={lng:a[0],lat:a[1]});return a}},{key:"getMapType",value:function(){return this.map.getMapType()}},{key:"lnglatToMercator",value:function(a,c){return this.map.lnglatToMercator(a,
c)}},{key:"mercatorToLnglat",value:function(a,c){return this.map.mercatorToLnglat(a,c)}}]);return a}(hd),Ol=function(c){function a(b){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b));b.div=document.createElement("div");b.div.style.position="absolute";b.div.style.userSelect="none";b.map.getPanes().mapPane.appendChild(b.div);b.eventMap={};return b}S(a,c);M(a,[{key:"onResize",value:function(a){this.map.addEventListener("resize",a);this.eventMap.resize=a}},{key:"onMousemove",value:function(a){a=this.extendCallback(a);
this.map.addEventListener("mousemove",a);this.eventMap.mousemove=a}},{key:"onClick",value:function(a){a=this.extendCallback(a);Xg?(this.map.addEventListener("touchend",a),this.eventMap.touchend=a):(this.map.addEventListener("click",a),this.eventMap.click=a)}},{key:"onDblClick",value:function(a){a=this.extendCallback(a);this.map.addEventListener("dblclick",a);this.eventMap.dblclick=a}},{key:"onRightClick",value:function(a){a=this.extendCallback(a);this.map.addEventListener("rightclick",a);this.eventMap.rightclick=
a}},{key:"changeCanvas",value:function(){var a=this.map,c=a.getSize(),f=a.getCenter();a=a.pointToOverlayPixel(f);this.div.style.left=a.x-c.width/2+"px";this.div.style.top=a.y-c.height/2+"px"}},{key:"onUpdate",value:function(a){var b=this,c=function(){b.changeCanvas();a()};this.map.addEventListener("moveend",c);this.map.addEventListener("moving",c);this.map.addEventListener("zoomend",c);this.eventMap.moveend=c;this.eventMap.moving=c;this.eventMap.zoomend=c}},{key:"extendCallback",value:function(a){return function(b){a(Y(b,
{x:b.pixel.x,y:b.pixel.y}))}}},{key:"unbind",value:function(){var a=this;pa(this.eventMap).forEach(function(b){a.map.removeEventListener(b,a.eventMap[b])});this.eventMap={}}},{key:"getContainer",value:function(){return this.div}},{key:"getSize",value:function(){return this.map.getSize()}},{key:"getBounds",value:function(){return this.map.getBounds()}},{key:"getTilt",value:function(){return 0}},{key:"getHeading",value:function(){return 0}},{key:"getZoom",value:function(){return this.map.getZoom()}},
{key:"getZoomUnits",value:function(){var a=this.getZoom();return this.map.getMapType().getZoomUnits(a)}},{key:"getCenter",value:function(){var a=this.map.getMapType().getProjection().lngLatToPoint(this.map.getCenter());return{lng:a.x,lat:a.y}}},{key:"lnglatToMercator",value:function(a,c){a=this.map.getMapType().getProjection().lngLatToPoint({lng:a,lat:c});return[a.x,a.y]}},{key:"mercatorToLnglat",value:function(a,c){a=this.map.getMapType().getProjection().pointToLngLat({lng:a,lat:c});return[a.lng,
a.lat]}}]);return a}(hd),Pl=function(c){function a(b){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b));b.eventMap={};return b}S(a,c);M(a,[{key:"onResize",value:function(a){window.addEventListener("resize",a);this.eventMap.resize=a}},{key:"onUpdate",value:function(a){}},{key:"unbind",value:function(){var a=this;pa(this.eventMap).forEach(function(b){window.removeEventListener(b,a.eventMap[b])});this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container.getElementsByClassName("cesium-widget")[0]}},
{key:"getSize",value:function(){var a=this.map;return{width:a.canvas.clientWidth,height:a.canvas.clientHeight}}},{key:"getTilt",value:function(){return 180*this.map.camera.pitch/Math.PI+90}},{key:"getHeading",value:function(){return 360-180*this.map.camera.heading/Math.PI}},{key:"getZoomUnits",value:function(){var a=this.map;return 6.8*a.scene.globe.ellipsoid.cartesianToCartographic(a.camera.position).height/6500}},{key:"getZoom",value:function(){return 10}},{key:"getCenter",value:function(){var a=
this.map;a=a.camera.pickEllipsoid(new Cesium.Cartesian2(a.canvas.clientWidth/2,a.canvas.clientHeight/2));a=Cesium.Ellipsoid.WGS84.cartesianToCartographic(a);a=this.getMercator([180*a.longitude/Math.PI,180*a.latitude/Math.PI]);return{lng:a[0],lat:a[1]}}},{key:"getMercator",value:function(a){var b=[];b[0]=a[0]*Math.PI/180*6378137;a=a[1]*Math.PI/180;b[1]=3189068.5*Math.log((1+Math.sin(a))/(1-Math.sin(a)));return b}}]);return a}(hd),Ql=function(c){function a(b){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,
b));b.eventMap={};return b}S(a,c);M(a,[{key:"onResize",value:function(a){window.addEventListener("resize",a);this.eventMap.resize=a}},{key:"onUpdate",value:function(a){}},{key:"unbind",value:function(){var a=this;pa(this.eventMap).forEach(function(b){window.removeEventListener(b,a.eventMap[b])});this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",
value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",value:function(){return this.map.zoomUnits}},{key:"getZoom",value:function(){return this.map.zoom}},{key:"getCenter",value:function(){return this.map.center}}]);return a}(hd),Rl=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.eventMap={};return b}S(a,c);M(a,[{key:"onResize",value:function(a){window.addEventListener("resize",a);this.eventMap.resize=
a}},{key:"onUpdate",value:function(a){}},{key:"unbind",value:function(){var a=this;pa(this.eventMap).forEach(function(b){window.removeEventListener(b,a.eventMap[b])});this.eventMap={}}},{key:"getContainer",value:function(){return this.map.container}},{key:"getSize",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:"getTilt",value:function(){return this.map.tilt}},{key:"getHeading",value:function(){return this.map.heading}},{key:"getZoomUnits",
value:function(){return this.map.zoomUnits}},{key:"getCenter",value:function(){return this.map.center}}]);return a}(hd),ni=function(){function c(a,b){L(this,c);b=b||{};"bmap"===b.mapType?this.map=new Ol(a,b):"blank"===b.mapType?this.map=new Ql(a,b):"cesium"===b.mapType?this.map=new Pl(a,b):"three"===b.mapType?this.map=new Rl(a,b):(b.mapType="bmapgl",this.map=new Nl(a,b));this.map.type=b.mapType;this.options=b||{};this.renderArr=[];(a=b.canvas)||(a=document.createElement("canvas"));this.canvas=a;this.gl=
b.gl?b.gl:Jf(a);this.gl.getExtension("OES_element_index_uint");this.changeSize();this.projectionMatrix=H.create(Float64Array);this.orthoMatrix=H.create(Float64Array);this.matrix=H.create(Float64Array);this.viewMatrix=H.create(Float64Array);this.pointToPixelMatrix=H.create(Float64Array);this.pixelToViewMatrix=H.create(Float64Array);this.fovy=35;this.fps=Math.min(b.fps,60)||60;this.renderTime=(new Date).valueOf();this._animation=this.animation.bind(this);this._update=this.update.bind(this);this.onInitialize(this.options.onInitialize);
this.options.onRender&&this.renderArr.push(this.options.onRender);this.stateManager=new Fh({gl:this.gl});this.pickFBO=new va(this.gl);this.transferOptions={};this.bind()}M(c,[{key:"bind",value:function(){var a=this,b=this.map;b.onResize(function(){a.changeSize();a.render()});b.onUpdate(this._update);b.onClick&&b.onClick(function(b){a.onClick&&a.onClick(b)});b.onDblClick&&b.onDblClick(function(b){a.onDblClick&&a.onDblClick(b)});b.onRightClick&&b.onRightClick(function(b){a.onRightClick&&a.onRightClick(b)});
b.onMousemove&&b.onMousemove(function(b){a.onMousemove&&a.onMousemove(b)});this.options.canvas||b.getContainer().appendChild(this.canvas)}},{key:"unbind",value:function(){var a=this.map;a.unbind&&a.unbind()}},{key:"setOptions",value:function(a){this.options=a}},{key:"onInitialize",value:function(a){a&&(this.transferOptions=a.bind(this)(this.gl)||{})}},{key:"bindFramebuffer",value:function(a){var b=this.gl;a?b.bindFramebuffer(b.FRAMEBUFFER,a.framebuffer):b.bindFramebuffer(b.FRAMEBUFFER,null)}},{key:"saveFramebuffer",
value:function(){var a=this.gl;this.preFramebuffer=a.getParameter(a.FRAMEBUFFER_BINDING)}},{key:"restoreFramebuffer",value:function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.preFramebuffer)}},{key:"onRender",value:function(a){this.renderArr.push(a)}},{key:"changeSize",value:function(){var a=this.canvas;if(a){var b=a.style,c=this.map.getSize(),f=window.devicePixelRatio;a.width=c.width*f;a.height=c.height*f;b.cssText="position: absolute;left:0;top:0;width:"+c.width+"px;height:"+c.height+
"px;z-index:2;";c=this.options;"cesium"!==c.mapType||c.canvas||(b.pointerEvents="none");this.gl.viewport(0,0,a.width,a.height)}}},{key:"update",value:function(){!1===this.options.autoUpdate||this.isAnimation&&60<=this.fps||this.render()}},{key:"render",value:function(){if(this.map&&this.gl){var a=this.options,b=this.projectionMatrix,c=this.viewMatrix;if("three"===a.mapType)c=this.map.map.camera,b=c.projectionMatrix.elements,c=c.matrixWorldInverse.elements;else if("cesium"===a.mapType){c=this.map.map;
var f=c.camera.frustum.projectionMatrix;b=new Float32Array([f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]]);f=c.camera.viewMatrix;c=new Float32Array([f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]])}else"B_EARTH_MAP"===this.map.map.mapType?(b=this.map.map.getEarth().scene._camera.getProjectionMatrix(),c=this.map.map.getEarth().scene._camera.getModelViewMatrix()):(this.updateProjectionMatrix(),this.updateModelViewMatrix());
f=H.multiply(this.matrix,b,c);Y(this.transferOptions,{gl:this.gl,matrix:f,pointToPixelMatrix:this.pointToPixelMatrix,pixelToViewMatrix:this.pixelToViewMatrix,projectionMatrix:b,orthoMatrix:this.orthoMatrix,viewMatrix:c,stateManager:this.stateManager});"three"!==a.mapType&&"cesium"!==a.mapType&&!1!==a.autoUpdate&&this.clear();for(a=0;a<this.renderArr.length;a++)this.renderArr[a]&&this.renderArr[a].bind(this)(this.transferOptions)}}},{key:"clear",value:function(a){var b=this.gl,c=this.options.clearColor||
[0,0,0,0];b.clearColor(c[0],c[1],c[2],c[3]);a&&(a instanceof Array||(a=ia(a).unitArray()),b.clearColor(a[0],a[1],a[2],a[3]));b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)}},{key:"updateProjectionMatrix",value:function(){var a=this.gl.canvas.width/this.gl.canvas.height,b=this.options.cameraNear||1,c=this.options.cameraFar||4E3;H.perspective(this.projectionMatrix,wa(this.fovy),a,b,c);a=this.map.getSize();H.ortho(this.orthoMatrix,-a.width/2,a.width/2,-a.height/2,a.height/2,b,c)}},{key:"updateModelViewMatrix",
value:function(){var a=this.map,b=this.viewMatrix,c=this.pointToPixelMatrix,f=this.pixelToViewMatrix;H.identity(b);H.identity(c);H.identity(f);var g=a.getSize();g=Math.round(-g.height/(2*Math.tan(wa(this.fovy)/2)));H.translate(f,f,[0,0,g]);H.rotate(f,f,wa(a.getTilt()),[-1,0,0]);H.rotate(f,f,wa(a.getHeading()),[0,0,-1]);g=a.getCenter();var h=this.options.pointOffset||[0,0];a=a.getZoomUnits();H.translate(c,c,[(h[0]-g.lng)/a,(h[1]-g.lat)/a,0]);a=1/a;H.scale(c,c,[a,a,a]);H.multiply(b,f,c)}},{key:"destroy",
value:function(){this.stopAnimation();this.unbind();var a=this.gl.getExtension("WEBGL_lose_context");a&&a.loseContext();this.map.getContainer().removeChild(this.canvas);this.gl=this.canvas=null}},{key:"animation",value:function(){if(this.isAnimation){if(60<=this.fps)this.render();else{var a=(new Date).valueOf(),b=Math.floor(1E3/this.fps),c=a-this.renderTime;c>b&&(this.render(),this.renderTime=a-c%b)}window.requestAnimationFrame(this._animation)}}},{key:"startAnimation",value:function(){this.isAnimation||
(this.isAnimation=!0,window.requestAnimationFrame(this._animation))}},{key:"stopAnimation",value:function(){this.isAnimation=!1}}]);return c}(),id=function(c){function a(b){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b));b.bufferData=[];return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:[.1,.1,.9,1],blend:"normal",shape:"circle",size:5,unit:"px",borderWidth:0,borderColor:[1,1,1,.9],polygonOffset:[0,0],depthTest:!0}}},{key:"initialize",value:function(a){this.gl=a;var b=
this.getOptions(),c=[];b.enablePicked&&c.push("PICK");b.shape&&"circle"===b.shape&&c.push("SHAPE_CIRCLE");this.program=new X(this.gl,{vertexShader:"attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aBorderWidth;attribute vec4 aBorderColor;uniform mat4 uMatrix;uniform vec4 uSelectedColor;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;varying vec4 vColor;varying float vSize;varying float vBorderWidth;varying vec4 vBorderColor;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}float size=aSize*devicePixelRatio;float borderWidth=aBorderWidth*devicePixelRatio;gl_Position=uMatrix*vec4(aPos.xyz,1.0);gl_PointSize=uUnitPx ? size : size/zoomUnits;vSize=size;vBorderWidth=borderWidth;vBorderColor=aBorderColor;\n#if defined(PICK)\nif(mapvIsPicked()){vColor=uSelectedColor;}\n#endif\n}",
fragmentShader:"varying vec4 vColor;varying float vSize;varying float vBorderWidth;varying vec4 vBorderColor;void main(void){vec4 color=vColor;\n#if defined(SHAPE_CIRCLE)\nfloat d=distance(gl_PointCoord,vec2(0.5,0.5));float ratio=1.0-vBorderWidth/vSize*2.0;if(d>0.5){discard;}if(d>ratio*0.5){color=vBorderColor;}float blur=1.0;blur=1.0-smoothstep(0.49,0.5,d);color.a*=blur;\n#else\nfloat ratio=vBorderWidth/vSize;if(gl_PointCoord.x<ratio||gl_PointCoord.x>1.0-ratio||gl_PointCoord.y<ratio||gl_PointCoord.y>1.0-ratio){color=vBorderColor;}\n#endif\ngl_FragColor=color;}",
defines:c},this);this.buffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});b=[{stride:52,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:52,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12},{stride:52,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:28},{stride:52,name:"aBorderWidth",buffer:this.buffer,size:1,type:"FLOAT",offset:32},{stride:52,name:"aBorderColor",buffer:this.buffer,size:4,type:"FLOAT",offset:36}];b=b.concat(this.getCommonAttributes());
this.vertexArray=new la({gl:a,program:this.program,attributes:b})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null);this.options=this.data=this.buffer=this.program=this.bufferData=this.vertexArray=null}},{key:"onChanged",value:function(a,c){if(this.gl){for(var b=[],d=a.color,h=a.size,k=a.borderWidth,l=a.borderColor,p=0;p<c.length;p++){var n=this.normizedPoint(c[p].geometry.coordinates),m=this.getProperty("color",d,c[p]);m=this.normizedColor(m);var q=
this.getProperty("size",h,c[p]);q=Number(q);var r=this.getProperty("borderWidth",k,c[p]);r=Number(r);var u=this.getProperty("borderColor",l,c[p]);u=this.normizedColor(u);n=this.addMultipleCoords(n);for(var v=0;v<n.length;v++){var t=n[v];b.push(t[0],t[1],Number(t[2]||0));b.push(m[0],m[1],m[2],m[3]);b.push(q);b.push(r,u[0],u[1],u[2],u[3])}}this.bufferData=b;this.buffer.updateData(new Float32Array(b));a.enablePicked&&this.parsePickData(c)}}},{key:"parsePickData",value:function(a){var b=this.getOptions(),
c=[];if(b.enablePicked)for(var g=0;g<a.length;g++){var h=this.indexToRgb(g);c.push(h[0]/255,h[1]/255,h[2]/255);b.repeat&&(c.push(h[0]/255,h[1]/255,h[2]/255),c.push(h[0]/255,h[1]/255,h[2]/255))}b.enablePicked&&this.pickBuffer.updateData(new Float32Array(c))}},{key:"render",value:function(a){var b=a.gl,c=a.matrix,g=a.isPickRender;if(!(0>=this.bufferData.length)){var h=this.getOptions(),k=this.program;k.use(b);a=this.getCommonUniforms(a);a=Y(a,{uMatrix:c,uUnitPx:"px"===h.unit,zoomUnits:this.map.getZoomUnits(),
devicePixelRatio:window.devicePixelRatio});k.setUniforms(a);this.setGLState({blend:g?!1:!0,blendFunc:"lighter"===h.blend?[b.SRC_ALPHA,b.ONE]:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA],blendEquation:b.FUNC_ADD,polygonOffset:h.polygonOffset,depthTest:h.depthTest});this.vertexArray.bind();b.drawArrays(b.POINTS,0,this.bufferData.length/13)}}}]);return a}(ca),Sl=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.bufferDataArr=[];b.indexDataArr=[];b.vertexBuffer=[];b.indexBuffer=
[];b.position=[];b.opacity=1;b.currentScale=1;b.autoUpdate=!0;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:[.1,.1,.9,1],size:5,segs:32,scale:2,unit:"m",step:.1}}},{key:"initialize",value:function(a){this.gl=a;this.program=new X(this.gl,{vertexShader:"uniform mat4 u_projectionMatrix;uniform mat4 u_modelViewMatrix;uniform mat4 u_modelMatrix;uniform float u_opacity;attribute vec4 aPos;attribute vec4 aColor;varying vec4 vColor;void main(){vColor=aColor;vColor.a=u_opacity;gl_Position=u_projectionMatrix*u_modelViewMatrix*u_modelMatrix*vec4(aPos.xyz,1.0);}",
fragmentShader:"precision highp float;varying vec4 vColor;void main(){if(vColor.a==0.0){discard;}gl_FragColor=vColor;}"})}},{key:"destroy",value:function(){this.data=this.program=this.position=this.indexBuffer=this.vertexBuffer=this.indexDataArr=this.bufferDataArr=null}},{key:"onChanged",value:function(a,c){var b=this.gl;if(b&&(this.currentScale=this.opacity=1,(this.data=c)&&c.length)){var d=a.color,h=a.segs;a=a.size;for(var k=360/h,l=0;l<c.length;l++){var p=[],n=[],m=this.normizedPoint(c[l].geometry.coordinates),
q=d;"[object Function]"===Object.prototype.toString.call(q)?q=q(c[l]):(q=c[l].color||d,"properties"in c[l]&&"color"in c[l].properties&&(q=c[l].properties.color));q=this.normizedColor(q);var r="[object Function]"===Object.prototype.toString.call(a)?a(c[l]):Number(a);var u=m[0],v=m[1];p.push(0,0,-.5);p.push(q[0],q[1],q[2],0);for(var t=1,x=0;t<=h;t++,x+=k)p.push(m[0]-u+Math.cos(Math.PI/180*x)*r,m[1]-v+Math.sin(Math.PI/180*x)*r,-.5),p.push(q[0],q[1],q[2],this.opacity),t===h?n.push(0,0+t,1):n.push(0,0+
t,0+t+1);q=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,q);b.bufferData(b.ARRAY_BUFFER,new Float32Array(p),b.STATIC_DRAW);this.vertexBuffer[l]=q;this.bufferDataArr[l]=p;b.bindBuffer(b.ARRAY_BUFFER,null);p=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,p);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),b.STATIC_DRAW);this.indexBuffer[l]=p;this.indexDataArr[l]=n;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);this.position[l]=[m[0],m[1]]}this.webglLayer&&this.webglLayer.render()}}},{key:"render",
value:function(a){var b=a.gl,c=a.projectionMatrix,g=a.viewMatrix;a=this.program;b.useProgram(a.program);b.uniformMatrix4fv(a.uniforms.u_projectionMatrix,!1,c);b.uniformMatrix4fv(a.uniforms.u_modelViewMatrix,!1,g);c=this.opacity;void 0!==this.options.opacity&&(c=this.options.opacity);b.uniform1f(a.uniforms.u_opacity,c);this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:[b.SRC_ALPHA,b.DST_ALPHA]});b.enableVertexAttribArray(a.attributes.aPos);b.enableVertexAttribArray(a.attributes.aColor);
for(c=0;c<this.bufferDataArr.length;c++)if(!(0>=this.bufferDataArr[c].length)){g=(new Float32Array(this.bufferDataArr[c])).BYTES_PER_ELEMENT;b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer[c]);b.vertexAttribPointer(a.attributes.aColor,4,b.FLOAT,!1,7*g,3*g);b.vertexAttribPointer(a.attributes.aPos,3,b.FLOAT,!1,7*g,0);g=this.position[c];var h=H.create(),k=[this.currentScale,this.currentScale,this.currentScale];"px"===this.options.unit&&this.map&&(k=this.map.getZoomUnits(),k=[this.currentScale*k,this.currentScale*
k,this.currentScale]);H.identity(h);H.translate(h,h,[g[0],g[1],0]);H.scale(h,h,k);b.uniformMatrix4fv(a.uniforms.u_modelMatrix,!1,h);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer[c]);b.drawElements(b.TRIANGLES,this.indexDataArr[c].length,b.UNSIGNED_SHORT,0);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null)}a=this.getOptions();b=a.scale;a=a.step;this.opacity-=a/10;this.currentScale+=b*a;0>this.opacity&&(this.currentScale=this.opacity=1)}}]);return a}(ca),Tl=function(c){function a(b){L(this,
a);b=R(this,(a.__proto__||P(a)).call(this,b));b.bufferData=[];b.date=new Date;b.autoUpdate=!0;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:[.1,.1,.9,1],blend:"normal",size:20,unit:"px",duration:2}}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions();this.program=new X(this.gl,{vertexShader:"attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 uMatrix;uniform vec4 uSelectedColor;uniform float uTime;uniform float duration;uniform float zoomUnits;varying vec4 vColor;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}float percent=mod(uTime,duration)/duration;vColor.a=1.-percent;gl_Position=uMatrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize/zoomUnits*percent;\n#if defined(PICK)\nif(mapvIsPicked()){vColor=uSelectedColor;}\n#endif\n}",
fragmentShader:"varying vec4 vColor;void main(void){vec4 color=vColor;float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}float blur=1.0;blur=1.0-smoothstep(0.49,0.5,d);color.a*=blur;gl_FragColor=color;}",defines:b.enablePicked?["PICK"]:[]},this);this.buffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});b=[{stride:32,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:32,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:12},{stride:32,name:"aSize",
buffer:this.buffer,size:1,type:"FLOAT",offset:28}];b=b.concat(this.getCommonAttributes());this.vertexArray=new la({gl:a,program:this.program,attributes:b})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null);this.options=this.data=this.buffer=this.program=this.bufferData=this.vertexArray=null}},{key:"onChanged",value:function(a,c){if(this.gl){for(var b=[],d=a.color,h=a.size,k=0;k<c.length;k++){var l=c[k].geometry.coordinates,p=d;"[object Function]"===
Object.prototype.toString.call(p)?p=p(c[k]):(p=c[k].color||d,"properties"in c[k]&&"color"in c[k].properties&&(p=c[k].properties.color));p=this.normizedColor(p);l=this.normizedPoint(l);var n=c[k].size||h;"properties"in c[k]&&"size"in c[k].properties&&(n=c[k].properties.size);n="[object Function]"===Object.prototype.toString.call(n)?n(c[k]):Number(n);b.push(l[0],l[1],Number(l[2]||0));b.push(p[0],p[1],p[2],p[3]);b.push(n*window.devicePixelRatio)}this.bufferData=b;this.buffer.updateData(new Float32Array(b));
a.enablePicked&&this.parsePickData(c)}}},{key:"parsePickData",value:function(a){var b=this.getOptions(),c=[];if(b.enablePicked)for(var g=0;g<a.length;g++){var h=this.indexToRgb(g);c.push(h[0]/255,h[1]/255,h[2]/255)}b.enablePicked&&this.pickBuffer.updateData(new Float32Array(c))}},{key:"render",value:function(a){var b=a.gl,c=a.matrix,g=a.isPickRender;if(!(0>=this.bufferData.length)){var h=this.getOptions(),k=this.program;k.use(b);this.vertexArray.bind();a=this.getCommonUniforms(a);var l=1;"m"===h.unit&&
this.map&&(l=this.map.getZoomUnits());a=Y(a,{zoomUnits:l,uTime:(new Date-this.date)/1E3,duration:h.duration,uMatrix:c});k.setUniforms(a);this.setGLState({blend:g?!1:!0,blendFunc:"lighter"===h.blend?[b.SRC_ALPHA,b.ONE]:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA],blendEquation:b.FUNC_ADD});b.drawArrays(b.POINTS,0,this.bufferData.length/8)}}}]);return a}(ca),Ul=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.bufferData=[];b.startTime=Number(b.options.startTime)||0;b.endTime=
Number(b.options.endTime);b.time=b.startTime;b.segs=Number(b.options.segs)||10;b.autoUpdate=!0;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:[.9,.1,.1,1],trailLength:3,height:100,step:.1,segs:10,polygonOffset:[0,0]}}},{key:"setTime",value:function(a){this.time=a}},{key:"initialize",value:function(a){this.gl=a;this.program=new X(this.gl,{vertexShader:"precision mediump float;attribute vec4 aPos;uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;varying float vTime;void main(){gl_Position=u_matrix*vec4(aPos.xyz,1.0);vTime=1.0-((currentTime-aPos.w)/trailLength);}",
fragmentShader:"precision mediump float;uniform vec3 uFragColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(uFragColor,1.0*vTime);}"});this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer)}},{key:"destroy",value:function(){this.data=this.program=this.buffer=this.bufferData=null}},{key:"onChanged",value:function(a,c){var b=this.gl;if(b){this.buffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.buffer);for(var d=[],h=a.height,k=0;k<c.length;k++){var l=
c[k].geometry.coordinates;var p="[object Function]"===Object.prototype.toString.call(h)?h(c[k]):Number(h);for(var n=0,m=0;m<this.segs;m++){var q=this.normizedPoint(l);d.push(q[0],q[1],n);void 0===l[2]?d.push(m):d.push(Number(l[2]));n+=p/this.segs;d.push(q[0],q[1],n);void 0===l[2]?d.push(m+1):d.push(Number(l[2]))}}void 0===a.endTime&&(this.endTime=this.segs);this.bufferData=d;b.bufferData(b.ARRAY_BUFFER,new Float32Array(d),b.STATIC_DRAW);this.webglLayer&&this.webglLayer.render()}}},{key:"render",value:function(a){var b=
a.gl,c=a.matrix;a=this.program;b.useProgram(a.program);b.uniformMatrix4fv(a.uniforms.u_matrix,!1,c);b.bindBuffer(b.ARRAY_BUFFER,this.buffer);b.enableVertexAttribArray(a.attributes.aPos);b.vertexAttribPointer(a.attributes.aPos,4,b.FLOAT,!1,0,0);c=this.normizedColor(this.options.color);b.uniform3f(a.uniforms.uFragColor,c[0],c[1],c[2]);b.uniform1f(a.uniforms.currentTime,this.time);b.uniform1f(a.uniforms.trailLength,this.options.trailLength);this.setGLState({blend:!0,blendFunc:[b.SRC_ALPHA,b.ONE],blendEquation:b.FUNC_ADD,
polygonOffset:this.options.polygonOffset});b.drawArrays(b.LINES,0,this.bufferData.length/4);this.time+=Number(this.options.step);this.time>1.5*this.endTime&&(this.time=this.startTime)}}]);return a}(ca),oi=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.index=[];c=b.canvas=document.createElement("canvas");b.ctx=c.getContext("2d");b.iconHash=new Kb;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{flat:!1,unit:"px",scale:1,angle:0,opacity:1,offset:[0,
0],padding:[0,0]}}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions();this.texture=null;this.program=new X(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute vec2 a_size;attribute vec2 a_offset;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform float devicePixelRatio;uniform float u_zoom_units;uniform float u_zIndex;uniform float u_scale;uniform bool u_unit_px;uniform bool u_flat;varying vec2 v_texture_coord;/***\u70b9A(x,y)\uff0c\u7ed5\u539f\u70b9\u987a\u65f6\u9488\u65cb\u8f6c\u89d2\u5ea6a\u65b0\u5750\u6807\u7684\u8ba1\u7b97\u516c\u5f0f*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)+size.x*sin(a_rotation);}else if(corner==2.0){x+=size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)-size.x*sin(a_rotation);}else if(corner==3.0){x+=size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)-size.x*sin(a_rotation);}else{x+=-size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)+size.x*sin(a_rotation);}return vec3(x,y,coord.z);}void main(){v_texture_coord=a_texture_coord;if(u_flat){vec2 offset=a_offset;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;offset*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=u_zIndex;gl_Position=u_matrix*vec4(current.x+offset[0],current.y-offset[1],current.z,1.0);}else{vec4 position=u_matrix*vec4(a_pos,1.0);vec3 screen=position.xyz/position.w;vec2 halfSize=a_size/MAPV_resolution*devicePixelRatio*u_scale;vec2 offset=a_offset*2./MAPV_resolution*devicePixelRatio;if(!u_unit_px){halfSize/=u_zoom_units;offset/=u_zoom_units;}vec3 current=transformCoord(screen,halfSize,a_corner);current.xy=current.xy-offset;current.z+=u_zIndex;gl_Position=vec4(current,1.0);}}",
fragmentShader:"precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform float u_opacity;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}textureColor.a*=u_opacity;gl_FragColor=textureColor;\n#if defined(PICK)\nif(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}\n#endif\n}",defines:b.enablePicked?["PICK"]:[]},this);this.vertexBuffer=
new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.uvBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});b=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:36,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:16},{name:"a_offset",buffer:this.vertexBuffer,size:2,
stride:36,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:32},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}];b=b.concat(this.getCommonAttributes());this.vertexArray=new la({gl:a,program:this.program,attributes:b})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null);this.canvas=this.iconHash=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=
this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(a,c){this.gl&&this.processCache(a,c,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}},{key:"processCache",value:function(a,c,f){var b=this;this.cachedData=[];for(var d=a.icon,k=a.width,l=a.height,p=a.offset,n=a.angle,m=0;m<c.length;m++){var q=this.normizedPoint(c[m].geometry.coordinates),r=this.getProperty("icon",d,c[m]),u=this.getProperty("width",k,c[m]),v=this.getProperty("height",l,c[m]),t=this.getProperty("offset",
p,c[m]),x=this.getProperty("angle",n,c[m]);q&&r&&(this.cachedData.push({point:q,icon:r,width:u,height:v,offset:t,angle:x}),this.iconHash.get(r)||this.iconHash.set(r,r))}c=Qd(this.iconHash.entries()).filter(function(a){return"string"===typeof a[1]}).map(function(a){var c=ka(a,2)[0];return new Ib(function(a,d){b.url2canvas(c,function(d){b.iconHash.set(c,d);a()})})});Ib.all(c).then(function(c){b.buildSprite(a);!1!==f.autoRender&&b.webglLayer&&b.webglLayer.render()})}},{key:"buildSprite",value:function(a){var b=
a.padding,c=this.canvas,g=this.ctx,h=[],k=new Kb,l=!0,p=!1,n=void 0;try{for(var m=ec(this.iconHash),q;!(l=(q=m.next()).done);l=!0){var r=ka(q.value,2),u=r[1];if("string"!==typeof u){var v=u.width,t=u.height;h.push({w:v+b[0],h:t+b[0],width:v,height:t,key:r[0],icon:u})}}}catch(x){p=!0,n=x}finally{try{!l&&m.return&&m.return()}finally{if(p)throw n;}}p=dc(h);for(l=0;l<h.length;l++)n=h[l],k.get(n.key)||k.set(n.key,n);l=gb(p.w);p=gb(p.h);c.width=l||1;c.height=p||1;g.save();for(c=0;c<h.length;c++)n=h[c],
g.drawImage(n.icon,n.x+b[0],n.y+b[1],n.width,n.height);g.restore();this.loadTexture();this.buildVertex(a,k,l,p)}},{key:"buildVertex",value:function(a,c,f,g){a=a.enablePicked;for(var b=[],d=[],l=[],p=[],n=0;n<this.cachedData.length;n++){var m=this.cachedData[n],q=m.point,r=m.width,u=m.height,v=m.offset,t=m.angle;if(m=c.get(m.icon)){r=r||m.icon.width;u=u||m.icon.height;var x=ka(q,3);q=x[0];var w=x[1];x=x[2];for(var y=0;4>y;y++)b.push(q,w,x),b.push(y),b.push(r,u),b.push.apply(b,Z(v)),b.push(t*Math.PI/
180);r=m.x/f;u=(m.x+m.w)/f;v=(m.y+m.h)/g;m=m.y/g;d.push(r,v,r,m,u,m,u,v);m=4*n;l.push(m,m+2,m+1,m,m+3,m+2);a&&(m=this.indexToRgb(n),p.push(m[0]/255,m[1]/255,m[2]/255),p.push(m[0]/255,m[1]/255,m[2]/255),p.push(m[0]/255,m[1]/255,m[2]/255),p.push(m[0]/255,m[1]/255,m[2]/255))}}this.index=l;this.vertexBuffer.updateData(new Float32Array(b));this.uvBuffer.updateData(new Float32Array(d));this.indexBuffer.updateData(new Uint32Array(l));a&&this.pickBuffer.updateData(new Float32Array(p))}},{key:"render",value:function(a){if(this.cachedData&&
this.cachedData.length&&this.iconHash&&this.texture){var b=a.gl,c=a.matrix,g=this.getOptions(),h=this.program;h.use(b);this.setGLState({blend:!0,blendFunc:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA]});h.setUniforms(Y(this.getCommonUniforms(a),{u_icon:this.texture,u_matrix:c,u_flat:g.flat,u_unit_px:"px"===g.unit,u_zoom_units:this.map.getZoomUnits(),u_scale:g.scale,u_opacity:g.opacity,u_zIndex:g.zIndex,devicePixelRatio:window.devicePixelRatio}));0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),
b.drawElements(b.TRIANGLES,this.index.length,b.UNSIGNED_INT,0))}}},{key:"url2canvas",value:function(a,c){if("object"===("undefined"===typeof a?"undefined":Na(a)))c(a);else{var b=new Image;b.crossOrigin="anonymous";b.onload=function(){var a=b.width,d=b.height,f=document.createElement("canvas");f.width=a;f.height=d;f.getContext("2d").drawImage(b,0,0,a,d);c(f)};b.onerror=function(){var a=document.createElement("canvas");a.width=20;a.height=40;var b=a.getContext("2d");b.fillStyle="red";b.beginPath();
b.lineTo(0,0);b.lineTo(20,0);b.lineTo(10,40);b.closePath();b.fill();c(a)};b.src=a}}},{key:"loadTexture",value:function(){var a=this;this.canvas?Ea(this.gl,this.canvas,function(b){a.texture=b}):this.texture=null}}]);return a}(ca),Vl=function(c){function a(b){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b));b.pointLayer=new id(b.options);b.options.textOptions=Y({depthTest:!1},b.options.textOptions);b.textLayer=new ce(b.options.textOptions);var c=Y({},b.options,b.options.iconOptions);b.iconLayer=
new oi(c);b.children=[b.pointLayer,b.textLayer,b.iconLayer];return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{minSize:25,maxSize:40,clusterRadius:200,minPoints:2,extent:400,showText:!0,maxZoom:19,minZoom:4,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"},textOptions:{fontSize:12,color:"white"},iconOptions:{}}}},{key:"onOptionsChanged",value:function(a){this.textLayer.setOptions(a.textOptions)}},{key:"setOptions",value:function(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=this.options.textOptions;a.textOptions&&Y(c,a.textOptions);var f=a.minZoom,g=a.maxZoom,h=a.clusterRadius;f=g&&g!==this.options.maxZoom||f&&f!==this.options.minZoom||h&&h!==this.options.clusterRadius;Y(this.options,a,{textOptions:c});if(f)this.onChanged(this.options,this.data);else this.refreshCluster();this.onOptionsChanged(this.getOptions())}},{key:"onChanged",value:function(a,c){var b=this;c&&c.length?(c.forEach(function(a){var c=ka(a.geometry.coordinates,
2),d=c[0];c=c[1];-180<=d&&180>=d&&-90<=c&&90>=c||(d=b.map.mercatorToLnglat(d,c),a.geometry.coordinates[0]=d[0],a.geometry.coordinates[1]=d[1])}),this.supercluster=new mi({maxZoom:a.maxZoom,minZoom:a.minZoom,radius:a.clusterRadius,minPoints:a.minPoints,extent:a.extent}),this.supercluster.load(c),this.supercluster.trees.forEach(function(a){var b=0,c=Infinity;a.points.forEach(function(a){b=Math.max(a.numPoints||0,b);c=Math.min(a.numPoints||Infinity,c)});a.max=b;a.min=c}),this.refreshCluster()):(this.supercluster=
null,this.pointLayer.setData([]),this.iconLayer.setData([]),this.textLayer.setData([]))}},{key:"refreshCluster",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options;if(this.supercluster){var c=this.getClusterData(a);if("function"===typeof a.beforeRender&&!1===a.beforeRender(c))this.pointLayer.setData([]),this.iconLayer.setData([]),this.textLayer.setData([]);else if(c&&c.length){var f=[],g=[];c.forEach(function(a){a.properties.text?f.push(a):a.properties.icon?
g.push(a):f.push(a)});this.pointLayer.setData(f);this.iconLayer.setData(g);this.textLayer.setData(a.showText?c:[]);a.enablePicked&&a.autoSelect&&this.pick(-1,-1)}}}},{key:"getClusterData",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options,c=this.map.getBounds(),f=this.ne=c.getNorthEast();c=this.sw=c.getSouthWest();var g=f,h=g.lng;g=g.lat;-180<=h&&180>=h&&-90<=g&&90>=g?c=[c.lng,c.lat,f.lng,f.lat]:(f=this.map.mercatorToLnglat(this.ne.lng,this.ne.lat),c=this.map.mercatorToLnglat(this.sw.lng,
this.sw.lat),c=c.concat(f));f=Math.floor(this.map.getZoom());c=this.supercluster.getClusters(c,f);this.zoom!==f&&0<c.length&&(this.zoom=f,g=this.supercluster.trees,h=g[f]&&g[f].max||this.max,f=g[f]&&g[f].min||this.min,h!==f&&(this.max=h,this.min=f));return this.processData(c,a)}},{key:"processData",value:function(a,c){var b=c.defaultColor,d=c.defaultSize,h=c.gradient,k=c.minSize,l=c.textOptions,p=new za({max:this.max,min:~~this.min||1,minSize:k||8,maxSize:c.maxSize||30,gradient:h});b=b||h[0]||"black";
d=d||.5*k||5;var n=l&&l.format;n="function"===typeof n?n:null;return a.map(function(a){var c=d,f=b,g="";a.properties&&a.properties.point_count&&(g=a.properties.point_count,c=p.getSize(g)||c,f=p.getColor(g),g=n?n(g):g);c=Y({},a.properties,{text:g,size:c,color:f});return Y({},a,{properties:c,children:a.id})})}},{key:"pick",value:function(a,c){var b=this.pointLayer.pick(a,c);0>b.dataIndex&&(b=this.iconLayer.pick(a,c));(a=b.dataItem)&&"number"===typeof a.children&&(a.children=this.getClusterPoints(a.children));
return b}},{key:"getClusterPoints",value:function(a){var b=this;return a?this.supercluster.getChildren(a).map(function(a){return"Feature"===a.type?b.getClusterPoints(a.id):a}).flat():[]}},{key:"shouldUpdate",value:function(){if(!this.data||!this.supercluster)return!1;if(this.zoom!==Math.floor(this.map.getZoom()))return!0;var a=this.map.getBounds(),c=a.getNorthEast();a=a.getSouthWest();if(this.ne.lng!==c.lng||this.ne.lat!==c.lat||this.sw.lng!==a.lng||this.sw.lat!==a.lat)return!0}},{key:"render",value:function(b){this.shouldUpdate()?
this.refreshCluster():pb(a.prototype.__proto__||P(a.prototype),"render",this).call(this,b)}}]);return a}(Hb),Wl=function(c){function a(b,c){L(this,a);return R(this,(a.__proto__||P(a)).call(this,b,c))}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return Y(pb(a.prototype.__proto__||P(a.prototype),"getDefaultOptions",this).call(this),{style:"grid",gridSize:500,gradient:{0:"rgb(50, 50, 256)","0.1":"rgb(50, 250, 56)","0.5":"rgb(250, 250, 56)",1:"rgb(250, 50, 56)"}})}},{key:"onChanged",value:function(b,
c){this.gl&&(c=this.processData(c,b),pb(a.prototype.__proto__||P(a.prototype),"onChanged",this).call(this,b,c))}},{key:"generateGrid",value:function(a,c){var b=c.gridSize,d=[],h={};c=a.length;for(var k=this.getPointOffset(),l=0;l<c;l++){var p=this.normizedPoint(a[l].geometry.coordinates),n=p[2];p=~~((p[0]+k[0])/b)+"_"+~~((p[1]+k[1])/b);void 0===h[p]&&(h[p]={count:0,num:0,z:0});var m=~~a[l].count||1;"properties"in a[l]&&"count"in a[l].properties&&(m=~~a[l].properties.count);h[p].count+=m;h[p].num+=
1;h[p].z+=n}pa(h).forEach(function(a){var c=a.split("_");d.push([c[0]*b+b/2,c[1]*b+b/2,h[a].z/h[a].num,h[a].count])});return d}},{key:"processData",value:function(a,c){var b=[];if("normal"===c.style)for(var d=this.getPointOffset(),h=0;h<a.length;h++){var k=this.normizedPoint(a[h].geometry.coordinates),l=k[0]+d[0],p=k[1]+d[1];k=k[2];var n=~~a[h].count||1;"properties"in a[h]&&"count"in a[h].properties&&(n=~~a[h].properties.count);b.push([l,p,k,n])}else b=this.generateGrid(a,c);d=a=0;if(void 0!==c.max&&
void 0!==c.min)a=c.max,d=c.min;else{b[0]&&(a=b[0][3],d=b[0][3]);h=b.length;for(l=0;l<h;l++)p=b[l],a=Math.max(p[3],a),d=Math.min(p[3],d);a/=2}c=new za({max:~~a,min:d,gradient:c.gradient});a=[];for(d=0;d<b.length;d++)h=b[d],h[0]=h[0],h[1]=h[1],l=c.getImageData(h[3]),a.push({geometry:{type:"Point",coordinates:[h[0],h[1],h[2]]},color:[l[0]/255,l[1]/255,l[2]/255,l[3]/255]});return a}}]);return a}(id),Xl=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.bufferData=[];
return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:[1,.05,.05,1]}}},{key:"onChanged",value:function(a,c){var b=this;if(a=this.gl){this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer);for(var d=[],h=function(a){var f=5*a;for(a=0;a<c.length;a++)c[a].geometry.coordinates.forEach(function(a){for(var c=0;c<a.length-1;c++){var g=b.normizedPoint(a[c]);d.push(g[0]);d.push(g[1]);d.push(Number(f));g=b.normizedPoint(a[c+1]);d.push(g[0]);d.push(g[1]);d.push(Number(f))}})},
k=0;20>k;k++)h(k);a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW);this.bufferData=d;a.bindBuffer(a.ARRAY_BUFFER,null)}}},{key:"initialize",value:function(a){this.gl=a;this.program=new X(a,{vertexShader:"uniform mat4 uMatrix;attribute vec3 aPos;void main(){gl_PointSize=10.0;gl_Position=uMatrix*vec4(aPos,1.0);}",fragmentShader:"precision mediump float;uniform vec4 uFragColor;void main(){gl_FragColor=uFragColor;}"});this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer)}},
{key:"render",value:function(a){var b=a.gl;a=a.matrix;var c=this.program;b.useProgram(c.program);var g=this.normizedColor(this.options.color);b.uniform4f(c.uniforms.uFragColor,g[0],g[1],g[2],g[3]);b.uniformMatrix4fv(c.uniforms.uMatrix,!1,a);b.bindBuffer(b.ARRAY_BUFFER,this.buffer);b.enableVertexAttribArray(c.attributes.aPos);b.vertexAttribPointer(c.attributes.aPos,3,b.FLOAT,!1,0,0);this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:[b.ONE,b.ONE]});b.drawArrays(b.LINES,0,this.bufferData.length/
3)}}]);return a}(ca),pi={circle:1,square:2},Yl=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.bufferData=[];b.startTime=b.options.startTime||0;b.endTime=b.options.endTime;b.time=b.startTime;b.autoUpdate=!0;return b}S(a,c);M(a,[{key:"initialize",value:function(a){this.gl=a;this.program=new X(this.gl,{vertexShader:"attribute vec4 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 u_matrix;varying vec4 vColor;uniform float currentTime;uniform float trailLength;varying float vTime;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=u_matrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize;vTime=1.0-((currentTime-aPos.w)/trailLength);}",
fragmentShader:"precision highp float;varying vec4 vColor;uniform int uShape;varying float vTime;void main(void){if(vTime>1.0||vTime<0.0){discard;}if(uShape==1){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d<0.5){gl_FragColor=vColor;}else{discard;}}else{gl_FragColor=vec4(vColor.rgb,vColor.a*vTime);}}"});this.f32BufferData=new Float32Array;this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer)}},{key:"onChanged",value:function(a,c){var b=this.gl;if(b){this.buffer=b.createBuffer();
b.bindBuffer(b.ARRAY_BUFFER,this.buffer);for(var d=[],h=a.color||[.1,.1,.9,1],k=a.size||5,l=0;l<c.length;l++){var p=c[l].geometry.coordinates,n=h;"[object Function]"===Object.prototype.toString.call(n)?n=n(c[l]):(n=c[l].color||h,"properties"in c[l]&&"color"in c[l].properties&&(n=c[l].properties.color));n=this.normizedColor(n);var m=this.normizedPoint(p),q=k;q="[object Function]"===Object.prototype.toString.call(q)?q(c[l]):Number(q);var r=c[l].time||l;"properties"in c[l]&&"time"in c[l].properties&&
(r=c[l].properties.time);d.push(m[0],m[1],Number(p[2]||0),r);d.push(n[0],n[1],n[2],n[3]);d.push(q*window.devicePixelRatio)}void 0===a.endTime&&(this.endTime=c.length);this.bufferData=d;this.f32BufferData=new Float32Array(d);b.bufferData(b.ARRAY_BUFFER,this.f32BufferData,b.STATIC_DRAW)}}},{key:"render",value:function(a){var b=a.gl,c=a.matrix;0>=this.bufferData.length||(a=this.program,b.useProgram(a.program),b.uniformMatrix4fv(a.uniforms.u_matrix,!1,c),b.bindBuffer(b.ARRAY_BUFFER,this.buffer),c=this.f32BufferData.BYTES_PER_ELEMENT,
b.enableVertexAttribArray(a.attributes.aPos),b.vertexAttribPointer(a.attributes.aPos,4,b.FLOAT,!1,9*c,0),b.enableVertexAttribArray(a.attributes.aColor),b.vertexAttribPointer(a.attributes.aColor,4,b.FLOAT,!1,9*c,4*c),b.enableVertexAttribArray(a.attributes.aSize),b.vertexAttribPointer(a.attributes.aSize,1,b.FLOAT,!1,9*c,8*c),b.uniform1f(a.uniforms.currentTime,this.time),b.uniform1f(a.uniforms.trailLength,this.options.trailLength||3),c=1,this.options.shape&&pi[this.options.shape]&&(c=pi[this.options.shape]),
b.uniform1i(a.uniforms.uShape,c),this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:"lighter"===this.options.blend?[b.SRC_ALPHA,b.ONE]:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA]}),b.drawArrays(b.POINTS,0,this.bufferData.length/9),this.time+=this.options.step||.1,this.time>this.endTime&&(this.time=this.startTime))}}]);return a}(ca),Zl=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.bufferData=[];b.startTime=b.options.startTime||0;b.endTime=b.options.endTime;
b.time=b.startTime;b.autoUpdate=!0;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:[1,.05,.05,1],trailLength:3,step:.1,polygonOffset:[0,0]}}},{key:"initialize",value:function(a){this.gl=a;this.program=new X(this.gl,{vertexShader:"precision highp float;attribute vec4 aPos;attribute vec4 aColor;uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;varying float vTime;varying vec4 vColor;void main(){gl_Position=u_matrix*vec4(aPos.xyz,1.0);vColor=aColor;vTime=1.0-((currentTime-aPos.w)/trailLength);}",
fragmentShader:"precision highp float;uniform vec3 uFragColor;varying vec4 vColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(vColor.rgb,1.0*vTime);}"},this);this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer)}},{key:"setTime",value:function(a){this.time=a}},{key:"onChanged",value:function(a,c){var b=this.gl;if(b){this.buffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.buffer);for(var d=[],h=0,k=this.options.color,l=0;l<c.length;l++){var p=
c[l].geometry.coordinates;c[l].color&&(k=c[l].color);"properties"in c[l]&&"color"in c[l].properties&&(k=c[l].properties.color);"[object Function]"===Object.prototype.toString.call(k)&&(k=k(c[l]));k=this.normizedColor(k);p.length>h&&(h=p.length);for(var n=0;n<p.length-1;n++){var m=this.normizedPoint(p[n]);d.push(m[0]);d.push(m[1]);d.push(m[2]);void 0===p[n][3]?d.push(n):d.push(Number(p[n][3]));d.push(k[0]);d.push(k[1]);d.push(k[2]);d.push(k[3]);m=this.normizedPoint(p[n+1]);d.push(m[0]);d.push(m[1]);
d.push(m[2]);void 0===p[n+1][3]?d.push(n+1):d.push(Number(p[n+1][3]));d.push(k[0]);d.push(k[1]);d.push(k[2]);d.push(k[3])}}void 0===a.endTime&&(this.endTime=h);this.bufferData=d;this.f32BufferData=new Float32Array(d);b.bufferData(b.ARRAY_BUFFER,this.f32BufferData,b.STATIC_DRAW)}}},{key:"render",value:function(a){var b=a.gl,c=a.matrix;a=this.getOptions();var g=this.program;g.use(b);b.uniformMatrix4fv(g.uniforms.u_matrix,!1,c);b.bindBuffer(b.ARRAY_BUFFER,this.buffer);c=this.f32BufferData.BYTES_PER_ELEMENT;
b.enableVertexAttribArray(g.attributes.aPos);b.vertexAttribPointer(g.attributes.aPos,4,b.FLOAT,!1,8*c,0);b.enableVertexAttribArray(g.attributes.aColor);b.vertexAttribPointer(g.attributes.aColor,4,b.FLOAT,!1,8*c,4*c);c=this.normizedColor(a.color);b.uniform3f(g.uniforms.uFragColor,c[0],c[1],c[2]);b.uniform1f(g.uniforms.currentTime,this.time);b.uniform1f(g.uniforms.trailLength,a.trailLength);this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:"lighter"===a.blend?[b.ONE,b.ONE]:[b.SRC_ALPHA,b.ONE],
polygonOffset:a.polygonOffset,depthMask:!1});b.drawArrays(b.LINES,0,this.bufferData.length/8);this.time+=a.step;this.time>this.endTime&&(this.time=this.startTime)}}]);return a}(ca),$l=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.index=[];c=b.canvas=document.createElement("canvas");b.ctx=c.getContext("2d");b.iconHash=new Kb;b.boxHash=new Kb;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{flat:!1,unit:"px",scale:1,angle:0,offset:[0,0],padding:[0,
0]}}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions();this.texture=null;this.lastUpdateTime=0;this.program=new X(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute vec2 a_size;attribute vec2 a_offset;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform float devicePixelRatio;uniform float u_zoom_units;uniform float u_zIndex;uniform float u_scale;uniform bool u_unit_px;uniform bool u_flat;varying vec2 v_texture_coord;/***\u70b9A(x,y)\uff0c\u7ed5\u539f\u70b9\u987a\u65f6\u9488\u65cb\u8f6c\u89d2\u5ea6a\u65b0\u5750\u6807\u7684\u8ba1\u7b97\u516c\u5f0f*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)+size.x*sin(a_rotation);}else if(corner==2.0){x+=size.x*cos(a_rotation)+size.y*sin(a_rotation);y+=size.y*cos(a_rotation)-size.x*sin(a_rotation);}else if(corner==3.0){x+=size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)-size.x*sin(a_rotation);}else{x+=-size.x*cos(a_rotation)-size.y*sin(a_rotation);y+=-size.y*cos(a_rotation)+size.x*sin(a_rotation);}return vec3(x,y,coord.z);}void main(){v_texture_coord=a_texture_coord;if(u_flat){vec2 offset=a_offset;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;offset*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=u_zIndex;gl_Position=u_matrix*vec4(current.x+offset[0],current.y-offset[1],current.z,1.0);}else{vec4 position=u_matrix*vec4(a_pos,1.0);vec3 screen=position.xyz/position.w;vec2 halfSize=a_size/MAPV_resolution*devicePixelRatio*u_scale;vec2 offset=a_offset*2./MAPV_resolution*devicePixelRatio;if(!u_unit_px){halfSize/=u_zoom_units;offset/=u_zoom_units;}vec3 current=transformCoord(screen,halfSize,a_corner);current.xy=current.xy-offset;current.z+=u_zIndex;gl_Position=vec4(current,1.0);}}",
fragmentShader:"precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}gl_FragColor=textureColor;\n#if defined(PICK)\nif(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}\n#endif\n}",defines:b.enablePicked?["PICK"]:[]},this);this.vertexBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});
this.uvBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});b=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:36,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:36,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:16},{name:"a_offset",buffer:this.vertexBuffer,size:2,stride:36,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,
size:1,stride:36,type:"FLOAT",offset:32},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}];b=b.concat(this.getCommonAttributes());this.vertexArray=new la({gl:a,program:this.program,attributes:b})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null);this.canvas=this.boxHash=this.iconHash=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",
value:function(a,c){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.gl&&(this.cachedData=[],this.boxHash.clear(),this.processCache(a,c,b))}},{key:"processCache",value:function(a,c,f){for(var b=this,d=a.icon,k=a.width,l=a.height,p=a.offset,n=a.angle,m=0;m<c.length;m++){var q=this.normizedPoint(c[m].geometry.coordinates),r=this.getProperty("icon",d,c[m]),u=this.getProperty("width",k,c[m]),v=this.getProperty("height",l,c[m]),t=this.getProperty("offset",p,c[m]),x=this.getProperty("angle",
n,c[m]);q&&r&&(this.cachedData.push({point:q,icon:r,width:u,height:v,offset:t,angle:x,dataIndex:m}),this.iconHash.get(r)||this.iconHash.set(r,r))}c=Qd(this.iconHash.entries()).filter(function(a){return"string"===typeof a[1]}).map(function(a){var c=ka(a,2)[0];return new Ib(function(a,d){b.url2canvas(c,function(d){b.iconHash.set(c,d);a()})})});Ib.all(c).then(function(c){b.buildSprite(a);!1!==f.autoRender&&b.webglLayer&&b.webglLayer.render()})}},{key:"buildSprite",value:function(a){a=a.padding;var b=
this.canvas,c=this.ctx,g=[],h=!0,k=!1,l=void 0;try{for(var p=ec(this.iconHash),n;!(h=(n=p.next()).done);h=!0){var m=ka(n.value,2),q=m[1];if("string"!==typeof q){var r=q.width,u=q.height;g.push({w:r+a[0],h:u+a[0],width:r,height:u,key:m[0],icon:q})}}}catch(v){k=!0,l=v}finally{try{!h&&p.return&&p.return()}finally{if(k)throw l;}}p=dc(g);for(n=0;n<g.length;n++)m=g[n],this.boxHash.get(m.key)||this.boxHash.set(m.key,m);n=gb(p.w)||1;p=gb(p.h)||1;b.width=n;b.height=p;c.save();for(b=0;b<g.length;b++)p=g[b],
c.drawImage(p.icon,p.x+a[0],p.y+a[1],p.width,p.height);c.restore();this.loadTexture()}},{key:"render",value:function(a){if(this.cachedData&&this.cachedData.length&&this.texture){var b=a.gl,c=a.matrix,g=this.getOptions(),h=this.program;h.use(b);this.throttleUpdate(a);this.setGLState({blend:!0,blendFunc:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA]});h.setUniforms(Y(this.getCommonUniforms(a),{u_icon:this.texture,u_matrix:c,u_flat:g.flat,u_unit_px:"px"===g.unit,u_zoom_units:this.map.getZoomUnits(),u_scale:g.scale,
u_zIndex:g.zIndex,devicePixelRatio:window.devicePixelRatio}));0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),b.drawElements(b.TRIANGLES,this.index.length,b.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(a){this.updateIcon(a)}},{key:"updateIcon",value:function(a){if(this.iconHash.size&&this.boxHash.size){var b=this.getOptions(),c=a.gl;a=a.matrix;b=b.enablePicked;var g=[],h=[],k=[],l=[],p=this.canvas.width,n=this.canvas.height,m=c.canvas.width/window.devicePixelRatio;
c=c.canvas.height/window.devicePixelRatio;for(var q=new be,r=0,u=0;u<this.cachedData.length;u++){var v=this.cachedData[u],t=v.point,x=v.width,w=v.height,y=v.offset,z=v.angle,B=v.dataIndex;if(v=this.boxHash.get(v.icon)){x=x||v.icon.width;w=w||v.icon.height;var A=ka(t,3);t=A[0];var C=A[1];A=A[2];var G=xa.clone([t,C,A,1]);xa.transformMat4(G,G,a);xa.scale(G,G,1/G[3]);var E=(G[0]+1)/2*m-x/2;G=(-G[1]+1)/2*c-w/2;var H=E+x,I=G+w;if(!(0>H||0>I||E>m||G>c||(E={minX:E,maxX:H,minY:G,maxY:I},q.collides(E)))){q.insert(E);
for(E=0;4>E;E++)g.push(t,C,A),g.push(E),g.push(x,w),g.push.apply(g,Z(y)),g.push(z*Math.PI/180);x=v.x/p;w=(v.x+v.w)/p;y=(v.y+v.h)/n;v=v.y/n;h.push(x,y,x,v,w,v,w,y);v=4*r;k.push(v,v+2,v+1,v,v+3,v+2);b&&(B=this.indexToRgb(B),l.push(B[0]/255,B[1]/255,B[2]/255),l.push(B[0]/255,B[1]/255,B[2]/255),l.push(B[0]/255,B[1]/255,B[2]/255),l.push(B[0]/255,B[1]/255,B[2]/255));r+=1}}}this.index=k;this.vertexBuffer.updateData(new Float32Array(g));this.uvBuffer.updateData(new Float32Array(h));this.indexBuffer.updateData(new Uint32Array(k));
b&&this.pickBuffer.updateData(new Float32Array(l))}}},{key:"url2canvas",value:function(a,c){if("object"===("undefined"===typeof a?"undefined":Na(a)))c(a);else{var b=new Image;b.crossOrigin="anonymous";b.onload=function(){var a=b.width,d=b.height,f=document.createElement("canvas");f.width=a;f.height=d;f.getContext("2d").drawImage(b,0,0,a,d);c(f)};b.onerror=function(){var a=document.createElement("canvas");a.width=20;a.height=40;var b=a.getContext("2d");b.fillStyle="red";b.beginPath();b.lineTo(0,0);
b.lineTo(20,0);b.lineTo(10,40);b.closePath();b.fill();c(a)};b.src=a}}},{key:"loadTexture",value:function(){var a=this;this.canvas?Ea(this.gl,this.canvas,function(b){a.texture=b}):this.texture=null}}]);return a}(ca),qi=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.initData();b.date=new Date;b.autoUpdate=!0;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:"rgba(25, 25, 250, 1)",blend:"normal",width:2,antialias:!1,interval:.1,duration:2,
trailLength:.5,minZoom:2,maxZoom:25,polygonOffset:[0,0]}}},{key:"initData",value:function(){this.dataMgr={position:[],prev:[],next:[],direction:[],color:[],index:[],counter:[]}}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions();this.program=new X(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform float thickness;uniform vec4 uSelectedColor;attribute vec3 position;attribute vec3 next;attribute vec3 previous;attribute float direction;attribute vec4 aColor;attribute float aCounter;attribute vec2 uv;varying vec4 vColor;varying vec2 vNormal;varying float vCounter;vec2 project(vec4 coord){vec3 screen=coord.xyz/coord.w;vec2 clip=(screen.xy+1.0)/2.0;return clip*MAPV_resolution;}vec4 unproject(vec2 projected,float z,float w){vec2 clip=projected/MAPV_resolution;vec2 screen=clip*2.0-1.0;return vec4(screen*w,z,w);}void main(){vColor=aColor;vCounter=aCounter;\n#if defined(PICK)\nif(mapvIsPicked()){vColor=uSelectedColor;}\n#endif\nvec4 previousProjected=u_matrix*vec4(previous,1.0);vec4 currentProjected=u_matrix*vec4(position,1.0);vec4 nextProjected=u_matrix*vec4(next,1.0);vec2 currentScreen=project(currentProjected);vec2 previousScreen=project(previousProjected);vec2 nextScreen=project(nextProjected);float len=thickness;float orientation=direction;vec2 dir=vec2(0.0);if(currentScreen==previousScreen){dir=normalize(nextScreen-currentScreen);}else if(currentScreen==nextScreen){dir=normalize(currentScreen-previousScreen);}else{vec2 dirA=normalize((currentScreen-previousScreen));vec2 dirB=normalize((nextScreen-currentScreen));vec2 tangent=normalize(dirA+dirB);vec2 perp=vec2(-dirA.y,dirA.x);vec2 miter=vec2(-tangent.y,tangent.x);dir=tangent;float angle=40.0;if(dot(dirA,dirB)>cos(radians(angle))){len=thickness/dot(miter,perp);}}vec2 normal=vec2(-dir.y,dir.x);vNormal=normal*orientation;normal*=len/2.0;vec2 pos=currentScreen+normal*orientation;vec4 finalPos=unproject(pos,currentProjected.z,currentProjected.w);gl_Position=finalPos;}",
fragmentShader:"precision highp float;uniform bool uAntialias;uniform bool uAnimate;uniform float uTime;uniform float duration;uniform float interval;uniform float trailLength;varying vec4 vColor;varying vec2 vNormal;varying float vCounter;void main(){vec4 color=vColor;if(uAntialias){float blur=1.0;blur=1.0-smoothstep(0.98,1.0,length(vNormal));color.a*=blur;}if(uAnimate){float alpha=1.0-fract(mod(1.0-vCounter,interval)*(1.0/interval)+uTime/duration);alpha=(alpha+trailLength-1.0)/trailLength;color.a*=alpha;}gl_FragColor=color;}",
defines:b.enablePicked?["PICK"]:[]},this);this.prevBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.currentBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.nextBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.directionBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.colorBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.counterBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=
new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});b=[{stride:12,name:"previous",buffer:this.prevBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"position",buffer:this.currentBuffer,size:3,type:"FLOAT",offset:0},{stride:12,name:"next",buffer:this.nextBuffer,size:3,type:"FLOAT",offset:0},{stride:4,name:"direction",buffer:this.directionBuffer,size:1,type:"FLOAT",offset:0},{stride:16,name:"aColor",buffer:this.colorBuffer,size:4,type:"FLOAT",offset:0},{stride:4,name:"aCounter",buffer:this.counterBuffer,
size:1,type:"FLOAT",offset:0}];b=b.concat(this.getCommonAttributes());this.vertexArray=new la({gl:a,program:this.program,attributes:b})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null);this.options=this.data=this.dataMgr=this.indexBuffer=this.uvBuffer=this.counterBuffer=this.directionBuffer=this.colorBuffer=this.nextBuffer=this.currentBuffer=this.prevBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(a,c){var b=this;if(this.gl){this.initData();
for(var d=1,h=[],k=0;k<c.length;k++){var l=[],p=c[k].geometry.coordinates;p&&0<p.length&&(l="Polygon"===c[k].geometry.type?p[0].map(function(a){return b.normizedPoint(a)}):p.map(function(a){return b.normizedPoint(a)}));l=hg(l);p=l.total;h[k]=l.arr;d=Math.max(p,d)}k=[];l=a.color;for(p=0;p<c.length;p++){var n=[],m=c[p].geometry.coordinates;m&&0<m.length&&(n="Polygon"===c[p].geometry.type?m[0].map(function(a){return b.normizedPoint(a)}):m.map(function(a){return b.normizedPoint(a)}));m=l;"[object Function]"===
Object.prototype.toString.call(m)?m=m(c[p]):(m=c[p].color||l,"properties"in c[p]&&"color"in c[p].properties&&(m=c[p].properties.color));m=this.normizedColor(m);for(var q=this.addMultipleCoords(n),r=0;r<q.length;r++)this.processData(this.dataMgr,q[r],h[p],d,m);if(a.enablePicked)for(m=this.indexToRgb(p),q=0;q<n.length;q++)k.push(m[0]/255,m[1]/255,m[2]/255),k.push(m[0]/255,m[1]/255,m[2]/255),a.repeat&&(k.push(m[0]/255,m[1]/255,m[2]/255),k.push(m[0]/255,m[1]/255,m[2]/255),k.push(m[0]/255,m[1]/255,m[2]/
255),k.push(m[0]/255,m[1]/255,m[2]/255))}this.counterBuffer.updateData(new Float32Array(this.dataMgr.counter));this.currentBuffer.updateData(new Float32Array(this.dataMgr.position));this.prevBuffer.updateData(new Float32Array(this.dataMgr.prev));this.nextBuffer.updateData(new Float32Array(this.dataMgr.next));this.directionBuffer.updateData(new Float32Array(this.dataMgr.direction));this.colorBuffer.updateData(new Float32Array(this.dataMgr.color));this.indexBuffer.updateData(new Uint32Array(this.dataMgr.index));
a.enablePicked&&this.pickBuffer.updateData(new Float32Array(k))}}},{key:"processData",value:function(a,c,f,g,h){var b,d,p,n,m,q,r,u=c.length,v=a.position.length/6;f=Pa(f.map(function(a){return a/g}));var t=Pa(c.map(function(a){return-1}),!0),x=Pa(c),w=Pa(c.map(xd(-1))),y=Pa(c.map(xd(1)));c=Pa(c.map(function(a){return h}));u=gg(u,v);(b=a.counter).push.apply(b,Z(f));(d=a.position).push.apply(d,Z(ab(x)));(p=a.prev).push.apply(p,Z(ab(w)));(n=a.next).push.apply(n,Z(ab(y)));(m=a.direction).push.apply(m,
Z(t));(q=a.color).push.apply(q,Z(ab(c)));(r=a.index).push.apply(r,Z(u))}},{key:"render",value:function(a){var b=a.gl,c=a.matrix,g=this.dataMgr;if(g&&!(0>=g.index.length)){var h=this.getOptions(),k=this.program;k.use(b);if(this.map){var l=this.map.getZoom();l=l>=h.minZoom&&l<=h.maxZoom&&this.autoUpdate?!0:!1}else l=!0;k.setUniforms(Y(this.getCommonUniforms(a),{u_matrix:c,thickness:h.width,uAntialias:h.antialias,uTime:(new Date-this.date)/1E3,uAnimate:l,duration:h.duration,interval:h.interval,trailLength:h.trailLength}));
this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:"lighter"===h.blend?[b.SRC_ALPHA,b.ONE]:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA],polygonOffset:h.polygonOffset});this.indexBuffer.bind();this.vertexArray.bind();b.drawElements(b.TRIANGLES,g.index.length,b.UNSIGNED_INT,0)}}}]);return a}(ca),am=function(c){function a(b,c){L(this,a);return R(this,(a.__proto__||P(a)).call(this,b,c))}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{}}},{key:"initialize",value:function(a){this.gl=a;var b=
this.getOptions();this.texture=null;this.program=new X(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute vec2 a_texture_coord;uniform sampler2D uTerrain;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;varying vec2 v_texture_coord;void main(){v_texture_coord=a_texture_coord;vec3 pos=a_pos.xyz;\n#if defined(TERRAIN)\nvec4 terrainColor=texture2D(uTerrain,vec2(v_texture_coord.s,v_texture_coord.t));vec3 rgb=terrainColor.rgb*256.0;pos.z=-10000.0+((rgb.r*256.0*256.0+rgb.g*256.0+rgb.b)*0.1);pos.z=pos.z-60.0;\n#endif\nvec4 position=u_proj_matrix*u_mv_matrix*vec4(pos,1.0);gl_Position=position;}",
fragmentShader:"precision highp float;varying vec2 v_texture_coord;uniform sampler2D uTile;uniform bool uUseFilter;uniform vec4 uFilterColor;void main(){vec4 textureColor=texture2D(uTile,vec2(v_texture_coord.s,v_texture_coord.t));if(uUseFilter){textureColor=textureColor*uFilterColor;}gl_FragColor=textureColor;}",defines:b.terrain?["TERRAIN"]:""},this);this.vertexBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});
this.vertexArray=new la({gl:a,program:this.program,attributes:[{name:"a_pos",buffer:this.vertexBuffer,stride:20,size:3,type:"FLOAT",offset:0},{name:"a_texture_coord",buffer:this.vertexBuffer,size:2,stride:20,type:"FLOAT",offset:12}]})}},{key:"onChanged",value:function(a,c){var b=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){b.loadTexture(function(){b.parseData(c);b.dataTime=new Date;b.webglLayer.render()})},0))}},{key:"render",value:function(a){var b=
a.gl,c=a.projectionMatrix;a=a.viewMatrix;var g=this.getOptions(),h=this.program,k=h.uniforms;h.use(b);this.texture&&(b.activeTexture(b.TEXTURE0),b.uniform1i(k.uTile,0),b.bindTexture(b.TEXTURE_2D,this.texture),b.activeTexture(b.TEXTURE1),b.uniform1i(k.uTerrain,1),b.bindTexture(b.TEXTURE_2D,this.terrainSampler),this.setGLState({cullFace:!1}),h.setUniforms({u_proj_matrix:c,uUseFilter:!!g.filterColor,uFilterColor:this.normizedColor(g.filterColor||"rgba(0, 0, 100, 1.0)"),u_mv_matrix:a}),0<this.index.length&&
(this.indexBuffer.bind(),this.vertexArray.bind(),b.drawElements(b.TRIANGLES,this.index.length,b.UNSIGNED_INT,0)))}},{key:"loadTexture",value:function(a){var b=this,c=this.getOptions();c.tile?c.terrain?Ea(this.gl,c.terrain,function(d,f){b.terrainSampler=d;Ea(b.gl,c.tile,function(c,d){b.texture=c;a&&a();b.webglLayer.render()})},{TEXTURE_WRAP_S:"MIRRORED_REPEAT",TEXTURE_WRAP_T:"MIRRORED_REPEAT"}):Ea(this.gl,c.tile,function(c,d){b.texture=c;a&&a();b.webglLayer.render()}):(this.texture=null,a&&a())}},
{key:"parseData",value:function(a){var b=this,c=[],g=[];if(a&&a[0]){var h=a[0].geometry.coordinates[0];h=h.map(function(a){return b.normizedPoint(a)});a=h[0][0];var k=h[0][1],l=h[0][2],p=(h[2][0]-a)/16;h=(h[2][1]-k)/16;for(var n=0;16>=n;n++)for(var m=0;16>=m;m++)if(c.push(a+p*m,k+h*n,l),c.push(m/16,n/16),16>m&&16>n){var q=17*n+m,r=17*(n+1)+m;g.push(q,r+1,q+1);g.push(q,r,r+1)}}this.index=g;this.vertexBuffer.updateData(new Float32Array(c));this.indexBuffer.updateData(new Uint32Array(g))}}]);return a}(ca),
bm=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.index=[];c=b.canvas=document.createElement("canvas");b.ctx=c.getContext("2d");b.iconHash=new Kb;return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{unit:"px",scale:1,angle:0,offsetZ:0,padding:[0,0],polygonOffset:[0,0]}}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions();this.texture=null;this.program=new X(this.gl,{vertexShader:"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute float a_rotation;attribute float a_offsetZ;attribute vec2 a_size;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform float u_zoom_units;uniform float u_scale;uniform bool u_unit_px;varying vec2 v_texture_coord;/***\u4e09\u7ef4\u7a7a\u95f4\u5185\uff0c\u7ed5Z\u8f74\u65cb\u8f6c\u7684\u77e9\u9635\uff0c\u53f3\u624b\u5750\u6807\u7cfb\u4e0b*[x'][cos0-sin0  0  0]*[y']=[sin0 cos0   0  0]*[z'][0     0     1  0]*[1][0     0     0  1]*/mat3 rotateZ(float angle){float cos0=cos(angle);float sin0=sin(angle);return mat3(cos0,sin0,0.,-sin0,cos0,0.,0.,0.,1.);}vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;float z=coord.z;mat3 mat=rotateZ(a_rotation);vec3 rotated=vec3(size[0],0.0,size[1]);if(corner==1.0){rotated=mat*vec3(-size[0],0.0,size[1]);}else if(corner==2.0){rotated=mat*vec3(size[0],0.0,size[1]);}else if(corner==3.0){rotated=mat*vec3(size[0],0.0,-size[1]);}else{rotated=mat*vec3(-size[0],0.0,-size[1]);}x+=rotated.x;y+=rotated.y;z+=rotated.z;return vec3(x,y,z);}void main(){v_texture_coord=a_texture_coord;vec2 halfSize=a_size/2.0*u_scale;if(u_unit_px){halfSize*=u_zoom_units;}vec3 current=transformCoord(a_pos,halfSize,a_corner);current.z+=a_offsetZ;gl_Position=u_matrix*vec4(current,1.0);}",
fragmentShader:"precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0&&uIsPickRender==false){discard;}gl_FragColor=textureColor;\n#if defined(PICK)\nif(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}\n#endif\n}",defines:b.enablePicked?["PICK"]:[]},this);this.vertexBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});
this.uvBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});b=[{name:"a_pos",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"a_corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"a_size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"a_offsetZ",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"a_rotation",buffer:this.vertexBuffer,
size:1,stride:32,type:"FLOAT",offset:28},{name:"a_texture_coord",buffer:this.uvBuffer,size:2,stride:8,type:"FLOAT",offset:0}];b=b.concat(this.getCommonAttributes());this.vertexArray=new la({gl:a,program:this.program,attributes:b})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null);this.canvas=this.iconHash=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(a,
c){this.gl&&this.processCache(a,c)}},{key:"forceUpdate",value:function(){this.gl&&this.processCache(this.options,this.data)}},{key:"processCache",value:function(a,c){var b=this;this.cachedData=[];for(var d=a.icon,h=a.width,k=a.height,l=a.offsetZ,p=a.angle,n=0;n<c.length;n++){var m=this.normizedPoint(c[n].geometry.coordinates),q=this.getProperty("icon",d,c[n]),r=this.getProperty("width",h,c[n]),u=this.getProperty("height",k,c[n]),v=this.getProperty("angle",p,c[n]),t=this.getProperty("offsetZ",l,c[n]);
m&&q&&(this.cachedData.push({point:m,icon:q,width:r,height:u,offsetZ:t,angle:v}),this.iconHash.get(q)||this.iconHash.set(q,q))}c=Qd(this.iconHash.entries()).filter(function(a){return"string"===typeof a[1]}).map(function(a){var c=ka(a,2)[0];return new Ib(function(a,d){b.url2canvas(c,function(d){b.iconHash.set(c,d);a()})})});Ib.all(c).then(function(c){b.buildSprite(a);b.webglLayer.render()})}},{key:"buildSprite",value:function(a){var b=a.padding,c=this.canvas,g=this.ctx,h=[],k=new Kb,l=!0,p=!1,n=void 0;
try{for(var m=ec(this.iconHash),q;!(l=(q=m.next()).done);l=!0){var r=ka(q.value,2),u=r[1];if("string"!==typeof u){var v=u.width,t=u.height;h.push({w:v+b[0],h:t+b[0],width:v,height:t,key:r[0],icon:u})}}}catch(x){p=!0,n=x}finally{try{!l&&m.return&&m.return()}finally{if(p)throw n;}}p=dc(h);for(l=0;l<h.length;l++)n=h[l],k.get(n.key)||k.set(n.key,n);l=gb(p.w);p=gb(p.h);c.width=l||1;c.height=p||1;g.save();for(c=0;c<h.length;c++)n=h[c],g.drawImage(n.icon,n.x+b[0],n.y+b[1],n.width,n.height);g.restore();this.loadTexture();
this.buildVertex(a,k,l,p)}},{key:"buildVertex",value:function(a,c,f,g){a=a.enablePicked;for(var b=[],d=[],l=[],p=[],n=0;n<this.cachedData.length;n++){var m=this.cachedData[n],q=m.point,r=m.width,u=m.height,v=m.offsetZ,t=m.angle;if(m=c.get(m.icon)){r=r||m.icon.width;u=u||m.icon.height;var x=ka(q,3);q=x[0];var w=x[1];x=x[2];for(var y=0;4>y;y++)b.push(q,w,x),b.push(y),b.push(r,u),b.push(v),b.push(t*Math.PI/180);r=m.x/f;u=(m.x+m.w)/f;v=(m.y+m.h)/g;m=m.y/g;d.push(r,v,r,m,u,m,u,v);m=4*n;l.push(m,m+2,m+
1,m,m+3,m+2);a&&(m=this.indexToRgb(n),p.push(m[0]/255,m[1]/255,m[2]/255),p.push(m[0]/255,m[1]/255,m[2]/255),p.push(m[0]/255,m[1]/255,m[2]/255),p.push(m[0]/255,m[1]/255,m[2]/255))}}this.index=l;this.vertexBuffer.updateData(new Float32Array(b));this.uvBuffer.updateData(new Float32Array(d));this.indexBuffer.updateData(new Uint32Array(l));a&&this.pickBuffer.updateData(new Float32Array(p))}},{key:"render",value:function(a){if(this.cachedData&&this.cachedData.length&&this.iconHash&&this.texture){var b=
a.gl,c=a.matrix,g=this.getOptions(),h=this.program;h.use(b);this.setGLState({blend:!0,blendFunc:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA],polygonOffset:g.polygonOffset});h.setUniforms(Y(this.getCommonUniforms(a),{u_icon:this.texture,u_matrix:c,u_unit_px:"px"===g.unit,u_zoom_units:this.map.getZoomUnits(),u_scale:g.scale}));0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),b.drawElements(b.TRIANGLES,this.index.length,b.UNSIGNED_INT,0))}}},{key:"url2canvas",value:function(a,c){if("object"===
("undefined"===typeof a?"undefined":Na(a)))c(a);else{var b=new Image;b.crossOrigin="anonymous";b.onload=function(){var a=b.width,d=b.height,f=document.createElement("canvas");f.width=a;f.height=d;f.getContext("2d").drawImage(b,0,0,a,d);c(f)};b.onerror=function(){var a=document.createElement("canvas");a.width=20;a.height=40;var b=a.getContext("2d");b.fillStyle="red";b.beginPath();b.lineTo(0,0);b.lineTo(20,0);b.lineTo(10,40);b.closePath();b.fill();c(a)};b.src=a}}},{key:"loadTexture",value:function(){var a=
this;this.canvas?Ea(this.gl,this.canvas,function(b){a.texture=b}):this.texture=null}}]);return a}(ca),cm=function(c){function a(b){L(this,a);var c=R(this,(a.__proto__||P(a)).call(this,b));b=c.getOptions();c.shapeLayer=new Vd({enablePicked:b.enablePicked});c.lineLayer=new Th;c.children=[c.shapeLayer,c.lineLayer];return c}S(a,c);M(a,[{key:"pick",value:function(a,c){return this.shapeLayer.pick(a,c)}},{key:"onOptionsChanged",value:function(a){this.shapeLayer.setOptions({onClick:function(b){a.onClick&&
a.onClick(b)},selectedIndex:a.selectedIndex,selectedColor:a.selectedColor,height:0,polygonOffset:[2,2],autoSelect:a.autoSelect,color:a.fillColor,opacity:a.fillOpacity,topColor:a.fillColor,useLight:!1});this.lineLayer.setOptions({dashArray:a.dashArray,color:a.lineColor,width:a.lineWidth,lineJoin:a.lineJoin})}},{key:"onDataChanged",value:function(a){this.shapeLayer.setData(a);this.lineLayer.setData(a,{closePath:!0})}},{key:"getDefaultOptions",value:function(){return{enablePicked:!1,selectedIndex:-1,
selectedColor:"#ff0000",autoSelect:!0,dashArray:[0,0],lineColor:"rgba(250, 250, 25, 1)",lineWidth:2,lineJoin:"miter",fillColor:"rgba(25, 25, 250, 1)",fillOpacity:1}}}]);return a}(Hb),ha=ha||{},ri=0,Xa=null,dm=ha.Scene=function(c,a){this.name=void 0!==a.name?a.name:null;this.nodes=Array(a.nodes.length);for(var b=0,d=a.nodes.length;b<d;b++)this.nodes[b]=c.nodes[a.nodes[b]];this.extensions=void 0!==a.extensions?a.extensions:null;this.extras=void 0!==a.extras?a.extras:null;this.boundingBox=null},qb=ha.BoundingBox=
function(c,a,b){c=c||J.fromValues(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);a=a||J.fromValues(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);void 0===b||!0===b?(this.min=J.clone(c),this.max=J.clone(a)):(this.min=c,this.max=a);this.transform=H.create()};qb.prototype.updateBoundingBox=function(c){J.min(this.min,this.min,c.min);J.max(this.max,this.max,c.max)};qb.prototype.calculateTransform=function(){this.transform[0]=this.max[0]-this.min[0];
this.transform[5]=this.max[1]-this.min[1];this.transform[10]=this.max[2]-this.min[2];this.transform[12]=this.min[0];this.transform[13]=this.min[1];this.transform[14]=this.min[2]};qb.getAABBFromOBB=function(){var c=J.create(),a=J.create(),b=J.create(),d=J.create(),f=J.create();return function(g,h){J.set(c,h[0],h[1],h[2]);J.set(a,h[4],h[5],h[6]);J.set(b,h[8],h[9],h[10]);h=J.fromValues(h[12],h[13],h[14]);var k=J.clone(h);J.scale(d,c,g.min[0]);J.scale(f,c,g.max[0]);J.min(c,d,f);J.add(h,h,c);J.max(c,d,
f);J.add(k,k,c);J.scale(d,a,g.min[1]);J.scale(f,a,g.max[1]);J.min(a,d,f);J.add(h,h,a);J.max(a,d,f);J.add(k,k,a);J.scale(d,b,g.min[2]);J.scale(f,b,g.max[2]);J.min(b,d,f);J.add(h,h,b);J.max(b,d,f);J.add(k,k,b);g=new qb(h,k,!1);g.calculateTransform();return g}}();var si=ha.Accessor=function(c,a){this.bufferView=a;this.componentType=c.componentType;this.byteOffset=void 0!==c.byteOffset?c.byteOffset:0;this.byteStride=a.byteStride;this.normalized=void 0!==c.normalized?c.normalized:!1;this.count=c.count;
this.type=c.type;this.size=xe[this.type];this.min=c.min;this.max=c.max;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null};si.prototype.prepareVertexAttrib=function(c,a){a.vertexAttribPointer(c,this.size,this.componentType,this.normalized,this.byteStride,this.byteOffset);a.enableVertexAttribArray(c)};var Af=ha.BufferView=function(c,a){this.byteLength=c.byteLength;this.byteOffset=void 0!==c.byteOffset?c.byteOffset:0;this.byteStride=void 0!==c.byteStride?
c.byteStride:0;this.target=void 0!==c.target?c.target:null;this.data=a.slice(this.byteOffset,this.byteOffset+this.byteLength);this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null;this.buffer=null};Af.prototype.createBuffer=function(c){this.buffer=c.createBuffer()};Af.prototype.bindData=function(c){return this.target?(c.bindBuffer(this.target,this.buffer),c.bufferData(this.target,this.data,c.STATIC_DRAW),c.bindBuffer(this.target,null),!0):!1};var em=ha.Camera=
function(c){this.name=void 0!==c.name?c.name:null;this.type=c.type;this.othographic=void 0===c.othographic?null:c.othographic;this.perspective=void 0===c.perspective?null:{yfov:c.perspective.yfov,znear:c.perspective.znear,zfar:void 0!==c.perspective.zfar?c.perspective.zfar:null,aspectRatio:void 0!==c.perspective.aspectRatio?c.perspective.aspectRatio:null};this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},sc=ha.Node=function(c,a){this.name=void 0!==
c.name?c.name:null;this.nodeID=a;this.camera=void 0!==c.camera?c.camera:null;this.matrix=H.create();if(c.hasOwnProperty("matrix")){for(a=0;16>a;++a)this.matrix[a]=c.matrix[a];this.translation=J.create();H.getTranslation(this.translation,this.matrix);this.rotation=Ad.create();H.getRotation(this.rotation,this.matrix);this.scale=J.create();H.getScaling(this.scale,this.matrix)}else this.getTransformMatrixFromTRS(c.translation,c.rotation,c.scale);this.children=c.children||[];this.mesh=void 0!==c.mesh?
Xa.glTF.meshes[c.mesh]:null;this.skin=void 0!==c.skin?c.skin:null;void 0!==c.extensions&&void 0!==c.extensions.gl_avatar&&!0===Xa.enableGLAvatar&&(this.skin=new fm(Xa.glTF,Xa.skeletonGltf.skins[Xa.skeletonGltf.json.extensions.gl_avatar.skins[c.extensions.gl_avatar.skin.name]],c.extensions.gl_avatar.skin.inverseBindMatrices));this.weights=void 0!==c.weights?c.weights:null;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null;this.aabb=null;this.bvh=new qb};
sc.prototype.traverse=function(c,a){a(this,c);c=0;for(var b=this.children.length;c<b;c++)this.children[c].traverse(this,a)};sc.prototype.traversePostOrder=function(c,a){for(var b=0,d=this.children.length;b<d;b++)this.children[b].traversePostOrder(this,a);a(this,c)};sc.prototype.traverseTwoExecFun=function(c,a,b){a(this,c);for(var d=0,f=this.children.length;d<f;d++)this.children[d].traverseTwoExecFun(this,a,b);b(this,c)};var ti=H.create();sc.prototype.getTransformMatrixFromTRS=function(c,a,b){this.translation=
void 0!==c?J.fromValues(c[0],c[1],c[2]):J.fromValues(0,0,0);this.rotation=void 0!==a?xa.fromValues(a[0],a[1],a[2],a[3]):xa.fromValues(0,0,0,1);this.scale=void 0!==b?J.fromValues(b[0],b[1],b[2]):J.fromValues(1,1,1);this.updateMatrixFromTRS()};sc.prototype.updateMatrixFromTRS=function(){H.fromRotationTranslation(ti,this.rotation,this.translation);H.scale(this.matrix,ti,this.scale)};var hm=ha.Mesh=function(c,a){this.meshID=a;this.name=void 0!==c.name?c.name:null;this.primitives=[];this.boundingBox=null;
a=0;for(var b=c.primitives.length;a<b;++a){var d=c.primitives[a];d=new gm(Xa.glTF,d);this.primitives.push(d);d.boundingBox&&(this.boundingBox||(this.boundingBox=new qb),this.boundingBox.updateBoundingBox(d.boundingBox))}this.boundingBox&&this.boundingBox.calculateTransform();this.weights=void 0!==c.weights?c.weights:null;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},gm=ha.Primitive=function(c,a){this.attributes=a.attributes;this.indices=void 0!==
a.indices?a.indices:null;var b;if(void 0!==a.extensions&&void 0!==a.extensions.gl_avatar&&!0===Xa.enableGLAvatar&&a.extensions.gl_avatar.attributes)for(b in a.extensions.gl_avatar.attributes)this.attributes[b]=a.extensions.gl_avatar.attributes[b];null!==this.indices?(this.indicesComponentType=c.json.accessors[this.indices].componentType,this.indicesLength=c.json.accessors[this.indices].count,this.indicesOffset=c.json.accessors[this.indices].byteOffset||0):(this.drawArraysCount=c.json.accessors[this.attributes.POSITION].count,
this.drawArraysOffset=c.json.accessors[this.attributes.POSITION].byteOffset||0);for(b in this.attributes)this.attributes[b]=c.accessors[this.attributes[b]];this.material=void 0!==a.material?c.materials[a.material]:null;this.mode=void 0!==a.mode?a.mode:4;this.targets=a.targets;this.extensions=void 0!==a.extensions?a.extensions:null;this.extras=void 0!==a.extras?a.extras:null;this.boundingBox=this.shader=this.indexBuffer=this.vertexBuffer=this.vertexArray=null;void 0!==this.attributes.POSITION&&(c=
this.attributes.POSITION,c.max&&"VEC3"===c.type&&(this.boundingBox=new qb(J.fromValues(c.min[0],c.min[1],c.min[2]),J.fromValues(c.max[0],c.max[1],c.max[2]),!1),this.boundingBox.calculateTransform()))},ui=ha.Texture=function(c){this.name=void 0!==c.name?c.name:null;this.sampler=void 0!==c.sampler?Xa.glTF.samplers[c.sampler]:null;this.source=void 0!==c.source?Xa.glTF.images[c.source]:null;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null;this.texture=
null};ui.prototype.createTexture=function(c){this.texture=c.createTexture();c.bindTexture(c.TEXTURE_2D,this.texture);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,this.source);c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,null)};var vi=ha.Sampler=function(c){this.name=void 0!==c.name?c.name:null;this.magFilter=void 0!==c.magFilter?c.magFilter:null;this.minFilter=void 0!==c.minFilter?c.minFilter:null;this.wrapS=void 0!==c.wrapS?c.wrapS:10497;this.wrapT=void 0!==c.wrapT?c.wrapT:
10497;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null;this.sampler=null};vi.prototype.createSampler=function(c){this.sampler=c.createSampler();this.minFilter?c.samplerParameteri(this.sampler,c.TEXTURE_MIN_FILTER,this.minFilter):c.samplerParameteri(this.sampler,c.TEXTURE_MIN_FILTER,c.NEAREST_MIPMAP_LINEAR);this.magFilter?c.samplerParameteri(this.sampler,c.TEXTURE_MAG_FILTER,this.magFilter):c.samplerParameteri(this.sampler,c.TEXTURE_MAG_FILTER,c.LINEAR);
c.samplerParameteri(this.sampler,c.TEXTURE_WRAP_S,this.wrapS);c.samplerParameteri(this.sampler,c.TEXTURE_WRAP_T,this.wrapT)};var Bf=ha.TextureInfo=function(c){this.index=c.index;this.texCoord=void 0!==c.texCoord?c.texCoord:0;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},wi=ha.PbrMetallicRoughness=function(c){this.baseColorFactor=void 0!==c.baseColorFactor?c.baseColorFactor:[1,1,1,1];this.baseColorTexture=void 0!==c.baseColorTexture?new Bf(c.baseColorTexture):
null;this.metallicFactor=void 0!==c.metallicFactor?c.metallicFactor:1;this.roughnessFactor=void 0!==c.roughnessFactor?c.roughnessFactor:1;this.metallicRoughnessTexture=void 0!==c.metallicRoughnessTexture?new Bf(c.metallicRoughnessTexture):null;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},im=ha.NormalTextureInfo=function(c){this.index=c.index;this.texCoord=void 0!==c.texCoord?c.texCoord:0;this.scale=void 0!==c.scale?c.scale:1;this.extensions=
void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},jm=ha.OcclusionTextureInfo=function(c){this.index=c.index;this.texCoord=void 0!==c.texCoord?c.texCoord:0;this.strength=void 0!==c.strength?c.strength:1;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},km=ha.Material=function(c){this.name=void 0!==c.name?c.name:null;this.pbrMetallicRoughness=void 0!==c.pbrMetallicRoughness?new wi(c.pbrMetallicRoughness):new wi({baseColorFactor:[1,
1,1,1],metallicFactor:1,metallicRoughnessTexture:1});this.normalTexture=void 0!==c.normalTexture?new im(c.normalTexture):null;this.occlusionTexture=void 0!==c.occlusionTexture?new jm(c.occlusionTexture):null;this.emissiveTexture=void 0!==c.emissiveTexture?new Bf(c.emissiveTexture):null;this.emissiveFactor=void 0!==c.emissiveFactor?c.emissiveFactor:[0,0,0];this.alphaMode=void 0!==c.alphaMode?c.alphaMode:"OPAQUE";this.alphaCutoff=void 0!==c.alphaCutoff?c.alphaCutoff:.5;this.doubleSided=c.doubleSided||
!1;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},lm=ha.Skin=function(c,a,b){this.name=void 0!==a.name?a.name:null;this.skinID=b;this.joints=Array(a.joints.length);var d;b=0;for(d=this.joints.length;b<d;b++)this.joints[b]=c.nodes[a.joints[b]];this.skeleton=void 0!==a.skeleton?c.nodes[a.skeleton]:null;this.inverseBindMatrices=void 0!==a.inverseBindMatrices?c.accessors[a.inverseBindMatrices]:null;this.extensions=void 0!==a.extensions?a.extensions:
null;this.extras=void 0!==a.extras?a.extras:null;this.uniformBlockID=ri++;if(this.inverseBindMatrices)for(this.inverseBindMatricesData=zd(this.inverseBindMatrices),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(1040),b=0,d=this.inverseBindMatricesData.length;b<d;b+=16)this.inverseBindMatrix.push(H.fromValues(this.inverseBindMatricesData[b],this.inverseBindMatricesData[b+1],this.inverseBindMatricesData[b+2],this.inverseBindMatricesData[b+
3],this.inverseBindMatricesData[b+4],this.inverseBindMatricesData[b+5],this.inverseBindMatricesData[b+6],this.inverseBindMatricesData[b+7],this.inverseBindMatricesData[b+8],this.inverseBindMatricesData[b+9],this.inverseBindMatricesData[b+10],this.inverseBindMatricesData[b+11],this.inverseBindMatricesData[b+12],this.inverseBindMatricesData[b+13],this.inverseBindMatricesData[b+14],this.inverseBindMatricesData[b+15]))},fm=ha.SkinLink=function(c,a,b){this.isLink=!0;c.skins||(c.skins=[]);c.skins.push(this);
this.name=a.name;this.skinID=c.skins.length-1;this.joints=a.joints;this.skeleton=a.skeleton;this.inverseBindMatrices=void 0!==b?c.accessors[b]:null;this.uniformBlockID=ri++;if(this.inverseBindMatrices)for(this.inverseBindMatricesData=zd(this.inverseBindMatrices),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(1040),c=0,a=this.inverseBindMatricesData.length;c<a;c+=16)this.inverseBindMatrix.push(H.fromValues(this.inverseBindMatricesData[c],
this.inverseBindMatricesData[c+1],this.inverseBindMatricesData[c+2],this.inverseBindMatricesData[c+3],this.inverseBindMatricesData[c+4],this.inverseBindMatricesData[c+5],this.inverseBindMatricesData[c+6],this.inverseBindMatricesData[c+7],this.inverseBindMatricesData[c+8],this.inverseBindMatricesData[c+9],this.inverseBindMatricesData[c+10],this.inverseBindMatricesData[c+11],this.inverseBindMatricesData[c+12],this.inverseBindMatricesData[c+13],this.inverseBindMatricesData[c+14],this.inverseBindMatricesData[c+
15]))},mm=ha.Target=function(c){this.nodeID=void 0!==c.node?c.node:null;this.path=c.path;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},nm=ha.Channel=function(c,a){this.sampler=a.samplers[c.sampler];this.target=new mm(c.target);this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},xi=ha.AnimationSampler=function(c,a){this.input=c.accessors[a.input];this.output=c.accessors[a.output];this.inputTypedArray=
zd(this.input);this.outputTypedArray=zd(this.output);this.interpolation=void 0!==a.interpolation?a.interpolation:"LINEAR";this.extensions=void 0!==a.extensions?a.extensions:null;this.extras=void 0!==a.extras?a.extras:null;this.curIdx=0;this.curValue=xa.create();this.endT=this.inputTypedArray[this.inputTypedArray.length-1];this.inputMax=this.endT-this.inputTypedArray[0]},yi=xa.create(),zi=xa.create();xi.prototype.getValue=function(c){c>this.endT&&(c-=this.inputMax*Math.ceil((c-this.endT)/this.inputMax),
this.curIdx=0);for(var a=this.inputTypedArray.length;this.curIdx<=a-2&&c>=this.inputTypedArray[this.curIdx+1];)this.curIdx++;this.curIdx>=a-1&&(c-=this.inputMax,this.curIdx=0);a=xe[this.output.type];var b=4===a?Ad.slerp:xa.lerp,d=this.curIdx,f=d*a,g=f+a;c=Math.max(0,c-this.inputTypedArray[d])/(this.inputTypedArray[d+1]-this.inputTypedArray[d]);for(d=0;d<a;d++)yi[d]=this.outputTypedArray[f+d],zi[d]=this.outputTypedArray[g+d];switch(this.interpolation){case "LINEAR":b(this.curValue,yi,zi,c)}};var om=
ha.Animation=function(c,a){this.name=void 0!==a.name?a.name:null;var b;this.samplers=[];var d=0;for(b=a.samplers.length;d<b;d++)this.samplers[d]=new xi(c,a.samplers[d]);this.channels=[];d=0;for(b=a.channels.length;d<b;d++)this.channels[d]=new nm(a.channels[d],this);this.extensions=void 0!==a.extensions?a.extensions:null;this.extras=void 0!==a.extras?a.extras:null},pm=ha.glTFModel=function(c){this.json=c;this.defaultScene=void 0!==c.scene?c.scene:0;this.version=Number(c.asset.version);c.accessors&&
(this.accessors=Array(c.accessors.length));c.bufferViews&&(this.bufferViews=Array(c.bufferViews.length));c.scenes&&(this.scenes=Array(c.scenes.length));c.nodes&&(this.nodes=Array(c.nodes.length));c.meshes&&(this.meshes=Array(c.meshes.length));c.materials&&(this.materials=Array(c.materials.length));c.textures&&(this.textures=Array(c.textures.length));c.samplers&&(this.samplers=Array(c.samplers.length));c.images&&(this.images=Array(c.images.length));c.skins&&(this.skins=Array(c.skins.length));c.animations&&
(this.animations=Array(c.animations.length));c.cameras&&(this.cameras=Array(c.cameras.length));this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},tc=ha.glTFLoader=function(c){this._init();this.glTF=null;this.enableGLAvatar=!1;this.linkSkeletonGltf=null};tc.prototype._init=function(){this._loadDone=!1;this._bufferLoaded=this._bufferRequested=0;this._buffers=[];this._bufferTasks={};this._finishedPendingTasks=this._pendingTasks=this._imageLoaded=this._imageRequested=
this._shaderLoaded=this._shaderRequested=0;this.onload=null;Xa=this};tc.prototype._checkComplete=function(){this._bufferRequested==this._bufferLoaded&&this._imageRequested==this._imageLoaded&&(this._loadDone=!0);this._loadDone&&this._pendingTasks==this._finishedPendingTasks&&(this._postprocess(),this.onload(this.glTF))};tc.prototype.loadGLTF_GL_Avatar_Skin=function(c,a,b){this.enableGLAvatar=!0;this.skeletonGltf=a;this.loadGLTF(c,b)};tc.prototype.loadGLTF=function(c,a){this._init();this.onload=a||
function(a){};this.baseUri=Vi(c);var b=this;Wi(c,function(a){a=JSON.parse(a);b.glTF=new pm(a);var c,d=function(a){b._buffers[c]=a;b._bufferLoaded++;if(b._bufferTasks[c]){var d;var f=0;for(d=b._bufferTasks[c].length;f<d;++f)b._bufferTasks[c][f](a)}b._checkComplete()};if(a.buffers)for(c in a.buffers){b._bufferRequested++;var h=a.buffers[c].uri;-1===h.indexOf("base64")&&(h=b.baseUri+h);Xi(h,d)}d=function(a,c){b._imageLoaded++;b.glTF.images[c]=a;b._checkComplete()};var k;if(a.images)for(k in a.images)b._imageRequested++,
Yi(b.baseUri+a.images[k].uri,k,d);b._checkComplete()})};tc.prototype._postprocess=function(){function c(a,b){var c=l[a.nodeID];null!==b?H.mul(c,l[b.nodeID],a.matrix):H.copy(c,a.matrix)}function a(a,b){var c=l[a.nodeID];b=null!==b?b.bvh:p.boundingBox;a.mesh&&(f=a.mesh,f.boundingBox&&(a.aabb=qb.getAABBFromOBB(f.boundingBox,c),0===a.children.length&&(J.copy(a.bvh.min,a.aabb.min),J.copy(a.bvh.max,a.aabb.max))));J.min(b.min,b.min,a.bvh.min);J.max(b.max,b.max,a.bvh.max)}Xa=this;var b,d,f;if(this.glTF.cameras){var g=
0;for(b=this.glTF.cameras.length;g<b;g++)this.glTF.cameras[g]=new em(this.glTF.json.cameras[g])}if(this.glTF.bufferViews)for(g=0,b=this.glTF.bufferViews.length;g<b;g++)this.glTF.bufferViews[g]=new Af(this.glTF.json.bufferViews[g],this._buffers[this.glTF.json.bufferViews[g].buffer]);if(this.glTF.accessors)for(g=0,b=this.glTF.accessors.length;g<b;g++)this.glTF.accessors[g]=new si(this.glTF.json.accessors[g],this.glTF.bufferViews[this.glTF.json.accessors[g].bufferView]);if(this.glTF.materials)for(g=
0,b=this.glTF.materials.length;g<b;g++)this.glTF.materials[g]=new km(this.glTF.json.materials[g]);if(this.glTF.samplers)for(g=0,b=this.glTF.samplers.length;g<b;g++)this.glTF.samplers[g]=new vi(this.glTF.json.samplers[g]);if(this.glTF.textures)for(g=0,b=this.glTF.textures.length;g<b;g++)this.glTF.textures[g]=new ui(this.glTF.json.textures[g]);g=0;for(b=this.glTF.meshes.length;g<b;g++)this.glTF.meshes[g]=new hm(this.glTF.json.meshes[g],g);g=0;for(b=this.glTF.nodes.length;g<b;g++)this.glTF.nodes[g]=
new sc(this.glTF.json.nodes[g],g);g=0;for(b=this.glTF.nodes.length;g<b;g++){var h=this.glTF.nodes[g];var k=0;for(d=h.children.length;k<d;k++)h.children[k]=this.glTF.nodes[h.children[k]]}var l=Array(this.glTF.nodes.length);g=0;for(b=l.length;g<b;g++)l[g]=H.create();g=0;for(b=this.glTF.scenes.length;g<b;g++){var p=this.glTF.scenes[g]=new dm(this.glTF,this.glTF.json.scenes[g]);p.boundingBox=new qb;k=0;for(d=p.nodes.length;k<d;k++)h=p.nodes[k],h.traverseTwoExecFun(null,c,a);p.boundingBox.calculateTransform()}k=
0;for(d=this.glTF.nodes.length;k<d;k++)h=this.glTF.nodes[k],null!==h.bvh&&h.bvh.calculateTransform();if(this.glTF.animations)for(g=0,b=this.glTF.animations.length;g<b;g++)this.glTF.animations[g]=new om(this.glTF,this.glTF.json.animations[g]);if(this.glTF.json.skins)for(g=0,b=this.glTF.skins.length;g<b;g++)for(this.glTF.skins[g]=new lm(this.glTF,this.glTF.json.skins[g],g),h=this.glTF.skins[g].joints,k=0,d=h.length;k<d;k++)h[k].jointID=k;g=0;for(b=this.glTF.nodes.length;g<b;g++)h=this.glTF.nodes[g],
null!==h.skin&&"number"==typeof h.skin&&(h.skin=this.glTF.skins[h.skin])};var xe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ai=function(c){function a(b,c){L(this,a);return R(this,(a.__proto__||P(a)).call(this,b,c))}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{scale:1}}},{key:"initialize",value:function(a){var b=this;this.gl=a;var c=this.getOptions();this.gltfObj=Zi({gl:a,options:c});(new tc).loadGLTF(c.url,function(a){b.gltfObj.setupScene(a);b.webglLayer.render()})}},{key:"onChanged",
value:function(a,c){}},{key:"render",value:function(a){var b=a.gl;a=a.matrix;var c=this.getData(),g=this.getOptions(),h=g.scale,k=[h,h,h];"px"===g.unit&&this.map&&(k=this.map.getZoomUnits(),k=[h*k,h*k,h*k]);for(h=0;h<c.length;h++){var l=c[h].geometry.coordinates;g=H.create();var p=H.create();l=this.normizedPoint(l);H.identity(g);H.translate(g,g,[l[0],l[1],l[2]]);H.rotateX(g,g,Math.PI/2);H.rotateY(g,g,(c[h].angle||0)*Math.PI/180);H.scale(g,g,k);H.mul(p,a,g);this.gltfObj.render({gl:b,matrix:p})}}}]);
return a}(ca),fc=fc||{};(function(){function c(a,c,f){f=a.createShader(f);a.shaderSource(f,c);a.compileShader(f);return f}fc.getShaderSource=function(a){return document.getElementById(a).textContent.replace(/^\s+|\s+$/g,"")};fc.createProgram=function(a,d,f){var b=a.createProgram();d=c(a,d,a.VERTEX_SHADER);f=c(a,f,a.FRAGMENT_SHADER);a.attachShader(b,d);a.deleteShader(d);a.attachShader(b,f);a.deleteShader(f);a.linkProgram(b);a.getProgramInfoLog(b);a.getShaderInfoLog(d);a.getShaderInfoLog(f);return b};
var a=fc.loadImage=function(a,c){var b=new Image;b.crossOrigin="Anonymous";b.src=a;b.onload=c;return b};fc.loadImages=function(b,c){function d(){0>=--h&&c(g)}for(var g=[],h=b.length,k=0;k<h;++k)g.push(a(b[k],d))}})();var qm=function(c){function a(b){L(this,a);var c=R(this,(a.__proto__||P(a)).call(this,b));b=c.getOptions();c.gltfLayer=new Ai({url:b.url,scale:b.scale});c.children=[c.gltfLayer];c.autoUpdate=!0;c.index=[];c.newData=[];c.isStarted=!1===b.autoPlay?!1:!0;return c}S(a,c);M(a,[{key:"getDefaultOptions",
value:function(){return{url:"https://mapv-website.bj.bcebos.com/gl/examples/model/car.gltf",scale:1,step:1,defaultAngle:90}}},{key:"onOptionsChanged",value:function(a){this.gltfLayer.setOptions({})}},{key:"onDataChanged",value:function(a){var b=this;this.index=[];this.newData=[];for(var c=0;c<a.length;c++){this.index.push(0);var g=a[c].geometry.coordinates;"LineString"===a[c].geometry.type?this.newData.push(this._addPath(g)):g.forEach(function(a){b.newData.push(b._addPath(a))})}this.updatePoints()}},
{key:"lnglatToMercator",value:function(a,c){c=c*Math.PI/180;c=3189068.5*Math.log((1+Math.sin(c))/(1-Math.sin(c)));return[parseFloat((a*Math.PI/180*6378137).toFixed(2)),parseFloat(c.toFixed(2))]}},{key:"getDeg",value:function(a,c){-180<a[0]&&180>a[0]&&(a=this.lnglatToMercator(a[0],a[1]),c=this.lnglatToMercator(c[0],c[1]));var b=180*Math.atan((c[1]-a[1])/(c[0]-a[0]))/Math.PI;c[0]>a[0]&&(b-=180);return b}},{key:"getPoint",value:function(a,c,f){return[a[0]+(c[0]-a[0])*f,a[1]+(c[1]-a[1])*f,a[2]&&c[2]?
a[2]+(c[2]-a[2])*f:0]}},{key:"updatePoints",value:function(){for(var a=this.getOptions(),c=this.newData,f=[],g=0;g<c.length;g++){for(var h=c[g],k=Math.floor(this.index[g]),l=k+1;h[l]&&h[l][0]===h[k][0]&&h[l][1]===h[k][1];)l++;l>=h.length-1&&(l=--k);l=this.getDeg(h[k],h[l]);f.push({geometry:{type:"Point",coordinates:this.getPoint(h[k],h[k+1],this.index[g]%1)},angle:l-a.defaultAngle})}this.pointData=f;this.gltfLayer.setData(f,{autoRender:!1})}},{key:"getCurrentPoint",value:function(){return this.pointData}},
{key:"getDistance",value:function(a,c){var b=a[1]*Math.PI/180,d=c[1]*Math.PI/180;a=2*Math.asin(Math.sqrt(Math.pow(Math.sin((b-d)/2),2)+Math.cos(b)*Math.cos(d)*Math.pow(Math.sin((a[0]*Math.PI/180-c[0]*Math.PI/180)/2),2)));return a=Math.round(6378137E4*a)/1E4}},{key:"_addPath",value:function(a){for(var b=a.length,c=0,g=[],h=[],k=1;k<b;k++){var l=this.getDistance(a[k-1],a[k]);g.push(l);c+=l}l=[0];for(k=1;k<b;k++){var p=(g[k-1]/c).toFixed(2);l[k]=l[k-1]+parseFloat(p,10);h=h.concat(this._getPath(a[k-1],
a[k],1E3*p))}this._pathPercents=l;return h}},{key:"_getPath",value:function(a,c,f){if(0===f)return[a];for(var b=[],d=0;d<=f;d++)b.push([(c[0]-a[0])/f*d+a[0],(c[1]-a[1])/f*d+a[1],c[2]&&a[2]?(c[2]-a[2])/f*d+a[2]:0]);return b}},{key:"start",value:function(){this.isStarted=!0}},{key:"stop",value:function(){this.isStarted=!1}},{key:"render",value:function(b){pb(a.prototype.__proto__||P(a.prototype),"render",this).call(this,b);b=this.getOptions();if(this.isStarted)for(var c=this.newData,f=0;f<this.index.length;f++)this.index[f]+=
b.step,this.index[f]>c[f].length-2&&(this.index[f]=0);this.updatePoints()}}]);return a}(Hb);ma.prototype.parseColors=function(c){this.arrFeatureStyles=[[2,c[0]||"rgba(79,210,125,1)",2,2,0,[],0,0],[2,c[0]||"rgba(79,210,125,1)",3,2,0,[],0,0],[2,c[0]||"rgba(79,210,125,1)",3,2,0,[],0,0],[2,c[0]||"rgba(79,210,125,1)",5,2,0,[],0,0],[2,c[0]||"rgba(79,210,125,1)",6,2,0,[],0,0],[2,c[2]||"rgba(255,208,69,1)",2,2,0,[],0,0],[2,c[2]||"rgba(255,208,69,1)",3,2,0,[],0,0],[2,c[2]||"rgba(255,208,69,1)",3,2,0,[],0,
0],[2,c[2]||"rgba(255,208,69,1)",5,2,0,[],0,0],[2,c[2]||"rgba(255,208,69,1)",6,2,0,[],0,0],[2,c[1]||"rgba(232,14,14,1)",2,2,0,[],0,0],[2,c[1]||"rgba(232,14,14,1)",3,2,0,[],0,0],[2,c[1]||"rgba(232,14,14,1)",3,2,0,[],0,0],[2,c[1]||"rgba(232,14,14,1)",5,2,0,[],0,0],[2,c[1]||"rgba(232,14,14,1)",6,2,0,[],0,0],[2,c[3]||"rgba(181,0,0,1)",2,2,0,[],0,0],[2,c[3]||"rgba(181,0,0,1)",3,2,0,[],0,0],[2,c[3]||"rgba(181,0,0,1)",3,2,0,[],0,0],[2,c[3]||"rgba(181,0,0,1)",5,2,0,[],0,0],[2,c[3]||"rgba(181,0,0,1)",6,2,
0,[],0,0],[2,"rgba(255,255,255,1)",4,0,0,[],0,0],[2,"rgba(255,255,255,1)",5.5,0,0,[],0,0],[2,"rgba(255,255,255,1)",7,0,0,[],0,0],[2,"rgba(255,255,255,1)",8.5,0,0,[],0,0],[2,"rgba(255,255,255,1)",10,0,0,[],0,0]]};ma.prototype.setColors=function(c){this.parseColors(c)};ma.prototype.initialize=function(c){this._initialize||(this._initialize=!0)};ma.prototype.clearCache=function(c){this.cache={}};ma.prototype.setMap=function(c){c?(this.map=c,this._initialize?this.canvaslayer.show():this.initialize(c)):
this.canvaslayer.hide()};ma.prototype.draw=function(c){c=c||{};c.clearCache&&this.clearCache();this.canvaslayer.draw()};ma.prototype.clear=function(){};ma.prototype.update=function(){var c=this.map,a=this.getDataZoom(),b=Math.pow(2,18-a),d=256*b,f=Ca.convertLL2MC(c.getCenter()),g=Math.ceil(f.lng/d),h=Math.ceil(f.lat/d),k=this.tileSize,l=a-Math.round(c.getZoom());0<l&&(k/=Math.pow(2,l));d=[g,h,(f.lng-g*d)/d*k,(f.lat-h*d)/d*k];g=c.getBounds();f=g.getNorthEast();g=g.getSouthWest();c.getSize();c.getSize();
c=(f.lng-g.lng)/b;b=(f.lat-g.lat)/b;f=d[1]-Math.ceil((b/2-d[3])/k);g=d[0]+Math.ceil((c/2+d[2])/k);h=d[1]+Math.ceil((b/2+d[3])/k);b=[];for(k=d[0]-Math.ceil((c/2-d[2])/k);k<g;k++)for(d=f;d<h;d++)b.push([k,d,a]);this.tilesOrder=b;this._loadCount={};for(k=0;k<b.length;k++)d=b[k][0],c=b[k][1],this._loadCount[d+"_"+c+"_"+b[k][2]]=!1;for(k=0;k<b.length;k++)d=b[k][0],c=b[k][1],this.showTile(d,c,a)};ma.prototype.showTile=function(c,a,b){this._parseDataAndDraw(c,a,b)};ma.prototype.drawCurrentData=function(){this.clear();
for(var c=[],a=0;a<this.tilesOrder.length;a++){var b=this.tilesOrder[a][0],d=this.tilesOrder[a][1],f=this.tilesOrder[a][2],g=this.cache[this.getCacheKey(b,d,f)];if(g)for(b=this._drawFeatures(g,b,d,f),d=0;d<b.length;d++)c.push(b[d])}this.lineLayer.setData(c)};ma.prototype.isAllLoaded=function(){var c=!0,a;for(a in this._loadCount)if(!this._loadCount[a]){c=!1;break}return c};ma.prototype.getCacheKey=function(c,a,b){return c+"_"+a+"_"+b};ma.prototype.getDataZoom=function(){var c=Math.round(this.map.getZoom());
19<c&&(c=19);return c};ma.prototype._parseDataAndDraw=function(c,a,b){var d=this,f=d.map,g=f.getCenter(),h=Math.round(f.getZoom()),k=this.getCacheKey(c,a,b),l="_cbk"+(1E5*Math.random()).toFixed(0),p=this.getTileUrl(c,a,b,"BMapGL."+l);BMapGL[l]=function(n){d._loadCount[c+"_"+a+"_"+b]=!0;var m=f.getCenter(),p=Math.round(f.getZoom());m.equals(g)&&p===h?(m=n.content&&n.content.tf,n.data&&(m=n.data),d.cache[k]=m?{traffic:m,precision:n.precision}:null,d.drawTogether&&d.isAllLoaded()&&d.drawCurrentData()):
p!==h&&d.clear();delete BMapGL[l]};void 0!==d.cache[k]?(d._loadCount[c+"_"+a+"_"+b]=!0,d.drawTogether&&d.isAllLoaded()&&d.drawCurrentData()):this.request(p)};ma.prototype.getTileUrl=function(c,a,b,d){return"https://sp3.baidu.com/7_AZsjOpB1gCo2Kml5_Y_DAcsMJiwa/traffic/?qt=vtraffic&x="+c+"&y="+a+"&z="+b+"&fn="+d+"&t="+(new Date).getTime()};ma.prototype._drawFeatures=function(c,a,b,d){var f=10;d=Math.pow(2,18-d);this.map.getCenter();var g=this.tileSize;a=[a*g*d,(b+1)*g*d];b=[];if(c&&c.traffic){f*=c.precision;
c=c.traffic;g=0;for(var h=c.length;g<h;g++){var k=c[g],l=k[1];k=this.arrFeatureStyles[k[3]];var p=l[0]/f,n=-l[1]/f,m=[];m.push([a[0]+p*d,a[1]+n*d,1]);for(var q=2,r=l.length;q<r;q+=2)p+=l[q]/f,n-=l[q+1]/f,m.push([a[0]+p*d,a[1]+n*d,1]);b.push({color:k[1],geometry:{type:"LineString",coordinates:m}})}}return b};ma.prototype.request=function(c,a){if(a){var b=(1E5*Math.random()).toFixed(0);BMapGL._rd["_cbk"+b]=function(c){a&&a(c);delete BMapGL._rd["_cbk"+b]};c+="&callback=BMapGL._rd._cbk"+b}var d=document.createElement("script");
d.type="text/javascript";d.charset="utf-8";d.src=c;d.addEventListener?d.addEventListener("load",function(a){a=a.target;a.parentNode.removeChild(a)},!1):d.attachEvent&&d.attachEvent("onreadystatechange",function(a){a=window.event.srcElement;!a||"loaded"!==a.readyState&&"complete"!==a.readyState||a.parentNode.removeChild(a)});setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(d);d=null},1)};ma.prototype.getRGBA=function(c){c>>>=0;return"rgba("+(c>>24&255)+","+(c>>16&255)+","+
(c>>8&255)+","+(c&255)/256+")"};ma.prototype.getLineCap=function(c){return["butt","square","round"][c]};ma.prototype.getLineJoin=function(c){return["miter","bevel","round"][c]};var rm=function(c){function a(b){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b));b.autoUpdate=!0;b.getOptions();var c=new qi({color:"rgba(257, 254, 47, 0.9)",minZoom:18,duration:.8,interval:.2,trailLength:.4});b.lineLayer=c;b.children=[c];return b}S(a,c);M(a,[{key:"initialize",value:function(b){pb(a.prototype.__proto__||
P(a.prototype),"initialize",this).call(this,b);b=this.map.map;var c=new ma({});c.lineLayer=this.lineLayer;this.trafficTileManager=c;c.setMap(b);c.update();b.addEventListener("moveend",function(){c.update()});b.addEventListener("zoomend",function(){c.update()});b.addEventListener("ondraw",function(){})}},{key:"onOptionsChanged",value:function(a){}},{key:"onDataChanged",value:function(a){}},{key:"getDefaultOptions",value:function(){return{}}}]);return a}(Hb),sm=function(c){function a(b,c){L(this,a);
b=R(this,(a.__proto__||P(a)).call(this,b,c));b.bufferData=[];return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{size:13,unit:"px",height:0,max:100,min:0}}},{key:"initialize",value:function(a){var b=this;this.gl=a;var c=this.getOptions();this.inverseMatrix=H.create(Float64Array);this.frameBuffer=new va(a);this.webglLayer.map.onResize(function(){b.frameBuffer=new va(a)});this.circle=$i(64);this.circleTexture=bc(a,this.circle,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",
TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"});this.intensity=new za({gradient:c.gradient});this.paletteTexture=bc(a,this.intensity.paletteCtx.canvas,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"});this.offlineProgram=new X(this.gl,{vertexShader:"uniform mat4 u_matrix;uniform mat4 pointToPixelMatrix;uniform mat4 pixelToViewMatrix;uniform mat4 projectionMatrix;uniform int unit;uniform float size;uniform float max;uniform float min;attribute vec3 aPos;attribute vec2 aOffset;attribute float aCount;varying vec2 vOffset;varying float vCount;varying vec3 vPosition;void main(){vOffset=aOffset;vCount=(aCount-min)/(max-min);if(unit==1){vec2 pos=(pointToPixelMatrix*vec4(aPos.xy,0.0,1.0)).xy+aOffset.xy*size/2.0;gl_Position=projectionMatrix*pixelToViewMatrix*vec4(pos,0.0,1.0);}else{vec2 pos=aPos.xy+aOffset.xy*size;gl_Position=u_matrix*vec4(pos,0.0,1.0);}vPosition=vec3(gl_Position.z/gl_Position.w);}",
fragmentShader:"varying vec2 vOffset;varying float vCount;varying vec3 vPosition;uniform sampler2D uCircle;void main(){vec4 circle=texture2D(uCircle,(vOffset+1.0)/2.0);float intensity=circle.a*vCount;if(intensity<=0.0){discard;}gl_FragColor=vec4(vPosition,intensity);}"},this);this.offlineBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.offlineIndexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});this.offlineVertexArray=new la({gl:a,program:this.offlineProgram,
attributes:[{stride:24,name:"aPos",buffer:this.offlineBuffer,size:3,type:"FLOAT",offset:0},{stride:24,name:"aOffset",buffer:this.offlineBuffer,size:2,type:"FLOAT",offset:12},{stride:24,name:"aCount",buffer:this.offlineBuffer,size:1,type:"FLOAT",offset:20}]});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});this.program=new X(this.gl,{vertexShader:"attribute vec2 aPos;varying vec2 vPos;uniform float uHeight;uniform mat4 pixelToViewMatrix;uniform mat4 projectionMatrix;uniform sampler2D u_sampler;uniform mat4 inverseMatrix;void main(){vPos=aPos;if(uHeight<=0.0){gl_Position=vec4(aPos,0.0,1.0);}else{vec4 gray=texture2D(u_sampler,(aPos+1.0)/2.0);vec4 m0=inverseMatrix*vec4(aPos.xy,0.0,1.0);vec4 m1=inverseMatrix*vec4(aPos.xy,1.0,1.0);m0/=m0.w;m1/=m1.w;vec4 pixel=m0+(-m0.z/(m1.z-m0.z))*(m1-m0);pixel.z=uHeight*gray.a;gl_Position=projectionMatrix*pixelToViewMatrix*vec4(pixel.xyz,1.0);}}",
fragmentShader:"uniform sampler2D u_sampler;uniform sampler2D u_samplerPalette;uniform float uHeight;varying vec2 vPos;void main(){vec4 gray=texture2D(u_sampler,(vPos+1.0)/2.0);float grayAlpha=gray.a;if(grayAlpha<=0.0){discard;}vec4 color=texture2D(u_samplerPalette,vec2(grayAlpha,1.0));gl_FragColor=vec4(color.rgb,grayAlpha*color.a);}"},this);this.buffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.vertexArray=new la({gl:a,program:this.program,attributes:[{stride:8,name:"aPos",buffer:this.buffer,
size:2,type:"FLOAT",offset:0}]});c=[];for(var g=[],h=Math.floor(a.canvas.width/4),k=Math.floor(a.canvas.height/4),l=h+1,p=0;p<=k;p++)for(var n=0;n<=h;n++)if(c.push(2*n/h-1,2*p/k-1),n<h&&p<k){var m=l*p+n,q=l*(p+1)+n;g.push(m,m+1,q+1);g.push(m,q+1,q)}this.bufferData=c;this.buffer.updateData(new Float32Array(c));this.indexData=g;this.indexBuffer.updateData(new Uint32Array(g))}},{key:"destroy",value:function(){this.bufferData=[]}},{key:"onOptionsChanged",value:function(a,c){var b=this.gl;b&&a.gradient!==
c.gradient&&(this.intensity=new za({gradient:a.gradient}),this.paletteTexture=bc(b,this.intensity.paletteCtx.canvas,{TEXTURE_MAG_FILTER:"LINEAR",TEXTURE_MIN_FILTER:"LINEAR",TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}))}},{key:"onDataChanged",value:function(a){if(this.gl){var b=[],c=[];this.getOptions();for(var g=0;g<a.length;g++){var h=a[g],k=this.normizedPoint(a[g].geometry.coordinates),l=void 0===h.count?1:h.count;"properties"in h&&"count"in h.properties&&(l=h.properties.count);
b.push(k[0],k[1],k[2]);b.push(-1,-1);b.push(l);b.push(k[0],k[1],k[2]);b.push(-1,1);b.push(l);b.push(k[0],k[1],k[2]);b.push(1,1);b.push(l);b.push(k[0],k[1],k[2]);b.push(1,-1);b.push(l);h=4*g;c.push(h+0,h+2,h+1);c.push(h+0,h+3,h+2)}this.offlineBufferData=b;this.offlineIndexData=c;this.offlineBuffer.updateData(new Float32Array(b));this.offlineIndexBuffer.updateData(new Uint32Array(c))}}},{key:"render",value:function(a){var b=a.gl,c=a.matrix,g=a.pointToPixelMatrix,h=a.pixelToViewMatrix;a=a.projectionMatrix;
if(this.offlineBufferData&&!(0>=this.offlineBufferData.length)){var k=this.getOptions();this.setGLState({blend:!0,blendFunc:[b.ONE,b.ONE],depthTest:!1});b.bindFramebuffer(b.FRAMEBUFFER,this.frameBuffer.framebuffer);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);this.offlineProgram.use(b);this.offlineProgram.setUniforms({u_matrix:c,uCircle:this.circleTexture,pointToPixelMatrix:g,pixelToViewMatrix:h,projectionMatrix:a,unit:"px"===k.unit?1:0,size:k.size,max:k.max,min:k.min});this.offlineVertexArray.bind();
this.offlineIndexBuffer.bind();b.drawElements(b.TRIANGLES,this.offlineIndexData.length,b.UNSIGNED_INT,0);b.bindFramebuffer(b.FRAMEBUFFER,null);this.program.use(b);this.vertexArray.bind();c=this.inverseMatrix;H.identity(c);H.multiply(c,a,h);H.invert(c,c);this.setGLState({blend:!1,depthTest:!0});this.program.setUniforms({u_sampler:this.frameBuffer.framebuffer.texture,u_samplerPalette:this.paletteTexture,uHeight:k.height,pixelToViewMatrix:h,inverseMatrix:c,projectionMatrix:a});this.indexBuffer.bind();
b.drawElements(b.TRIANGLES,this.indexData.length,b.UNSIGNED_INT,0)}}}]);return a}(ca),tm=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));b.selectedColor=[-1,-1,-1];b.textureCache={};return b}S(a,c);M(a,[{key:"getDefaultOptions",value:function(){return{color:"rgba(0, 180, 0, 1.0)",edgeCount:4,unit:"m",height:1E5,type:"normal",size:5E4}}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions(),c={normal:["attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aEdgeIndex;attribute float aPointIndex;attribute float aEdgeCount;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vEdgeIndex=aEdgeIndex;vEdgeCount=aEdgeCount;vPointIndex=aPointIndex;float z=aPos.z*uZoomUnits;float x=aPos.x;float y=aPos.y;vSize=aSize*uZoomUnits;float a=radians(360.0/aEdgeCount);float b=a/2.0;float r=vSize/cos(b);if(aEdgeIndex<0.0){float index=aPointIndex;float angle=0.0;if(mod(index,2.0)==0.0){angle=a*(index/2.0)-b;}else{angle=-a*((index-1.0)/2.0)-b;}y=y+r*sin(angle);x=x+r*cos(angle);}else{float i=aEdgeIndex-1.0;float j=aPointIndex;float angle=a*i+b;y=y+r*sin(angle);x=x+r*cos(angle);}vPosition=vec4(aPos,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;if(aEdgeIndex==1.0&&aPointIndex==1.0){gl_PointSize=20.0;}else{gl_PointSize=10.0;}\n#if defined(PICK)\nif(mapvIsPicked()){vColor=uSelectedColor;}\n#endif\n}",
"varying vec4 vColor;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;varying vec4 vPosition;varying vec4 vFragPosition;uniform mat4 uMatrix;void main(){vec4 color=vColor;if(vEdgeIndex<0.0){color.r+=0.2;color.g+=0.2;color.b+=0.2;}else{float i=ceil(vEdgeIndex);;float d=i/vEdgeCount*0.5;if(i<=vEdgeCount/2.0){d=0.2*(i/vEdgeCount*0.5)-0.1;}else{d=0.2*(vEdgeCount-i)/vEdgeCount*0.5-0.1;}color.r+=d;color.g+=d;color.b+=d;}gl_FragColor=color;}"],light:["attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;attribute float aEdgeIndex;attribute float aPointIndex;attribute float aEdgeCount;varying vec4 vColor;varying vec4 vPosition;varying vec4 vFragPosition;varying float vSize;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;uniform mat4 uMatrix;uniform float uZoomUnits;uniform vec4 uSelectedColor;void main(){vColor=aColor;vEdgeIndex=aEdgeIndex;vEdgeCount=aEdgeCount;vPointIndex=aPointIndex;float z=aPos.z*uZoomUnits;float x=aPos.x;float y=aPos.y;vSize=aSize*uZoomUnits;float a=radians(360.0/aEdgeCount);float b=a/2.0;float i=aEdgeIndex;float j=aPointIndex;float angle=a*(i-1.0)+b;float r=vSize/cos(b);y=y+r*sin(angle);x=x+r*cos(angle);if(j==1.0){z=0.0;}vPosition=vec4(aPos.xyz,1.0);vFragPosition=vec4(x,y,z,1.0);gl_Position=uMatrix*vFragPosition;\n#if defined(PICK)\nif(mapvIsPicked()){vColor=uSelectedColor;}\n#endif\n}",
"varying vec4 vColor;varying float vEdgeIndex;varying float vPointIndex;varying float vEdgeCount;varying vec4 vPosition;varying vec4 vFragPosition;uniform mat4 uMatrix;void main(){vec4 color=vColor;color.a=1.0-vFragPosition.z/vPosition.z;gl_FragColor=color;}"]};c=c[b.type]||c.normal;this.program=new X(this.gl,{vertexShader:c[0],fragmentShader:c[1],defines:b.enablePicked?["PICK"]:[]},this);this.buffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",
usage:"STATIC_DRAW"});b=[{stride:44,name:"aPos",buffer:this.buffer,size:3,type:"FLOAT",offset:0},{stride:44,name:"aSize",buffer:this.buffer,size:1,type:"FLOAT",offset:12},{stride:44,name:"aEdgeIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:16},{stride:44,name:"aPointIndex",buffer:this.buffer,size:1,type:"FLOAT",offset:20},{stride:44,name:"aEdgeCount",buffer:this.buffer,size:1,type:"FLOAT",offset:24},{stride:44,name:"aColor",buffer:this.buffer,size:4,type:"FLOAT",offset:28}];b=b.concat(this.getCommonAttributes());
this.vertexArray=new la({gl:a,program:this.program,attributes:b})}},{key:"onChanged",value:function(a,c){this.gl&&c&&(this.uniforms={},this.data=c,this.options=a,this.processData(),a.enablePicked&&this.parsePickData(c))}},{key:"processData",value:function(){var a=[],c=[];"light"===this.options.type?this.createLightBuffer(this.data,a,c):this.createNormalBuffer(this.data,a,c);this.bufferData=a;this.indexData=c;this.buffer.updateData(new Float32Array(a));this.indexBuffer.updateData(new Uint32Array(c))}},
{key:"createNormalBuffer",value:function(a,c,f){var b=this,d=parseInt(this.options.edgeCount,10)||4;a.forEach(function(a,g){var h=a.color||b.options.color,k=a.size||b.options.size,l=Array.isArray(a.value)?a.value:"number"===typeof a.value?[a.value]:[1],q=b.normizedPoint(a.geometry.coordinates),r=a.height||b.options.height,u=l.reduce(function(a,b){return Number(a)+Number(b)}),v=0,t="blue";l.forEach(function(a,g){t=b.normizedColor("function"===typeof h?h(a,g,l):Array.isArray(h)?h[g]:h);a="function"===
typeof r?r(a,g,l):Array.isArray(r)?r[g]:r/u*a;var m=f[f.length-1],n=c.length/11;0<n&&(1===d%2&&0===g?f.push(m,m,n):f.push(m,n));for(g=1;g<=2*d;g++)0===g%2?c.push.apply(c,[q[0],q[1],v,k,g/2,2,d].concat(Z(t))):c.push.apply(c,[q[0],q[1],v+a,k,(g+1)/2,1,d].concat(Z(t))),f.push(n+g-1),g===2*d&&(c.push.apply(c,[q[0],q[1],v+a,k,g/2+1,1,d].concat(Z(t))),c.push.apply(c,[q[0],q[1],v,k,g/2+1,2,d].concat(Z(t))),f.push(n+g,n+g+1));v+=a});g=f[f.length-1];a=c.length/11;0<a&&f.push(g,a);for(g=1;g<=d;g++)c.push.apply(c,
[q[0],q[1],v,k,-1,g,d].concat(Z(t))),f.push(a+g-1)})}},{key:"createLightBuffer",value:function(a,c,f){var b=this,d=parseInt(this.options.edgeCount,10)||4;a.forEach(function(a,g){g=a.color||b.options.color;g=b.normizedColor("function"===typeof g?g(a.value):"string"===typeof g?g:"blue");var h=a.size||b.options.size,k=b.normizedPoint(a.geometry.coordinates),l=a.height||b.options.height;l="function"===typeof l?l(a.value):l;for(a=1;a<=d;a++){var q=f[f.length-1],r=c.length/11;0<r&&f.push(q,r);for(q=1;q<=
2*d;q++)0===q%2?c.push.apply(c,[k[0],k[1],l,h,q/2,1,d].concat(Z(g))):c.push.apply(c,[k[0],k[1],l,h,(q+1)/2,2,d].concat(Z(g))),f.push(r+q-1),q===2*d&&f.push(r,r+1)}})}},{key:"render",value:function(a){var b=this.program,c=a.gl,g=a.matrix;this.setGLState({cullFace:"normal"===this.options.type});b.use(c);this.vertexArray.bind();this.indexBuffer.bind();var h=this.map.getZoomUnits();Y(this.uniforms,this.getCommonUniforms(a),{uZoomUnits:"px"===this.options.unit?h:1,uMatrix:g});b.setUniforms(this.uniforms);
c.drawElements(c.TRIANGLE_STRIP,this.indexData.length,c.UNSIGNED_INT,0)}}]);return a}(ca),um=function(c){function a(b){L(this,a);var c=R(this,(a.__proto__||P(a)).call(this,b));b=c.getOptions();c.fillPoint=new id({enablePicked:b.enablePicked,autoSelect:b.autoSelect});c.shadowPoint=new id;c.textPoint=new ce;c.children=[c.shadowPoint,c.fillPoint,c.textPoint];return c}S(a,c);M(a,[{key:"pick",value:function(a,c){return this.fillPoint.pick(a,c)}},{key:"onOptionsChanged",value:function(a){this.shadowPoint.setOptions({depthTest:!1,
polygonOffset:[1,1],color:a.shadowColor,size:a.shadowSize,borderWidth:a.shadowBorderWidth,borderColor:a.shadowBorderColor});this.fillPoint.setOptions({onClick:function(b){a.onClick&&a.onClick(b)},selectedIndex:a.selectedIndex,selectedColor:a.selectedColor,depthTest:!1,color:a.fillColor,size:a.fillSize,borderWidth:a.fillBorderWidth,borderColor:a.fillBorderColor});this.textPoint.setOptions({collides:!1,polygonOffset:[-1,-1],color:a.fontColor,fontFamily:a.fontFamily,fontSize:a.fontSize})}},{key:"onDataChanged",
value:function(a){var b=this,c=this.getOptions(),g=JSON.parse(vc(a)).map(function(a){a.properties.size=b.getProperty("shadowSize",c.shadowSize,a);a.properties.color=b.getProperty("shadowColor",c.shadowColor,a);a.properties.borderColor=b.getProperty("shadowBorderColor",c.shadowBorderColor,a);a.properties.borderWidth=b.getProperty("shadowBorderWidth",c.shadowBorderWidth,a);return a}),h=JSON.parse(vc(a)).map(function(a){a.properties.size=b.getProperty("fillSize",c.fillSize,a);a.properties.color=b.getProperty("fillColor",
c.fillColor,a);a.properties.borderColor=b.getProperty("fillBorderColor",c.fillBorderColor,a);a.properties.borderWidth=b.getProperty("fillBorderWidth",c.fillBorderWidth,a);return a});this.shadowPoint.setData(g);this.fillPoint.setData(h);this.textPoint.setData(a)}},{key:"getProperty",value:function(a,c,f){if("[object Function]"===Object.prototype.toString.call(c))return c(f);c=f[a]||c;"properties"in f&&a in f.properties&&(c=f.properties[a]);return c}},{key:"getDefaultOptions",value:function(){return{enablePicked:!1,
selectedIndex:-1,selectedColor:"#ffff00",autoSelect:!0,fillColor:"rgba(255, 50, 10, 1)",fillSize:20,fillBorderColor:"#ffffff",fillBorderWidth:1.2,shadowColor:"rgba(255, 80, 110, 0.7)",shadowSize:40,shadowBorderColor:"rgba(255, 80, 110, 1)",shadowBorderWidth:1.2,fontSize:12,fontFamily:"Microsoft Yahei",fontColor:"#ffffff"}}}]);return a}(Hb),vm=function(c){function a(){L(this,a);return R(this,(a.__proto__||P(a)).apply(this,arguments))}S(a,c);M(a,[{key:"toBBox",value:function(a){var b=ka(a.item.geometry.coordinates,
2);a=b[0];b=b[1];return{minX:a,minY:b,maxX:a,maxY:b}}},{key:"compareMinX",value:function(a,c){return a.item.geometry.coordinates[0]-c.item.geometry.coordinates[0]}},{key:"compareMinY",value:function(a,c){return a.item.geometry.coordinates[1]-c.item.geometry.coordinates[1]}}]);return a}(be),wm=function(c){function a(b,c){L(this,a);b=R(this,(a.__proto__||P(a)).call(this,b,c));c=b.canvas=document.createElement("canvas");b.ctx=c.getContext("2d");b.geoRBush=new vm;return b}S(a,c);M(a,[{key:"getDefaultOptions",
value:function(){return{depthWrite:!1,depthTest:!0,color:"#fff",fontFamily:"Microsoft Yahei",fontSize:14,flat:!1,collides:!0,unit:"px",angle:0,offset:[0,0],padding:[2,2],margin:[0,0],polygonOffset:[0,0],itemDimension:[20,20],renderItem:this.defaultOptionRenderItem}}},{key:"defaultOptionRenderItem",value:function(a,c,f){f.fillStyle="red";f.fillRect(c.x,c.y,c.w,c.h)}},{key:"initialize",value:function(a){this.gl=a;var b=this.getOptions();this.texture=null;this.lastUpdateTime=0;this.program=new X(this.gl,
{vertexShader:"precision highp float;uniform mat4 matrix;uniform bool uFlat;uniform bool uUnitPx;uniform float zoomUnits;uniform float devicePixelRatio;uniform float zIndex;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute float scale;attribute float rotation;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;/***\u70b9A(x,y)\uff0c\u7ed5\u539f\u70b9\u987a\u65f6\u9488\u65cb\u8f6c\u89d2\u5ea6a\u65b0\u5750\u6807\u7684\u8ba1\u7b97\u516c\u5f0f*x1=x*cos(a)+y*sin(a)*y1=y*cos(a)-x*sin(a)*/vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x+=-size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)+size.x*sin(rotation);}else if(corner==2.0){x+=size.x*cos(rotation)+size.y*sin(rotation);y+=size.y*cos(rotation)-size.x*sin(rotation);}else if(corner==3.0){x+=size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)-size.x*sin(rotation);}else{x+=-size.x*cos(rotation)-size.y*sin(rotation);y+=-size.y*cos(rotation)+size.x*sin(rotation);}return vec3(x,y,coord.z);}void main(){vTextCoord=aTextCoord;if(uFlat){vec2 pixelOffset=offset;vec2 halfSize=size/2.0*scale;if(uUnitPx){halfSize*=zoomUnits;pixelOffset*=zoomUnits;}vec3 current=transformCoord(position,halfSize,corner);current.z+=zIndex;gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y-pixelOffset[1],current.z,1.0);}else{vec2 pixelOffset=offset*zoomUnits;vec4 projection=matrix*vec4(position.x+pixelOffset[0],position.y-pixelOffset[1],position.z,1.0);vec3 screen=projection.xyz/projection.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio*scale;vec3 current=transformCoord(screen,halfSize,corner);current.z+=zIndex;gl_Position=vec4(current,1.0);}}",
fragmentShader:"precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));\n#if defined(PICK)\nif(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}\n#endif\n}",defines:b.enablePicked?["PICK"]:[]},this);this.vertexBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.uvBuffer=new O({gl:a,target:"ARRAY_BUFFER",usage:"STATIC_DRAW"});this.indexBuffer=
new O({gl:a,target:"ELEMENT_ARRAY_BUFFER",usage:"STATIC_DRAW"});b=[{name:"position",buffer:this.vertexBuffer,size:3,stride:32,type:"FLOAT",offset:0},{name:"corner",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:12},{name:"size",buffer:this.vertexBuffer,size:2,stride:32,type:"FLOAT",offset:16},{name:"scale",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:24},{name:"rotation",buffer:this.vertexBuffer,size:1,stride:32,type:"FLOAT",offset:28},{name:"aTextCoord",buffer:this.uvBuffer,
size:2,stride:8,type:"FLOAT",offset:0}];b=b.concat(this.getCommonAttributes());this.vertexArray=new la({gl:a,program:this.program,attributes:b})}},{key:"destroy",value:function(){this.options&&this.options.enablePicked&&(this.pickBuffer=null);this.canvas=this.cachedData=this.options=this.data=this.indexBuffer=this.uvBuffer=this.vertexBuffer=this.program=this.vertexArray=null}},{key:"onChanged",value:function(a,c){this.gl&&this.processCache(a,c)}},{key:"processCache",value:function(a,c){this.cachedData=
[];for(a=0;a<c.length;a++){var b=c[a],d=this.normizedPoint(b.geometry.coordinates);d&&this.cachedData.push({point:d,item:b,extra:{},index:a})}this.geoRBush.load(this.cachedData)}},{key:"render",value:function(a){if(this.cachedData&&this.cachedData.length&&this.map){var b=a.gl,c=a.matrix,g=this.getOptions(),h=this.program;h.use(b);this.throttleUpdate(a);this.setGLState({blend:!0,blendEquation:b.FUNC_ADD,blendFunc:[b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA],polygonOffset:g.polygonOffset,depthTest:g.depthTest,
depthMask:g.depthWrite});var k=this.map.getZoomUnits();h.setUniforms(Y(this.getCommonUniforms(a),{matrix:c,devicePixelRatio:window.devicePixelRatio,textureImage:this.texture,uFlat:g.flat,offset:g.offset,zoomUnits:k,zIndex:g.zIndex,uUnitPx:"px"===g.unit}));0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),b.drawElements(b.TRIANGLES,this.index.length,b.UNSIGNED_INT,0))}}},{key:"throttleUpdate",value:function(a){var b=this;clearTimeout(this.throttleTimer);300<(new Date).getTime()-
this.lastUpdateTime?(this.updateText(a),this.lastUpdateTime=(new Date).getTime()):this.throttleTimer=setTimeout(function(){b.updateText(a);b.lastUpdateTime=(new Date).getTime()},200)}},{key:"updateText",value:function(a){var b=a.gl,c=a.matrix,g=this.getOptions(),h=g.padding,k=g.margin,l=g.collides;a=g.enablePicked;var p=g.itemDimension,n=g.beforeRenderAll,m=g.beforeComputeDimension;g=g.renderItem;var q=this.map.getBounds(),r=b.canvas.width/window.devicePixelRatio,u=b.canvas.height/window.devicePixelRatio,
v=this.canvas;b=this.ctx;b.save();b.scale(window.devicePixelRatio,window.devicePixelRatio);m&&m(b);q=this.geoRBush.search({minX:q.sw.lng,minY:q.sw.lat,maxX:q.ne.lng,maxY:q.ne.lat});var t=new be;m=[];for(var x=0;x<q.length;x++){var w=q[x],y=w.point,z=w.item,B=w.extra;w=w.index;var A=ka(y,3);A=xa.clone([A[0],A[1],A[2],1]);xa.transformMat4(A,A,c);xa.scale(A,A,1/A[3]);var C=(A[0]+1)/2*r,G=(-A[1]+1)/2*u;var E=Array.isArray(p)?p:p(z,b,B);A=E[0]+2*h[0];E=E[1]+2*h[1];var H=A+k[0],I=E+k[1];C-=H/2;G-=I/2;H=
C+H;I=G+I;if(!(0>H||0>I||C>r||G>u)){if(l){I={minX:C,maxX:H,minY:G,maxY:I};if(t.collides(I))continue;t.insert(I)}m.push({w:A,h:E,point:y,item:z,extra:B,dataIndex:w})}}b.restore();h=dc(m);c=h.w;h=h.h;0>=c&&(c=1);0>=h&&(h=1);v.width=c*window.devicePixelRatio;v.height=h*window.devicePixelRatio;b.save();b.scale(window.devicePixelRatio,window.devicePixelRatio);n&&n(b);n=[];v=[];k=[];l=[];p=0;for(r=m.length;p<r;++p){u=m[p];g(u.item,u,b,u.extra);x=ka(u.point,3);q=x[0];t=x[1];x=x[2];for(y=0;4>y;y++)n.push(q,
t,x),n.push(y),n.push(u.w,u.h),n.push(1,0);q=u.x/c;t=(u.x+u.w)/c;x=(u.y+u.h)/h;y=u.y/h;v.push(q,x,q,y,t,y,t,x);q=4*p;k.push(q,q+2,q+1,q,q+3,q+2);a&&(u=this.indexToRgb(u.dataIndex),l.push(u[0]/255,u[1]/255,u[2]/255),l.push(u[0]/255,u[1]/255,u[2]/255),l.push(u[0]/255,u[1]/255,u[2]/255),l.push(u[0]/255,u[1]/255,u[2]/255))}b.restore();this.loadTexture();this.index=k;this.vertexBuffer.updateData(new Float32Array(n));this.uvBuffer.updateData(new Float32Array(v));this.indexBuffer.updateData(new Uint32Array(k));
a&&this.pickBuffer.updateData(new Float32Array(l))}},{key:"loadTexture",value:function(){var a=this;this.canvas?Ea(this.gl,this.canvas,function(b){a.texture=b},{TEXTURE_WRAP_S:"CLAMP_TO_EDGE",TEXTURE_WRAP_T:"CLAMP_TO_EDGE"}):this.texture=null}}]);return a}(ca),xm=function(){function c(a){L(this,c);this.layers=[];this.options=a;this.webglLayer=a.webglLayer}M(c,[{key:"addLayer",value:function(a){for(var b=!1,c=0;c<this.layers.length;c++)if(this.layers[c]===a){b=!0;break}b||(a.map=this.webglLayer.map,
"threeLayer"===a.layerType?(a.setWebglLayer(this.webglLayer),b=a.getThreeLayer(),this.addLayer(b),a.initialize&&a.initialize(b)):(a.setWebglLayer(this.webglLayer),a.commonInitialize&&a.commonInitialize(this.webglLayer.gl),a.initialize&&a.initialize(this.webglLayer.gl),a.onOptionsChanged(a.getOptions(),{}),a.onDataChanged(a.getData()),a.onChanged(a.getOptions(),a.getData())),this.layers.push(a));this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation());
this.webglLayer.render()}},{key:"removeLayer",value:function(a){for(var b=0;b<this.layers.length;b++)this.layers[b]===a&&this.layers.splice(b,1);this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation());this.webglLayer.render()}},{key:"showLayer",value:function(a){for(var b=0;b<this.layers.length;b++)this.layers[b]===a&&a.show();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation());
this.webglLayer.render()}},{key:"hideLayer",value:function(a){for(var b=0;b<this.layers.length;b++)this.layers[b]===a&&a.hide();this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation());this.webglLayer.render()}},{key:"removeAllLayers",value:function(){this.layers=[];this.webglLayer.stopAnimation();this.webglLayer.render()}},{key:"destroyAllLayers",value:function(){for(var a=0;a<this.layers.length;a++){var b=this.layers[a];b.destroy&&b.destroy()}}},
{key:"getAllLayers",value:function(){return this.layers}},{key:"getAllThreeLayers",value:function(){for(var a=[],b=0;b<this.layers.length;b++){var c=this.layers[b];"ThreeLayer"===c.layerType&&a.push(c)}return a}},{key:"isRequestAnimation",value:function(){for(var a=!1,b=0;b<this.layers.length;b++)if(this.layers[b].isRequestAnimation()){a=!0;break}return a}},{key:"beforeRender",value:function(a){a.gl&&this.webglLayer.stateManager.setDefaultState()}},{key:"afterRender",value:function(a){if(a=a.gl)a.bindBuffer(a.ARRAY_BUFFER,
null),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null),a.useProgram(null)}},{key:"renderGLLayers",value:function(a){this.webglLayer.stateManager.save();for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(!0===c._visible&&"threeLayer"!==c.layerType&&"ThreeLayer"!==c.layerType){var f=c.map.getZoom(),g=c.getOptions().zoomThreshold;g&&(f<g[0]||f>=g[1])||(this.beforeRender(a),c.render(a),this.afterRender(a))}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayer",value:function(a){this.webglLayer.stateManager.save();
this.webglLayer.stateManager.setState({blendFunc:[a.gl.SRC_ALPHA,a.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:a.gl.LESS,cullFace:!1});for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(!0===c._visible&&"ThreeLayer"===c.layerType){var f=c.map.getZoom(),g=c.getOptions().zoomThreshold;g&&(f<g[0]||f>=g[1])||c.render(a)}}this.webglLayer.stateManager.restore()}},{key:"renderThreeLayers",value:function(a){this.webglLayer.stateManager.save();this.webglLayer.stateManager.setState({blendFunc:[a.gl.SRC_ALPHA,
a.gl.ONE],depthMask:!1,depthTest:!0,depthFunc:a.gl.LESS,cullFace:!1});for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(!0===c._visible&&"threeLayer"===c.layerType){var f=c.map.getZoom(),g=c.getOptions().zoomThreshold;g&&(f<g[0]||f>=g[1])||c.render(a)}}this.webglLayer.stateManager.restore()}},{key:"onClick",value:function(a){for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(!0===c._visible&&"threeLayer"!==c.layerType&&"ThreeLayer"!==c.layerType){var f=c.map.getZoom(),g=c.getOptions().zoomThreshold;
g&&(f<=g[0]||f>=g[1])||!c.options.enablePicked||!c.options.onClick||!c.pick||(f=c.pick(a.x,a.y),c.options.onClick(f,a),c.options.autoSelect&&this.webglLayer.render())}}}},{key:"onDblClick",value:function(a){for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(!0===c._visible&&"threeLayer"!==c.layerType&&"ThreeLayer"!==c.layerType){var f=c.map.getZoom(),g=c.getOptions().zoomThreshold;g&&(f<=g[0]||f>=g[1])||!c.options.enablePicked||!c.options.onDblClick||!c.pick||(f=c.pick(a.x,a.y),c.options.onDblClick(f,
a),c.options.autoSelect&&this.webglLayer.render())}}}},{key:"onRightClick",value:function(a){for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(!0===c._visible&&"threeLayer"!==c.layerType&&"ThreeLayer"!==c.layerType){var f=c.map.getZoom(),g=c.getOptions().zoomThreshold;g&&(f<=g[0]||f>=g[1])||!c.options.enablePicked||!c.options.onRightClick||!c.pick||(f=c.pick(a.x,a.y),c.options.onRightClick(f,a),c.options.autoSelect&&this.webglLayer.render())}}}},{key:"onMousemove",value:function(a){for(var b=
!1,c=0;c<this.layers.length;c++){var f=this.layers[c];if(!0===f._visible&&"threeLayer"!==f.layerType&&"ThreeLayer"!==f.layerType){var g=f.map.getZoom(),h=f.getOptions().zoomThreshold;if((!h||!(g<=h[0]||g>=h[1]))&&f.options.enablePicked&&f.pick){g=f.pick(a.x,a.y);this.webglLayer.map.map.platform.style.cursor=-1===g.dataIndex?"default":"pointer";if(f.options.onMousemove)f.options.onMousemove(g,a);f.options.autoSelect&&(b=!0)}}}b&&(this.webglLayer.isAnimation||this.webglLayer.render())}},{key:"destroy",
value:function(){this.destroyAllLayers();this.removeAllLayers()}}]);return c}(),ym=function(){function c(a){var b=this;L(this,c);this.options={autoUpdate:!0};this._visible=!0;Y(this.options,a);var d=a.pointOffset;this.webglLayer=a.webglLayer||new ni(a.map,this.options);this.layerManager=new xm({autoUpdate:this.options.autoUpdate,webglLayer:this.webglLayer});this.effectManager=new Gh(this.webglLayer.gl);this.webglRender={render:function(){}};this.options.effects&&this.effectManager.setEffects([this.webglRender].concat(this.options.effects));
this.webglLayer.onRender(function(a){b._render(a)});this.webglLayer.onClick=function(a){b._visible&&b.layerManager.onClick(a)};this.webglLayer.onDblClick=function(a){b._visible&&b.layerManager.onDblClick(a)};this.webglLayer.onRightClick=function(a){b._visible&&b.layerManager.onRightClick(a)};this.webglLayer.onMousemove=function(a){b._visible&&b.layerManager.onMousemove(a)};d||"cesium"===this.webglLayer.options.mapType||(d=this.webglLayer.map.getCenter(),this.webglLayer.options.pointOffset=[d.lng,
d.lat]);this.webglLayer.map.onResize(function(){b.effectManager.onResize()});if(this.postProcessing=a.postProcessing)this.postProcessing.setWebglLayer(this.webglLayer),a=this.postProcessing.getThreeLayer(),this.addLayer(a),this.postProcessing.initialize(a),a.postProcessing=this.postProcessing}M(c,[{key:"renderCanvas",value:function(a){var b=this;this.postProcessing?this.postProcessing.addRender(function(){b.layerManager.renderGLLayers(a)}):this.layerManager.renderGLLayers(a);this.layerManager.renderThreeLayers(a);
this.layerManager.renderThreeLayer(a)}},{key:"render",value:function(){this.webglLayer&&this.webglLayer.render()}},{key:"_render",value:function(a){var b=this;if(this._visible){var c=this.options.effects;c&&0<c.length?(this.webglRender.render=function(){b.renderCanvas(a)},this.effectManager.render()):(this.webglLayer.saveFramebuffer(),this.renderCanvas(a),this.webglLayer.restoreFramebuffer())}}},{key:"onRender",value:function(a){this.webglLayer.onRender(a)}},{key:"destroy",value:function(){this.stopAnimation();
this.layerManager.destroy();this.effectManager.destroy();this.webglLayer.destroy()}},{key:"isRequestAnimation",value:function(){return this.layerManager.isRequestAnimation()}},{key:"startAnimation",value:function(){this.webglLayer.startAnimation()}},{key:"stopAnimation",value:function(){this.webglLayer.stopAnimation()}},{key:"show",value:function(){!0!==this._visible&&(this._visible=!0,this.webglLayer.render(),this.isRequestAnimation()&&this.startAnimation())}},{key:"hide",value:function(){!1!==this._visible&&
(this._visible=!1,this.stopAnimation(),this.webglLayer.clear())}},{key:"showLayer",value:function(a){this.layerManager.showLayer(a)}},{key:"hideLayer",value:function(a){this.layerManager.hideLayer(a)}},{key:"add",value:function(a){this.addLayer(a)}},{key:"remove",value:function(a){this.removeLayer(a)}},{key:"addLayer",value:function(a){this.layerManager.addLayer(a)}},{key:"removeLayer",value:function(a){this.layerManager.removeLayer(a)}},{key:"removeAllLayers",value:function(){this.layerManager.removeAllLayers()}},
{key:"getAllLayers",value:function(){return this.layerManager.getAllLayers()}},{key:"getAllThreeLayers",value:function(){return this.layerManager.getAllThreeLayers()}}]);return c}();window._hmt=window._hmt||[];(function(){var c=document.createElement("script");c.src="https://hm.baidu.com/hm.js?e8002ef3d9e0d8274b5b74cc4a027d08";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a)})();C.View=ym;C.CanvasLayer=fa;C.CircleLayer=function a(){var b=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{};L(this,a);return Zk.includes(b.type)?new Yk(b):new Xk(b)};C.GridLayer=Qh;C.HeatGridLayer=gl;C.ShapeLayer=Vd;C.SimpleLineLayer=Rh;C.LineLayer3D=kl;C.LineLayer=Th;C.WallSpriteLayer=nl;C.LinePointLayer=$b;C.WallLayer=Il;C.WallTripLayer=Kl;C.HeatLineLayer=Ll;C.HoneycombLayer=Ml;C.WebglLayer=ni;C.PointLayer=id;C.GroundRippleLayer=Sl;C.RippleLayer=Tl;C.SparkLayer=Ul;C.ClusterLayer=Vl;C.HeatPointLayer=Wl;C.ShapeLineLayer=Xl;C.PointTripLayer=Yl;C.LineTripLayer=Zl;C.IconCollidesLayer=
$l;C.LineFlowLayer=qi;C.TileLayer=am;C.IconLayer=oi;C.BoardLayer=bm;C.PolygonLayer=cm;C.CarLineLayer=qm;C.Layer=ca;C.TextLayer=ce;C.TrafficLayer=rm;C.GltfLayer=Ai;C.HeatmapLayer=sm;C.BarLayer=tm;C.MarkerListLayer=um;C.PointCanvasCustomLayer=wm;C.FXAA=Rk;C.SMAA=Sk;C.BlurEffect=Tk;C.BloomEffect=Uk;C.BrightEffect=Vk;C.DepthEffect=Wk;C.EffectManager=Gh;C.getContext=Jf;C.createTexture=bc;C.loadTextureImage=Ea;C.FrameBufferObject=va;C.Program=X;C.StateManager=Fh;C.Buffer=O;C.VertexArray=la;C.CommonLayer=
ef;C.MercatorProjection=Ca;C.Canvas=ke;C.Intensity=za;C.BezierCurve=hb;C.GeodesicCurve=sb;C.OdCurve=kk;C.utilCity={getProvinceNameByCityName:function(a){for(var b=0;b<Ub.length;b++)for(var d=Ub[b].n,f=Ub[b].cities,g=0;g<f.length;g++)if(f[g].n==a)return d;return null},getCenterByCityName:function(a){a=a.replace("\u5e02","");for(var b=0;b<Te.length;b++)if(Te[b].n==a)return ld(Te[b].g);for(b=0;b<Ue.length;b++)if(Ue[b].n==a)return ld(Ue[b].g);for(b=0;b<Ub.length;b++){if(Ub[b].n==a)return ld(Ub[b].g);
for(var d=Ub[b].cities,f=0;f<d.length;f++)if(d[f].n==a)return ld(d[f].g)}return null}};C.isMobile=Xg;C.Encryptor={encode:function(a){a=Eh.deflateRaw(a);for(var b=[],d=0;d<a.length;d++)b.push(a[d]^23);return new Uint8Array(b)},decode:function(a){a=new Uint8Array(a);for(var b=[],d=0;d<a.length;d++)b.push(a[d]^23);a=new Uint8Array(b);try{var f=window.flate.deflate_decode_raw(a);return(new TextDecoder("utf-8")).decode(f)}catch(g){return console.warn("inflate by pako!"),Eh.inflateRaw(a,{to:"string"})}},
download:function(a,b){var d=new Blob([a],{type:"application/octet-binary"});a=document.createElement("a");d=window.URL.createObjectURL(d);a.href=d;a.download=b||"mapvgl_download";a.click()}};C.toRadian=wa;C.toAngle=ge;C.ceilPowerOfTwo=gb;C.floorPowerOfTwo=he;C.approximatelyEqual=ie;C.__moduleExports=Sa;C.vec4=xa;C.vec3=J;C.vec2=V;C.quat2=al;C.quat=Ad;C.mat4=H;C.mat3=bl;C.mat2d=cl;C.mat2=dl;C.glMatrix=el;Object.defineProperty(C,"__esModule",{value:!0})});